<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【游戏开发探究】Unity Addressables资源管理方式用起来太爽了，资源打包、加载、热更变得如此轻松（Addressable Asset System | 简称AA） - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="【游戏开发探究】Unity Addressables资源管理方式用起来太爽了，资源打包、加载、热更变得如此轻松（Addressable Asset System | 简称AA）" />
<meta property="og:description" content="文章目录 一、前言二、为什么推荐使用Addressables三、Addressables基础操作教程1、下载Addressables插件2、创建Addressables Settings3、给Group添加资源4、创建新的Group5、设置Build Path与Load Path6、修改RemoteBuildPath和RemoteLoadPath7、打Addressable资源包8、打Android APK9、加载Addressable资源9.1、方式一：通过Addressable Name来加载资源9.2、方式二：通过AssetReference来加载资源 10、Addressable资源三个加载模式10.1、Use Asset Database (fastest)10.2、Simulate Groups (advanced)10.3、Use Exising Build(requires built groups) 11、加载远程Addressable资源11.1、启用Hosting Services11.2、加载远程包的柯南图片11.3、Addressables是如何知道去哪里加载资源的11.4、打个APK包瞧瞧 12、如何把Group里的资源打成多个bundle文件13、使用Labels对Group内的资源进行二级分组13.1、新建Label13.2、给资源设置Label13.3、修改Bundle Mode为Pack Together By Label13.3、一个资源标记多个Label 14、批量加载同一个Label的所有资源（AssetLabelReference）15、打资源热更包15.1、开启Build Remote Catalog15.2、打包Addressable资源包15.3、加载小兰的图片15.4、打成APK15.5、替换小兰的图片15.6、打热更包，Update a Previous Build15.7、上传热更包15.8、热更测试 16、提前检测更新并下载（预下载）17、Addressable资源释放18、打包工具集成Addressable打包流程 四、答疑补充（Q&amp;A）1、Addressables加载场景进度监听 五、完毕 一、前言 嗨，大家好，我是新发。
之前就有看过Unity的Addressable Asset System，简称AA，但那时候这个功能刚出来，出于稳定性考虑，所以暂时没有去使用它。现在，它已经迭代到1.16.19 Release版本了（中国版是1.19.16），经过了时间考验，可以拿出来讲讲啦，网上其实已经有不少讲Addressables系统的文章，不过很多不是最新版的教程，今天我就来写一下最新版的Addressables系统的使用教程吧~
二、为什么推荐使用Addressables 我在之前的好几篇文章中都介绍过Unity加载资源的几种方式，我还画过一个图，详细可以看我之前写的这篇文章：《Unity游戏开发——新发教你做游戏（三）：3种资源加载方式》
可以看出来，资源的加载方式要根据应用场景进行区分，要注意资源存放的文件夹，要注意不同平台下的差异，如果使用AssetBundle形式，加载的时候要小心AB包之间的依赖关系，我之前也写了一篇文章讲如何去加载AB的依赖资源，《Unity 打包与加载AssetBundle（加载对应的依赖）》
如果要做资源热更新，也要自己去写工具实现增量资源包的打包，然后自己实现热更检测、资源下载、MD5比对，解压等等逻辑，我之前还专门写了一篇文章讲了热更新的流程，《【游戏开发高阶】从零到一教你Unity使用ToLua实现热更新（含Demo工程 | LuaFramework | 增量 | HotUpdate）》
相信你看完我的这些文章，就会吐槽，哇，好麻烦啊，对于新手来说，可能就是劝退，现在呢，不用怕了，Addressables系统统统搞定，用起来实在是太香了，本博主强烈推荐！
三、Addressables基础操作教程 1、下载Addressables插件 点击菜单Window / Package Manager，打开插件包管理界面，
搜索addressables，可以看到有两个插件包，带.CN结尾的是中国增强版，
这里要补充说一下，Addressables的打包方式其实也是AssetBundle格式，只是在此基础上做了一层封装，方便进行管理（比如打包、加载、依赖等）。而我们知道，没有加密的AssetBundle是可以使用AssetStudio等工具轻易进行资源逆向的，
注：AssetStudio资源逆向工具开源地址：https://github.com/Perfare/AssetStudio
Addressables.CN版本会对AssetBundle做加密处理，
为了方便下文演示资源逆向，我这里就先下载不带.CN结尾的版本，
注：实际项目中，建议大家下载Addressables.CN版本。
安装成功后，可以看到多出了一个Window / Asset Management / Addressables菜单，" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/a99fd32d115f4ee7ab6649e936ec56a3/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-05-28T13:40:27+08:00" />
<meta property="article:modified_time" content="2022-05-28T13:40:27+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【游戏开发探究】Unity Addressables资源管理方式用起来太爽了，资源打包、加载、热更变得如此轻松（Addressable Asset System | 简称AA）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-tomorrow-night-eighties">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><ul><li><ul><li><a href="#_2" rel="nofollow">一、前言</a></li><li><a href="#Addressables_5" rel="nofollow">二、为什么推荐使用Addressables</a></li><li><a href="#Addressables_13" rel="nofollow">三、Addressables基础操作教程</a></li><li><ul><li><a href="#1Addressables_14" rel="nofollow">1、下载Addressables插件</a></li><li><a href="#2Addressables_Settings_29" rel="nofollow">2、创建Addressables Settings</a></li><li><a href="#3Group_39" rel="nofollow">3、给Group添加资源</a></li><li><a href="#4Group_53" rel="nofollow">4、创建新的Group</a></li><li><a href="#5Build_PathLoad_Path_72" rel="nofollow">5、设置Build Path与Load Path</a></li><li><a href="#6RemoteBuildPathRemoteLoadPath_82" rel="nofollow">6、修改RemoteBuildPath和RemoteLoadPath</a></li><li><a href="#7Addressable_91" rel="nofollow">7、打Addressable资源包</a></li><li><a href="#8Android_APK_113" rel="nofollow">8、打Android APK</a></li><li><a href="#9Addressable_127" rel="nofollow">9、加载Addressable资源</a></li><li><ul><li><a href="#91Addressable_Name_130" rel="nofollow">9.1、方式一：通过Addressable Name来加载资源</a></li><li><a href="#92AssetReference_208" rel="nofollow">9.2、方式二：通过AssetReference来加载资源</a></li></ul> 
     </li><li><a href="#10Addressable_248" rel="nofollow">10、Addressable资源三个加载模式</a></li><li><ul><li><a href="#101Use_Asset_Database_fastest_255" rel="nofollow">10.1、Use Asset Database (fastest)</a></li><li><a href="#102Simulate_Groups_advanced_257" rel="nofollow">10.2、Simulate Groups (advanced)</a></li><li><a href="#103Use_Exising_Buildrequires_built_groups_269" rel="nofollow">10.3、Use Exising Build(requires built groups)</a></li></ul> 
     </li><li><a href="#11Addressable_296" rel="nofollow">11、加载远程Addressable资源</a></li><li><ul><li><a href="#111Hosting_Services_298" rel="nofollow">11.1、启用Hosting Services</a></li><li><a href="#112_308" rel="nofollow">11.2、加载远程包的柯南图片</a></li><li><a href="#113Addressables_339" rel="nofollow">11.3、Addressables是如何知道去哪里加载资源的</a></li><li><a href="#114APK_364" rel="nofollow">11.4、打个APK包瞧瞧</a></li></ul> 
     </li><li><a href="#12Groupbundle_374" rel="nofollow">12、如何把Group里的资源打成多个bundle文件</a></li><li><a href="#13LabelsGroup_389" rel="nofollow">13、使用Labels对Group内的资源进行二级分组</a></li><li><ul><li><a href="#131Label_392" rel="nofollow">13.1、新建Label</a></li><li><a href="#132Label_399" rel="nofollow">13.2、给资源设置Label</a></li><li><a href="#133Bundle_ModePack_Together_By_Label_406" rel="nofollow">13.3、修改Bundle Mode为Pack Together By Label</a></li><li><a href="#133Label_411" rel="nofollow">13.3、一个资源标记多个Label</a></li></ul> 
     </li><li><a href="#14LabelAssetLabelReference_416" rel="nofollow">14、批量加载同一个Label的所有资源（AssetLabelReference）</a></li><li><a href="#15_442" rel="nofollow">15、打资源热更包</a></li><li><ul><li><a href="#151Build_Remote_Catalog_443" rel="nofollow">15.1、开启Build Remote Catalog</a></li><li><a href="#152Addressable_446" rel="nofollow">15.2、打包Addressable资源包</a></li><li><a href="#153_452" rel="nofollow">15.3、加载小兰的图片</a></li><li><a href="#154APK_477" rel="nofollow">15.4、打成APK</a></li><li><a href="#155_480" rel="nofollow">15.5、替换小兰的图片</a></li><li><a href="#156Update_a_Previous_Build_485" rel="nofollow">15.6、打热更包，Update a Previous Build</a></li><li><a href="#157_494" rel="nofollow">15.7、上传热更包</a></li><li><a href="#158_497" rel="nofollow">15.8、热更测试</a></li></ul> 
     </li><li><a href="#16_500" rel="nofollow">16、提前检测更新并下载（预下载）</a></li><li><a href="#17Addressable_633" rel="nofollow">17、Addressable资源释放</a></li><li><a href="#18Addressable_770" rel="nofollow">18、打包工具集成Addressable打包流程</a></li></ul> 
    </li><li><a href="#QA_869" rel="nofollow">四、答疑补充（Q&amp;A）</a></li><li><ul><li><a href="#1Addressables_871" rel="nofollow">1、Addressables加载场景进度监听</a></li></ul> 
    </li><li><a href="#_910" rel="nofollow">五、完毕</a></li></ul> 
  </li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h4><a id="_2"></a>一、前言</h4> 
<p>嗨，大家好，我是新发。<br> 之前就有看过<code>Unity</code>的<code>Addressable Asset System</code>，简称<code>AA</code>，但那时候这个功能刚出来，出于稳定性考虑，所以暂时没有去使用它。现在，它已经迭代到<code>1.16.19 Release</code>版本了（中国版是<code>1.19.16</code>），经过了时间考验，可以拿出来讲讲啦，网上其实已经有不少讲<code>Addressables</code>系统的文章，不过很多不是最新版的教程，今天我就来写一下最新版的<code>Addressables</code>系统的使用教程吧~</p> 
<h4><a id="Addressables_5"></a>二、为什么推荐使用Addressables</h4> 
<p>我在之前的好几篇文章中都介绍过<code>Unity</code>加载资源的几种方式，我还画过一个图，详细可以看我之前写的这篇文章：<a href="https://blog.csdn.net/linxinfa/article/details/108894280">《Unity游戏开发——新发教你做游戏（三）：3种资源加载方式》</a><br> <img src="https://images2.imgbox.com/52/32/H3dSPBiw_o.png" alt="在这里插入图片描述"><br> 可以看出来，资源的加载方式要根据应用场景进行区分，要注意资源存放的文件夹，要注意不同平台下的差异，如果使用<code>AssetBundle</code>形式，加载的时候要小心<code>AB</code>包之间的依赖关系，我之前也写了一篇文章讲如何去加载<code>AB</code>的依赖资源，<a href="https://blog.csdn.net/linxinfa/article/details/100143530">《Unity 打包与加载AssetBundle（加载对应的依赖）》</a><br> 如果要做资源热更新，也要自己去写工具实现增量资源包的打包，然后自己实现热更检测、资源下载、<code>MD5</code>比对，解压等等逻辑，我之前还专门写了一篇文章讲了热更新的流程，<a href="https://blog.csdn.net/linxinfa/article/details/119493890">《【游戏开发高阶】从零到一教你Unity使用ToLua实现热更新（含Demo工程 | LuaFramework | 增量 | HotUpdate）》</a><br> <img src="https://images2.imgbox.com/51/bf/EvMYWBjT_o.png" alt="在这里插入图片描述"><br> 相信你看完我的这些文章，就会吐槽，哇，好麻烦啊，对于新手来说，可能就是劝退，现在呢，不用怕了，<code>Addressables</code>系统统统搞定，用起来实在是太香了，本博主强烈推荐！</p> 
<h4><a id="Addressables_13"></a>三、Addressables基础操作教程</h4> 
<h5><a id="1Addressables_14"></a>1、下载Addressables插件</h5> 
<p>点击菜单<code>Window / Package Manager</code>，打开插件包管理界面，<br> <img src="https://images2.imgbox.com/85/f4/9zQbdp6k_o.png" alt="在这里插入图片描述"><br> 搜索<code>addressables</code>，可以看到有两个插件包，带<code>.CN</code>结尾的是中国增强版，<br> <img src="https://images2.imgbox.com/41/9a/MFu7xZKH_o.png" alt="在这里插入图片描述"><br> 这里要补充说一下，<code>Addressables</code>的打包方式其实也是<code>AssetBundle</code>格式，只是在此基础上做了一层封装，方便进行管理（比如打包、加载、依赖等）。而我们知道，没有加密的<code>AssetBundle</code>是可以使用<code>AssetStudio</code>等工具轻易进行资源逆向的，</p> 
<blockquote> 
 <p>注：<code>AssetStudio</code>资源逆向工具开源地址：<a href="https://github.com/Perfare/AssetStudio">https://github.com/Perfare/AssetStudio</a></p> 
</blockquote> 
<p><code>Addressables.CN</code>版本会对<code>AssetBundle</code>做加密处理，<br> <img src="https://images2.imgbox.com/19/47/eficrfhH_o.png" alt="在这里插入图片描述"><br> 为了方便下文演示<code>资源逆向</code>，我这里就先下载<code>不带.CN</code>结尾的版本，<br> <img src="https://images2.imgbox.com/1c/21/KTJPGgxk_o.png" alt="在这里插入图片描述"></p> 
<blockquote> 
 <p>注：实际项目中，建议大家下载<code>Addressables.CN</code>版本。</p> 
</blockquote> 
<p>安装成功后，可以看到多出了一个<code>Window / Asset Management / Addressables</code>菜单，<img src="https://images2.imgbox.com/b8/2a/VmJNLG6h_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="2Addressables_Settings_29"></a>2、创建Addressables Settings</h5> 
<p>点击<code>Groups</code>菜单，<br> <img src="https://images2.imgbox.com/29/9d/2m4lf58R_o.png" alt="在这里插入图片描述"><br> 点击<code>Create Addressables Settings</code>按钮，<br> <img src="https://images2.imgbox.com/b1/7b/S0CDDBqF_o.png" alt="在这里插入图片描述"><br> 此时工程目录中会生成一个<code>AddressableAssetsData</code>文件夹，里面有很多设置文件，<br> <img src="https://images2.imgbox.com/70/a2/7tT2SYiP_o.png" alt="在这里插入图片描述"><br> 我们看回<code>Addressables Groups</code>窗口，可以看到它默认创建了一个组：<code>Default Local Group （Default）</code>，<br> <img src="https://images2.imgbox.com/35/cd/0EX1EcBi_o.png" alt="在这里插入图片描述"><br> <code>Addressables </code>默认是按<code>Group</code>为颗粒进行<code>AssetBundle</code>打包的，比如我把资源<code>A、B、C</code>都放在这个<code>Default Local Group</code>组里，那么它们会被打在同一个<code>AssetBundle</code>中（我们也可以修改成按单独的资源文件为颗粒进行打包，下文我会讲如何设置），下面我演示一下如何给<code>Group</code>添加资源。</p> 
<h5><a id="3Group_39"></a>3、给Group添加资源</h5> 
<p>我这里先随便制作两个预设，<br> <img src="https://images2.imgbox.com/81/6e/zXnh6nle_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/a5/f2/goAVZ4Eo_o.png" alt="在这里插入图片描述"><br> 放在<code>Prefabs</code>文件夹中，<br> <img src="https://images2.imgbox.com/64/3c/J5CRuTcZ_o.png" alt="在这里插入图片描述"><br> 文件名字可以任意起，注意不要跟<code>Unity</code>默认的文件系统文件夹名字相同，比如<code>Resources</code>、<code>StreamingAssets</code>等，除非你真的是想使用这些特定目录的功能，</p> 
<p>接着我们把预设文件直接拖到对应的<code>Group</code>中即可，如下，<br> <img src="https://images2.imgbox.com/3f/55/Nb12lDyT_o.gif" alt="请添加图片描述"></p> 
<blockquote> 
 <p>注：我演示的是预设资源，你也可以是其他任意的资源，比如声音、图集、动画、材质等等）</p> 
</blockquote> 
<p>选中资源文件，在<code>Inspector</code>窗口中勾选<code>Addressable</code>，它也会自动添加到默认的<code>Group</code>中，如下<br> <img src="https://images2.imgbox.com/67/c6/fxPQ3ko2_o.gif" alt="请添加图片描述"></p> 
<h5><a id="4Group_53"></a>4、创建新的Group</h5> 
<p>上面的默认<code>Group</code>一般是作为<code>包内资源</code>，现在我们创建一个新的<code>Group</code>作为<code>包外资源</code>的组（通过远程加载资源）。<br> 如下，在<code>Addressables Groups</code>窗口中，点击左上角的<code>Create</code>按钮，点击<code>Group / Packed Assets</code>菜单，<br> <img src="https://images2.imgbox.com/d9/ea/xOFkjYHo_o.png" alt="在这里插入图片描述"><br> 此时会创建一个新的<code>Group</code>，如下，<br> <img src="https://images2.imgbox.com/16/95/0Ezv9KLk_o.png" alt="在这里插入图片描述"><br> 我们右键它，可以对它重命名，<br> <img src="https://images2.imgbox.com/c9/84/99PwAzUi_o.png" alt="在这里插入图片描述"><br> 这里我就将其重命名为<code>RemoteGroup</code>吧，<br> <img src="https://images2.imgbox.com/31/17/FxAUNQ2m_o.png" alt="在这里插入图片描述"><br> 其实每个<code>Group</code>都是一个配置文件，可以在<code>AddressableAssetsData / AssetGroups</code>目录中找到对应的文件，如下<br> <img src="https://images2.imgbox.com/e7/c2/UxPjsgar_o.png" alt="在这里插入图片描述"><br> 如果你用文本编辑器打开它，就会看到它里面是<code>YAML</code>格式的配置，比如打开<code>Default Local Group</code>，可以看到它里面记录了包含的资源文件，<br> <img src="https://images2.imgbox.com/8a/19/8CesrR4P_o.png" alt="在这里插入图片描述"><br> 继续我们的操作，下面我们给这个<code>RemoteGroup</code>添加资源，我找了一张柯南的图片，<br> <img src="https://images2.imgbox.com/6e/88/syG9Ukij_o.png" alt="在这里插入图片描述"><br> 把柯南图片拖到<code>RemoteGroup</code>中，如下，<br> <img src="https://images2.imgbox.com/c8/5f/flYnYtPG_o.png" alt="在这里插入图片描述"><br> 现在<code>RemoteGroup</code>如何打成一个包体外的资源包呢？又如何去加载这些<code>Group</code>资源包呢？请继续往下看~</p> 
<h5><a id="5Build_PathLoad_Path_72"></a>5、设置Build Path与Load Path</h5> 
<p>我们选中<code>RemoteGroup</code>，在<code>Inspector</code>窗口中，将<code>Build Path</code>改为<code>RemoteBuildPath</code>，将<code>Load Path</code>改为<code>RemoteLoadPath</code>，如下，<br> <img src="https://images2.imgbox.com/a0/2e/gy3E4o6x_o.png" alt="在这里插入图片描述"><br> 这样子，<code>RemoteGroup</code>打出来的资源就不会在包体内了，它会被打到工程目录的<code>ServerData/Android</code>目录中，<br> <img src="https://images2.imgbox.com/53/82/Cc8tPIRd_o.png" alt="在这里插入图片描述"><br> 而加载的时候，会去远程<code>http://localhost/Android</code>这个地址加载（这里是<code>localhost</code>，我们可以改成别的<code>IP</code>或域名地址）<br> <img src="https://images2.imgbox.com/d9/f0/7088wz6X_o.png" alt="在这里插入图片描述"><br> 画个图<br> <img src="https://images2.imgbox.com/58/9e/d0S9Nuba_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="6RemoteBuildPathRemoteLoadPath_82"></a>6、修改RemoteBuildPath和RemoteLoadPath</h5> 
<p>如果你想修改<code>RemoteBuildPath</code>和<code>RemoteLoadPath</code>，可以在<code>Addressables Groups</code>窗口中点击<code>Manage Profiles</code>菜单，<br> <img src="https://images2.imgbox.com/f1/e7/cRNr9D5P_o.png" alt="在这里插入图片描述"><br> 也可以点<code>Window / Asset Management /Addressables / Profiles</code>菜单，<br> <img src="https://images2.imgbox.com/1f/91/DQle5Mq7_o.png" alt="在这里插入图片描述"><br> 此时会打开<code>Addressables Profiles</code>窗口，我们可以修改修改<code>RemoteBuildPath</code>和<code>RemoteLoadPath</code>，<br> <img src="https://images2.imgbox.com/e9/2c/vSbFG4DC_o.png" alt="在这里插入图片描述"><br> 这里我先不修改，下文搭建<code>Web</code>服务器后再来改<code>RemoteLoadPath</code>。</p> 
<h5><a id="7Addressable_91"></a>7、打Addressable资源包</h5> 
<p>在<code>Addressables Groups</code>窗口中，点击<code>Build / New Build / Default Build Script</code>，就会开始打<code>Addressable</code>资源包了，等它打包完毕即可，<br> <img src="https://images2.imgbox.com/aa/49/kmcL2eXW_o.png" alt="在这里插入图片描述"><br> 上文中我们建了两个<code>Group</code>，其中<code>Default Local Group</code>作为包体内的资源包，<code>RemoteGroup</code>作为包体外的资源包，<br> <img src="https://images2.imgbox.com/d1/ff/7P1htWrp_o.png" alt="在这里插入图片描述"><br> 现在我们去看看它们分别<code>Build</code>到哪里去了吧~<br> 首先看下<code>Default Local Group</code>，可以看到它的<code>Build Path</code>是在<code>Library/com.unity.addressables/aa/Android/Android</code>中，<br> <img src="https://images2.imgbox.com/7d/0a/Y7bauyv0_o.png" alt="在这里插入图片描述"><br> 我们进如到这个目录中，可以看到对应的<code>.bundle</code>文件，<br> <img src="https://images2.imgbox.com/7d/1a/Kj5VgQio_o.png" alt="在这里插入图片描述"><br> 其实它就是一个<code>AssetBundle</code>格式的文件，我们可以使用<code>AssetStudio</code>对它进行逆向，可以看到逆向后，里面正是我们上文中添加的两个预设文件，<br> <img src="https://images2.imgbox.com/7d/25/oUetG7gh_o.png" alt="在这里插入图片描述"><br> 接着我们看下<code>Remote Group</code>打出来的资源包，它是在<code>ServerData/Android</code>目录中，<br> <img src="https://images2.imgbox.com/50/68/4PA9pXKm_o.png" alt="在这里插入图片描述"><br> 我进入工程目录的<code>ServerData/Android</code>目录中，可以看到<code>RemoteGroup</code>的资源包，<br> <img src="https://images2.imgbox.com/b8/43/imFKcEOd_o.png" alt="在这里插入图片描述">画个图<br> <img src="https://images2.imgbox.com/fa/a1/ZOE2AIFo_o.png" alt="在这里插入图片描述"></p> 
<p>同样使用<code>AssetStudio</code>对它进行逆向，可以看到我们的柯南就在里面~<br> <img src="https://images2.imgbox.com/25/8d/Yu0BCMJc_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="8Android_APK_113"></a>8、打Android APK</h5> 
<p>现在，我们打个<code>Android</code>的<code>APK</code>包看看，<br> <img src="https://images2.imgbox.com/b4/ea/wO2MDzMW_o.png" alt="在这里插入图片描述"><br> 正常打出<code>APK</code>，<br> <img src="https://images2.imgbox.com/20/4e/h1ngJuGs_o.png" alt="在这里插入图片描述"><br> 我们把<code>.apk</code>改为<code>.zip</code>，然后使用<code>7z</code>等解压工具解压它，<br> <img src="https://images2.imgbox.com/9f/5e/cmfJJ82b_o.png" alt="在这里插入图片描述"><br> 进入文件夹里面<code>asset/aa/Android</code>目录，可以看到我们的<code>Default Local Group</code>资源包就在里面，<br> <img src="https://images2.imgbox.com/5d/bc/SKQzA4lM_o.png" alt="在这里插入图片描述"><br> 没错，其实<code>Unity</code>就是把整个<code>Library/com.unity.addressables/aa/Android</code>目录塞到包内的<code>assets/aa</code>目录中，<br> <img src="https://images2.imgbox.com/a8/99/oQ8GhxDl_o.png" alt="在这里插入图片描述"><br> 我们的<code>RemoteGroup</code>因为是远程资源包，它被留在了工程目录的<code>ServerData/Android</code>中，没有进入包体内，<br> <img src="https://images2.imgbox.com/50/2d/Om2DlX35_o.png" alt="在这里插入图片描述"><br> 好了，现在<code>Addressable</code>包也打了，<code>APK</code>包也打了，还没讲如何加载资源，接下来就来讲讲如何加载<code>Addressable</code>资源吧~</p> 
<h5><a id="9Addressable_127"></a>9、加载Addressable资源</h5> 
<p>我们创建一个<code>C#</code>脚本，我这里就创建一个<code>Main.cs</code>脚本吧，<br> <img src="https://images2.imgbox.com/97/f8/qgESSfPf_o.png" alt="在这里插入图片描述"></p> 
<h6><a id="91Addressable_Name_130"></a>9.1、方式一：通过Addressable Name来加载资源</h6> 
<p>我们加载资源的时候，并不需要知道目标资源到底是在哪个<code>Group</code>中，也不需要知道这个<code>Group</code>到底是本地资源包还是远程资源包，统一通过资源的<code>Addressable Name</code>来加载，资源的<code>Addressable Name</code>在哪里看呢？<br> 比如<code>Cube</code>预设，在<code>Inspector</code>窗口中，可以看到它的<code>Addressable Name</code>为<code>Assets/Prefabs/Cube.prefab</code>，这个<code>Addressable Name</code>默认是资源被加入<code>Group</code>时的相对路径，<br> <img src="https://images2.imgbox.com/e2/fd/DWvbrMBz_o.png" alt="在这里插入图片描述"><br> 我们可以修改<code>Addressable Name</code>，比如我改成<code>HelloCube</code>也是可以的，它仅仅是作为一个索引的字符串，当我们把<code>Cube</code>预设移动到其他的目录中，这个<code>Addressable</code>地址并不会变，<br> <img src="https://images2.imgbox.com/d5/71/0lxcTZ6x_o.png" alt="在这里插入图片描述"><br> 这里我们还是保持为<code>Assets/Prefabs/Cube.prefab</code>吧，<br> <img src="https://images2.imgbox.com/67/71/BmPtDxds_o.png" alt="在这里插入图片描述"><br> 开始写代码，首先引入命名空间</p> 
<pre><code class="prism language-csharp"><span class="token keyword">using</span> <span class="token namespace">UnityEngine<span class="token punctuation">.</span>AddressableAssets</span><span class="token punctuation">;</span>
</code></pre> 
<p>然后使用<code>Addressables.LoadAssetAsync</code>方法加载资源，监听<code>Completed </code>回调，在回调中拿到资源然后进行操作，示例：</p> 
<pre><code class="prism language-csharp"><span class="token keyword">using</span> <span class="token namespace">UnityEngine</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">UnityEngine<span class="token punctuation">.</span>AddressableAssets</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">MonoBehaviour</span></span>
<span class="token punctuation">{<!-- --></span>
    <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        Addressables<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">LoadAssetAsync</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>GameObject<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token string">"Assets/Prefabs/Cube.prefab"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>Completed <span class="token operator">+=</span> <span class="token punctuation">(</span>handle<span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token comment">// 预设物体</span>
            <span class="token class-name">GameObject</span> prefabObj <span class="token operator">=</span> handle<span class="token punctuation">.</span>Result<span class="token punctuation">;</span>
            <span class="token comment">// 实例化</span>
            <span class="token class-name">GameObject</span> cubeObj <span class="token operator">=</span> <span class="token function">Instantiate</span><span class="token punctuation">(</span>prefabObj<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><code>Addressables</code>还提供了<code>InstantiateAsync</code>接口，方便直接一步到位实例化，示例：</p> 
<pre><code class="prism language-csharp">Addressables<span class="token punctuation">.</span><span class="token function">InstantiateAsync</span><span class="token punctuation">(</span><span class="token string">"Assets/Prefabs/Cube.prefab"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>Completed <span class="token operator">+=</span> <span class="token punctuation">(</span>handle<span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 已实例化的物体</span>
    <span class="token class-name">GameObject</span> cubeObj <span class="token operator">=</span> handle<span class="token punctuation">.</span>Result<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> 
<p>有些人可能不喜欢使用回调的方式，喜欢使用<code>async</code>、<code>await</code>的方式，示例：</p> 
<pre><code class="prism language-csharp"><span class="token keyword">using</span> <span class="token namespace">UnityEngine</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">UnityEngine<span class="token punctuation">.</span>AddressableAssets</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Threading<span class="token punctuation">.</span>Tasks</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">MonoBehaviour</span></span>
<span class="token punctuation">{<!-- --></span>
    <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token function">InstantiateCube</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
	
	<span class="token keyword">private</span> <span class="token keyword">async</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">InstantiateCube</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token comment">// 虽然这里使用了Task，但并没有使用多线程</span>
		<span class="token class-name">GameObject</span> prefabObj <span class="token operator">=</span> <span class="token keyword">await</span> Addressables<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">LoadAssetAsync</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>GameObject<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token string">"Assets/Prefabs/Cube.prefab"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>Task<span class="token punctuation">;</span>
		<span class="token comment">// 实例化</span>
		<span class="token class-name">GameObject</span> cubeObj <span class="token operator">=</span> <span class="token function">Instantiate</span><span class="token punctuation">(</span>prefabObj<span class="token punctuation">)</span><span class="token punctuation">;</span>
		
		<span class="token comment">// 也可直接使用InstantiateAsync方法</span>
		<span class="token comment">// GameObject cubeObj = await Addressables.InstantiateAsync("Assets/Prefabs/Cube.prefab").Task;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>我们把<code>Main.cs</code>脚本挂到<code>Main Camera</code>相机上，<br> <img src="https://images2.imgbox.com/a5/31/n3n7tMGO_o.png" alt="在这里插入图片描述"><br> 运行<code>Unity</code>，可以看到，正常加载了<code>Cube</code>并实例化了，<br> <img src="https://images2.imgbox.com/8c/dc/DQmdpAi9_o.png" alt="在这里插入图片描述"><br> 我们顺便测试一下把<code>Cube</code>的<code>Addressable Name</code>改为<code>HelloCube</code>，<br> <img src="https://images2.imgbox.com/7f/1d/yTKQQhki_o.png" alt="在这里插入图片描述"><br> 加载的代码也改下，<br> <img src="https://images2.imgbox.com/88/70/fELoIlbu_o.png" alt="在这里插入图片描述"><br> 运行测试，可以看到，依然可以正常加载<code>Cube</code>，<br> <img src="https://images2.imgbox.com/e2/b6/o46L6L0h_o.png" alt="在这里插入图片描述"><br> 这个时候，应该有同学会疑惑了，我改了<code>Addressable Name</code>，但我都没有重新<code>Build</code>资源包，怎么可以正常加载到资源呢？其实<code>Addressables</code>系统为了方便我们在<code>Editor</code>环境下方便测试，默认都是直接从<code>Asset Database</code>加载的，我们可以在<code>Addressables Groups</code>窗口的<code>Play Mode Script</code>中进行切换，建议编辑器环境下使用<code>Use Asset Database (fastest)</code>即可，下面两个选项下文我会讲具体使用，这里先维持原样~<br> <img src="https://images2.imgbox.com/0a/f0/AS4okSH2_o.png" alt="在这里插入图片描述"></p> 
<h6><a id="92AssetReference_208"></a>9.2、方式二：通过AssetReference来加载资源</h6> 
<p>我们知道，脚本中如果声明了一个<code>public</code>变量，默认会进行序列化，可以在<code>Inspector</code>窗口中对它进行设置，我们声明一个<code>public</code>的<code>AssetReference </code>成员，如下，</p> 
<pre><code class="prism language-csharp"><span class="token comment">// Asset弱引用</span>
<span class="token keyword">public</span> <span class="token class-name">AssetReference</span> spherePrefabRef<span class="token punctuation">;</span>
</code></pre> 
<p>我们把<code>Sphere</code>预设拖给这个<code>spherePrefabRef</code>成员，<br> <img src="https://images2.imgbox.com/6d/70/BEUwKfsj_o.png" alt="在这里插入图片描述"><br> 如果我们声明的不是<code>AssetReference </code>类型，而是<code>GameObject</code>类型，那么场景就直接依赖了<code>Sphere</code>预设，这个<code>Sphere</code>预设会被打到场景中，但我们这里用的是<code>AssetReference </code>，场景并不会真的依赖<code>Sphere</code>预设，它是一个弱引用。<br> 好了我们继续，我们使用<code>AssetReference </code>的<code>LoadAssetAsync</code>方法进行异步加载，监听<code>Completed </code>回调，如下</p> 
<pre><code class="prism language-csharp"><span class="token keyword">using</span> <span class="token namespace">UnityEngine</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">UnityEngine<span class="token punctuation">.</span>AddressableAssets</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">MonoBehaviour</span></span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token class-name">AssetReference</span> spherePrefabRef<span class="token punctuation">;</span>

    <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        spherePrefabRef<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">LoadAssetAsync</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>GameObject<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>Completed <span class="token operator">+=</span> <span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token comment">// 预设</span>
            <span class="token class-name">GameObject</span> spherePrefab <span class="token operator">=</span> obj<span class="token punctuation">.</span>Result<span class="token punctuation">;</span>
            <span class="token comment">// 实例化</span>
            <span class="token class-name">GameObject</span> sphereObj <span class="token operator">=</span> <span class="token function">Instantiate</span><span class="token punctuation">(</span>spherePrefab<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>同样，<code>AssetReference </code>也提供了<code>InstantiateAsync</code>方法，方便一步到位进行实例化，例，</p> 
<pre><code class="prism language-csharp">spherePrefabRef<span class="token punctuation">.</span><span class="token function">InstantiateAsync</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>Completed <span class="token operator">+=</span> <span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 已实例化的物体</span>
    <span class="token class-name">GameObject</span> sphereObj <span class="token operator">=</span> obj<span class="token punctuation">.</span>Result<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> 
<p>我们运行<code>Unity</code>，测试效果如下，可以看到球体预设正常被加载并实例化了，<br> <img src="https://images2.imgbox.com/ff/5d/x2RrZuNN_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="10Addressable_248"></a>10、Addressable资源三个加载模式</h5> 
<p><code>Addressables</code>资源加载模式有三个，如下，默认情况下是<code>Use Asset Database (fastest)</code>，<br> <img src="https://images2.imgbox.com/79/dc/y042p6aw_o.png" alt="在这里插入图片描述"></p> 
<blockquote> 
 <p>Use Asset Database (fastest) 直接加载文件而不打包，快速但Profiler获取的信息较少<br> Simulate Groups (advanced) 在不打包的情况下模拟AssetBundle的操作<br> Use Exising Build(requires built groups) 实际上是从AssetBundle打包和加载</p> 
</blockquote> 
<h6><a id="101Use_Asset_Database_fastest_255"></a>10.1、Use Asset Database (fastest)</h6> 
<p>在这个模式下，<code>Addressables</code>系统会直接从<code>AssetDatabase</code>加载资源，我们 <mark>不需要</mark> <code>Build</code>打<code>Addressable</code>资源包，这个加载速度最快，建议在项目开发阶段使用这个模式，加载速度快。</p> 
<h6><a id="102Simulate_Groups_advanced_257"></a>10.2、Simulate Groups (advanced)</h6> 
<p>这个模式下，也是 <mark>不需要</mark> <code>Build</code>打<code>Addressable</code>资源包的，那它与<code>Use Asset Database (fastest)</code>有什么区别呢？<br> 让我先来操作一波，首先，我们选中<code>AddressableAssetSettings</code>，然后勾选<code>Send Profiler Events</code>，勾选之后，我们可以在<code>Addressable</code>的分析面板中查看到一些调试信息，<br> <img src="https://images2.imgbox.com/7b/8e/cmfKBRbu_o.png" alt="在这里插入图片描述"><br> 我们点击菜单<code>Window / Asset Management / Addressables / Event Viewer</code>，打开分析器，<br> <img src="https://images2.imgbox.com/aa/50/F3oV5ZYt_o.png" alt="在这里插入图片描述"><br> 我们运行<code>Unity</code>，在分析器中可以看到我们实例化出来的预设所依赖的资源，还可以看到引用计数等信息，虽然我们没有打出<code>AssetBundle</code>包，但却模拟了类似从<code>AssetBundle</code>包中加载资源的效果，这样可以方便我们快速分析加载策略，<br> <img src="https://images2.imgbox.com/ed/f3/6omXvtHM_o.png" alt="在这里插入图片描述"><br> 我们对比一下，如果我切换为<code>Use Asset Database (fastest)</code>模式，看，资源加载、依赖、引用等相关信息都没有了，<br> <img src="https://images2.imgbox.com/0f/d2/zqni5ZYX_o.png" alt="在这里插入图片描述"><br> 结论就是<code>Simulate Groups (advanced)</code>会进行<code>AssetBundle</code>加载的模拟，并统计分析数据，方便我们进行快速分析，它并不是真的去加载<code>AssetBundle</code>，所以我们不需要执行<code>Build</code>操作。</p> 
<h6><a id="103Use_Exising_Buildrequires_built_groups_269"></a>10.3、Use Exising Build(requires built groups)</h6> 
<p>这个模式下，需要先执行<code>Build</code>打出<code>Addressable</code>资源包，它会根据<code>Load Path</code>去加载真正的<code>AssetBundle</code>文件并读取资源。如果不先<code>Build</code>，运行时会报错，</p> 
<pre><code class="prism language-string">Player content must be built before entering play mode with packed data.  
This can be done from the Addressables window in the Build-&gt;Build Player Content menu command.
UnityEngine.GUIUtility:ProcessEvent (int,intptr,bool&amp;)
</code></pre> 
<p>如下<br> <img src="https://images2.imgbox.com/f3/35/USwn8FBA_o.png" alt="在这里插入图片描述"><br> 如果执行了<code>Build</code>打出了<code>Addressable</code>资源包，但是把<code>.bundle</code>包手动删掉，运行<code>Unity</code>也会报错，</p> 
<pre><code class="prism language-string">Exception encountered in operation
Resource&lt;IAssetBundleResource&gt;(xxxxxxxxxxxxx.bundle), status=Failed, result= : Invalid path in AssetBundleProvider:
...
</code></pre> 
<p>如下：<br> <img src="https://images2.imgbox.com/96/c9/VQYYE7Mf_o.png" alt="在这里插入图片描述"><br> 我们执行一下<code>Build / New Build / Default Build Script</code>，打出<code>Addressable</code>资源包，<br> <img src="https://images2.imgbox.com/a2/1c/vsLSvIKy_o.png" alt="在这里插入图片描述"><br> 运行<code>Unity</code>，可以正常从<code>Addressable</code>的<code>.bundle</code>资源包中加载资源，如下<br> <img src="https://images2.imgbox.com/08/51/YgBizusn_o.png" alt="在这里插入图片描述"><br> 在这个模式下，我们也是可以在<code>Event Viewer</code>窗口中对资源加载进行分析的，<br> <img src="https://images2.imgbox.com/15/8d/tfr1oJAZ_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="11Addressable_296"></a>11、加载远程Addressable资源</h5> 
<p>我们上面的<code>Remote Group</code>是打成包外资源的，我们想要在<code>Editor</code>环境下测试远程加载，这个时候就需要先搭建一个<code>Web</code>服务器了，支持通过<code>http</code>请求来获取资源。<code>Addressable</code>系统已经帮我们做了一个<code>Hosting Services</code>工具，方便我们快速启动一个<code>Web</code>服务器。</p> 
<h6><a id="111Hosting_Services_298"></a>11.1、启用Hosting Services</h6> 
<p>点击菜单<code>Window / Asset Management / Addressables / Hosting</code>，<br> <img src="https://images2.imgbox.com/d1/34/iFTwYJjT_o.png" alt="在这里插入图片描述"><br> 接着点击<code>Create / Local Hosting</code>，创建一个本地<code>Web</code>服务器，<br> <img src="https://images2.imgbox.com/e3/9a/PwtI624A_o.png" alt="在这里插入图片描述"><br> 然后勾选<code>Enable</code>，<br> <img src="https://images2.imgbox.com/46/47/B5csRECN_o.png" alt="在这里插入图片描述"><br> 这样我们就开启了一个本地的服务器了，<code>IP</code>地址是我本机的局域网<code>IP</code>，我可以通过<code>localhost</code>进行访问，注意这里的端口号是<code>62762</code>。<br> 我们可以看到，它对我们上文中提到的两个文件夹目录进行了<code>Hosting</code>，<br> <img src="https://images2.imgbox.com/6b/5a/PDXhC5Vz_o.png" alt="在这里插入图片描述"></p> 
<h6><a id="112_308"></a>11.2、加载远程包的柯南图片</h6> 
<p>因为我们上面已经指向过<code>Build</code>打了资源包，所以这里我们就直接写加载资源的代码吧。<br> 我们改一下<code>Main.cs</code>脚本，让它去加载柯南的图片，我们知道，柯南图片在<code>Remote Group</code>组里，它是在包外的，但我们代码上并不用管它到底是包内还是包外，我们使用<code>Addressable Name</code>来加载，柯南图片的<code>Addressable Name</code>为<code>Assets/Textures/kenan.jpg</code>，<br> <img src="https://images2.imgbox.com/00/7b/z5rZPMjw_o.png" alt="在这里插入图片描述"><br> 上代码，</p> 
<pre><code class="prism language-csharp"><span class="token keyword">using</span> <span class="token namespace">UnityEngine</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">UnityEngine<span class="token punctuation">.</span>AddressableAssets</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">UnityEngine<span class="token punctuation">.</span>UI</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">MonoBehaviour</span></span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token class-name">RawImage</span> img<span class="token punctuation">;</span>
    <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
       	Addressables<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">LoadAssetAsync</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Texture2D<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token string">"Assets/Textures/kenan.jpg"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>Completed <span class="token operator">+=</span> <span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token comment">// 图片</span>
            <span class="token class-name">Texture2D</span> tex2D <span class="token operator">=</span> obj<span class="token punctuation">.</span>Result<span class="token punctuation">;</span>
            img<span class="token punctuation">.</span>texture <span class="token operator">=</span> tex2D<span class="token punctuation">;</span>
            img<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>RectTransform<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>sizeDelta <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Vector2</span><span class="token punctuation">(</span>tex2D<span class="token punctuation">.</span>width<span class="token punctuation">,</span> tex2D<span class="token punctuation">.</span>height<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>使用<code>UGUI</code>创建一张<code>RawImage</code>，并赋值给<code>Main</code>脚本的<code>img</code>成员，如下，<br> <img src="https://images2.imgbox.com/0e/3f/9PXPPy2G_o.png" alt="在这里插入图片描述"><br> 运行<code>Unity</code>，效果如下，可以看到，成功加载了远程资源，<br> <img src="https://images2.imgbox.com/5b/07/Pufj6DKB_o.png" alt="在这里插入图片描述"></p> 
<blockquote> 
 <p>注：如果你是<code>win11</code>系统，可能使用<code>Hosting Services</code>会无法访问，具体原因不明，<code>win11</code>各种恶心的问题，放弃治疗，把资源放到<code>https</code>服务器可以正常加载。</p> 
</blockquote> 
<h6><a id="113Addressables_339"></a>11.3、Addressables是如何知道去哪里加载资源的</h6> 
<p>假设我现在把资源托管到<code>GitCode</code>上，我把<code>RemoteLoadPath</code>改为<code>GitCode</code>的地址，如下<br> <img src="https://images2.imgbox.com/2d/2f/BmdKeLEN_o.png" alt="在这里插入图片描述"><br> 然后我执行<code>Addressables</code>的<code>Build</code>打出资源包，如下是<code>RemoteGroup</code>资源包，里面包含了柯南的图片，<br> <img src="https://images2.imgbox.com/13/89/0rIwiAjl_o.png" alt="在这里插入图片描述"><br> 我们把它丢到<code>GitCode</code>上，如下<br> <img src="https://images2.imgbox.com/c2/b1/pap4kLDN_o.png" alt="在这里插入图片描述"><br> 我运行<code>Unity</code>，可以看到，它从<code>GitCode</code>上正常加载了柯南的图片，<br> <img src="https://images2.imgbox.com/c2/06/1ADEPCQD_o.png" alt="在这里插入图片描述"><br> 如何证明它是从<code>GitCode</code>上下载下来的呢？我们把工程里的柯南图片删了，<br> <img src="https://images2.imgbox.com/3f/02/jfMEmoqI_o.png" alt="在这里插入图片描述"><br> 把<code>ServerData/Android</code>目录中的<code>RemoteGroup</code>的<code>.bundle</code>包也删了，<br> <img src="https://images2.imgbox.com/28/00/4OGoTMe2_o.png" alt="在这里插入图片描述"><br> 由于我们已经运行过一次，远程的资源会在本地缓存，我们使用<code>Everythine</code>搜索一下<code>.bundle</code>文件的那串哈希值，可以看到一个同名的文件夹，我们进入里面，<br> <img src="https://images2.imgbox.com/b8/59/n0ObOtkz_o.png" alt="在这里插入图片描述"><br> 可以看到有个<code>__data</code>文件，它就是<code>.bundle</code>的缓存文件，柯南就在里面，我们可以使用<code>AssetStudio</code>对<code>__data</code>进行逆向，看到了吗，我们的柯南又出现了，<br> <img src="https://images2.imgbox.com/1c/d0/KQ6Etcwi_o.png" alt="在这里插入图片描述"><br> 好，我们把缓存也干掉，<br> <img src="https://images2.imgbox.com/8b/83/iZGO5EjM_o.png" alt="在这里插入图片描述"><br> 这个时候，我们再运行一下<code>Unity</code>，柯南又重新加载出来了，并且刚刚的缓存目录又出现了，<br> <img src="https://images2.imgbox.com/3a/7e/OJi7zO9v_o.png" alt="在这里插入图片描述">它是从<code>GitCode</code>上加载并缓存到本地的。<br> 我们通过<code>Assets/Textures/kenan.jpg</code>这个<code>Addressable Name</code>就可以加载到<code>GitCode</code>的柯南图片，这个对应关系是记录在哪里的呢？答案就在<code>catalog.json</code>文件中，这个文件我们在上文中解<code>APK</code>包的时候也有看到，事实上整个<code>aa/Android</code>目录下的文件都会塞入<code>APK</code>的<code>assets</code>目录中，<br> <img src="https://images2.imgbox.com/d5/05/6oXMtEOQ_o.png" alt="在这里插入图片描述"><br> 我们打开它，可以看到我们配置的<code>GitCode</code>地址就在里面，<br> <img src="https://images2.imgbox.com/e9/01/6JyxIzOq_o.png" alt="在这里插入图片描述"></p> 
<h6><a id="114APK_364"></a>11.4、打个APK包瞧瞧</h6> 
<p>我们发布成<code>APK</code>，在<code>Android</code>模拟器中去看看效果，<br> <img src="https://images2.imgbox.com/0d/ca/Y6q1YJI2_o.png" alt="在这里插入图片描述"><br> 运行，效果如下<br> <img src="https://images2.imgbox.com/17/1f/KkbOZNWP_o.png" alt="在这里插入图片描述"><br> 我们打开文件管理器，进入<code>Android/data/包名/files</code>目录中，可以看到有个<code>UnityCache</code>文件夹，<br> <img src="https://images2.imgbox.com/57/12/4ngRj90n_o.png" alt="在这里插入图片描述"><br> 继续往里走，那串熟悉的哈希值又出现了，它就是我们放在<code>GitCode</code>上的<code>RemoteGroup</code>的<code>.bundle</code>文件的哈希值，它被下载到本地缓存在这个目录中，<img src="https://images2.imgbox.com/14/68/uvZSPTWI_o.png" alt="在这里插入图片描述"><br> 我们继续进入，里面的<code>__data</code>文件就是<code>.bundle</code>文件本君，柯南就在里面，<br> <img src="https://images2.imgbox.com/93/27/i6VcCew8_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="12Groupbundle_374"></a>12、如何把Group里的资源打成多个bundle文件</h5> 
<p>我们如果继续给<code>RemoteGroup</code>添加资源，比如我们再放一张小兰的图片，<br> <img src="https://images2.imgbox.com/d0/b8/0yeCnBSS_o.png" alt="在这里插入图片描述"><br> 把柯南小兰都放在<code>RemoteGroup</code>组里，<br> <img src="https://images2.imgbox.com/44/5c/NMhH8XQY_o.png" alt="在这里插入图片描述"><br> 这个时候我们执行<code>Addressable</code>资源打包，柯南和小兰是在同一个<code>.bundle</code>文件中的，<br> <img src="https://images2.imgbox.com/fa/20/ySrxib6o_o.png" alt="在这里插入图片描述"><br> 用<code>AssetStudio</code>逆向验证一下，嗯，他们是在一起的，<br> <img src="https://images2.imgbox.com/2e/69/mBVoYWHB_o.png" alt="在这里插入图片描述"><br> 假设这个<code>.bundle</code>文件还包含了好多好多其他的资源，导致这个<code>.bundle</code>包有几十<code>M</code>那么大，而我们只是想要加载柯南的图片，这个时候它会先去下载整个<code>.bundle</code>到本地，然后再去这个<code>.bundle</code>文件中去加载柯南的图片，时间耗在了下载大文件上了，能不能将颗粒度细化到以单独的资源文件为颗粒呢？<br> 答案是可以的，选中<code>RemoteGroup</code>，然后将<code>Bundle` Mode</code>改为<code>Pack Separately</code>，这样就是以每个独立的资源文件为颗粒打成<code>.bundle</code>文件了，<br> <img src="https://images2.imgbox.com/ff/c7/unIqvgJY_o.png" alt="在这里插入图片描述"></p> 
<p>我们重新执行<code>Build</code>，可以看到目录根据资源类型进行细化了，<code>.bundle</code>文件也细分成了两个，柯南和小兰分开了，<br> <img src="https://images2.imgbox.com/b7/5d/gwqy35fa_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="13LabelsGroup_389"></a>13、使用Labels对Group内的资源进行二级分组</h5> 
<p>实际项目中，不会真的细到这么细的颗粒，会使用<code>Labels</code>来对<code>Group</code>内的资源进行二级分组，默认只有一个<code>default</code>的<code>Label</code>，<br> <img src="https://images2.imgbox.com/e2/41/JMFMolpW_o.png" alt="在这里插入图片描述"></p> 
<h6><a id="131Label_392"></a>13.1、新建Label</h6> 
<p>我们可以点击<code>Tools / Labels</code>菜单，新建一个<code>Label</code>，<br> <img src="https://images2.imgbox.com/8b/54/ZXgZ9IED_o.png" alt="在这里插入图片描述"><br> 点击<code>+</code>号，<br> <img src="https://images2.imgbox.com/ab/5f/GuG6I26q_o.png" alt="在这里插入图片描述"><br> 新建一个<code>texture</code>吧，<br> <img src="https://images2.imgbox.com/74/0b/ir0HQtJj_o.png" alt="在这里插入图片描述"></p> 
<h6><a id="132Label_399"></a>13.2、给资源设置Label</h6> 
<p>接着我们把柯南和小兰的<code>Label</code>都设置为<code>texture</code>，<br> <img src="https://images2.imgbox.com/bb/0d/EjUWUfpV_o.png" alt="在这里插入图片描述"><br> 如下<br> <img src="https://images2.imgbox.com/6b/b3/4Tb7fjWF_o.png" alt="在这里插入图片描述"><br> 为了演示，我再加一个柯南主题曲，并标记它的<code>Label</code>为<code>audio</code>，<br> <img src="https://images2.imgbox.com/00/7d/m6jLBlZA_o.png" alt="在这里插入图片描述"></p> 
<h6><a id="133Bundle_ModePack_Together_By_Label_406"></a>13.3、修改Bundle Mode为Pack Together By Label</h6> 
<p>接着，我们把<code>RemoteGroup</code>的<code>Bundle Mode</code>改为<code>Pack Together By Label</code>，<br> <img src="https://images2.imgbox.com/ff/dd/vJcZZh6N_o.png" alt="在这里插入图片描述"><br> 这样，一个<code>Group</code>就会以<code>Label</code>为颗粒细分成多个<code>.bundle</code>，组织是更加灵活，我们执行<code>Addressable</code>资源打包，如下，<br> <img src="https://images2.imgbox.com/b3/9b/hVDmmOCv_o.png" alt="在这里插入图片描述"></p> 
<h6><a id="133Label_411"></a>13.3、一个资源标记多个Label</h6> 
<p>事实上，一个资源可以同时标记多个<code>Label</code>，比如我把柯南同时标记为<code>default</code>和<code>texture</code>，如下，<br> <img src="https://images2.imgbox.com/a5/ab/XS4oNmJH_o.png" alt="在这里插入图片描述"><br> 我们执行<code>Addressable</code>资源打包，如下，他们又分开了，<br> <img src="https://images2.imgbox.com/6b/af/rp4ldWOs_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="14LabelAssetLabelReference_416"></a>14、批量加载同一个Label的所有资源（AssetLabelReference）</h5> 
<p>我们给资源标记了<code>Label</code>之后，就可以批量加载指定了同一个<code>Label</code>的所有资源了，比如我想加载标记了<code>texture</code>的所有资源，就可以这样加载，</p> 
<pre><code class="prism language-csharp"><span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Linq<span class="token punctuation">.</span>Expressions</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">UnityEngine</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">UnityEngine<span class="token punctuation">.</span>AddressableAssets</span><span class="token punctuation">;</span>


<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">MonoBehaviour</span></span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token class-name">AssetLabelReference</span> textureLabel<span class="token punctuation">;</span>

    <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        Addressables<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">LoadAssetsAsync</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Texture2D<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>textureLabel<span class="token punctuation">,</span> <span class="token punctuation">(</span>texture<span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token comment">// 没加载完一个资源，就回调一次</span>
            Debug<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span><span class="token string">"加载了一个资源： "</span> <span class="token operator">+</span> texture<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>把<code>Main.cs</code>脚本的<code>Texture Label</code>成员设置为<code>texture</code>，如下，<br> <img src="https://images2.imgbox.com/e7/06/rIMEOHLc_o.png" alt="在这里插入图片描述"><br> 运行<code>Unity</code>，可以看到，回调了两次，分别加载了柯南和小兰的图片，<br> <img src="https://images2.imgbox.com/44/ba/zu8MMLwX_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="15_442"></a>15、打资源热更包</h5> 
<h6><a id="151Build_Remote_Catalog_443"></a>15.1、开启Build Remote Catalog</h6> 
<p>想要支持热更新，需要先开启<code>Catalog</code>，选中<code>AddressableAssetSettings</code>，然后勾选<code>Build Remote Catalog</code>，如下，<br> <img src="https://images2.imgbox.com/d4/8d/tYqr0F3s_o.png" alt="在这里插入图片描述"></p> 
<h6><a id="152Addressable_446"></a>15.2、打包Addressable资源包</h6> 
<p>然后执行<code>Build</code>打包<code>Addressable</code>资源包，<br> 此时除了生成<code>.bundle</code>包，还生成了<code>catalog</code>的<code>.hash</code>和<code>.json</code>文件，如下<br> <img src="https://images2.imgbox.com/35/f8/vSbdxCWh_o.png" alt="在这里插入图片描述"><br> 有了<code>catalog</code>的这两个文件，我们后续打增量包的时候它才能对比出哪些文件发生了变化，把变化的资源文件打成热更的<code>.bundle</code>包，我们先把打出来的<code>catalog</code>和<code>.bundle</code>包丢到服务器上，如下，<br> <img src="https://images2.imgbox.com/16/ba/Qx8zSoQ0_o.png" alt="在这里插入图片描述"></p> 
<h6><a id="153_452"></a>15.3、加载小兰的图片</h6> 
<p>我们先写段代码去加载小兰的图片，</p> 
<pre><code class="prism language-csharp"><span class="token keyword">using</span> <span class="token namespace">UnityEngine</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">UnityEngine<span class="token punctuation">.</span>AddressableAssets</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">UnityEngine<span class="token punctuation">.</span>UI</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">MonoBehaviour</span></span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token class-name">RawImage</span> img<span class="token punctuation">;</span>
    <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        Addressables<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">LoadAssetAsync</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Texture2D<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token string">"Assets/Textures/xiaolan.png"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>Completed <span class="token operator">+=</span> <span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
          <span class="token punctuation">{<!-- --></span>
                <span class="token comment">// 图片</span>
                <span class="token class-name">Texture2D</span> tex2D <span class="token operator">=</span> obj<span class="token punctuation">.</span>Result<span class="token punctuation">;</span>
              img<span class="token punctuation">.</span>texture <span class="token operator">=</span> tex2D<span class="token punctuation">;</span>
              img<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>RectTransform<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>sizeDelta <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Vector2</span><span class="token punctuation">(</span>tex2D<span class="token punctuation">.</span>width<span class="token punctuation">,</span> tex2D<span class="token punctuation">.</span>height<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>运行<code>Unity</code>，可以正常加载，<br> <img src="https://images2.imgbox.com/a0/21/vD4pG6YA_o.png" alt="在这里插入图片描述"></p> 
<h6><a id="154APK_477"></a>15.4、打成APK</h6> 
<p>我们打成<code>APK</code>包，在<code>Android</code>模拟器上运行，可以正常加载到小兰的图片，<br> <img src="https://images2.imgbox.com/2a/40/JZN11FKr_o.png" alt="在这里插入图片描述"></p> 
<h6><a id="155_480"></a>15.5、替换小兰的图片</h6> 
<p>现在，我们想热更小兰的图片，换成这张，<br> <img src="https://images2.imgbox.com/a0/d5/hmw5sNYs_o.png" alt="在这里插入图片描述"><br> 现在<code>RemoteGroup</code>组里小兰的图片被我们换成了新的了，<br> <img src="https://images2.imgbox.com/e9/87/NOOUVbvI_o.png" alt="在这里插入图片描述"></p> 
<h6><a id="156Update_a_Previous_Build_485"></a>15.6、打热更包，Update a Previous Build</h6> 
<p>我们点击<code>Update a Previous Build</code>菜单，如下<br> <img src="https://images2.imgbox.com/3c/69/Aov2oTEQ_o.png" alt="在这里插入图片描述"><br> 此时会打开一个窗口，然你选择<code>.bin</code>文件，因为我是<code>Android</code>平台，所以进入<code>Android</code>目录中，<br> <img src="https://images2.imgbox.com/2c/bd/Ya2laQ7M_o.png" alt="在这里插入图片描述"><br> 选择<code>addressables_content_state.bin</code>文件，<br> <img src="https://images2.imgbox.com/16/24/Q8GJ2553_o.png" alt="在这里插入图片描述"><br> 它会解析<code>catalog</code>文件然后进行差异对比，发现小兰的图片资源发生了变化，就会把它打成一个热更的<code>.bundle</code>包了，<br> <img src="https://images2.imgbox.com/e7/85/2ZgIoM2Y_o.png" alt="在这里插入图片描述"></p> 
<h6><a id="157_494"></a>15.7、上传热更包</h6> 
<p>我们把热更包丢到服务器上，<br> <img src="https://images2.imgbox.com/c6/88/Jfnw2IRE_o.png" alt="在这里插入图片描述"></p> 
<h6><a id="158_497"></a>15.8、热更测试</h6> 
<p>现在，我们在<code>Android</code>模拟器上重新运行<code>APP</code>，可以看到，小兰的图片自动热更成新的图片了，<br> <img src="https://images2.imgbox.com/63/df/cxI7HHYL_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="16_500"></a>16、提前检测更新并下载（预下载）</h5> 
<p>有时候我们希望启动后执行更新检测并下载所有资源后再进入游戏，可以使用<code>CheckForCatalogUpdates -&gt; UpdateCatalogs -&gt; GetDownloadSizeAsync -&gt; DownloadDependenciesAsync</code>这个工作流。<br> 这个过程中可能有强退、断网等异常，我们可以判断<code>AsyncOperationHandle</code>的<code>Status</code>状态码然后进行处理，并提示重试。</p> 
<p>示例：</p> 
<pre><code class="prism language-csharp"><span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Collections</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Collections<span class="token punctuation">.</span>Generic</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">UnityEngine</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">UnityEngine<span class="token punctuation">.</span>AddressableAssets</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">UnityEngine<span class="token punctuation">.</span>ResourceManagement<span class="token punctuation">.</span>AsyncOperations</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">UnityEngine<span class="token punctuation">.</span>AddressableAssets<span class="token punctuation">.</span>ResourceLocators</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">UnityEngine<span class="token punctuation">.</span>UI</span><span class="token punctuation">;</span>

<span class="token comment">// 检测更新并下载资源</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CheckUpdateAndDownload</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">MonoBehaviour</span></span>
<span class="token punctuation">{<!-- --></span>
    <span class="token comment">/// &lt;summary&gt;</span>
    <span class="token comment">/// 显示下载状态和进度</span>
    <span class="token comment">/// &lt;/summary&gt;</span>
    <span class="token keyword">public</span> <span class="token class-name">Text</span> updateText<span class="token punctuation">;</span>

    <span class="token comment">/// &lt;summary&gt;</span>
    <span class="token comment">/// 重试按钮</span>
    <span class="token comment">/// &lt;/summary&gt;</span>
    <span class="token keyword">public</span> <span class="token class-name">Button</span> retryBtn<span class="token punctuation">;</span>

    <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        retryBtn<span class="token punctuation">.</span>gameObject<span class="token punctuation">.</span><span class="token function">SetActive</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        retryBtn<span class="token punctuation">.</span>onClick<span class="token punctuation">.</span><span class="token function">AddListener</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token function">StartCoroutine</span><span class="token punctuation">(</span><span class="token function">DoUpdateAddressadble</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 默认自动执行一次更新检测</span>
        <span class="token function">StartCoroutine</span><span class="token punctuation">(</span><span class="token function">DoUpdateAddressadble</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token return-type class-name">IEnumerator</span> <span class="token function">DoUpdateAddressadble</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">AsyncOperationHandle<span class="token punctuation">&lt;</span>IResourceLocator<span class="token punctuation">&gt;</span></span> initHandle <span class="token operator">=</span> Addressables<span class="token punctuation">.</span><span class="token function">InitializeAsync</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">yield</span> <span class="token keyword">return</span> initHandle<span class="token punctuation">;</span>

        <span class="token comment">// 检测更新</span>
        <span class="token class-name"><span class="token keyword">var</span></span> checkHandle <span class="token operator">=</span> Addressables<span class="token punctuation">.</span><span class="token function">CheckForCatalogUpdates</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">yield</span> <span class="token keyword">return</span> checkHandle<span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>checkHandle<span class="token punctuation">.</span>Status <span class="token operator">!=</span> AsyncOperationStatus<span class="token punctuation">.</span>Succeeded<span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token function">OnError</span><span class="token punctuation">(</span><span class="token string">"CheckForCatalogUpdates Error\n"</span> <span class="token operator">+</span>  checkHandle<span class="token punctuation">.</span>OperationException<span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">yield</span> <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span>checkHandle<span class="token punctuation">.</span>Result<span class="token punctuation">.</span>Count <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token class-name"><span class="token keyword">var</span></span> updateHandle <span class="token operator">=</span> Addressables<span class="token punctuation">.</span><span class="token function">UpdateCatalogs</span><span class="token punctuation">(</span>checkHandle<span class="token punctuation">.</span>Result<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">yield</span> <span class="token keyword">return</span> updateHandle<span class="token punctuation">;</span>

            <span class="token keyword">if</span> <span class="token punctuation">(</span>updateHandle<span class="token punctuation">.</span>Status <span class="token operator">!=</span> AsyncOperationStatus<span class="token punctuation">.</span>Succeeded<span class="token punctuation">)</span>
            <span class="token punctuation">{<!-- --></span>
                <span class="token function">OnError</span><span class="token punctuation">(</span><span class="token string">"UpdateCatalogs Error\n"</span> <span class="token operator">+</span> updateHandle<span class="token punctuation">.</span>OperationException<span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">yield</span> <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            <span class="token comment">// 更新列表迭代器</span>
            <span class="token class-name">List<span class="token punctuation">&lt;</span>IResourceLocator<span class="token punctuation">&gt;</span></span> locators <span class="token operator">=</span> updateHandle<span class="token punctuation">.</span>Result<span class="token punctuation">;</span>
            <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">var</span></span> locator <span class="token keyword">in</span> locators<span class="token punctuation">)</span>
            <span class="token punctuation">{<!-- --></span>
                <span class="token class-name">List<span class="token punctuation">&lt;</span><span class="token keyword">object</span><span class="token punctuation">&gt;</span></span> keys <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">List<span class="token punctuation">&lt;</span><span class="token keyword">object</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                keys<span class="token punctuation">.</span><span class="token function">AddRange</span><span class="token punctuation">(</span>locator<span class="token punctuation">.</span>Keys<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token comment">// 获取待下载的文件总大小</span>
                <span class="token class-name"><span class="token keyword">var</span></span> sizeHandle <span class="token operator">=</span> Addressables<span class="token punctuation">.</span><span class="token function">GetDownloadSizeAsync</span><span class="token punctuation">(</span>keys<span class="token punctuation">.</span><span class="token function">GetEnumerator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">yield</span> <span class="token keyword">return</span> sizeHandle<span class="token punctuation">;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>sizeHandle<span class="token punctuation">.</span>Status <span class="token operator">!=</span> AsyncOperationStatus<span class="token punctuation">.</span>Succeeded<span class="token punctuation">)</span>
                <span class="token punctuation">{<!-- --></span>
                    <span class="token function">OnError</span><span class="token punctuation">(</span><span class="token string">"GetDownloadSizeAsync Error\n"</span> <span class="token operator">+</span> sizeHandle<span class="token punctuation">.</span>OperationException<span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">yield</span> <span class="token keyword">break</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>

                <span class="token class-name"><span class="token keyword">long</span></span> totalDownloadSize <span class="token operator">=</span> sizeHandle<span class="token punctuation">.</span>Result<span class="token punctuation">;</span>
                updateText<span class="token punctuation">.</span>text <span class="token operator">=</span> updateText<span class="token punctuation">.</span>text <span class="token operator">+</span> <span class="token string">"\ndownload size : "</span> <span class="token operator">+</span> totalDownloadSize<span class="token punctuation">;</span>
                Debug<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span><span class="token string">"download size : "</span> <span class="token operator">+</span> totalDownloadSize<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>totalDownloadSize <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
                <span class="token punctuation">{<!-- --></span>
                    <span class="token comment">// 下载</span>
                    <span class="token class-name"><span class="token keyword">var</span></span> downloadHandle <span class="token operator">=</span> Addressables<span class="token punctuation">.</span><span class="token function">DownloadDependenciesAsync</span><span class="token punctuation">(</span>keys<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span>downloadHandle<span class="token punctuation">.</span>IsDone<span class="token punctuation">)</span>
                    <span class="token punctuation">{<!-- --></span>
                        <span class="token keyword">if</span> <span class="token punctuation">(</span>downloadHandle<span class="token punctuation">.</span>Status <span class="token operator">==</span> AsyncOperationStatus<span class="token punctuation">.</span>Failed<span class="token punctuation">)</span>
                        <span class="token punctuation">{<!-- --></span>
                            <span class="token function">OnError</span><span class="token punctuation">(</span><span class="token string">"DownloadDependenciesAsync Error\n"</span>  <span class="token operator">+</span> downloadHandle<span class="token punctuation">.</span>OperationException<span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                            <span class="token keyword">yield</span> <span class="token keyword">break</span><span class="token punctuation">;</span>
                        <span class="token punctuation">}</span>
                        <span class="token comment">// 下载进度</span>
                        <span class="token class-name"><span class="token keyword">float</span></span> percentage <span class="token operator">=</span> downloadHandle<span class="token punctuation">.</span>PercentComplete<span class="token punctuation">;</span>
                        Debug<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">$"已下载: </span><span class="token interpolation"><span class="token punctuation">{<!-- --></span><span class="token expression language-csharp">percentage</span><span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        updateText<span class="token punctuation">.</span>text <span class="token operator">=</span> updateText<span class="token punctuation">.</span>text <span class="token operator">+</span> <span class="token interpolation-string"><span class="token string">$"\n已下载: </span><span class="token interpolation"><span class="token punctuation">{<!-- --></span><span class="token expression language-csharp">percentage</span><span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">;</span>
                        <span class="token keyword">yield</span> <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span>downloadHandle<span class="token punctuation">.</span>Status <span class="token operator">==</span> AsyncOperationStatus<span class="token punctuation">.</span>Succeeded<span class="token punctuation">)</span>
                    <span class="token punctuation">{<!-- --></span>
                        Debug<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span><span class="token string">"下载完毕!"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        updateText<span class="token punctuation">.</span>text <span class="token operator">=</span> updateText<span class="token punctuation">.</span>text <span class="token operator">+</span> <span class="token string">"\n下载完毕"</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">else</span>
        <span class="token punctuation">{<!-- --></span>
            updateText<span class="token punctuation">.</span>text <span class="token operator">=</span> updateText<span class="token punctuation">.</span>text <span class="token operator">+</span> <span class="token string">"\n没有检测到更新"</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">// 进入游戏</span>
        <span class="token function">EnterGame</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 异常提示</span>
    <span class="token keyword">private</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">OnError</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> msg<span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        updateText<span class="token punctuation">.</span>text <span class="token operator">=</span> updateText<span class="token punctuation">.</span>text <span class="token operator">+</span> <span class="token interpolation-string"><span class="token string">$"\n</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span><span class="token expression language-csharp">msg</span><span class="token punctuation">}</span></span><span class="token string">\n请重试! "</span></span><span class="token punctuation">;</span>
        <span class="token comment">// 显示重试按钮</span>
        retryBtn<span class="token punctuation">.</span>gameObject<span class="token punctuation">.</span><span class="token function">SetActive</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>


    <span class="token comment">// 进入游戏</span>
    <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">EnterGame</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// TODO</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h5><a id="17Addressable_633"></a>17、Addressable资源释放</h5> 
<p>最后补充一下<code>Addressable</code>的资源释放。<br> 就以加载小兰图片为例，我们加载完毕后，把<code>RawImage</code>销毁，并不会释放内存中的<code>Texture2D</code>对象，比如这样子</p> 
<pre><code class="prism language-csharp"><span class="token keyword">using</span> <span class="token namespace">UnityEngine</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">UnityEngine<span class="token punctuation">.</span>AddressableAssets</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">UnityEngine<span class="token punctuation">.</span>UI</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">MonoBehaviour</span></span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token class-name">RawImage</span> img<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token class-name">Button</span> freeResBtn<span class="token punctuation">;</span>

    <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        Addressables<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">LoadAssetAsync</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Texture2D<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token string">"Assets/Textures/xiaolan.png"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>Completed <span class="token operator">+=</span> <span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
          <span class="token punctuation">{<!-- --></span>
              <span class="token comment">// 图片</span>
              <span class="token class-name"><span class="token keyword">var</span></span> tex2D <span class="token operator">=</span> obj<span class="token punctuation">.</span>Result<span class="token punctuation">;</span>
              img<span class="token punctuation">.</span>texture <span class="token operator">=</span> tex2D<span class="token punctuation">;</span>
              img<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>RectTransform<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>sizeDelta <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Vector2</span><span class="token punctuation">(</span>tex2D<span class="token punctuation">.</span>width<span class="token punctuation">,</span> tex2D<span class="token punctuation">.</span>height<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">;</span>

        freeResBtn<span class="token punctuation">.</span>onClick<span class="token punctuation">.</span><span class="token function">AddListener</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token comment">// 销毁RawImage</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token operator">!=</span> img<span class="token punctuation">)</span>
	            <span class="token function">Destroy</span><span class="token punctuation">(</span>img<span class="token punctuation">.</span>gameObject<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>我们通过<code>Event Viewer</code>可以看到，虽然我们销毁了<code>RawImage</code>，但是<code>Texture2D</code>还在内存中，<br> <img src="https://images2.imgbox.com/93/8d/w8e4Ur03_o.gif" alt="请添加图片描述"><br> 我们需要通过<code>Addressables.Release</code>去释放资源，如下，</p> 
<pre><code class="prism language-csharp"><span class="token keyword">using</span> <span class="token namespace">UnityEngine</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">UnityEngine<span class="token punctuation">.</span>AddressableAssets</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">UnityEngine<span class="token punctuation">.</span>UI</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">MonoBehaviour</span></span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token class-name">RawImage</span> img<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token class-name">Button</span> freeResBtn<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Texture2D</span> tex2D<span class="token punctuation">;</span>

    <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        Addressables<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">LoadAssetAsync</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Texture2D<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token string">"Assets/Textures/xiaolan.png"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>Completed <span class="token operator">+=</span> <span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
          <span class="token punctuation">{<!-- --></span>
              <span class="token comment">// 图片</span>
              tex2D <span class="token operator">=</span> obj<span class="token punctuation">.</span>Result<span class="token punctuation">;</span>
              img<span class="token punctuation">.</span>texture <span class="token operator">=</span> tex2D<span class="token punctuation">;</span>
              img<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>RectTransform<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>sizeDelta <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Vector2</span><span class="token punctuation">(</span>tex2D<span class="token punctuation">.</span>width<span class="token punctuation">,</span> tex2D<span class="token punctuation">.</span>height<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">;</span>

        freeResBtn<span class="token punctuation">.</span>onClick<span class="token punctuation">.</span><span class="token function">AddListener</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token comment">// 销毁RawImage</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token operator">!=</span> img<span class="token punctuation">)</span>
                <span class="token function">Destroy</span><span class="token punctuation">(</span>img<span class="token punctuation">.</span>gameObject<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// 释放资源</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token operator">!=</span> tex2D<span class="token punctuation">)</span>
                Addressables<span class="token punctuation">.</span><span class="token function">Release</span><span class="token punctuation">(</span>tex2D<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>再次运行，可以看到，小兰的<code>Texture2D</code>在内存中释放了，<br> <img src="https://images2.imgbox.com/fe/6d/UWFnIgC0_o.gif" alt="请添加图片描述"><br> 我们也可以使用<code>Addressables.Release</code>去释放<code>handle</code>，效果是一样的，例，</p> 
<pre><code class="prism language-csharp"><span class="token keyword">using</span> <span class="token namespace">UnityEngine</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">UnityEngine<span class="token punctuation">.</span>AddressableAssets</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">UnityEngine<span class="token punctuation">.</span>UI</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">MonoBehaviour</span></span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token class-name">RawImage</span> img<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token class-name">Button</span> freeResBtn<span class="token punctuation">;</span>

    <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token class-name"><span class="token keyword">var</span></span> handle <span class="token operator">=</span> Addressables<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">LoadAssetAsync</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>Texture2D<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token string">"Assets/Textures/xiaolan.png"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        handle<span class="token punctuation">.</span>Completed <span class="token operator">+=</span> <span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token comment">// 图片</span>
            <span class="token class-name">Texture2D</span> tex2D <span class="token operator">=</span> obj<span class="token punctuation">.</span>Result<span class="token punctuation">;</span>
            img<span class="token punctuation">.</span>texture <span class="token operator">=</span> tex2D<span class="token punctuation">;</span>
            img<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">GetComponent</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>RectTransform<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>sizeDelta <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Vector2</span><span class="token punctuation">(</span>tex2D<span class="token punctuation">.</span>width<span class="token punctuation">,</span> tex2D<span class="token punctuation">.</span>height<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>

        freeResBtn<span class="token punctuation">.</span>onClick<span class="token punctuation">.</span><span class="token function">AddListener</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token comment">// 销毁RawImage</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token operator">!=</span> img<span class="token punctuation">)</span>
                <span class="token function">Destroy</span><span class="token punctuation">(</span>img<span class="token punctuation">.</span>gameObject<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// 释放资源</span>
            Addressables<span class="token punctuation">.</span><span class="token function">Release</span><span class="token punctuation">(</span>handle<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>同理，释放预设资源也一样，如下</p> 
<pre><code class="prism language-csharp"><span class="token keyword">using</span> <span class="token namespace">UnityEngine</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">UnityEngine<span class="token punctuation">.</span>AddressableAssets</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">UnityEngine<span class="token punctuation">.</span>UI</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">MonoBehaviour</span></span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token class-name">Button</span> freeResBtn<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">GameObject</span> cubeObj<span class="token punctuation">;</span>


    <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token class-name"><span class="token keyword">var</span></span> handle <span class="token operator">=</span> Addressables<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">LoadAssetAsync</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>GameObject<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span><span class="token string">"Assets/Prefabs/Cube.prefab"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        handle<span class="token punctuation">.</span>Completed <span class="token operator">+=</span> <span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
         <span class="token punctuation">{<!-- --></span>
            <span class="token comment">// 实例化Cube</span>
            cubeObj <span class="token operator">=</span> <span class="token function">Instantiate</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>Result<span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token punctuation">}</span><span class="token punctuation">;</span>

        freeResBtn<span class="token punctuation">.</span>onClick<span class="token punctuation">.</span><span class="token function">AddListener</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token operator">!=</span> cubeObj<span class="token punctuation">)</span>
                <span class="token function">Destroy</span><span class="token punctuation">(</span>cubeObj<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">// 释放资源</span>
            Addressables<span class="token punctuation">.</span><span class="token function">Release</span><span class="token punctuation">(</span>handle<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<h5><a id="18Addressable_770"></a>18、打包工具集成Addressable打包流程</h5> 
<p>实际项目中我们一般都会自己写一套打包工具，我们可以在打包工具中集成<code>Addressable</code>的打包流程，官方给出了示例，如下<br> 详细参见官方文档：<a href="https://docs.unity.cn/cn/current/Manual/com.unity.addressables.html" rel="nofollow">https://docs.unity.cn/cn/current/Manual/com.unity.addressables.html</a><br> <img src="https://images2.imgbox.com/bb/35/SWqcQViY_o.png" alt="在这里插入图片描述">官方示例：</p> 
<pre><code class="prism language-csharp"><span class="token preprocessor property">#<span class="token directive keyword">if</span> UNITY_EDITOR</span>
    <span class="token keyword">using</span> <span class="token namespace">UnityEditor</span><span class="token punctuation">;</span>
    <span class="token keyword">using</span> <span class="token namespace">UnityEditor<span class="token punctuation">.</span>AddressableAssets<span class="token punctuation">.</span>Build</span><span class="token punctuation">;</span>
    <span class="token keyword">using</span> <span class="token namespace">UnityEditor<span class="token punctuation">.</span>AddressableAssets<span class="token punctuation">.</span>Settings</span><span class="token punctuation">;</span>
    <span class="token keyword">using</span> <span class="token namespace">System</span><span class="token punctuation">;</span>
    <span class="token keyword">using</span> <span class="token namespace">UnityEngine</span><span class="token punctuation">;</span>

    <span class="token keyword">internal</span> <span class="token keyword">class</span> <span class="token class-name">BuildLauncher</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name"><span class="token keyword">string</span></span> build_script 
            <span class="token operator">=</span> <span class="token string">"Assets/AddressableAssetsData/DataBuilders/BuildScriptPackedMode.asset"</span><span class="token punctuation">;</span>
        <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name"><span class="token keyword">string</span></span> settings_asset 
            <span class="token operator">=</span> <span class="token string">"Assets/AddressableAssetsData/AddressableAssetSettings.asset"</span><span class="token punctuation">;</span>
        <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name"><span class="token keyword">string</span></span> profile_name <span class="token operator">=</span> <span class="token string">"Default"</span><span class="token punctuation">;</span>
        <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">AddressableAssetSettings</span> settings<span class="token punctuation">;</span>

        <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">getSettingsObject</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> settingsAsset<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token comment">// This step is optional, you can also use the default settings:</span>
            <span class="token comment">//settings = AddressableAssetSettingsDefaultObject.Settings;</span>

            settings
                <span class="token operator">=</span> AssetDatabase<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">LoadAssetAtPath</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>ScriptableObject<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>settingsAsset<span class="token punctuation">)</span>
                    <span class="token keyword">as</span> <span class="token class-name">AddressableAssetSettings</span><span class="token punctuation">;</span>

            <span class="token keyword">if</span> <span class="token punctuation">(</span>settings <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
                Debug<span class="token punctuation">.</span><span class="token function">LogError</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">$"</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span><span class="token expression language-csharp">settingsAsset</span><span class="token punctuation">}</span></span><span class="token string"> couldn't be found or isn't "</span></span> <span class="token operator">+</span>
                               <span class="token interpolation-string"><span class="token string">$"a settings object."</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">setProfile</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">string</span></span> profile<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token class-name"><span class="token keyword">string</span></span> profileId <span class="token operator">=</span> settings<span class="token punctuation">.</span>profileSettings<span class="token punctuation">.</span><span class="token function">GetProfileId</span><span class="token punctuation">(</span>profile<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>String<span class="token punctuation">.</span><span class="token function">IsNullOrEmpty</span><span class="token punctuation">(</span>profileId<span class="token punctuation">)</span><span class="token punctuation">)</span>
                Debug<span class="token punctuation">.</span><span class="token function">LogWarning</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">$"Couldn't find a profile named, </span><span class="token interpolation"><span class="token punctuation">{<!-- --></span><span class="token expression language-csharp">profile</span><span class="token punctuation">}</span></span><span class="token string">, "</span></span> <span class="token operator">+</span>
                                 <span class="token interpolation-string"><span class="token string">$"using current profile instead."</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">else</span>
                settings<span class="token punctuation">.</span>activeProfileId <span class="token operator">=</span> profileId<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">setBuilder</span><span class="token punctuation">(</span><span class="token class-name">IDataBuilder</span> builder<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token class-name"><span class="token keyword">int</span></span> index <span class="token operator">=</span> settings<span class="token punctuation">.</span>DataBuilders<span class="token punctuation">.</span><span class="token function">IndexOf</span><span class="token punctuation">(</span><span class="token punctuation">(</span>ScriptableObject<span class="token punctuation">)</span>builder<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
                settings<span class="token punctuation">.</span>ActivePlayerDataBuilderIndex <span class="token operator">=</span> index<span class="token punctuation">;</span>
            <span class="token keyword">else</span>
                Debug<span class="token punctuation">.</span><span class="token function">LogWarning</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">$"</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span><span class="token expression language-csharp">builder</span><span class="token punctuation">}</span></span><span class="token string"> must be added to the "</span></span> <span class="token operator">+</span>
                                 <span class="token interpolation-string"><span class="token string">$"DataBuilders list before it can be made "</span></span> <span class="token operator">+</span>
                                 <span class="token interpolation-string"><span class="token string">$"active. Using last run builder instead."</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">bool</span></span> <span class="token function">buildAddressableContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            AddressableAssetSettings
                <span class="token punctuation">.</span><span class="token function">BuildPlayerContent</span><span class="token punctuation">(</span><span class="token keyword">out</span> <span class="token class-name">AddressablesPlayerBuildResult</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name"><span class="token keyword">bool</span></span> success <span class="token operator">=</span> <span class="token keyword">string</span><span class="token punctuation">.</span><span class="token function">IsNullOrEmpty</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>Error<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>success<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                Debug<span class="token punctuation">.</span><span class="token function">LogError</span><span class="token punctuation">(</span><span class="token string">"Addressables build error encountered: "</span> <span class="token operator">+</span> result<span class="token punctuation">.</span>Error<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">return</span> success<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">MenuItem</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">"Window/Asset Management/Addressables/Build Addressables only"</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
        <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">bool</span></span> <span class="token function">BuildAddressables</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token function">getSettingsObject</span><span class="token punctuation">(</span>settings_asset<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">setProfile</span><span class="token punctuation">(</span>profile_name<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">IDataBuilder</span> builderScript
              <span class="token operator">=</span> AssetDatabase<span class="token punctuation">.</span><span class="token generic-method"><span class="token function">LoadAssetAtPath</span><span class="token generic class-name"><span class="token punctuation">&lt;</span>ScriptableObject<span class="token punctuation">&gt;</span></span></span><span class="token punctuation">(</span>build_script<span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token class-name">IDataBuilder</span><span class="token punctuation">;</span>

            <span class="token keyword">if</span> <span class="token punctuation">(</span>builderScript <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                Debug<span class="token punctuation">.</span><span class="token function">LogError</span><span class="token punctuation">(</span>build_script <span class="token operator">+</span> <span class="token string">" couldn't be found or isn't a build script."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            <span class="token function">setBuilder</span><span class="token punctuation">(</span>builderScript<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token keyword">return</span> <span class="token function">buildAddressableContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">MenuItem</span><span class="token attribute-arguments"><span class="token punctuation">(</span><span class="token string">"Window/Asset Management/Addressables/Build Addressables and Player"</span><span class="token punctuation">)</span></span></span><span class="token punctuation">]</span>
        <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">BuildAddressablesAndPlayer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token class-name"><span class="token keyword">bool</span></span> contentBuildSucceeded <span class="token operator">=</span> <span class="token function">BuildAddressables</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token keyword">if</span> <span class="token punctuation">(</span>contentBuildSucceeded<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                <span class="token class-name"><span class="token keyword">var</span></span> options <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">BuildPlayerOptions</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">BuildPlayerOptions</span> playerSettings
                    <span class="token operator">=</span> BuildPlayerWindow<span class="token punctuation">.</span>DefaultBuildMethods<span class="token punctuation">.</span><span class="token function">GetBuildPlayerOptions</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span><span class="token punctuation">;</span>

                BuildPipeline<span class="token punctuation">.</span><span class="token function">BuildPlayer</span><span class="token punctuation">(</span>playerSettings<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token preprocessor property">#<span class="token directive keyword">endif</span></span>

</code></pre> 
<h4><a id="QA_869"></a>四、答疑补充（Q&amp;A）</h4> 
<p>评论区有一些同学的提问，我补充到这里统一进行答疑。</p> 
<h5><a id="1Addressables_871"></a>1、Addressables加载场景进度监听</h5> 
<p><img src="https://images2.imgbox.com/82/04/pqKkCE0A_o.png" alt="在这里插入图片描述"><br> 示例：</p> 
<pre><code class="prism language-csharp"><span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Collections</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">UnityEngine</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">UnityEngine<span class="token punctuation">.</span>AddressableAssets</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">UnityEngine<span class="token punctuation">.</span>ResourceManagement<span class="token punctuation">.</span>AsyncOperations</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SceneLoader</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">MonoBehaviour</span></span>
<span class="token punctuation">{<!-- --></span>
    <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token function">StartCoroutine</span><span class="token punctuation">(</span><span class="token function">LoadScene</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token return-type class-name">IEnumerator</span> <span class="token function">LoadScene</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 异步加载场景(如果场景资源没有下载，会自动下载)，</span>
        <span class="token class-name"><span class="token keyword">var</span></span> handle <span class="token operator">=</span> Addressables<span class="token punctuation">.</span><span class="token function">LoadSceneAsync</span><span class="token punctuation">(</span><span class="token string">"Assets/Scenes/GameScene.unity"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>handle<span class="token punctuation">.</span>Status <span class="token operator">==</span> AsyncOperationStatus<span class="token punctuation">.</span>Failed<span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            Debug<span class="token punctuation">.</span><span class="token function">LogError</span><span class="token punctuation">(</span><span class="token string">"场景加载异常: "</span> <span class="token operator">+</span> handle<span class="token punctuation">.</span>OperationException<span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">yield</span> <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span>handle<span class="token punctuation">.</span>IsDone<span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            <span class="token comment">// 进度（0~1）</span>
            <span class="token class-name"><span class="token keyword">float</span></span> percentage <span class="token operator">=</span> handle<span class="token punctuation">.</span>PercentComplete<span class="token punctuation">;</span>
            Debug<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span><span class="token string">"进度: "</span> <span class="token operator">+</span> percentage<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">yield</span> <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        Debug<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span><span class="token string">"场景加载完毕"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> 
<h4><a id="_910"></a>五、完毕</h4> 
<p>好了，就写到这里吧。<br> 我是新发，<a href="https://blog.csdn.net/linxinfa">https://blog.csdn.net/linxinfa</a><br> 一个在小公司默默奋斗的Unity开发者，希望可以帮助更多想学Unity的人，共勉~</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/a20a4b00ea26f8b7de3fb006afe0297e/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">操作系统实验反思</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/94ebd31cb8108a8a6ce1ba67314e99db/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">highlight.js（代码高亮插件）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>