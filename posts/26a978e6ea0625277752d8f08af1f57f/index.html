<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>opencv-python 小白笔记（21） - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="opencv-python 小白笔记（21）" />
<meta property="og:description" content="第二十一节：美颜相关 （一）亮度增强（二）磨皮美白（cv2.bilateralFilter）（三）瘦脸(局部平移算法)（四）红唇（五）放大眼睛（局部缩放算法）（六）备注（七）结语 好多天没有写博客了，这几天一直忙于炼丹，快被数据搞疯了。废话不多说，今天主要写美颜相关
（一）亮度增强 其实直方图均衡化也可以增加图像亮度，下面先用直方图均衡化的方式实现亮度的增强（以前已经写过灰度图的直方图均衡化，这里相当于彩图的均衡化）
import cv2 img= cv2.imread(&#39;face.jpg&#39;) cv2.imshow(&#39;img&#39;, img)#这里展示一下原图 b,g,r=cv2.split(img) b = cv2.equalizeHist(b) g = cv2.equalizeHist(g) r = cv2.equalizeHist(r) out_put=cv2.merge((b,g,r)) cv2.imshow(&#39;out_put&#39;,out_put) cv2.waitKey(0) 这里相当于分别对三通道进行图像均衡化
雀斑已经淡了很多了，也变白了。（个人觉的，opencv为啥不直接出以个彩图均衡化的函数）
这里使用另一种方法增加图像的亮度，而这种写法有两种
法一：
import cv2 import numpy as np def empty(a): pass cv2.namedWindow(&#34;TrackBars&#34;) cv2.resizeWindow(&#34;TrackBars&#34;,650,47) cv2.createTrackbar(&#34;light&#34;,&#34;TrackBars&#34;,0,100,empty)#这里设置light最大值为100，你也可以设置大一点 while True: img= cv2.imread(&#39;face.jpg&#39;) h,w=img.shape[:2] #print(h,w) cv2.imshow(&#39;img&#39;, img)#这里展示一下原图 light = cv2.getTrackbarPos(&#34;light&#34;, &#34;TrackBars&#34;) out_put=np.zeros((h,w,3),np.uint8) for i in range(0,h): for j in range(0,w): b,g,r=img[i,j] x=int(b)&#43;light y=int(g)&#43;light z=int(r)&#43;light if x&gt;255: x=255 if y&gt;255: y=255 if z&gt;255: z=255 out_put[i, j] = x, y, z cv2." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/26a978e6ea0625277752d8f08af1f57f/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-09-20T12:29:11+08:00" />
<meta property="article:modified_time" content="2023-09-20T12:29:11+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">opencv-python 小白笔记（21）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>第二十一节：美颜相关</h4> 
 <ul><li><a href="#_4" rel="nofollow">（一）亮度增强</a></li><li><a href="#cv2bilateralFilter_112" rel="nofollow">（二）磨皮美白（cv2.bilateralFilter）</a></li><li><a href="#_155" rel="nofollow">（三）瘦脸(局部平移算法)</a></li><li><a href="#_302" rel="nofollow">（四）红唇</a></li><li><a href="#_382" rel="nofollow">（五）放大眼睛（局部缩放算法）</a></li><li><a href="#_508" rel="nofollow">（六）备注</a></li><li><a href="#_512" rel="nofollow">（七）结语</a></li></ul> 
</div> 
<p></p> 
<p>好多天没有写博客了，这几天一直忙于炼丹，快被数据搞疯了。废话不多说，今天主要写美颜相关</p> 
<h2><a id="_4"></a>（一）亮度增强</h2> 
<p>其实直方图均衡化也可以增加图像亮度，下面先用直方图均衡化的方式实现亮度的增强（以前已经写过灰度图的直方图均衡化，这里相当于彩图的均衡化）</p> 
<pre><code class="prism language-javascript">
<span class="token keyword">import</span> cv2

img<span class="token operator">=</span> cv2<span class="token punctuation">.</span><span class="token function">imread</span><span class="token punctuation">(</span><span class="token string">'face.jpg'</span><span class="token punctuation">)</span>

cv2<span class="token punctuation">.</span><span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">'img'</span><span class="token punctuation">,</span> img<span class="token punctuation">)</span>#这里展示一下原图

b<span class="token punctuation">,</span>g<span class="token punctuation">,</span>r<span class="token operator">=</span>cv2<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span>img<span class="token punctuation">)</span>

b <span class="token operator">=</span> cv2<span class="token punctuation">.</span><span class="token function">equalizeHist</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span>
g <span class="token operator">=</span> cv2<span class="token punctuation">.</span><span class="token function">equalizeHist</span><span class="token punctuation">(</span>g<span class="token punctuation">)</span>
r <span class="token operator">=</span> cv2<span class="token punctuation">.</span><span class="token function">equalizeHist</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span>

out_put<span class="token operator">=</span>cv2<span class="token punctuation">.</span><span class="token function">merge</span><span class="token punctuation">(</span><span class="token punctuation">(</span>b<span class="token punctuation">,</span>g<span class="token punctuation">,</span>r<span class="token punctuation">)</span><span class="token punctuation">)</span>

cv2<span class="token punctuation">.</span><span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">'out_put'</span><span class="token punctuation">,</span>out_put<span class="token punctuation">)</span>
cv2<span class="token punctuation">.</span><span class="token function">waitKey</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>

</code></pre> 
<p>这里相当于分别对三通道进行图像均衡化<br> <img src="https://images2.imgbox.com/75/38/u62cvk1r_o.png" alt="在这里插入图片描述"><br> 雀斑已经淡了很多了，也变白了。（个人觉的，opencv为啥不直接出以个彩图均衡化的函数）</p> 
<p><strong>这里使用另一种方法增加图像的亮度，而这种写法有两种</strong><br> 法一：</p> 
<pre><code class="prism language-javascript"><span class="token keyword">import</span> cv2
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np


def <span class="token function">empty</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token operator">:</span>
    pass


cv2<span class="token punctuation">.</span><span class="token function">namedWindow</span><span class="token punctuation">(</span><span class="token string">"TrackBars"</span><span class="token punctuation">)</span>
cv2<span class="token punctuation">.</span><span class="token function">resizeWindow</span><span class="token punctuation">(</span><span class="token string">"TrackBars"</span><span class="token punctuation">,</span><span class="token number">650</span><span class="token punctuation">,</span><span class="token number">47</span><span class="token punctuation">)</span>
cv2<span class="token punctuation">.</span><span class="token function">createTrackbar</span><span class="token punctuation">(</span><span class="token string">"light"</span><span class="token punctuation">,</span><span class="token string">"TrackBars"</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">,</span>empty<span class="token punctuation">)</span>#这里设置light最大值为<span class="token number">100</span>，你也可以设置大一点

<span class="token keyword">while</span> <span class="token literal-property property">True</span><span class="token operator">:</span>
    img<span class="token operator">=</span> cv2<span class="token punctuation">.</span><span class="token function">imread</span><span class="token punctuation">(</span><span class="token string">'face.jpg'</span><span class="token punctuation">)</span>

    h<span class="token punctuation">,</span>w<span class="token operator">=</span>img<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">]</span>
    <span class="token function">#print</span><span class="token punctuation">(</span>h<span class="token punctuation">,</span>w<span class="token punctuation">)</span>

    cv2<span class="token punctuation">.</span><span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">'img'</span><span class="token punctuation">,</span> img<span class="token punctuation">)</span>#这里展示一下原图

    light <span class="token operator">=</span> cv2<span class="token punctuation">.</span><span class="token function">getTrackbarPos</span><span class="token punctuation">(</span><span class="token string">"light"</span><span class="token punctuation">,</span> <span class="token string">"TrackBars"</span><span class="token punctuation">)</span>

    out_put<span class="token operator">=</span>np<span class="token punctuation">.</span><span class="token function">zeros</span><span class="token punctuation">(</span><span class="token punctuation">(</span>h<span class="token punctuation">,</span>w<span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">,</span>np<span class="token punctuation">.</span>uint8<span class="token punctuation">)</span>

    <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token function">range</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span>h<span class="token punctuation">)</span><span class="token operator">:</span>
        <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token function">range</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span>w<span class="token punctuation">)</span><span class="token operator">:</span>
            b<span class="token punctuation">,</span>g<span class="token punctuation">,</span>r<span class="token operator">=</span>img<span class="token punctuation">[</span>i<span class="token punctuation">,</span>j<span class="token punctuation">]</span>

            x<span class="token operator">=</span><span class="token function">int</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token operator">+</span>light
            y<span class="token operator">=</span><span class="token function">int</span><span class="token punctuation">(</span>g<span class="token punctuation">)</span><span class="token operator">+</span>light
            z<span class="token operator">=</span><span class="token function">int</span><span class="token punctuation">(</span>r<span class="token punctuation">)</span><span class="token operator">+</span>light

            <span class="token keyword">if</span> x<span class="token operator">&gt;</span><span class="token number">255</span><span class="token operator">:</span>
                x<span class="token operator">=</span><span class="token number">255</span>
            <span class="token keyword">if</span> y<span class="token operator">&gt;</span><span class="token number">255</span><span class="token operator">:</span>
                y<span class="token operator">=</span><span class="token number">255</span>
            <span class="token keyword">if</span> z<span class="token operator">&gt;</span><span class="token number">255</span><span class="token operator">:</span>
                z<span class="token operator">=</span><span class="token number">255</span>

            out_put<span class="token punctuation">[</span>i<span class="token punctuation">,</span> j<span class="token punctuation">]</span> <span class="token operator">=</span> x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> z

    cv2<span class="token punctuation">.</span><span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">'out_put'</span><span class="token punctuation">,</span>out_put<span class="token punctuation">)</span>
    cv2<span class="token punctuation">.</span><span class="token function">waitKey</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
</code></pre> 
<p>法二：</p> 
<pre><code class="prism language-javascript"><span class="token keyword">import</span> cv2

def <span class="token function">empty</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token operator">:</span>
    pass

cv2<span class="token punctuation">.</span><span class="token function">namedWindow</span><span class="token punctuation">(</span><span class="token string">"TrackBars"</span><span class="token punctuation">)</span>
cv2<span class="token punctuation">.</span><span class="token function">resizeWindow</span><span class="token punctuation">(</span><span class="token string">"TrackBars"</span><span class="token punctuation">,</span><span class="token number">650</span><span class="token punctuation">,</span><span class="token number">47</span><span class="token punctuation">)</span>
cv2<span class="token punctuation">.</span><span class="token function">createTrackbar</span><span class="token punctuation">(</span><span class="token string">"light"</span><span class="token punctuation">,</span><span class="token string">"TrackBars"</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">,</span>empty<span class="token punctuation">)</span>#这里设置light最大值为<span class="token number">100</span>

<span class="token keyword">while</span> <span class="token literal-property property">True</span><span class="token operator">:</span>
    img<span class="token operator">=</span> cv2<span class="token punctuation">.</span><span class="token function">imread</span><span class="token punctuation">(</span><span class="token string">'face.jpg'</span><span class="token punctuation">)</span>


    cv2<span class="token punctuation">.</span><span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">'img'</span><span class="token punctuation">,</span> img<span class="token punctuation">)</span>#这里展示一下原图

    light <span class="token operator">=</span> cv2<span class="token punctuation">.</span><span class="token function">getTrackbarPos</span><span class="token punctuation">(</span><span class="token string">"light"</span><span class="token punctuation">,</span> <span class="token string">"TrackBars"</span><span class="token punctuation">)</span>

    b<span class="token punctuation">,</span>g<span class="token punctuation">,</span>r<span class="token operator">=</span>cv2<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span>img<span class="token punctuation">)</span>

    b<span class="token operator">=</span>b<span class="token operator">+</span>light#这里注意相加的值不要超过<span class="token number">255</span>
    g<span class="token operator">=</span>g<span class="token operator">+</span>light#这里注意相加的值不要超过<span class="token number">255</span>
    r<span class="token operator">=</span>r<span class="token operator">+</span>light#这里注意相加的值不要超过<span class="token number">255</span>

    out_put<span class="token operator">=</span>cv2<span class="token punctuation">.</span><span class="token function">merge</span><span class="token punctuation">(</span><span class="token punctuation">(</span>b<span class="token punctuation">,</span>g<span class="token punctuation">,</span>r<span class="token punctuation">)</span><span class="token punctuation">)</span>

    cv2<span class="token punctuation">.</span><span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">'out_put'</span><span class="token punctuation">,</span>out_put<span class="token punctuation">)</span>
    cv2<span class="token punctuation">.</span><span class="token function">waitKey</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/d7/93/ABKg2spd_o.png" alt="在这里插入图片描述"><br> 这里明显右边的要白一点，雀斑也淡了一些</p> 
<h2><a id="cv2bilateralFilter_112"></a>（二）磨皮美白（cv2.bilateralFilter）</h2> 
<p>这主要用到cv2.bilateralFilter双边滤波函数</p> 
<table><thead><tr><th>参数</th><th>解释</th></tr></thead><tbody><tr><td>src</td><td>输入图像</td></tr><tr><td>d</td><td>过滤时周围每个像素领域的直径</td></tr><tr><td>sigmaColor</td><td>在color space中过滤sigma。参数越大，临近像素将会在越远的地方mix。</td></tr><tr><td>sigmaSpace</td><td>在coordinate space中过滤sigma。参数越大，那些颜色足够相近的的颜色的影响越大。</td></tr></tbody></table> 
<p>看看代码吧：</p> 
<pre><code class="prism language-javascript"><span class="token keyword">import</span> cv2


def <span class="token function">empty</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token operator">:</span>
    pass


cv2<span class="token punctuation">.</span><span class="token function">namedWindow</span><span class="token punctuation">(</span><span class="token string">"TrackBars"</span><span class="token punctuation">)</span>
cv2<span class="token punctuation">.</span><span class="token function">resizeWindow</span><span class="token punctuation">(</span><span class="token string">"TrackBars"</span><span class="token punctuation">,</span><span class="token number">650</span><span class="token punctuation">,</span><span class="token number">150</span><span class="token punctuation">)</span>
cv2<span class="token punctuation">.</span><span class="token function">createTrackbar</span><span class="token punctuation">(</span><span class="token string">"d"</span><span class="token punctuation">,</span><span class="token string">"TrackBars"</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">255</span><span class="token punctuation">,</span>empty<span class="token punctuation">)</span>
cv2<span class="token punctuation">.</span><span class="token function">createTrackbar</span><span class="token punctuation">(</span><span class="token string">"sigmaColor"</span><span class="token punctuation">,</span><span class="token string">"TrackBars"</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">255</span><span class="token punctuation">,</span>empty<span class="token punctuation">)</span>
cv2<span class="token punctuation">.</span><span class="token function">createTrackbar</span><span class="token punctuation">(</span><span class="token string">"sigmaSpace"</span><span class="token punctuation">,</span><span class="token string">"TrackBars"</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">255</span><span class="token punctuation">,</span>empty<span class="token punctuation">)</span>

<span class="token keyword">while</span> <span class="token literal-property property">True</span><span class="token operator">:</span>
    img<span class="token operator">=</span> cv2<span class="token punctuation">.</span><span class="token function">imread</span><span class="token punctuation">(</span><span class="token string">'face2.jpg'</span><span class="token punctuation">)</span>

    cv2<span class="token punctuation">.</span><span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">'img'</span><span class="token punctuation">,</span> img<span class="token punctuation">)</span>#这里展示一下原图

    d<span class="token operator">=</span>cv2<span class="token punctuation">.</span><span class="token function">getTrackbarPos</span><span class="token punctuation">(</span><span class="token string">"d"</span><span class="token punctuation">,</span><span class="token string">"TrackBars"</span><span class="token punctuation">)</span>
    sigmaColor<span class="token operator">=</span>cv2<span class="token punctuation">.</span><span class="token function">getTrackbarPos</span><span class="token punctuation">(</span><span class="token string">"sigmaColor"</span><span class="token punctuation">,</span> <span class="token string">"TrackBars"</span><span class="token punctuation">)</span>
    sigmaSpace<span class="token operator">=</span>cv2<span class="token punctuation">.</span><span class="token function">getTrackbarPos</span><span class="token punctuation">(</span><span class="token string">"sigmaSpace"</span><span class="token punctuation">,</span> <span class="token string">"TrackBars"</span><span class="token punctuation">)</span>

    output <span class="token operator">=</span> cv2<span class="token punctuation">.</span><span class="token function">bilateralFilter</span><span class="token punctuation">(</span>img<span class="token punctuation">,</span> d<span class="token punctuation">,</span> sigmaColor<span class="token punctuation">,</span> sigmaSpace<span class="token punctuation">)</span>#然而我不知道为什么，觉得这些雀斑挺可爱的

    #output<span class="token operator">=</span>cv2<span class="token punctuation">.</span><span class="token function">bilateralFilter</span><span class="token punctuation">(</span>img<span class="token punctuation">,</span><span class="token number">15</span><span class="token punctuation">,</span><span class="token number">35</span><span class="token punctuation">,</span><span class="token number">35</span><span class="token punctuation">)</span>#这里感觉这几个值效果较好，当然并不绝对
    cv2<span class="token punctuation">.</span><span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">'output'</span><span class="token punctuation">,</span>output<span class="token punctuation">)</span>
    cv2<span class="token punctuation">.</span><span class="token function">waitKey</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>

</code></pre> 
<p><img src="https://images2.imgbox.com/ca/3c/GgLEABDG_o.png" alt="在这里插入图片描述"><br> 这效果还是不错的，但不知为什么，我觉得这雀斑挺可爱的，好吧这时可能会有人说直男</p> 
<h2><a id="_155"></a>（三）瘦脸(局部平移算法)</h2> 
<p><img src="https://images2.imgbox.com/1b/c3/zabVrO4K_o.png" alt="在这里插入图片描述"></p> 
<p>这里需要用到到前一节中人脸关键点定位（68点），瘦左脸，计算3号点到5号点的距离作为瘦脸最大参考距离，瘦右脸，计算13号点到15号点的距离作为瘦脸的最大参考距离。这里实现的是简易瘦脸，不同的图像的效果不一样，下面有Trackbar调节瘦脸的程度</p> 
<pre><code class="prism language-javascript">#导入工具包
from scipy<span class="token punctuation">.</span>spatial <span class="token keyword">import</span> distance
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np
<span class="token keyword">import</span> dlib
<span class="token keyword">import</span> cv2
<span class="token keyword">import</span> math



detector <span class="token operator">=</span> dlib<span class="token punctuation">.</span><span class="token function">get_frontal_face_detector</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
predictor <span class="token operator">=</span> dlib<span class="token punctuation">.</span><span class="token function">shape_predictor</span><span class="token punctuation">(</span><span class="token string">'shape_predictor_68_face_landmarks.dat'</span><span class="token punctuation">)</span>

def <span class="token function">bilinear_insert</span><span class="token punctuation">(</span>image<span class="token punctuation">,</span> new_x<span class="token punctuation">,</span> new_y<span class="token punctuation">)</span><span class="token operator">:</span>
    <span class="token string">""</span>"
    双线性插值法
    <span class="token string">""</span>"
    w<span class="token punctuation">,</span> h<span class="token punctuation">,</span> c <span class="token operator">=</span> image<span class="token punctuation">.</span>shape
    <span class="token keyword">if</span> c <span class="token operator">==</span> <span class="token number">3</span><span class="token operator">:</span>
        x1 <span class="token operator">=</span> <span class="token function">int</span><span class="token punctuation">(</span>new_x<span class="token punctuation">)</span>
        x2 <span class="token operator">=</span> x1 <span class="token operator">+</span> <span class="token number">1</span>
        y1 <span class="token operator">=</span> <span class="token function">int</span><span class="token punctuation">(</span>new_y<span class="token punctuation">)</span>
        y2 <span class="token operator">=</span> y1 <span class="token operator">+</span> <span class="token number">1</span>

        part1 <span class="token operator">=</span> image<span class="token punctuation">[</span>y1<span class="token punctuation">,</span> x1<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">astype</span><span class="token punctuation">(</span>np<span class="token punctuation">.</span>float<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token function">float</span><span class="token punctuation">(</span>x2<span class="token punctuation">)</span> <span class="token operator">-</span> new_x<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token function">float</span><span class="token punctuation">(</span>y2<span class="token punctuation">)</span> <span class="token operator">-</span> new_y<span class="token punctuation">)</span>
        part2 <span class="token operator">=</span> image<span class="token punctuation">[</span>y1<span class="token punctuation">,</span> x2<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">astype</span><span class="token punctuation">(</span>np<span class="token punctuation">.</span>float<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span>new_x <span class="token operator">-</span> <span class="token function">float</span><span class="token punctuation">(</span>x1<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token function">float</span><span class="token punctuation">(</span>y2<span class="token punctuation">)</span> <span class="token operator">-</span> new_y<span class="token punctuation">)</span>
        part3 <span class="token operator">=</span> image<span class="token punctuation">[</span>y2<span class="token punctuation">,</span> x1<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">astype</span><span class="token punctuation">(</span>np<span class="token punctuation">.</span>float<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token function">float</span><span class="token punctuation">(</span>x2<span class="token punctuation">)</span> <span class="token operator">-</span> new_x<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span>new_y <span class="token operator">-</span> <span class="token function">float</span><span class="token punctuation">(</span>y1<span class="token punctuation">)</span><span class="token punctuation">)</span>
        part4 <span class="token operator">=</span> image<span class="token punctuation">[</span>y2<span class="token punctuation">,</span> x2<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">astype</span><span class="token punctuation">(</span>np<span class="token punctuation">.</span>float<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span>new_x <span class="token operator">-</span> <span class="token function">float</span><span class="token punctuation">(</span>x1<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span>new_y <span class="token operator">-</span> <span class="token function">float</span><span class="token punctuation">(</span>y1<span class="token punctuation">)</span><span class="token punctuation">)</span>

        insertValue <span class="token operator">=</span> part1 <span class="token operator">+</span> part2 <span class="token operator">+</span> part3 <span class="token operator">+</span> part4

        <span class="token keyword">return</span> insertValue<span class="token punctuation">.</span><span class="token function">astype</span><span class="token punctuation">(</span>np<span class="token punctuation">.</span>int8<span class="token punctuation">)</span>


def <span class="token function">local_traslation_warp</span><span class="token punctuation">(</span>image<span class="token punctuation">,</span> start_point<span class="token punctuation">,</span> end_point<span class="token punctuation">,</span> radius<span class="token punctuation">)</span><span class="token operator">:</span>
	<span class="token string">""</span>"
    局部平移算法
    <span class="token string">""</span>"
	radius_square <span class="token operator">=</span> math<span class="token punctuation">.</span><span class="token function">pow</span><span class="token punctuation">(</span>radius<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>
	image_cp <span class="token operator">=</span> image<span class="token punctuation">.</span><span class="token function">copy</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	dist_se <span class="token operator">=</span> math<span class="token punctuation">.</span><span class="token function">pow</span><span class="token punctuation">(</span>np<span class="token punctuation">.</span>linalg<span class="token punctuation">.</span><span class="token function">norm</span><span class="token punctuation">(</span>end_point <span class="token operator">-</span> start_point<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>
	height<span class="token punctuation">,</span> width<span class="token punctuation">,</span> channel <span class="token operator">=</span> image<span class="token punctuation">.</span>shape
	<span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token function">range</span><span class="token punctuation">(</span>width<span class="token punctuation">)</span><span class="token operator">:</span>
		<span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token function">range</span><span class="token punctuation">(</span>height<span class="token punctuation">)</span><span class="token operator">:</span>
			# 计算该点是否在形变圆的范围之内
			# 优化，第一步，直接判断是会在（start_point<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> start_point<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>的矩阵框中
			<span class="token keyword">if</span> math<span class="token punctuation">.</span><span class="token function">fabs</span><span class="token punctuation">(</span>i <span class="token operator">-</span> start_point<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> radius and math<span class="token punctuation">.</span><span class="token function">fabs</span><span class="token punctuation">(</span>j <span class="token operator">-</span> start_point<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> radius<span class="token operator">:</span>
				<span class="token keyword">continue</span>

			distance <span class="token operator">=</span> <span class="token punctuation">(</span>i <span class="token operator">-</span> start_point<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span>i <span class="token operator">-</span> start_point<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token punctuation">(</span>j <span class="token operator">-</span> start_point<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span>j <span class="token operator">-</span> start_point<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span>distance <span class="token operator">&lt;</span> radius_square<span class="token punctuation">)</span><span class="token operator">:</span>
				# 计算出（i<span class="token punctuation">,</span>j）坐标的原坐标
				# 计算公式中右边平方号里的部分
				ratio <span class="token operator">=</span> <span class="token punctuation">(</span>radius_square <span class="token operator">-</span> distance<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token punctuation">(</span>radius_square <span class="token operator">-</span> distance <span class="token operator">+</span> dist_se<span class="token punctuation">)</span>
				ratio <span class="token operator">=</span> ratio <span class="token operator">*</span> ratio

				# 映射原位置
				new_x <span class="token operator">=</span> i <span class="token operator">-</span> ratio <span class="token operator">*</span> <span class="token punctuation">(</span>end_point<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">-</span> start_point<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
				new_y <span class="token operator">=</span> j <span class="token operator">-</span> ratio <span class="token operator">*</span> <span class="token punctuation">(</span>end_point<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">-</span> start_point<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

				new_x <span class="token operator">=</span> new_x <span class="token keyword">if</span> new_x <span class="token operator">&gt;=</span> <span class="token number">0</span> <span class="token keyword">else</span> <span class="token number">0</span>
				new_x <span class="token operator">=</span> new_x <span class="token keyword">if</span> new_x <span class="token operator">&lt;</span> height <span class="token operator">-</span> <span class="token number">1</span> <span class="token keyword">else</span> height <span class="token operator">-</span> <span class="token number">2</span>
				new_y <span class="token operator">=</span> new_y <span class="token keyword">if</span> new_y <span class="token operator">&gt;=</span> <span class="token number">0</span> <span class="token keyword">else</span> <span class="token number">0</span>
				new_y <span class="token operator">=</span> new_y <span class="token keyword">if</span> new_y <span class="token operator">&lt;</span> width <span class="token operator">-</span> <span class="token number">1</span> <span class="token keyword">else</span> width <span class="token operator">-</span> <span class="token number">2</span>

				# 根据双线性插值法得到new_x<span class="token punctuation">,</span> new_y的值
				image_cp<span class="token punctuation">[</span>j<span class="token punctuation">,</span> i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">bilinear_insert</span><span class="token punctuation">(</span>image<span class="token punctuation">,</span> new_x<span class="token punctuation">,</span> new_y<span class="token punctuation">)</span>

	<span class="token keyword">return</span> image_cp

def <span class="token function">empty</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token operator">:</span>
    pass

cv2<span class="token punctuation">.</span><span class="token function">namedWindow</span><span class="token punctuation">(</span><span class="token string">"TrackBars"</span><span class="token punctuation">)</span>
cv2<span class="token punctuation">.</span><span class="token function">resizeWindow</span><span class="token punctuation">(</span><span class="token string">"TrackBars"</span><span class="token punctuation">,</span> <span class="token number">650</span><span class="token punctuation">,</span> <span class="token number">70</span><span class="token punctuation">)</span>
cv2<span class="token punctuation">.</span><span class="token function">createTrackbar</span><span class="token punctuation">(</span><span class="token string">"dist_left"</span><span class="token punctuation">,</span> <span class="token string">"TrackBars"</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> empty<span class="token punctuation">)</span>  # 这里设置dist_left最大值为<span class="token number">100</span>
cv2<span class="token punctuation">.</span><span class="token function">createTrackbar</span><span class="token punctuation">(</span><span class="token string">"dist_right"</span><span class="token punctuation">,</span> <span class="token string">"TrackBars"</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> empty<span class="token punctuation">)</span>  # 这里设置dist_right最大值为<span class="token number">100</span>

<span class="token keyword">while</span> <span class="token literal-property property">True</span><span class="token operator">:</span>

	img<span class="token operator">=</span>cv2<span class="token punctuation">.</span><span class="token function">imread</span><span class="token punctuation">(</span><span class="token string">'1.jpg'</span><span class="token punctuation">)</span>
	img1<span class="token operator">=</span>img<span class="token punctuation">.</span><span class="token function">copy</span><span class="token punctuation">(</span><span class="token punctuation">)</span>


	gray <span class="token operator">=</span> cv2<span class="token punctuation">.</span><span class="token function">cvtColor</span><span class="token punctuation">(</span>img<span class="token punctuation">,</span> cv2<span class="token punctuation">.</span><span class="token constant">COLOR_BGR2GRAY</span><span class="token punctuation">)</span>

	# 检测人脸
	rects <span class="token operator">=</span> <span class="token function">detector</span><span class="token punctuation">(</span>gray<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>

	# 遍历每一个检测到的人脸
	<span class="token keyword">for</span> rect <span class="token keyword">in</span> <span class="token literal-property property">rects</span><span class="token operator">:</span>
		# 获取坐标
		result <span class="token operator">=</span> <span class="token function">predictor</span><span class="token punctuation">(</span>gray<span class="token punctuation">,</span> rect<span class="token punctuation">)</span>
		result<span class="token operator">=</span>result<span class="token punctuation">.</span><span class="token function">parts</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		points <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>p<span class="token punctuation">.</span>x<span class="token punctuation">,</span> p<span class="token punctuation">.</span>y<span class="token punctuation">]</span> <span class="token keyword">for</span> p <span class="token keyword">in</span> result<span class="token punctuation">]</span>
		<span class="token function">#print</span><span class="token punctuation">(</span><span class="token function">type</span><span class="token punctuation">(</span>points<span class="token punctuation">)</span><span class="token punctuation">)</span>#类型为list


		points<span class="token operator">=</span>np<span class="token punctuation">.</span><span class="token function">array</span><span class="token punctuation">(</span>points<span class="token punctuation">)</span>#这里需将上面的points转化为数组
		<span class="token function">#print</span><span class="token punctuation">(</span>points<span class="token punctuation">)</span>

		<span class="token keyword">for</span> <span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span> <span class="token keyword">in</span> points<span class="token punctuation">[</span><span class="token operator">:</span><span class="token punctuation">]</span><span class="token operator">:</span>
			# <span class="token function">print</span><span class="token punctuation">(</span>rects<span class="token punctuation">.</span><span class="token function">parts</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
			cv2<span class="token punctuation">.</span><span class="token function">circle</span><span class="token punctuation">(</span>img1<span class="token punctuation">,</span> <span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>  # 还是原谅色

	#这一块主要用来瘦脸
	############################################################################################

		#out_put <span class="token operator">=</span> <span class="token function">thin_face</span><span class="token punctuation">(</span>img<span class="token punctuation">,</span> points<span class="token punctuation">)</span>

		end_point <span class="token operator">=</span> points<span class="token punctuation">[</span><span class="token number">29</span><span class="token punctuation">]</span>  # <span class="token number">30</span>号点

		# 瘦左脸，计算<span class="token number">3</span>号点到<span class="token number">5</span>号点的距离作为瘦脸最大参考距离
		dist_left <span class="token operator">=</span> distance<span class="token punctuation">.</span><span class="token function">euclidean</span><span class="token punctuation">(</span>points<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> points<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
		<span class="token function">print</span><span class="token punctuation">(</span>dist_left<span class="token punctuation">)</span>

		dist_left <span class="token operator">=</span> cv2<span class="token punctuation">.</span><span class="token function">getTrackbarPos</span><span class="token punctuation">(</span><span class="token string">"dist_left"</span><span class="token punctuation">,</span> <span class="token string">"TrackBars"</span><span class="token punctuation">)</span>
		out_put <span class="token operator">=</span> <span class="token function">local_traslation_warp</span><span class="token punctuation">(</span>img<span class="token punctuation">,</span> points<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> end_point<span class="token punctuation">,</span> dist_left<span class="token punctuation">)</span>

		# 瘦右脸，计算<span class="token number">13</span>号点到<span class="token number">15</span>号点的距离作为瘦脸的最大参考距离
		dist_right <span class="token operator">=</span> distance<span class="token punctuation">.</span><span class="token function">euclidean</span><span class="token punctuation">(</span>points<span class="token punctuation">[</span><span class="token number">13</span><span class="token punctuation">]</span><span class="token punctuation">,</span> points<span class="token punctuation">[</span><span class="token number">15</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
		<span class="token function">print</span><span class="token punctuation">(</span>dist_right<span class="token punctuation">)</span>

		dist_right <span class="token operator">=</span> cv2<span class="token punctuation">.</span><span class="token function">getTrackbarPos</span><span class="token punctuation">(</span><span class="token string">"dist_right"</span><span class="token punctuation">,</span> <span class="token string">"TrackBars"</span><span class="token punctuation">)</span>
		out_put <span class="token operator">=</span> <span class="token function">local_traslation_warp</span><span class="token punctuation">(</span>out_put<span class="token punctuation">,</span> points<span class="token punctuation">[</span><span class="token number">14</span><span class="token punctuation">]</span><span class="token punctuation">,</span> end_point<span class="token punctuation">,</span> dist_right<span class="token punctuation">)</span>

	############################################################################################
		cv2<span class="token punctuation">.</span><span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">"img"</span><span class="token punctuation">,</span> img<span class="token punctuation">)</span>
		cv2<span class="token punctuation">.</span><span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">'img1'</span><span class="token punctuation">,</span>img1<span class="token punctuation">)</span>
		cv2<span class="token punctuation">.</span><span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">"out_put"</span><span class="token punctuation">,</span>out_put<span class="token punctuation">)</span>
		cv2<span class="token punctuation">.</span><span class="token function">waitKey</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>


</code></pre> 
<p><img src="https://images2.imgbox.com/d6/85/FAsD3EMq_o.png" alt="在这里插入图片描述"><br> 上面分别是原图、人脸关键点的定位图、瘦脸结果图。虽然结果不明显，但是还是可以勉强可以看出下面的结果图的脸颊两侧要略瘦</p> 
<h2><a id="_302"></a>（四）红唇</h2> 
<p>这个就比较简单了，找到嘴唇部分的关键点，然后凸包填充就可以了,当然只要你愿意，你可以对下面代码中red_lip（）函数进行修改，对颜色及深度做更为细致的修改</p> 
<pre><code class="prism language-javascript"><span class="token keyword">import</span> numpy <span class="token keyword">as</span> np
<span class="token keyword">import</span> dlib
<span class="token keyword">import</span> cv2

detector <span class="token operator">=</span> dlib<span class="token punctuation">.</span><span class="token function">get_frontal_face_detector</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
predictor <span class="token operator">=</span> dlib<span class="token punctuation">.</span><span class="token function">shape_predictor</span><span class="token punctuation">(</span><span class="token string">'shape_predictor_68_face_landmarks.dat'</span><span class="token punctuation">)</span>


def <span class="token function">red_lip</span><span class="token punctuation">(</span>img<span class="token punctuation">,</span> points<span class="token punctuation">,</span> color<span class="token punctuation">)</span><span class="token operator">:</span>  # 其实在里并不严谨，因为在里将牙齿也变红了，其所也不难，只要在扣嘴唇轮廓时将牙齿i轮廓给扣调就可以了
	hull <span class="token operator">=</span> cv2<span class="token punctuation">.</span><span class="token function">convexHull</span><span class="token punctuation">(</span>points<span class="token punctuation">)</span>  # 先计算嘴唇凸包（即获取嘴唇轮廓）

	#  为了不影响图片效果，因为后面是将两张图片加权叠加，所以下面先生成和原图大小相同的图片，并在上面绘制嘴唇轮廓
	mask <span class="token operator">=</span> np<span class="token punctuation">.</span><span class="token function">zeros_like</span><span class="token punctuation">(</span>gray<span class="token punctuation">)</span>
	cv2<span class="token punctuation">.</span><span class="token function">fillPoly</span><span class="token punctuation">(</span>mask<span class="token punctuation">,</span> np<span class="token punctuation">.</span><span class="token function">array</span><span class="token punctuation">(</span><span class="token punctuation">[</span>hull<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">)</span>
	roi <span class="token operator">=</span> cv2<span class="token punctuation">.</span><span class="token function">bitwise_and</span><span class="token punctuation">(</span>gray<span class="token punctuation">,</span> gray<span class="token punctuation">,</span> mask<span class="token operator">=</span>mask<span class="token punctuation">)</span>
	roi <span class="token operator">=</span> np<span class="token punctuation">.</span><span class="token function">stack</span><span class="token punctuation">(</span><span class="token punctuation">(</span>roi<span class="token punctuation">,</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">3</span><span class="token punctuation">,</span> axis<span class="token operator">=</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>

	roi <span class="token operator">=</span> cv2<span class="token punctuation">.</span><span class="token function">drawContours</span><span class="token punctuation">(</span>roi<span class="token punctuation">,</span> <span class="token punctuation">[</span>hull<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> color<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
	cv2<span class="token punctuation">.</span><span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">"roi"</span><span class="token punctuation">,</span> roi<span class="token punctuation">)</span>

	image <span class="token operator">=</span> cv2<span class="token punctuation">.</span><span class="token function">addWeighted</span><span class="token punctuation">(</span>roi<span class="token punctuation">,</span> <span class="token number">0.2</span><span class="token punctuation">,</span> img<span class="token punctuation">.</span><span class="token function">copy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0.9</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
	<span class="token keyword">return</span> image


def <span class="token function">empty</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token operator">:</span>
	pass


cv2<span class="token punctuation">.</span><span class="token function">namedWindow</span><span class="token punctuation">(</span><span class="token string">"TrackBars"</span><span class="token punctuation">)</span>
cv2<span class="token punctuation">.</span><span class="token function">resizeWindow</span><span class="token punctuation">(</span><span class="token string">"TrackBars"</span><span class="token punctuation">,</span> <span class="token number">650</span><span class="token punctuation">,</span> <span class="token number">70</span><span class="token punctuation">)</span>
cv2<span class="token punctuation">.</span><span class="token function">createTrackbar</span><span class="token punctuation">(</span><span class="token string">"color"</span><span class="token punctuation">,</span> <span class="token string">"TrackBars"</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> empty<span class="token punctuation">)</span>  # 这里设置color最大值为<span class="token number">255</span>

<span class="token keyword">while</span> <span class="token literal-property property">True</span><span class="token operator">:</span>

	img <span class="token operator">=</span> cv2<span class="token punctuation">.</span><span class="token function">imread</span><span class="token punctuation">(</span><span class="token string">'input/1.png'</span><span class="token punctuation">)</span>
	img1 <span class="token operator">=</span> img<span class="token punctuation">.</span><span class="token function">copy</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	img2 <span class="token operator">=</span> img<span class="token punctuation">.</span><span class="token function">copy</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	gray <span class="token operator">=</span> cv2<span class="token punctuation">.</span><span class="token function">cvtColor</span><span class="token punctuation">(</span>img<span class="token punctuation">,</span> cv2<span class="token punctuation">.</span><span class="token constant">COLOR_BGR2GRAY</span><span class="token punctuation">)</span>

	# 检测人脸
	rects <span class="token operator">=</span> <span class="token function">detector</span><span class="token punctuation">(</span>gray<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>

	# 遍历每一个检测到的人脸
	<span class="token keyword">for</span> rect <span class="token keyword">in</span> <span class="token literal-property property">rects</span><span class="token operator">:</span>
		# 获取坐标
		result <span class="token operator">=</span> <span class="token function">predictor</span><span class="token punctuation">(</span>gray<span class="token punctuation">,</span> rect<span class="token punctuation">)</span>
		result <span class="token operator">=</span> result<span class="token punctuation">.</span><span class="token function">parts</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		points <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>p<span class="token punctuation">.</span>x<span class="token punctuation">,</span> p<span class="token punctuation">.</span>y<span class="token punctuation">]</span> <span class="token keyword">for</span> p <span class="token keyword">in</span> result<span class="token punctuation">]</span>
		# <span class="token function">print</span><span class="token punctuation">(</span><span class="token function">type</span><span class="token punctuation">(</span>points<span class="token punctuation">)</span><span class="token punctuation">)</span>#类型为list

		points <span class="token operator">=</span> np<span class="token punctuation">.</span><span class="token function">array</span><span class="token punctuation">(</span>points<span class="token punctuation">)</span>  # 这里需将上面的points转化为数组
		# <span class="token function">print</span><span class="token punctuation">(</span>points<span class="token punctuation">)</span>

		<span class="token keyword">for</span> <span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span> <span class="token keyword">in</span> points<span class="token punctuation">[</span><span class="token operator">:</span><span class="token punctuation">]</span><span class="token operator">:</span>
			# <span class="token function">print</span><span class="token punctuation">(</span>rects<span class="token punctuation">.</span><span class="token function">parts</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
			cv2<span class="token punctuation">.</span><span class="token function">circle</span><span class="token punctuation">(</span>img1<span class="token punctuation">,</span> <span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>  # 还是原谅色

		# 嘴唇变红
		color <span class="token operator">=</span> cv2<span class="token punctuation">.</span><span class="token function">getTrackbarPos</span><span class="token punctuation">(</span><span class="token string">"color"</span><span class="token punctuation">,</span> <span class="token string">"TrackBars"</span><span class="token punctuation">)</span>
		p <span class="token operator">=</span> points<span class="token punctuation">[</span><span class="token number">48</span><span class="token operator">:</span><span class="token number">68</span><span class="token punctuation">]</span>  # 嘴唇点集分布
		img2 <span class="token operator">=</span> <span class="token function">red_lip</span><span class="token punctuation">(</span>img<span class="token punctuation">,</span> p<span class="token punctuation">,</span> color<span class="token punctuation">)</span>
		# color<span class="token operator">:</span> 调节嘴唇的颜色深度

		cv2<span class="token punctuation">.</span><span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">"img"</span><span class="token punctuation">,</span> img<span class="token punctuation">)</span>
		cv2<span class="token punctuation">.</span><span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">'img1'</span><span class="token punctuation">,</span> img1<span class="token punctuation">)</span>
		cv2<span class="token punctuation">.</span><span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">"out_put"</span><span class="token punctuation">,</span> img2<span class="token punctuation">)</span>
		cv2<span class="token punctuation">.</span><span class="token function">waitKey</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>


</code></pre> 
<p><img src="https://images2.imgbox.com/b1/a9/i1edqtoQ_o.png" alt="在这里插入图片描述"></p> 
<p>这个效果就很明显了，可能小伙伴们觉得颜色不够红，这里给小伙伴们提供一个方法就是，在增加一个TrackBar用来控制红色的透明度，小伙伴们还可以多添加几个TrackBar用来改变嘴唇的颜色，这里就不写了，交由小伙伴们自行发挥。</p> 
<h2><a id="_382"></a>（五）放大眼睛（局部缩放算法）</h2> 
<p>这里我所以左右眼的最左点与最点的中点为中心进行缩放的，小伙伴们也可以用左右眼的上下斜对角点看看，其中下面代码中radius: 眼睛放大范围半径 strength：眼睛放大程度。</p> 
<pre><code class="prism language-javascript"><span class="token keyword">import</span> numpy <span class="token keyword">as</span> np
<span class="token keyword">import</span> dlib
<span class="token keyword">import</span> cv2
<span class="token keyword">import</span> math



detector <span class="token operator">=</span> dlib<span class="token punctuation">.</span><span class="token function">get_frontal_face_detector</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
predictor <span class="token operator">=</span> dlib<span class="token punctuation">.</span><span class="token function">shape_predictor</span><span class="token punctuation">(</span><span class="token string">'shape_predictor_68_face_landmarks.dat'</span><span class="token punctuation">)</span>

def <span class="token function">bilinear_insert</span><span class="token punctuation">(</span>image<span class="token punctuation">,</span> new_x<span class="token punctuation">,</span> new_y<span class="token punctuation">)</span><span class="token operator">:</span>
    <span class="token string">""</span>"
    双线性插值法
    <span class="token string">""</span>"
    w<span class="token punctuation">,</span> h<span class="token punctuation">,</span> c <span class="token operator">=</span> image<span class="token punctuation">.</span>shape
    <span class="token keyword">if</span> c <span class="token operator">==</span> <span class="token number">3</span><span class="token operator">:</span>
        x1 <span class="token operator">=</span> <span class="token function">int</span><span class="token punctuation">(</span>new_x<span class="token punctuation">)</span>
        x2 <span class="token operator">=</span> x1 <span class="token operator">+</span> <span class="token number">1</span>
        y1 <span class="token operator">=</span> <span class="token function">int</span><span class="token punctuation">(</span>new_y<span class="token punctuation">)</span>
        y2 <span class="token operator">=</span> y1 <span class="token operator">+</span> <span class="token number">1</span>

        part1 <span class="token operator">=</span> image<span class="token punctuation">[</span>y1<span class="token punctuation">,</span> x1<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">astype</span><span class="token punctuation">(</span>np<span class="token punctuation">.</span>float<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token function">float</span><span class="token punctuation">(</span>x2<span class="token punctuation">)</span> <span class="token operator">-</span> new_x<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token function">float</span><span class="token punctuation">(</span>y2<span class="token punctuation">)</span> <span class="token operator">-</span> new_y<span class="token punctuation">)</span>
        part2 <span class="token operator">=</span> image<span class="token punctuation">[</span>y1<span class="token punctuation">,</span> x2<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">astype</span><span class="token punctuation">(</span>np<span class="token punctuation">.</span>float<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span>new_x <span class="token operator">-</span> <span class="token function">float</span><span class="token punctuation">(</span>x1<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token function">float</span><span class="token punctuation">(</span>y2<span class="token punctuation">)</span> <span class="token operator">-</span> new_y<span class="token punctuation">)</span>
        part3 <span class="token operator">=</span> image<span class="token punctuation">[</span>y2<span class="token punctuation">,</span> x1<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">astype</span><span class="token punctuation">(</span>np<span class="token punctuation">.</span>float<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token function">float</span><span class="token punctuation">(</span>x2<span class="token punctuation">)</span> <span class="token operator">-</span> new_x<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span>new_y <span class="token operator">-</span> <span class="token function">float</span><span class="token punctuation">(</span>y1<span class="token punctuation">)</span><span class="token punctuation">)</span>
        part4 <span class="token operator">=</span> image<span class="token punctuation">[</span>y2<span class="token punctuation">,</span> x2<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">astype</span><span class="token punctuation">(</span>np<span class="token punctuation">.</span>float<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span>new_x <span class="token operator">-</span> <span class="token function">float</span><span class="token punctuation">(</span>x1<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span>new_y <span class="token operator">-</span> <span class="token function">float</span><span class="token punctuation">(</span>y1<span class="token punctuation">)</span><span class="token punctuation">)</span>

        insertValue <span class="token operator">=</span> part1 <span class="token operator">+</span> part2 <span class="token operator">+</span> part3 <span class="token operator">+</span> part4

        <span class="token keyword">return</span> insertValue<span class="token punctuation">.</span><span class="token function">astype</span><span class="token punctuation">(</span>np<span class="token punctuation">.</span>int8<span class="token punctuation">)</span>


def <span class="token function">local_zoom_warp</span><span class="token punctuation">(</span>image<span class="token punctuation">,</span> point<span class="token punctuation">,</span> radius<span class="token punctuation">,</span> strength<span class="token punctuation">)</span><span class="token operator">:</span>
    <span class="token string">""</span>"
    图像局部缩放算法
    <span class="token string">""</span>"
    height <span class="token operator">=</span> image<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
    width <span class="token operator">=</span> image<span class="token punctuation">.</span>shape<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
    left <span class="token operator">=</span><span class="token function">int</span><span class="token punctuation">(</span>point<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">-</span> radius<span class="token punctuation">)</span> <span class="token keyword">if</span> point<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">-</span> radius <span class="token operator">&gt;=</span> <span class="token number">0</span> <span class="token keyword">else</span> <span class="token number">0</span>
    top <span class="token operator">=</span> <span class="token function">int</span><span class="token punctuation">(</span>point<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">-</span> radius<span class="token punctuation">)</span> <span class="token keyword">if</span> point<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">-</span> radius <span class="token operator">&gt;=</span> <span class="token number">0</span> <span class="token keyword">else</span> <span class="token number">0</span>
    right <span class="token operator">=</span> <span class="token function">int</span><span class="token punctuation">(</span>point<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">+</span> radius<span class="token punctuation">)</span> <span class="token keyword">if</span> point<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">+</span> radius <span class="token operator">&lt;</span> width <span class="token keyword">else</span> width<span class="token operator">-</span><span class="token number">1</span>
    bottom <span class="token operator">=</span> <span class="token function">int</span><span class="token punctuation">(</span>point<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> radius<span class="token punctuation">)</span> <span class="token keyword">if</span> point<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> radius <span class="token operator">&lt;</span> height  <span class="token keyword">else</span> height<span class="token operator">-</span><span class="token number">1</span>

    radius_square <span class="token operator">=</span> math<span class="token punctuation">.</span><span class="token function">pow</span><span class="token punctuation">(</span>radius<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>
    <span class="token keyword">for</span> y <span class="token keyword">in</span> <span class="token function">range</span><span class="token punctuation">(</span>top<span class="token punctuation">,</span> bottom<span class="token punctuation">)</span><span class="token operator">:</span>
        offset_y <span class="token operator">=</span> y <span class="token operator">-</span> point<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
        <span class="token keyword">for</span> x <span class="token keyword">in</span> <span class="token function">range</span><span class="token punctuation">(</span>left<span class="token punctuation">,</span> right<span class="token punctuation">)</span><span class="token operator">:</span>
            offset_x <span class="token operator">=</span> x <span class="token operator">-</span> point<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
            dist_xy <span class="token operator">=</span> offset_x <span class="token operator">*</span> offset_x <span class="token operator">+</span> offset_y <span class="token operator">*</span> offset_y

            <span class="token keyword">if</span> dist_xy <span class="token operator">&lt;=</span> radius_square<span class="token operator">:</span>
                scale <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">-</span> dist_xy <span class="token operator">/</span> radius_square
                scale <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">-</span> strength <span class="token operator">/</span> <span class="token number">100</span> <span class="token operator">*</span> scale
                new_x <span class="token operator">=</span> offset_x <span class="token operator">*</span> scale <span class="token operator">+</span> point<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
                new_y <span class="token operator">=</span> offset_y <span class="token operator">*</span> scale <span class="token operator">+</span> point<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
                new_x <span class="token operator">=</span> new_x <span class="token keyword">if</span> new_x <span class="token operator">&gt;=</span><span class="token number">0</span> <span class="token keyword">else</span> <span class="token number">0</span>
                new_x <span class="token operator">=</span> new_x <span class="token keyword">if</span> new_x <span class="token operator">&lt;</span> height<span class="token operator">-</span><span class="token number">1</span> <span class="token keyword">else</span> height<span class="token operator">-</span><span class="token number">2</span>
                new_y <span class="token operator">=</span> new_y <span class="token keyword">if</span> new_y <span class="token operator">&gt;=</span> <span class="token number">0</span> <span class="token keyword">else</span> <span class="token number">0</span>
                new_y <span class="token operator">=</span> new_y <span class="token keyword">if</span> new_y <span class="token operator">&lt;</span> width<span class="token operator">-</span><span class="token number">1</span> <span class="token keyword">else</span> width<span class="token operator">-</span><span class="token number">2</span>

                image<span class="token punctuation">[</span>y<span class="token punctuation">,</span> x<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">bilinear_insert</span><span class="token punctuation">(</span>image<span class="token punctuation">,</span> new_x<span class="token punctuation">,</span> new_y<span class="token punctuation">)</span>

def <span class="token function">empty</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token operator">:</span>
    pass

cv2<span class="token punctuation">.</span><span class="token function">namedWindow</span><span class="token punctuation">(</span><span class="token string">"TrackBars"</span><span class="token punctuation">)</span>
cv2<span class="token punctuation">.</span><span class="token function">resizeWindow</span><span class="token punctuation">(</span><span class="token string">"TrackBars"</span><span class="token punctuation">,</span> <span class="token number">650</span><span class="token punctuation">,</span> <span class="token number">70</span><span class="token punctuation">)</span>
cv2<span class="token punctuation">.</span><span class="token function">createTrackbar</span><span class="token punctuation">(</span><span class="token string">"radius"</span><span class="token punctuation">,</span> <span class="token string">"TrackBars"</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> empty<span class="token punctuation">)</span>  # 这里设置dist_left最大值为<span class="token number">100</span>
cv2<span class="token punctuation">.</span><span class="token function">createTrackbar</span><span class="token punctuation">(</span><span class="token string">"strength"</span><span class="token punctuation">,</span> <span class="token string">"TrackBars"</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> empty<span class="token punctuation">)</span>  # 这里设置dist_right最大值为<span class="token number">100</span>

<span class="token keyword">while</span> <span class="token literal-property property">True</span><span class="token operator">:</span>

	img<span class="token operator">=</span>cv2<span class="token punctuation">.</span><span class="token function">imread</span><span class="token punctuation">(</span><span class="token string">'1.jpg'</span><span class="token punctuation">)</span>
	img1<span class="token operator">=</span>img<span class="token punctuation">.</span><span class="token function">copy</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	img2<span class="token operator">=</span>img<span class="token punctuation">.</span><span class="token function">copy</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	gray <span class="token operator">=</span> cv2<span class="token punctuation">.</span><span class="token function">cvtColor</span><span class="token punctuation">(</span>img<span class="token punctuation">,</span> cv2<span class="token punctuation">.</span><span class="token constant">COLOR_BGR2GRAY</span><span class="token punctuation">)</span>

	# 检测人脸
	rects <span class="token operator">=</span> <span class="token function">detector</span><span class="token punctuation">(</span>gray<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>

	# 遍历每一个检测到的人脸
	<span class="token keyword">for</span> rect <span class="token keyword">in</span> <span class="token literal-property property">rects</span><span class="token operator">:</span>
		# 获取坐标
		result <span class="token operator">=</span> <span class="token function">predictor</span><span class="token punctuation">(</span>gray<span class="token punctuation">,</span> rect<span class="token punctuation">)</span>
		result<span class="token operator">=</span>result<span class="token punctuation">.</span><span class="token function">parts</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		points <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span>p<span class="token punctuation">.</span>x<span class="token punctuation">,</span> p<span class="token punctuation">.</span>y<span class="token punctuation">]</span> <span class="token keyword">for</span> p <span class="token keyword">in</span> result<span class="token punctuation">]</span>
		<span class="token function">#print</span><span class="token punctuation">(</span><span class="token function">type</span><span class="token punctuation">(</span>points<span class="token punctuation">)</span><span class="token punctuation">)</span>#类型为list


		points<span class="token operator">=</span>np<span class="token punctuation">.</span><span class="token function">array</span><span class="token punctuation">(</span>points<span class="token punctuation">)</span>#这里需将上面的points转化为数组
		<span class="token function">#print</span><span class="token punctuation">(</span>points<span class="token punctuation">)</span>

		<span class="token keyword">for</span> <span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span> <span class="token keyword">in</span> points<span class="token punctuation">[</span><span class="token operator">:</span><span class="token punctuation">]</span><span class="token operator">:</span>
			# <span class="token function">print</span><span class="token punctuation">(</span>rects<span class="token punctuation">.</span><span class="token function">parts</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
			cv2<span class="token punctuation">.</span><span class="token function">circle</span><span class="token punctuation">(</span>img1<span class="token punctuation">,</span> <span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>  # 还是原谅色

		# 以左眼最左点和最右点之间的中点为圆心
		left_eye_top <span class="token operator">=</span> points<span class="token punctuation">[</span><span class="token number">42</span><span class="token punctuation">]</span>
		left_eye_bottom <span class="token operator">=</span> points<span class="token punctuation">[</span><span class="token number">46</span><span class="token punctuation">]</span>
		left_eye_center <span class="token operator">=</span> <span class="token punctuation">(</span>left_eye_top <span class="token operator">+</span> left_eye_bottom<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span>
		# 以右眼最左点和最右点之间的中点为圆心
		right_eye_top <span class="token operator">=</span> points<span class="token punctuation">[</span><span class="token number">36</span><span class="token punctuation">]</span>
		right_eye_bottom <span class="token operator">=</span> points<span class="token punctuation">[</span><span class="token number">40</span><span class="token punctuation">]</span>
		right_eye_center <span class="token operator">=</span> <span class="token punctuation">(</span>right_eye_top <span class="token operator">+</span> right_eye_bottom<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span>


		# 放大双眼
		radius<span class="token operator">=</span>cv2<span class="token punctuation">.</span><span class="token function">getTrackbarPos</span><span class="token punctuation">(</span><span class="token string">"radius"</span><span class="token punctuation">,</span> <span class="token string">"TrackBars"</span><span class="token punctuation">)</span>
		strength<span class="token operator">=</span>cv2<span class="token punctuation">.</span><span class="token function">getTrackbarPos</span><span class="token punctuation">(</span><span class="token string">"strength"</span><span class="token punctuation">,</span> <span class="token string">"TrackBars"</span><span class="token punctuation">)</span>
		<span class="token function">local_zoom_warp</span><span class="token punctuation">(</span>img2<span class="token punctuation">,</span> left_eye_center<span class="token punctuation">,</span> radius<span class="token operator">=</span>radius<span class="token punctuation">,</span> strength<span class="token operator">=</span>strength<span class="token punctuation">)</span>
		<span class="token function">local_zoom_warp</span><span class="token punctuation">(</span>img2<span class="token punctuation">,</span> right_eye_center<span class="token punctuation">,</span> radius<span class="token operator">=</span>radius<span class="token punctuation">,</span> strength<span class="token operator">=</span>strength<span class="token punctuation">)</span>
		#radius<span class="token operator">:</span> 眼睛放大范围半径 strength：眼睛放大程度

		cv2<span class="token punctuation">.</span><span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">"img"</span><span class="token punctuation">,</span> img<span class="token punctuation">)</span>
		cv2<span class="token punctuation">.</span><span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">'img1'</span><span class="token punctuation">,</span>img1<span class="token punctuation">)</span>
		cv2<span class="token punctuation">.</span><span class="token function">imshow</span><span class="token punctuation">(</span><span class="token string">"out_put"</span><span class="token punctuation">,</span>img2<span class="token punctuation">)</span>
		cv2<span class="token punctuation">.</span><span class="token function">waitKey</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>

</code></pre> 
<p><img src="https://images2.imgbox.com/36/c0/tac7WX7P_o.png" alt="在这里插入图片描述"></p> 
<p>这里小伙伴们可能看不出明显效果，但是效果还是有的，因为我在拖动Trackbars可以明显的看到眼睛变大的过程，当然这里面还有很多需要优化的地方，就不细说了</p> 
<h2><a id="_508"></a>（六）备注</h2> 
<p>最近忙于炼丹，等后面有时间就开始写一些关于视觉方面的深度学习相关的例程，还有就是下次可能会写一个简单的头部姿态估计</p> 
<h2><a id="_512"></a>（七）结语</h2> 
<p>学习opencv有很多的方法，我的建议是你可以加一些群，可以充分利用B站，CSDN，和百度。</p> 
<p>在我的博客中，我不会讲解opencv的算法实现（当然我也不太会），我只会讲解一些函数的调用，不理解就多改一些参数，多尝试尝试，慢慢你就理解来。相信你总有一天可以说opencv不过“Ctrl+C，Crtl+V”</p> 
<p>如果有什么错误的地方，还请大家批评指正，最后，希望小伙伴们都能有所收获。<br> <img src="https://images2.imgbox.com/e4/8e/d4pbNX8D_o.gif" alt="在这里插入图片描述"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/729307aa18462ed7faf617d6889e7aa4/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Pytorch load模型出错：_pickle.UnpicklingError: invalid load key, ‘＜‘.</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/b4836d174130c7bbbad585eec5e6809a/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">oracle数据库被锁定如何解除</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>