<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>appium基本使用（Android） - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="appium基本使用（Android）" />
<meta property="og:description" content="一.环境搭建 详情可见：https://www.cnblogs.com/lihongtaoya/p/16971096.html
二.元素定位 详情可见：https://www.cnblogs.com/lihongtaoya/p/16988850.html
三.启动app基本配置 1.使用时首先导入webdriver模块
from appium import webdriver
2.通过webdriver调用Remote()完成初始化配置
driver = webdriver.Remote(command_executor=&#34;http://127.0.0.1:4723/wd/hub&#34;, desired_capabilities=desired)
其中command_executor参数一般固定为http://127.0.0.1:4723/wd/hub，desired_capabilities则为字典类型的配置。
desired = {
&#34;platformName&#34;: &#34;Android&#34;, # 手机系统&#34;platformVersion&#34;: &#34;11&#34;, # 手机系统版本&#34;deviceName&#34;: &#39;90bf8faf&#39;, # 连接的设备（adb devices）&#34;automationName&#34;: &#34;UiAutomator2&#34;, # 自动化测试框架 （1.4以上的appium不用写）&#34;appPackage&#34;: &#34;app包名&#34;, # app包名&#34;appActivity&#34;: &#34;app启动页名&#34;, # app的启动页面&#34;autoGrantPermissions&#34;: &#34;true&#34;, # 默认允许app获取相关权限&#34;noReset&#34;: True # 保留登录模式
}
上述参数中是启动app的基本配置，其中app包名和页面名可通过dumpsys window|grep mCu指令来查看。
其它参数配置可参考这位大佬的博客：https://www.cnblogs.com/wysk/p/7346659.html
3.实例
from appium import webdriver
# from selenium import webdriverfrom appium.webdriver.common.appiumby import AppiumBy
desired = {
&#34;platformName&#34;: &#34;Android&#34;, # 手机系统&#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/f9aa17c8b2d6b10b1038c02c84d8360b/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-01-13T14:08:00+08:00" />
<meta property="article:modified_time" content="2023-01-13T14:08:00+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">appium基本使用（Android）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div class="kdocs-document"> 
 <h4 style="text-align:left;"><span class="kdocs-bold" style="font-weight:bold;">一.环境搭建</span></h4> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;">详情可见：</span><a class="kdocs-link" style="color:#0A6CFF;" href="https://www.cnblogs.com/lihongtaoya/p/16971096.html" rel="nofollow noopener noreferrer" target="_blank"><span class="kdocs-fontSize" style="font-size:9pt;">https://www.cnblogs.com/lihongtaoya/p/16971096.html</span></a></p> 
 <h4 style="text-align:left;"><span class="kdocs-bold" style="font-weight:bold;">二.元素定位</span></h4> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;">详情可见：</span><a class="kdocs-link" style="color:#0A6CFF;" href="https://www.cnblogs.com/lihongtaoya/p/16988850.html" rel="nofollow noopener noreferrer" target="_blank"><span class="kdocs-fontSize" style="font-size:9pt;">https://www.cnblogs.com/lihongtaoya/p/16988850.html</span></a></p> 
 <h4 style="text-align:left;"><span class="kdocs-bold" style="font-weight:bold;">三.启动app基本配置</span></h4> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;"><span class="kdocs-bold" style="font-weight:bold;">1.使用时首先导入webdriver模块</span></span></p> 
 <p style="text-align:null;">from<span class="kdocs-fontSize" style="font-size:9pt;"> appium </span>import<span class="kdocs-fontSize" style="font-size:9pt;"> webdriver</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;"><span class="kdocs-bold" style="font-weight:bold;">2.通过webdriver调用Remote()完成初始化配置</span></span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;">driver = webdriver.Remote(command_executor=</span>"<a class="kdocs-link" style="color:#0A6CFF;" href="http://127.0.0.1:4723/wd/hub" rel="nofollow noopener noreferrer" target="_blank">http://127.0.0.1:4723/wd/hub"</a><a class="kdocs-link" style="color:#0A6CFF;" href="http://127.0.0.1:4723/wd/hub" rel="nofollow noopener noreferrer" target="_blank"><span class="kdocs-fontSize" style="font-size:9pt;">,</span></a><span class="kdocs-fontSize" style="font-size:9pt;"> desired_capabilities=desired)</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;">其中command_executor参数一般固定为</span><a class="kdocs-link" style="color:#0A6CFF;" href="http://127.0.0.1:4723/wd/hub" rel="nofollow noopener noreferrer" target="_blank"><span class="kdocs-fontSize" style="font-size:9pt;">http://127.0.0.1:4723/wd/hub</span></a><span class="kdocs-fontSize" style="font-size:9pt;">，desired_capabilities则为字典类型的配置。</span></p> 
 <div class="kdocs-line-container" style="display:flex;"> 
  <div class="kdocs-img" style="flex-direction:column;max-width:100%;display:flex;width:22px;justify-content:center;align-items:center;height:auto;"> 
   <div class="kdocs-img" style="padding-top:100.0%;height:0;"> 
    <img src="https://images2.imgbox.com/8c/20/QOgpUXzw_o.gif" style="margin-left:;display:block;width:22px;margin-top:-100.0%;height:auto;"> 
   </div> 
  </div> 
 </div> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;">desired =</span> {<!-- --></p> 
 <p style="text-align:null;"> "platformName"<span class="kdocs-fontSize" style="font-size:9pt;">: </span>"Android"<span class="kdocs-fontSize" style="font-size:9pt;">, </span># 手机系统"platformVersion"<span class="kdocs-fontSize" style="font-size:9pt;">: </span>"11"<span class="kdocs-fontSize" style="font-size:9pt;">, </span># 手机系统版本"deviceName"<span class="kdocs-fontSize" style="font-size:9pt;">: </span>'90bf8faf'<span class="kdocs-fontSize" style="font-size:9pt;">, </span># 连接的设备（adb devices）"automationName"<span class="kdocs-fontSize" style="font-size:9pt;">: </span>"UiAutomator2"<span class="kdocs-fontSize" style="font-size:9pt;">, </span># 自动化测试框架 （1.4以上的appium不用写）"appPackage"<span class="kdocs-fontSize" style="font-size:9pt;">: </span>"app包名"<span class="kdocs-fontSize" style="font-size:9pt;">, </span># app包名"appActivity"<span class="kdocs-fontSize" style="font-size:9pt;">: </span>"app启动页名"<span class="kdocs-fontSize" style="font-size:9pt;">, </span># app的启动页面"autoGrantPermissions"<span class="kdocs-fontSize" style="font-size:9pt;">: </span>"true"<span class="kdocs-fontSize" style="font-size:9pt;">, </span># 默认允许app获取相关权限"noReset"<span class="kdocs-fontSize" style="font-size:9pt;">: True </span># 保留登录模式</p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;">}</span></p> 
 <div class="kdocs-line-container" style="display:flex;"> 
  <div class="kdocs-img" style="flex-direction:column;max-width:100%;display:flex;width:22px;justify-content:center;align-items:center;height:auto;"> 
   <div class="kdocs-img" style="padding-top:100.0%;height:0;"> 
    <img src="https://images2.imgbox.com/97/e1/cPgvE0q8_o.gif" style="margin-left:;display:block;width:22px;margin-top:-100.0%;height:auto;"> 
   </div> 
  </div> 
 </div> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;">上述参数中是启动app的基本配置，其中app包名和页面名可通过dumpsys window|grep mCu指令来查看。</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;">其它参数配置可参考这位大佬的博客：</span><a class="kdocs-link" style="color:#0A6CFF;" href="https://www.cnblogs.com/wysk/p/7346659.html" rel="nofollow noopener noreferrer" target="_blank"><span class="kdocs-fontSize" style="font-size:9pt;">https://www.cnblogs.com/wysk/p/7346659.html</span></a></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;"><span class="kdocs-bold" style="font-weight:bold;">3.实例</span></span></p> 
 <div class="kdocs-line-container" style="display:flex;"> 
  <div class="kdocs-img" style="flex-direction:column;max-width:100%;display:flex;width:22px;justify-content:center;align-items:center;height:auto;"> 
   <div class="kdocs-img" style="padding-top:100.0%;height:0;"> 
    <img src="https://images2.imgbox.com/d2/74/U4CHW8XX_o.gif" style="margin-left:;display:block;width:22px;margin-top:-100.0%;height:auto;"> 
   </div> 
  </div> 
 </div> 
 <p style="text-align:null;">from<span class="kdocs-fontSize" style="font-size:9pt;"> appium </span>import webdriver</p> 
 <p style="text-align:null;"></p> 
 <p style="text-align:null;"># from selenium import webdriverfrom<span class="kdocs-fontSize" style="font-size:9pt;"> appium.webdriver.common.appiumby </span>import AppiumBy</p> 
 <p style="text-align:null;"></p> 
 <p style="text-align:null;">desired <span class="kdocs-fontSize" style="font-size:9pt;">=</span> {<!-- --></p> 
 <p style="text-align:null;"> "platformName"<span class="kdocs-fontSize" style="font-size:9pt;">: </span>"Android"<span class="kdocs-fontSize" style="font-size:9pt;">, </span># 手机系统"platformVersion"<span class="kdocs-fontSize" style="font-size:9pt;">: </span>"11"<span class="kdocs-fontSize" style="font-size:9pt;">, </span># 手机系统版本"deviceName"<span class="kdocs-fontSize" style="font-size:9pt;">: </span>'90bf8faf'<span class="kdocs-fontSize" style="font-size:9pt;">, </span># 连接的设备（adb devices）"automationName"<span class="kdocs-fontSize" style="font-size:9pt;">: </span>"UiAutomator2"<span class="kdocs-fontSize" style="font-size:9pt;">, </span># 自动化测试框架 （1.4以上的appium不用写）"appPackage"<span class="kdocs-fontSize" style="font-size:9pt;">: </span>"app包名"<span class="kdocs-fontSize" style="font-size:9pt;">, </span># app包名"appActivity"<span class="kdocs-fontSize" style="font-size:9pt;">: </span>"app启动页名"<span class="kdocs-fontSize" style="font-size:9pt;">, </span># app的启动页面"autoGrantPermissions"<span class="kdocs-fontSize" style="font-size:9pt;">: </span>"true"<span class="kdocs-fontSize" style="font-size:9pt;">, </span># 默认允许app获取相关权限"noReset"<span class="kdocs-fontSize" style="font-size:9pt;">: True </span># 保留登录模式}</p> 
 <p style="text-align:null;">driver <span class="kdocs-fontSize" style="font-size:9pt;">= webdriver.Remote(command_executor=</span>"<a class="kdocs-link" style="color:#0A6CFF;" href="http://127.0.0.1:4723/wd/hub" rel="nofollow noopener noreferrer" target="_blank">http://127.0.0.1:4723/wd/hub"</a><a class="kdocs-link" style="color:#0A6CFF;" href="http://127.0.0.1:4723/wd/hub" rel="nofollow noopener noreferrer" target="_blank"><span class="kdocs-fontSize" style="font-size:9pt;">,</span></a><span class="kdocs-fontSize" style="font-size:9pt;"> desired_capabilities=desired)</span></p> 
 <div class="kdocs-line-container" style="display:flex;"> 
  <div class="kdocs-img" style="flex-direction:column;max-width:100%;display:flex;width:22px;justify-content:center;align-items:center;height:auto;"> 
   <div class="kdocs-img" style="padding-top:100.0%;height:0;"> 
    <img src="https://images2.imgbox.com/dc/3c/6EgOIqi5_o.gif" style="margin-left:;display:block;width:22px;margin-top:-100.0%;height:auto;"> 
   </div> 
  </div> 
 </div> 
 <h4 style="text-align:left;"><span class="kdocs-bold" style="font-weight:bold;">四.常用方法与属性</span></h4> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;"><span class="kdocs-bold" style="font-weight:bold;">1.implicitly_wait()：设置隐性等待</span></span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;">driver.implicitly_wait(20) </span># 设置隐性等待，单位为秒</p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;">具体等待用法可见：</span><a class="kdocs-link" style="color:#0A6CFF;" href="https://www.cnblogs.com/lihongtaoya/p/16725333.html" rel="nofollow noopener noreferrer" target="_blank"><span class="kdocs-fontSize" style="font-size:9pt;">https://www.cnblogs.com/lihongtaoya/p/16725333.html</span></a></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;"><span class="kdocs-bold" style="font-weight:bold;">2.page_source：打印页面代码</span></span></p> 
 <p style="text-align:null;">print<span class="kdocs-fontSize" style="font-size:9pt;">(driver.page_source) </span># 打印当前页面代码</p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;">使用场景：我们在用uiautomatorviewer工具定位app页面元素时，有的页面（登录页面）禁止截图，</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;"> 无法定位到元素，这时就可以使用page_source来打印页面代码来手动定位</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;"><span class="kdocs-bold" style="font-weight:bold;">3.install_app("url")：安装app</span></span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;">方法一</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;">driver.install_app(r</span>"C:\Users\username\Desktop\1.apk"<span class="kdocs-fontSize" style="font-size:9pt;">) </span># 安装apk</p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;">方法二</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;">os.system(r</span>"adb install C:\Users\username\Desktop\1.apk"<span class="kdocs-fontSize" style="font-size:9pt;">)</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;">4.remove_app("包名")：根据包名卸载app</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;">driver.remove_app(</span>"包名"<span class="kdocs-fontSize" style="font-size:9pt;">) </span># 卸载app,app_id为包名，pm list packages可查看</p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;">5.is_app_installed("包名")：根据包名判断当前设备有没有安装app</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;">driver.is_app_installed(</span>"tv.danmaku.bili"<span class="kdocs-fontSize" style="font-size:9pt;">) </span># 根据包名判断当前是否安装了软件，安装了返回true，否则返回flase</p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;"><span class="kdocs-bold" style="font-weight:bold;">6.click()：点击事件</span></span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;"><span class="kdocs-bold" style="font-weight:bold;">7.send_key()：输入</span></span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;"><span class="kdocs-bold" style="font-weight:bold;">8.clear()：清空</span></span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;"><span class="kdocs-bold" style="font-weight:bold;">9.get_attribute("name") ：获取元素值</span></span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;"><span class="kdocs-bold" style="font-weight:bold;">10.text：获取文本值</span></span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;"><span class="kdocs-bold" style="font-weight:bold;">11.size：获取元素宽高</span></span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;"><span class="kdocs-bold" style="font-weight:bold;">12.tag_name：获取tabname属性</span></span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;"><span class="kdocs-bold" style="font-weight:bold;">13.is_displayed()：判断元素是否可见（隐藏返回false，非隐藏返回true）</span></span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;"><span class="kdocs-bold" style="font-weight:bold;">14.get_attribute("checked") ：判断单选框或复选框是否被选中（选中返回true，未选中返回false）</span></span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;"><span class="kdocs-bold" style="font-weight:bold;">15.is_selected()：判断下拉框</span></span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;"><span class="kdocs-bold" style="font-weight:bold;">16.is_enabled()：判断元素是否可点击，可点击返回true，不可点击返回false</span></span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;"><span class="kdocs-bold" style="font-weight:bold;">17.hide_keyboard()：隐藏键盘</span></span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;">driver.hide_keyboard() </span># 隐藏键盘（前提键盘弹出）</p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;"><span class="kdocs-bold" style="font-weight:bold;">18.start_activity()：打开填写的app页</span></span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;">driver.start_activity(app_package=</span>"包名"<span class="kdocs-fontSize" style="font-size:9pt;">, app_activity=</span>"页面名"<span class="kdocs-fontSize" style="font-size:9pt;">) </span># 打开设置的页面名和包名</p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;"><span class="kdocs-bold" style="font-weight:bold;">19.current_activity：获取当前页面名</span></span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;">driver.current_activity</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;"><span class="kdocs-bold" style="font-weight:bold;">20.current_package：获取当前包名</span></span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;">driver.current_package</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;"><span class="kdocs-bold" style="font-weight:bold;">21.切换/查看视窗</span></span></p> 
 <div class="kdocs-line-container" style="display:flex;"> 
  <div class="kdocs-img" style="flex-direction:column;max-width:100%;display:flex;width:22px;justify-content:center;align-items:center;height:auto;"> 
   <div class="kdocs-img" style="padding-top:100.0%;height:0;"> 
    <img src="https://images2.imgbox.com/4e/78/jQDaPHUP_o.gif" style="margin-left:;display:block;width:22px;margin-top:-100.0%;height:auto;"> 
   </div> 
  </div> 
 </div> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;"># WebView.setWebContentsDebuggingEnabled(true) # 打开开发者模式</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;">print(driver.current_context) # 查看当前所在的视窗</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;">print(driver.contexts) # 查看当前页面有多少视窗，返回数组</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;">print(driver.context) # 查看当前所在的视窗</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;">driver.switch_to.context("context_name") # 切换视窗</span></p> 
 <div class="kdocs-line-container" style="display:flex;"> 
  <div class="kdocs-img" style="flex-direction:column;max-width:100%;display:flex;width:22px;justify-content:center;align-items:center;height:auto;"> 
   <div class="kdocs-img" style="padding-top:100.0%;height:0;"> 
    <img src="https://images2.imgbox.com/0c/d6/0hZrL7xu_o.gif" style="margin-left:;display:block;width:22px;margin-top:-100.0%;height:auto;"> 
   </div> 
  </div> 
 </div> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;">1）若要切换到webview视窗内，需要让开发打开开发者模式：WebView.setWebContentsDebuggingEnabled(true)</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;"> 才能用driver.contexts查看视窗，然后切换。</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;">2）current_context与context均为查看当前视窗，无区别。</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;"><span class="kdocs-bold" style="font-weight:bold;">22.scroll(e2, e1)：页面滑动</span></span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;">driver.scroll(e2, e1) </span># 页面滑动，从元素e2滑动到e1(可横向和纵向滑动)</p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;"><span class="kdocs-bold" style="font-weight:bold;">23.drag_and_drop(e1, e2)：元素拖拽</span></span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;">driver.drag_and_drop(e1, e2) </span># 将元素e1拖拽到元素e2</p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;"><span class="kdocs-bold" style="font-weight:bold;">24.tap(positions: List[Tuple[int, int]], duration: Optional[int])：按住某个坐标点</span></span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;">driver.tap([(498, 276), (338, 276)], 3000) </span># 设置同时按住多个坐标，<span class="kdocs-fontSize" style="font-size:9pt;">元组类型的坐标[(),()]。</span>可设置按住时长ms。</p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;"><span class="kdocs-bold" style="font-weight:bold;">25.swipe(start_x: int, start_y: int, end_x: int, end_y: int, duration: int = 0)：坐标拖拽</span></span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;">driver.swipe(x1,y1,x2,y2,3000) </span>#从（x1,y1）坐标拖拽到（x2,y2）坐标，可设置拖拽时长ms</p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;"><span class="kdocs-bold" style="font-weight:bold;">26.flick(start_x: int, start_y: int, end_x: int, end_y: int)：坐标拖拽</span></span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;">driver.flick(x1,y1,x2,y2) </span># 从（x1,y1）坐标拖拽到（x2,y2）坐标</p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;">与swipe()的区别在于不能自定义拖拽时长</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;"><span class="kdocs-bold" style="font-weight:bold;">27.wait_activity()：设置页面等待</span></span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;">driver.wait_activity(</span>"页面名"<span class="kdocs-fontSize" style="font-size:9pt;">, timeout=5, interval=1) </span># 设置等待页面的出现，timeout为等待时长，interval每间隔多久设别一次（false或true）</p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;"><span class="kdocs-bold" style="font-weight:bold;">28.background_app(ms)：设置返回后台运行多少s后再返回app</span></span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;">driver.background_app(5) </span># 设置返回后台运行多少s，后在返回app</p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;"><span class="kdocs-bold" style="font-weight:bold;">29.shake()：摇一摇手机</span></span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;">driver.shake() </span># 摇一摇手机</p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;"><span class="kdocs-bold" style="font-weight:bold;">30.open_notifications()：打开设备通知栏</span></span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;">driver.open_notifications() </span># 打开设备通知栏</p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;"><span class="kdocs-bold" style="font-weight:bold;">31.toggle_location_services()：打开定位设置页</span></span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;">driver.toggle_location_services() </span># 打开定位设置页</p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;"><span class="kdocs-bold" style="font-weight:bold;">32.location：返回元素坐标</span></span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;">element.location </span># 返回元素xy坐标</p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;">element.location.get(</span>'x'<span class="kdocs-fontSize" style="font-size:9pt;">) </span># 返回元素x坐标</p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;">element.location.get(</span>'y'<span class="kdocs-fontSize" style="font-size:9pt;">) </span># 返回元素y坐标</p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;"><span class="kdocs-bold" style="font-weight:bold;">33.get_screenshot_as_base64()：手机截屏</span></span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;">driver.get_screenshot_as_base64() </span># 手机截屏</p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;">详情可见：</span><a class="kdocs-link" style="color:#0A6CFF;" href="https://www.cnblogs.com/lihongtaoya/p/16759942.html" rel="nofollow noopener noreferrer" target="_blank"><span class="kdocs-fontSize" style="font-size:9pt;">https://www.cnblogs.com/lihongtaoya/p/16759942.html</span></a></p> 
 <p style="text-align:null;"></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;"><span class="kdocs-bold" style="font-weight:bold;">34.execute_script()：执行js脚本</span></span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;">driver.execute_script() </span># 执行js脚本</p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;"><span class="kdocs-bold" style="font-weight:bold;">35.get_window_size()：获取当前屏幕的长和宽</span></span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;">driver.get_window_size() </span># 获取当前屏幕的长和宽</p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;"><span class="kdocs-bold" style="font-weight:bold;">36.quit()：关闭页面</span></span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;">driver.quit()</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;"><span class="kdocs-bold" style="font-weight:bold;">37.press_keycode() ：短按键</span></span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;">driver.press_keycode(26) # 26为按键码，按键码详情可见：</span><a class="kdocs-link" style="color:#0A6CFF;" href="https://blog.csdn.net/weixin_43004606/article/details/113552686" target="_blank" rel="noopener noreferrer"><span class="kdocs-fontSize" style="font-size:9pt;">https://blog.csdn.net/weixin_43004606/article/details/113552686</span></a></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;"><span class="kdocs-bold" style="font-weight:bold;">38.long_press_keycode()：长按键码</span></span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;">driver.long_press_keycode(26) </span># 长按键码</p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;">和press_keycode()的区别一个是长按（如长按关机键），一个是短按</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;"><span class="kdocs-bold" style="font-weight:bold;">39.w3c_actions用法</span></span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;">本来是想介绍MultiAction和TouchAction的使用的，但是两者在appium2.0以后就弃用了，所以本次就只</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;">介绍w3c_actions的用法了。</span></p> 
 <div class="kdocs-line-container" style="display:flex;"> 
  <div class="kdocs-img" style="flex-direction:column;max-width:100%;display:flex;width:773px;justify-content:center;align-items:center;height:auto;"> 
   <div class="kdocs-img" style="padding-top:16.55886%;height:0;"> 
    <img src="https://images2.imgbox.com/a1/d9/cYJcFyw4_o.png" style="margin-left:;display:block;width:773px;margin-top:-16.55886%;height:auto;"> 
   </div> 
  </div> 
 </div> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;"> 使用时应先导入ActionChains模块</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;">om selenium.webdriver </span>import<span class="kdocs-fontSize" style="font-size:9pt;"> ActionChains</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;">1）click()：指定元素左击</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;">action.w3c_actions.pointer_action.click(element) </span># 指定元素左击</p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;">2）context_click()：指定元素右击</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;">action.w3c_actions.pointer_action.context_click(element) </span># 指定元素右击</p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;">3）double_click()：双击</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;">4）click_and_hold()：长按元素</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;">action.w3c_actions.pointer_action.click_and_hold(element) </span># 设置长按元素</p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;">5）pause()：设置等待时长</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;">actions.w3c_actions.pointer_action.pause(5) </span># 当前状态等待5s</p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;">6）release()：松开</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;">actions.w3c_actions.pointer_action.release() </span># 松开元素</p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;">7）perform()：执行鼠标事件</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;">action.perform()</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;">8）move_to_location()：鼠标移动到指定坐标</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;">actions.w3c_actions.pointer_action.move_to_location(x=971, y=256).click() </span># 鼠标移动到指定坐标</p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;">9）move_to()：鼠标移动到指定元素</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;">actions.w3c_actions.pointer_action.move_to(element=driver.find_element(AppiumBy.XPATH, </span>'//*[@text="取消"]'<span class="kdocs-fontSize" style="font-size:9pt;">)).click() </span># 鼠标移动到指定元素上</p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;">10）pointer_down()：按下</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;">11）pointer_up()：松开</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;">实例用法</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;">示例一：设置按下一个元素长按5s后松开</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;">action.w3c_actions.pointer_action.click_and_hold(element) </span># 设置长按元素</p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;">actions.w3c_actions.pointer_action.pause(5) </span># 当前状态等待5s</p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;">actions.w3c_actions.pointer_action.release() </span># 松开元素</p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;">action.perform()</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;">示例二：移动到某个元素上按下再松开</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;">actions.w3c_actions.pointer_action.move_to(element=driver.find_elements(AppiumBy.XPATH, </span>'//*[@resource-id="com.vivo.browser:id/image" and @class="android.widget.ImageView"]'<span class="kdocs-fontSize" style="font-size:9pt;">)[0]).pointer_down() </span># 按下</p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;">actions.w3c_actions.pointer_action.pointer_up() </span># 松开</p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;">示例三：从一个坐标点滑动到另一个坐标点然后再松开</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;">actions.w3c_actions.pointer_action.move_to_location(x=500, y=1000).pointer_down().move_to_location(x=500,y=500).pointer_up()</span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;"><span class="kdocs-bold" style="font-weight:bold;">40.页面放大和缩小</span></span></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;">这里不做过多的介绍了，直接看实例代码</span></p> 
 <div class="kdocs-line-container" style="display:flex;"> 
  <div class="kdocs-img" style="flex-direction:column;max-width:100%;display:flex;width:22px;justify-content:center;align-items:center;height:auto;"> 
   <div class="kdocs-img" style="padding-top:100.0%;height:0;"> 
    <img src="https://images2.imgbox.com/43/1b/KmLYim4v_o.gif" style="margin-left:;display:block;width:22px;margin-top:-100.0%;height:auto;"> 
   </div> 
  </div> 
 </div> 
 <p style="text-align:null;">from<span class="kdocs-fontSize" style="font-size:9pt;"> selenium.webdriver </span>import ActionChains</p> 
 <p style="text-align:null;"></p> 
 <p style="text-align:null;"># 放大</p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;">actions =</span> ActionChains(driver)</p> 
 <p style="text-align:null;">actions.w3c_actions.devices <span class="kdocs-fontSize" style="font-size:9pt;">= [] </span># 创建多devices集</p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;">fin1 = actions.w3c_actions.add_pointer_input(</span>'touch'<span class="kdocs-fontSize" style="font-size:9pt;">, </span>'fin1'<span class="kdocs-fontSize" style="font-size:9pt;">) </span># 添加一个虚拟设备,一个手指</p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;">fin2 = actions.w3c_actions.add_pointer_input(</span>'touch'<span class="kdocs-fontSize" style="font-size:9pt;">, </span>'fin2'<span class="kdocs-fontSize" style="font-size:9pt;">) </span># 添加一个虚拟设备,第二个手指</p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;">fin1.create_pointer_move(x=500, y=1000) </span># 手指一移动到某点</p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;">fin2.create_pointer_move(x=500, y=1000) </span># 手指二移动到某点</p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;">fin1.create_pointer_down() </span># 手指一按下</p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;">fin2.create_pointer_down() </span># 手指二按下</p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;">fin1.create_pointer_move(x=500, y=500) </span># 手指一移动</p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;">fin2.create_pointer_move(x=500, y=1500) </span># 手指二移动</p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;">fin1.create_pointer_up(0) </span># 松开手指一释放</p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;">fin2.create_pointer_up(0) </span># 松开手指二释放</p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;">actions.perform() </span># 执行</p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;">time.sleep(3</span>)</p> 
 <p style="text-align:null;"># 缩小</p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;">action =</span> ActionChains(driver)</p> 
 <p style="text-align:null;">action.w3c_actions.devices <span class="kdocs-fontSize" style="font-size:9pt;">=</span> []</p> 
 <p style="text-align:null;">fin1 <span class="kdocs-fontSize" style="font-size:9pt;">= action.w3c_actions.add_pointer_input(</span>'touch'<span class="kdocs-fontSize" style="font-size:9pt;">, </span>'fin1')</p> 
 <p style="text-align:null;">fin2 <span class="kdocs-fontSize" style="font-size:9pt;">= action.w3c_actions.add_pointer_input(</span>'touch'<span class="kdocs-fontSize" style="font-size:9pt;">, </span>'fin2')</p> 
 <p style="text-align:null;">fin1.create_pointer_move(x<span class="kdocs-fontSize" style="font-size:9pt;">=500, y=500</span>)</p> 
 <p style="text-align:null;">fin2.create_pointer_move(x<span class="kdocs-fontSize" style="font-size:9pt;">=500, y=1500</span>)</p> 
 <p style="text-align:null;">fin1.create_pointer_down()</p> 
 <p style="text-align:null;">fin2.create_pointer_down()</p> 
 <p style="text-align:null;">fin1.create_pointer_move(x<span class="kdocs-fontSize" style="font-size:9pt;">=500, y=1000</span>)</p> 
 <p style="text-align:null;">fin2.create_pointer_move(x<span class="kdocs-fontSize" style="font-size:9pt;">=500, y=1000</span>)</p> 
 <p style="text-align:null;">fin1.create_pointer_up(0)</p> 
 <p style="text-align:null;">fin2.create_pointer_up(0)</p> 
 <p style="text-align:null;">action.perform()</p> 
 <p style=""></p> 
 <p style=""></p> 
 <p style=""></p> 
 <p style=""></p> 
 <p style="text-align:null;"><span class="kdocs-fontSize" style="font-size:9pt;">文章来源：</span><a class="kdocs-link" style="color:#0A6CFF;" href="https://www.cnblogs.com/lihongtaoya/" rel="nofollow noopener noreferrer" target="_blank"><span class="kdocs-fontSize" style="font-size:9pt;"><span class="kdocs-underline" style="text-decoration:underline;">https://www.cnblogs.com/lihongtaoya/</span></span></a><span class="kdocs-fontSize" style="font-size:9pt;"> ，请勿转载</span></p> 
</div>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/d9720468e07b4c85babf9a1d073dc683/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">如何在随机数生成时指定概率：轮盘赌算法的简单应用</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/820e633a34849575b4e9a392ffbec8f3/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Qiling框架学习-Qilinglab</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>