<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Faster_rcnn训练自己的数据集(2) - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Faster_rcnn训练自己的数据集(2)" />
<meta property="og:description" content="在看了一些深度学习的目标检测的论文后，想着去用开源的代码去跑一下，看看实际的效果。于是小菜就想着直接把faster_rcnn用起来，包括前期的faster_rcnn安装和配置并运行其中的一个demo.py。后面是用自己的数据集训练faster_rcnn的模型。 1. 准备工作：
1) 搭建caffe框架
这个可以参考Linux先搭建caffe的笔记。
2) 安装第三方依赖包：Cython、 Python-OpenCV、easydict
pip install cython pip install easydict apt-get install python-opencv 123 123 3) 下载py-faster-rcnn # Make sure to clone with --recursive git clone --recursive https://github.com/rbgirshick/py-faster-rcnn.git 12 12 4) 编译faster_rcnn 进入py-faster-rcnn/lib，执行make
cd py-faster-rcnn/lib make 12 12 5) 配置faster_rcnn 进入py-faster-rcnn\caffe-fast-rcnn，执行
cp Makefile.config.example Makefile.config 1 1 然后，配置Makefile.config文件，配置好Makefile.config文件后，执行：
make –j4 &amp;&amp; make pycaffe 1 1 注：我在这一步出错了，老是不能编译成功。问题应该是出在Makefile.config文件内容中的，应该是出在路径添加中出错。
解决： 在原来搭建的caffe文件中将Makefile.config文件内容直接复制过来。 接下来下载已经训练好的faster模型，进入py-faster_rcnn/data/scripts目录，执行./fech-faster_rcnn_models,sh
6) 测试faster_rcnn 运行网络和加载下载的模型进行最后的测试demo 执行：
./tools/demo.py 1 1 出现问题： ImportError：No module named yaml 解决:" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/bab702f5412ec4cee96b0d529dfd6314/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2016-10-27T21:30:15+08:00" />
<meta property="article:modified_time" content="2016-10-27T21:30:15+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Faster_rcnn训练自己的数据集(2)</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div id="article_content" class="article_content" style="margin:20px 0px 0px; font-size:14px; line-height:26px; font-family:Arial; color:rgb(51,51,51)"> 
 <div class="markdown_views" style="font-family:'microsoft yahei'"> 
  <p style="margin-top:0px; margin-bottom:1.1em">在看了一些<a target="_blank" href="http://lib.csdn.net/base/deeplearning" rel="nofollow noopener noreferrer" class="replace_word" title="深度学习知识库" style="color:rgb(223,52,52); text-decoration:none; font-weight:bold">深度学习</a>的目标检测的论文后，想着去用开源的代码去跑一下，看看实际的效果。于是小菜就想着直接把faster_rcnn用起来，包括前期的faster_rcnn安装和配置并运行其中的一个demo.py。后面是用自己的数据集训练faster_rcnn的模型。 <br style=""> 　<span style="">1. 准备工作：</span></p> 
  <ul style=""><li style=""> <p style="margin-top:0px; margin-bottom:1.1em">1) 搭建caffe框架</p> <p style="margin-top:0px; margin-bottom:1.1em">这个可以参考<a target="_blank" href="http://lib.csdn.net/base/linux" rel="nofollow noopener noreferrer" class="replace_word" title="Linux知识库" style="color:rgb(223,52,52); text-decoration:none; font-weight:bold">Linux</a>先搭建caffe的笔记。</p> </li><li style=""> <p style="margin-top:0px; margin-bottom:1.1em">2) 安装第三方依赖包：Cython、 <a target="_blank" href="http://lib.csdn.net/base/python" rel="nofollow noopener noreferrer" class="replace_word" title="Python知识库" style="color:rgb(223,52,52); text-decoration:none; font-weight:bold">Python</a>-<a target="_blank" href="http://lib.csdn.net/base/opencv" rel="nofollow noopener noreferrer" class="replace_word" title="OpenCV知识库" style="color:rgb(223,52,52); text-decoration:none; font-weight:bold">OpenCV</a>、easydict</p> </li></ul> 
  <pre class="prettyprint" name="code" style="white-space: nowrap; word-wrap: break-word; box-sizing: border-box; position: relative; overflow-y: hidden; overflow-x: auto; margin-top: 0px; margin-bottom: 1.1em; font-family: 'Source Code Pro', monospace; padding: 5px 5px 5px 60px; line-height: 1.45; word-break: break-all; border: 1px solid rgba(128, 128, 128, 0.0745098); border-radius: 0px; background-color: rgba(128, 128, 128, 0.0470588);"><code class="hljs cmake has-numbering" style="display: block; padding: 0px; color: inherit; box-sizing: border-box; font-family: 'Source Code Pro', monospace;font-size:undefined; white-space: pre; border-radius: 0px; word-wrap: normal; background: transparent;">pip <span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">install</span> cython  
pip <span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">install</span> easydict  
apt-get <span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">install</span> python-opencv  </code>
   
   </pre><ul class="pre-numbering" style="box-sizing: border-box; position: absolute; width: 50px; top: 0px; left: 0px; margin: 0px; padding: 6px 0px 40px; border-right-width: 1px; border-right-style: solid; border-right-color: rgb(221, 221, 221); list-style: none; text-align: right; background-color: rgb(238, 238, 238);"><li style="box-sizing: border-box; padding: 0px 5px;">1</li><li style="box-sizing: border-box; padding: 0px 5px;">2</li><li style="box-sizing: border-box; padding: 0px 5px;">3</li></ul>
   
   <ul class="pre-numbering" style="box-sizing: border-box; position: absolute; width: 50px; top: 0px; left: 0px; margin: 0px; padding: 6px 0px 40px; border-right-width: 1px; border-right-style: solid; border-right-color: rgb(221, 221, 221); list-style: none; text-align: right; background-color: rgb(238, 238, 238);"><li style="box-sizing: border-box; padding: 0px 5px;">1</li><li style="box-sizing: border-box; padding: 0px 5px;">2</li><li style="box-sizing: border-box; padding: 0px 5px;">3</li></ul> 
  <ul style=""><li style="">3) 下载py-faster-rcnn</li></ul> 
  <pre class="prettyprint" name="code" style="white-space: nowrap; word-wrap: break-word; box-sizing: border-box; position: relative; overflow-y: hidden; overflow-x: auto; margin-top: 0px; margin-bottom: 1.1em; font-family: 'Source Code Pro', monospace; padding: 5px 5px 5px 60px; line-height: 1.45; word-break: break-all; border: 1px solid rgba(128, 128, 128, 0.0745098); border-radius: 0px; background-color: rgba(128, 128, 128, 0.0470588);"><code class="hljs vhdl has-numbering" style="display: block; padding: 0px; color: inherit; box-sizing: border-box; font-family: 'Source Code Pro', monospace;font-size:undefined; white-space: pre; border-radius: 0px; word-wrap: normal; background: transparent;"> # Make sure <span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">to</span> clone <span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">with</span> <span class="hljs-comment" style="color: rgb(136, 0, 0); box-sizing: border-box;">--recursive  </span>
 git clone <span class="hljs-comment" style="color: rgb(136, 0, 0); box-sizing: border-box;">--recursive https://github.com/rbgirshick/py-faster-rcnn.git  </span></code>
   
   </pre><ul class="pre-numbering" style="box-sizing: border-box; position: absolute; width: 50px; top: 0px; left: 0px; margin: 0px; padding: 6px 0px 40px; border-right-width: 1px; border-right-style: solid; border-right-color: rgb(221, 221, 221); list-style: none; text-align: right; background-color: rgb(238, 238, 238);"><li style="box-sizing: border-box; padding: 0px 5px;">1</li><li style="box-sizing: border-box; padding: 0px 5px;">2</li></ul>
   
   <ul class="pre-numbering" style="box-sizing: border-box; position: absolute; width: 50px; top: 0px; left: 0px; margin: 0px; padding: 6px 0px 40px; border-right-width: 1px; border-right-style: solid; border-right-color: rgb(221, 221, 221); list-style: none; text-align: right; background-color: rgb(238, 238, 238);"><li style="box-sizing: border-box; padding: 0px 5px;">1</li><li style="box-sizing: border-box; padding: 0px 5px;">2</li></ul> 
  <ul style=""><li style="">4) 编译faster_rcnn</li></ul> 
  <p style="margin-top:0px; margin-bottom:1.1em">进入py-faster-rcnn/lib，执行make</p> 
  <pre class="prettyprint" name="code" style="white-space: nowrap; word-wrap: break-word; box-sizing: border-box; position: relative; overflow-y: hidden; overflow-x: auto; margin-top: 0px; margin-bottom: 1.1em; font-family: 'Source Code Pro', monospace; padding: 5px 5px 5px 60px; line-height: 1.45; word-break: break-all; border: 1px solid rgba(128, 128, 128, 0.0745098); border-radius: 0px; background-color: rgba(128, 128, 128, 0.0470588);"><code class="hljs lasso has-numbering" style="display: block; padding: 0px; color: inherit; box-sizing: border-box; font-family: 'Source Code Pro', monospace;font-size:undefined; white-space: pre; border-radius: 0px; word-wrap: normal; background: transparent;">cd py<span class="hljs-attribute" style="box-sizing: border-box;">-faster</span><span class="hljs-attribute" style="box-sizing: border-box;">-rcnn</span>/lib
make</code>
   
   </pre><ul class="pre-numbering" style="box-sizing: border-box; position: absolute; width: 50px; top: 0px; left: 0px; margin: 0px; padding: 6px 0px 40px; border-right-width: 1px; border-right-style: solid; border-right-color: rgb(221, 221, 221); list-style: none; text-align: right; background-color: rgb(238, 238, 238);"><li style="box-sizing: border-box; padding: 0px 5px;">1</li><li style="box-sizing: border-box; padding: 0px 5px;">2</li></ul>
   
   <ul class="pre-numbering" style="box-sizing: border-box; position: absolute; width: 50px; top: 0px; left: 0px; margin: 0px; padding: 6px 0px 40px; border-right-width: 1px; border-right-style: solid; border-right-color: rgb(221, 221, 221); list-style: none; text-align: right; background-color: rgb(238, 238, 238);"><li style="box-sizing: border-box; padding: 0px 5px;">1</li><li style="box-sizing: border-box; padding: 0px 5px;">2</li></ul> 
  <ul style=""><li style="">5) 配置faster_rcnn</li></ul> 
  <p style="margin-top:0px; margin-bottom:1.1em">进入py-faster-rcnn\caffe-fast-rcnn，执行</p> 
  <pre class="prettyprint" name="code" style="white-space: nowrap; word-wrap: break-word; box-sizing: border-box; position: relative; overflow-y: hidden; overflow-x: auto; margin-top: 0px; margin-bottom: 1.1em; font-family: 'Source Code Pro', monospace; padding: 5px 5px 5px 60px; line-height: 1.45; word-break: break-all; border: 1px solid rgba(128, 128, 128, 0.0745098); border-radius: 0px; background-color: rgba(128, 128, 128, 0.0470588);"><code class="hljs avrasm has-numbering" style="display: block; padding: 0px; color: inherit; box-sizing: border-box; font-family: 'Source Code Pro', monospace;font-size:undefined; white-space: pre; border-radius: 0px; word-wrap: normal; background: transparent;"><span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">cp</span> Makefile<span class="hljs-preprocessor" style="color: rgb(68, 68, 68); box-sizing: border-box;">.config</span><span class="hljs-preprocessor" style="color: rgb(68, 68, 68); box-sizing: border-box;">.example</span> Makefile<span class="hljs-preprocessor" style="color: rgb(68, 68, 68); box-sizing: border-box;">.config</span></code>
   
   </pre><ul class="pre-numbering" style="box-sizing: border-box; position: absolute; width: 50px; top: 0px; left: 0px; margin: 0px; padding: 6px 0px 40px; border-right-width: 1px; border-right-style: solid; border-right-color: rgb(221, 221, 221); list-style: none; text-align: right; background-color: rgb(238, 238, 238);"><li style="box-sizing: border-box; padding: 0px 5px;">1</li></ul>
   
   <ul class="pre-numbering" style="box-sizing: border-box; position: absolute; width: 50px; top: 0px; left: 0px; margin: 0px; padding: 6px 0px 40px; border-right-width: 1px; border-right-style: solid; border-right-color: rgb(221, 221, 221); list-style: none; text-align: right; background-color: rgb(238, 238, 238);"><li style="box-sizing: border-box; padding: 0px 5px;">1</li></ul> 
  <p style="margin-top:0px; margin-bottom:1.1em">然后，配置Makefile.config文件，配置好Makefile.config文件后，执行：</p> 
  <pre class="prettyprint" name="code" style="white-space: nowrap; word-wrap: break-word; box-sizing: border-box; position: relative; overflow-y: hidden; overflow-x: auto; margin-top: 0px; margin-bottom: 1.1em; font-family: 'Source Code Pro', monospace; padding: 5px 5px 5px 60px; line-height: 1.45; word-break: break-all; border: 1px solid rgba(128, 128, 128, 0.0745098); border-radius: 0px; background-color: rgba(128, 128, 128, 0.0470588);"><code class="hljs go has-numbering" style="display: block; padding: 0px; color: inherit; box-sizing: border-box; font-family: 'Source Code Pro', monospace;font-size:undefined; white-space: pre; border-radius: 0px; word-wrap: normal; background: transparent;"><span class="hljs-built_in" style="color: rgb(102, 0, 102); box-sizing: border-box;">make</span> –j4 &amp;&amp; <span class="hljs-built_in" style="color: rgb(102, 0, 102); box-sizing: border-box;">make</span> pycaffe  </code>
   
   </pre><ul class="pre-numbering" style="box-sizing: border-box; position: absolute; width: 50px; top: 0px; left: 0px; margin: 0px; padding: 6px 0px 40px; border-right-width: 1px; border-right-style: solid; border-right-color: rgb(221, 221, 221); list-style: none; text-align: right; background-color: rgb(238, 238, 238);"><li style="box-sizing: border-box; padding: 0px 5px;">1</li></ul>
   
   <ul class="pre-numbering" style="box-sizing: border-box; position: absolute; width: 50px; top: 0px; left: 0px; margin: 0px; padding: 6px 0px 40px; border-right-width: 1px; border-right-style: solid; border-right-color: rgb(221, 221, 221); list-style: none; text-align: right; background-color: rgb(238, 238, 238);"><li style="box-sizing: border-box; padding: 0px 5px;">1</li></ul> 
  <p style="margin-top:0px; margin-bottom:1.1em"><span style="font-family:黑体; font-size:14px; color:#A52A2A"><span style="">注：</span>我在这一步出错了，老是不能编译成功。问题应该是出在Makefile.config文件内容中的，应该是出在路径添加中出错。</span></p> 
  <p style="margin-top:0px; margin-bottom:1.1em"><span style="">解决：</span> <br style=""> 　在原来搭建的caffe文件中将Makefile.config文件内容直接复制过来。 <br style=""> 接下来下载已经训练好的faster模型，进入py-faster_rcnn/data/scripts目录，执行./fech-faster_rcnn_models,sh</p> 
  <ul style=""><li style="">6) 测试faster_rcnn</li></ul> 
  <p style="margin-top:0px; margin-bottom:1.1em">运行网络和加载下载的模型进行最后的<a target="_blank" href="http://lib.csdn.net/base/softwaretest" rel="nofollow noopener noreferrer" class="replace_word" title="软件测试知识库" style="color:rgb(223,52,52); text-decoration:none; font-weight:bold">测试</a>demo <br style=""> 执行：</p> 
  <pre class="prettyprint" name="code" style="white-space: nowrap; word-wrap: break-word; box-sizing: border-box; position: relative; overflow-y: hidden; overflow-x: auto; margin-top: 0px; margin-bottom: 1.1em; font-family: 'Source Code Pro', monospace; padding: 5px 5px 5px 60px; line-height: 1.45; word-break: break-all; border: 1px solid rgba(128, 128, 128, 0.0745098); border-radius: 0px; background-color: rgba(128, 128, 128, 0.0470588);"><code class="hljs avrasm has-numbering" style="display: block; padding: 0px; color: inherit; box-sizing: border-box; font-family: 'Source Code Pro', monospace;font-size:undefined; white-space: pre; border-radius: 0px; word-wrap: normal; background: transparent;">./tools/demo<span class="hljs-preprocessor" style="color: rgb(68, 68, 68); box-sizing: border-box;">.py</span></code>
   
   </pre><ul class="pre-numbering" style="box-sizing: border-box; position: absolute; width: 50px; top: 0px; left: 0px; margin: 0px; padding: 6px 0px 40px; border-right-width: 1px; border-right-style: solid; border-right-color: rgb(221, 221, 221); list-style: none; text-align: right; background-color: rgb(238, 238, 238);"><li style="box-sizing: border-box; padding: 0px 5px;">1</li></ul>
   
   <ul class="pre-numbering" style="box-sizing: border-box; position: absolute; width: 50px; top: 0px; left: 0px; margin: 0px; padding: 6px 0px 40px; border-right-width: 1px; border-right-style: solid; border-right-color: rgb(221, 221, 221); list-style: none; text-align: right; background-color: rgb(238, 238, 238);"><li style="box-sizing: border-box; padding: 0px 5px;">1</li></ul> 
  <p style="margin-top:0px; margin-bottom:1.1em">出现问题： <br style=""> ImportError：No module named yaml <br style=""> 解决:</p> 
  <pre class="prettyprint" name="code" style="white-space: nowrap; word-wrap: break-word; box-sizing: border-box; position: relative; overflow-y: hidden; overflow-x: auto; margin-top: 0px; margin-bottom: 1.1em; font-family: 'Source Code Pro', monospace; padding: 5px 5px 5px 60px; line-height: 1.45; word-break: break-all; border: 1px solid rgba(128, 128, 128, 0.0745098); border-radius: 0px; background-color: rgba(128, 128, 128, 0.0470588);"><code class="hljs lasso has-numbering" style="display: block; padding: 0px; color: inherit; box-sizing: border-box; font-family: 'Source Code Pro', monospace;font-size:undefined; white-space: pre; border-radius: 0px; word-wrap: normal; background: transparent;">sudo apt<span class="hljs-attribute" style="box-sizing: border-box;">-get</span> install python<span class="hljs-attribute" style="box-sizing: border-box;">-yaml</span></code>
   
   </pre><ul class="pre-numbering" style="box-sizing: border-box; position: absolute; width: 50px; top: 0px; left: 0px; margin: 0px; padding: 6px 0px 40px; border-right-width: 1px; border-right-style: solid; border-right-color: rgb(221, 221, 221); list-style: none; text-align: right; background-color: rgb(238, 238, 238);"><li style="box-sizing: border-box; padding: 0px 5px;">1</li></ul>
   
   <ul class="pre-numbering" style="box-sizing: border-box; position: absolute; width: 50px; top: 0px; left: 0px; margin: 0px; padding: 6px 0px 40px; border-right-width: 1px; border-right-style: solid; border-right-color: rgb(221, 221, 221); list-style: none; text-align: right; background-color: rgb(238, 238, 238);"><li style="box-sizing: border-box; padding: 0px 5px;">1</li></ul> 
  <p style="margin-top:0px; margin-bottom:1.1em"><span style="">2. 训练步骤：</span></p> 
  <ul style=""><li style=""> <p style="margin-top:0px; margin-bottom:1.1em">1) 下载VOC2007数据集</p> <p style="margin-top:0px; margin-bottom:1.1em">　　提供一个百度云地址：<a target="_blank" href="http://pan.baidu.com/s/1mhMKKw4" rel="nofollow noopener noreferrer" style="color:rgb(51,102,153); text-decoration:none">http://pan.baidu.com/s/1mhMKKw4</a> <br style=""> 解压，然后，将该数据集放在py-faster-rcnn\data下，用自己的数据集替换VOC2007数据集。（替换Annotations，ImageSets和JPEGImages）（用你的Annotations，ImagesSets和JPEGImages替换py-faster-rcnn\data\VOCdevkit2007\VOC2007中对应文件夹）。</p> </li><li style=""> <p style="margin-top:0px; margin-bottom:1.1em">2) 下载ImageNet数据集下预训练得到的模型参数（用来初始化）</p> <p style="margin-top:0px; margin-bottom:1.1em">　　提供一个百度云地址：<a target="_blank" href="http://pan.baidu.com/s/1hsxx8OW" rel="nofollow noopener noreferrer" style="color:rgb(51,102,153); text-decoration:none">http://pan.baidu.com/s/1hsxx8OW</a>解压，然后将该文件放在py-faster-rcnn\data下。</p> </li><li style=""> <p style="margin-top:0px; margin-bottom:1.1em">3) 修改训练的配置文件</p> </li></ul> 
  <hr style="margin:2em 0px; border-right-width:0px; border-bottom-width:0px; border-left-width:0px; border-top-style:solid"> 
  <p style="margin-top:0px; margin-bottom:1.1em">1.py－fasterrcnn/models/pascal_voc/ZF/faster_rcnn_alt_opt/ <br style=""> stage1_fast_rcnn_train.pt修改</p> 
  <pre class="prettyprint" name="code" style="white-space: nowrap; word-wrap: break-word; box-sizing: border-box; position: relative; overflow-y: hidden; overflow-x: auto; margin-top: 0px; margin-bottom: 1.1em; font-family: 'Source Code Pro', monospace; padding: 5px 5px 5px 60px; line-height: 1.45; word-break: break-all; border: 1px solid rgba(128, 128, 128, 0.0745098); border-radius: 0px; background-color: rgba(128, 128, 128, 0.0470588);"><code class="hljs markdown has-numbering" style="display: block; padding: 0px; color: inherit; box-sizing: border-box; font-family: 'Source Code Pro', monospace;font-size:undefined; white-space: pre; border-radius: 0px; word-wrap: normal; background: transparent;"><span class="hljs-bullet" style="box-sizing: border-box;">1.  </span>layer {  
<span class="hljs-bullet" style="box-sizing: border-box;">2.    </span>name: 'data'  
<span class="hljs-bullet" style="box-sizing: border-box;">3.    </span>type: 'Python'  
<span class="hljs-bullet" style="box-sizing: border-box;">4.    </span>top: 'data'  
<span class="hljs-bullet" style="box-sizing: border-box;">5.    </span>top: 'rois'  
<span class="hljs-bullet" style="box-sizing: border-box;">6.    </span>top: 'labels'  
<span class="hljs-bullet" style="box-sizing: border-box;">7.    </span>top: 'bbox_targets'  
<span class="hljs-bullet" style="box-sizing: border-box;">8.    </span>top: 'bbox<span class="hljs-emphasis" style="box-sizing: border-box;">_inside_</span>weights'  
<span class="hljs-bullet" style="box-sizing: border-box;">9.    </span>top: 'bbox<span class="hljs-emphasis" style="box-sizing: border-box;">_outside_</span>weights'  
<span class="hljs-bullet" style="box-sizing: border-box;">10.   </span>python_param {  
<span class="hljs-bullet" style="box-sizing: border-box;">11.     </span>module: 'roi<span class="hljs-emphasis" style="box-sizing: border-box;">_data_</span>layer.layer'  
<span class="hljs-bullet" style="box-sizing: border-box;">12.     </span>layer: 'RoIDataLayer'  
<span class="hljs-bullet" style="box-sizing: border-box;">13.     </span>param<span class="hljs-emphasis" style="box-sizing: border-box;">_str: "'num_</span>classes': 16" #按训练集类别改，该值为类别数+1  
<span class="hljs-bullet" style="box-sizing: border-box;">14.   </span>}  
<span class="hljs-bullet" style="box-sizing: border-box;">15. </span>}</code>
   
   </pre><ul class="pre-numbering" style="box-sizing: border-box; position: absolute; width: 50px; top: 0px; left: 0px; margin: 0px; padding: 6px 0px 40px; border-right-width: 1px; border-right-style: solid; border-right-color: rgb(221, 221, 221); list-style: none; text-align: right; background-color: rgb(238, 238, 238);"><li style="box-sizing: border-box; padding: 0px 5px;">1</li><li style="box-sizing: border-box; padding: 0px 5px;">2</li><li style="box-sizing: border-box; padding: 0px 5px;">3</li><li style="box-sizing: border-box; padding: 0px 5px;">4</li><li style="box-sizing: border-box; padding: 0px 5px;">5</li><li style="box-sizing: border-box; padding: 0px 5px;">6</li><li style="box-sizing: border-box; padding: 0px 5px;">7</li><li style="box-sizing: border-box; padding: 0px 5px;">8</li><li style="box-sizing: border-box; padding: 0px 5px;">9</li><li style="box-sizing: border-box; padding: 0px 5px;">10</li><li style="box-sizing: border-box; padding: 0px 5px;">11</li><li style="box-sizing: border-box; padding: 0px 5px;">12</li><li style="box-sizing: border-box; padding: 0px 5px;">13</li><li style="box-sizing: border-box; padding: 0px 5px;">14</li><li style="box-sizing: border-box; padding: 0px 5px;">15</li></ul>
   
   <ul class="pre-numbering" style="box-sizing: border-box; position: absolute; width: 50px; top: 0px; left: 0px; margin: 0px; padding: 6px 0px 40px; border-right-width: 1px; border-right-style: solid; border-right-color: rgb(221, 221, 221); list-style: none; text-align: right; background-color: rgb(238, 238, 238);"><li style="box-sizing: border-box; padding: 0px 5px;">1</li><li style="box-sizing: border-box; padding: 0px 5px;">2</li><li style="box-sizing: border-box; padding: 0px 5px;">3</li><li style="box-sizing: border-box; padding: 0px 5px;">4</li><li style="box-sizing: border-box; padding: 0px 5px;">5</li><li style="box-sizing: border-box; padding: 0px 5px;">6</li><li style="box-sizing: border-box; padding: 0px 5px;">7</li><li style="box-sizing: border-box; padding: 0px 5px;">8</li><li style="box-sizing: border-box; padding: 0px 5px;">9</li><li style="box-sizing: border-box; padding: 0px 5px;">10</li><li style="box-sizing: border-box; padding: 0px 5px;">11</li><li style="box-sizing: border-box; padding: 0px 5px;">12</li><li style="box-sizing: border-box; padding: 0px 5px;">13</li><li style="box-sizing: border-box; padding: 0px 5px;">14</li><li style="box-sizing: border-box; padding: 0px 5px;">15</li></ul> 
  <pre class="prettyprint" name="code" style="white-space: nowrap; word-wrap: break-word; box-sizing: border-box; position: relative; overflow-y: hidden; overflow-x: auto; margin-top: 0px; margin-bottom: 1.1em; font-family: 'Source Code Pro', monospace; padding: 5px 5px 5px 60px; line-height: 1.45; word-break: break-all; border: 1px solid rgba(128, 128, 128, 0.0745098); border-radius: 0px; background-color: rgba(128, 128, 128, 0.0470588);"><code class="hljs markdown has-numbering" style="display: block; padding: 0px; color: inherit; box-sizing: border-box; font-family: 'Source Code Pro', monospace;font-size:undefined; white-space: pre; border-radius: 0px; word-wrap: normal; background: transparent;"><span class="hljs-bullet" style="box-sizing: border-box;">1.  </span>layer {  
<span class="hljs-bullet" style="box-sizing: border-box;">2.    </span>name: "cls_score"  
<span class="hljs-bullet" style="box-sizing: border-box;">3.    </span>type: "InnerProduct"  
<span class="hljs-bullet" style="box-sizing: border-box;">4.    </span>bottom: "fc7"  
<span class="hljs-bullet" style="box-sizing: border-box;">5.    </span>top: "cls_score"  
<span class="hljs-bullet" style="box-sizing: border-box;">6.    </span>param { lr_mult: 1.0 }  
<span class="hljs-bullet" style="box-sizing: border-box;">7.    </span>param { lr_mult: 2.0 }  
<span class="hljs-bullet" style="box-sizing: border-box;">8.    </span>inner<span class="hljs-emphasis" style="box-sizing: border-box;">_product_</span>param {  
<span class="hljs-bullet" style="box-sizing: border-box;">9.      </span>num_output: 16 #按训练集类别改，该值为类别数+1  
<span class="hljs-bullet" style="box-sizing: border-box;">10.     </span>weight_filler {  
<span class="hljs-bullet" style="box-sizing: border-box;">11.       </span>type: "gaussian"  
<span class="hljs-bullet" style="box-sizing: border-box;">12.       </span>std: 0.01  
<span class="hljs-bullet" style="box-sizing: border-box;">13.     </span>}  
<span class="hljs-bullet" style="box-sizing: border-box;">14.     </span>bias_filler {  
<span class="hljs-bullet" style="box-sizing: border-box;">15.       </span>type: "constant"  
<span class="hljs-bullet" style="box-sizing: border-box;">16.       </span>value: 0  
<span class="hljs-bullet" style="box-sizing: border-box;">17.     </span>}  
<span class="hljs-bullet" style="box-sizing: border-box;">18.   </span>}  
<span class="hljs-bullet" style="box-sizing: border-box;">19. </span>}  </code>
   
   </pre><ul class="pre-numbering" style="box-sizing: border-box; position: absolute; width: 50px; top: 0px; left: 0px; margin: 0px; padding: 6px 0px 40px; border-right-width: 1px; border-right-style: solid; border-right-color: rgb(221, 221, 221); list-style: none; text-align: right; background-color: rgb(238, 238, 238);"><li style="box-sizing: border-box; padding: 0px 5px;">1</li><li style="box-sizing: border-box; padding: 0px 5px;">2</li><li style="box-sizing: border-box; padding: 0px 5px;">3</li><li style="box-sizing: border-box; padding: 0px 5px;">4</li><li style="box-sizing: border-box; padding: 0px 5px;">5</li><li style="box-sizing: border-box; padding: 0px 5px;">6</li><li style="box-sizing: border-box; padding: 0px 5px;">7</li><li style="box-sizing: border-box; padding: 0px 5px;">8</li><li style="box-sizing: border-box; padding: 0px 5px;">9</li><li style="box-sizing: border-box; padding: 0px 5px;">10</li><li style="box-sizing: border-box; padding: 0px 5px;">11</li><li style="box-sizing: border-box; padding: 0px 5px;">12</li><li style="box-sizing: border-box; padding: 0px 5px;">13</li><li style="box-sizing: border-box; padding: 0px 5px;">14</li><li style="box-sizing: border-box; padding: 0px 5px;">15</li><li style="box-sizing: border-box; padding: 0px 5px;">16</li><li style="box-sizing: border-box; padding: 0px 5px;">17</li><li style="box-sizing: border-box; padding: 0px 5px;">18</li><li style="box-sizing: border-box; padding: 0px 5px;">19</li></ul>
   
   <ul class="pre-numbering" style="box-sizing: border-box; position: absolute; width: 50px; top: 0px; left: 0px; margin: 0px; padding: 6px 0px 40px; border-right-width: 1px; border-right-style: solid; border-right-color: rgb(221, 221, 221); list-style: none; text-align: right; background-color: rgb(238, 238, 238);"><li style="box-sizing: border-box; padding: 0px 5px;">1</li><li style="box-sizing: border-box; padding: 0px 5px;">2</li><li style="box-sizing: border-box; padding: 0px 5px;">3</li><li style="box-sizing: border-box; padding: 0px 5px;">4</li><li style="box-sizing: border-box; padding: 0px 5px;">5</li><li style="box-sizing: border-box; padding: 0px 5px;">6</li><li style="box-sizing: border-box; padding: 0px 5px;">7</li><li style="box-sizing: border-box; padding: 0px 5px;">8</li><li style="box-sizing: border-box; padding: 0px 5px;">9</li><li style="box-sizing: border-box; padding: 0px 5px;">10</li><li style="box-sizing: border-box; padding: 0px 5px;">11</li><li style="box-sizing: border-box; padding: 0px 5px;">12</li><li style="box-sizing: border-box; padding: 0px 5px;">13</li><li style="box-sizing: border-box; padding: 0px 5px;">14</li><li style="box-sizing: border-box; padding: 0px 5px;">15</li><li style="box-sizing: border-box; padding: 0px 5px;">16</li><li style="box-sizing: border-box; padding: 0px 5px;">17</li><li style="box-sizing: border-box; padding: 0px 5px;">18</li><li style="box-sizing: border-box; padding: 0px 5px;">19</li></ul> 
  <pre class="prettyprint" name="code" style="white-space: nowrap; word-wrap: break-word; box-sizing: border-box; position: relative; overflow-y: hidden; overflow-x: auto; margin-top: 0px; margin-bottom: 1.1em; font-family: 'Source Code Pro', monospace; padding: 5px 5px 5px 60px; line-height: 1.45; word-break: break-all; border: 1px solid rgba(128, 128, 128, 0.0745098); border-radius: 0px; background-color: rgba(128, 128, 128, 0.0470588);"><code class="hljs markdown has-numbering" style="display: block; padding: 0px; color: inherit; box-sizing: border-box; font-family: 'Source Code Pro', monospace;font-size:undefined; white-space: pre; border-radius: 0px; word-wrap: normal; background: transparent;"><span class="hljs-bullet" style="box-sizing: border-box;">1.  </span>layer {  
<span class="hljs-bullet" style="box-sizing: border-box;">2.    </span>name: "bbox_pred"  
<span class="hljs-bullet" style="box-sizing: border-box;">3.    </span>type: "InnerProduct"  
<span class="hljs-bullet" style="box-sizing: border-box;">4.    </span>bottom: "fc7"  
<span class="hljs-bullet" style="box-sizing: border-box;">5.    </span>top: "bbox_pred"  
<span class="hljs-bullet" style="box-sizing: border-box;">6.    </span>param { lr_mult: 1.0 }  
<span class="hljs-bullet" style="box-sizing: border-box;">7.    </span>param { lr_mult: 2.0 }  
<span class="hljs-bullet" style="box-sizing: border-box;">8.    </span>inner<span class="hljs-emphasis" style="box-sizing: border-box;">_product_</span>param {  
<span class="hljs-bullet" style="box-sizing: border-box;">9.      </span>num_output: 64 #按训练集类别改，该值为（类别数+1）*4  
<span class="hljs-bullet" style="box-sizing: border-box;">10.     </span>weight_filler {  
<span class="hljs-bullet" style="box-sizing: border-box;">11.       </span>type: "gaussian"  
<span class="hljs-bullet" style="box-sizing: border-box;">12.       </span>std: 0.001  
<span class="hljs-bullet" style="box-sizing: border-box;">13.     </span>}  
<span class="hljs-bullet" style="box-sizing: border-box;">14.     </span>bias_filler {  
<span class="hljs-bullet" style="box-sizing: border-box;">15.       </span>type: "constant"  
<span class="hljs-bullet" style="box-sizing: border-box;">16.       </span>value: 0  
<span class="hljs-bullet" style="box-sizing: border-box;">17.     </span>}  
<span class="hljs-bullet" style="box-sizing: border-box;">18.   </span>}  
<span class="hljs-bullet" style="box-sizing: border-box;">19. </span>} </code>
   
   </pre><ul class="pre-numbering" style="box-sizing: border-box; position: absolute; width: 50px; top: 0px; left: 0px; margin: 0px; padding: 6px 0px 40px; border-right-width: 1px; border-right-style: solid; border-right-color: rgb(221, 221, 221); list-style: none; text-align: right; background-color: rgb(238, 238, 238);"><li style="box-sizing: border-box; padding: 0px 5px;">1</li><li style="box-sizing: border-box; padding: 0px 5px;">2</li><li style="box-sizing: border-box; padding: 0px 5px;">3</li><li style="box-sizing: border-box; padding: 0px 5px;">4</li><li style="box-sizing: border-box; padding: 0px 5px;">5</li><li style="box-sizing: border-box; padding: 0px 5px;">6</li><li style="box-sizing: border-box; padding: 0px 5px;">7</li><li style="box-sizing: border-box; padding: 0px 5px;">8</li><li style="box-sizing: border-box; padding: 0px 5px;">9</li><li style="box-sizing: border-box; padding: 0px 5px;">10</li><li style="box-sizing: border-box; padding: 0px 5px;">11</li><li style="box-sizing: border-box; padding: 0px 5px;">12</li><li style="box-sizing: border-box; padding: 0px 5px;">13</li><li style="box-sizing: border-box; padding: 0px 5px;">14</li><li style="box-sizing: border-box; padding: 0px 5px;">15</li><li style="box-sizing: border-box; padding: 0px 5px;">16</li><li style="box-sizing: border-box; padding: 0px 5px;">17</li><li style="box-sizing: border-box; padding: 0px 5px;">18</li><li style="box-sizing: border-box; padding: 0px 5px;">19</li></ul>
   
   <ul class="pre-numbering" style="box-sizing: border-box; position: absolute; width: 50px; top: 0px; left: 0px; margin: 0px; padding: 6px 0px 40px; border-right-width: 1px; border-right-style: solid; border-right-color: rgb(221, 221, 221); list-style: none; text-align: right; background-color: rgb(238, 238, 238);"><li style="box-sizing: border-box; padding: 0px 5px;">1</li><li style="box-sizing: border-box; padding: 0px 5px;">2</li><li style="box-sizing: border-box; padding: 0px 5px;">3</li><li style="box-sizing: border-box; padding: 0px 5px;">4</li><li style="box-sizing: border-box; padding: 0px 5px;">5</li><li style="box-sizing: border-box; padding: 0px 5px;">6</li><li style="box-sizing: border-box; padding: 0px 5px;">7</li><li style="box-sizing: border-box; padding: 0px 5px;">8</li><li style="box-sizing: border-box; padding: 0px 5px;">9</li><li style="box-sizing: border-box; padding: 0px 5px;">10</li><li style="box-sizing: border-box; padding: 0px 5px;">11</li><li style="box-sizing: border-box; padding: 0px 5px;">12</li><li style="box-sizing: border-box; padding: 0px 5px;">13</li><li style="box-sizing: border-box; padding: 0px 5px;">14</li><li style="box-sizing: border-box; padding: 0px 5px;">15</li><li style="box-sizing: border-box; padding: 0px 5px;">16</li><li style="box-sizing: border-box; padding: 0px 5px;">17</li><li style="box-sizing: border-box; padding: 0px 5px;">18</li><li style="box-sizing: border-box; padding: 0px 5px;">19</li></ul> 
  <p style="margin-top:0px; margin-bottom:1.1em">2.py-faster-rcnn/models/pascal_voc/ZF/faster_rcnn_alt_opt/stage1_rpn_train.pt修改</p> 
  <pre class="prettyprint" name="code" style="white-space: nowrap; word-wrap: break-word; box-sizing: border-box; position: relative; overflow-y: hidden; overflow-x: auto; margin-top: 0px; margin-bottom: 1.1em; font-family: 'Source Code Pro', monospace; padding: 5px 5px 5px 60px; line-height: 1.45; word-break: break-all; border: 1px solid rgba(128, 128, 128, 0.0745098); border-radius: 0px; background-color: rgba(128, 128, 128, 0.0470588);"><code class="hljs markdown has-numbering" style="display: block; padding: 0px; color: inherit; box-sizing: border-box; font-family: 'Source Code Pro', monospace;font-size:undefined; white-space: pre; border-radius: 0px; word-wrap: normal; background: transparent;"><span class="hljs-bullet" style="box-sizing: border-box;">1.  </span>layer {  
<span class="hljs-bullet" style="box-sizing: border-box;">2.    </span>name: 'input-data'  
<span class="hljs-bullet" style="box-sizing: border-box;">3.    </span>type: 'Python'  
<span class="hljs-bullet" style="box-sizing: border-box;">4.    </span>top: 'data'  
<span class="hljs-bullet" style="box-sizing: border-box;">5.    </span>top: 'im_info'  
<span class="hljs-bullet" style="box-sizing: border-box;">6.    </span>top: 'gt_boxes'  
<span class="hljs-bullet" style="box-sizing: border-box;">7.    </span>python_param {  
<span class="hljs-bullet" style="box-sizing: border-box;">8.      </span>module: 'roi<span class="hljs-emphasis" style="box-sizing: border-box;">_data_</span>layer.layer'  
<span class="hljs-bullet" style="box-sizing: border-box;">9.      </span>layer: 'RoIDataLayer'  
<span class="hljs-bullet" style="box-sizing: border-box;">10.     </span>param<span class="hljs-emphasis" style="box-sizing: border-box;">_str: "'num_</span>classes': 16" #按训练集类别改，该值为类别数+1  
<span class="hljs-bullet" style="box-sizing: border-box;">11.   </span>}  
<span class="hljs-bullet" style="box-sizing: border-box;">12. </span>}</code>
   
   </pre><ul class="pre-numbering" style="box-sizing: border-box; position: absolute; width: 50px; top: 0px; left: 0px; margin: 0px; padding: 6px 0px 40px; border-right-width: 1px; border-right-style: solid; border-right-color: rgb(221, 221, 221); list-style: none; text-align: right; background-color: rgb(238, 238, 238);"><li style="box-sizing: border-box; padding: 0px 5px;">1</li><li style="box-sizing: border-box; padding: 0px 5px;">2</li><li style="box-sizing: border-box; padding: 0px 5px;">3</li><li style="box-sizing: border-box; padding: 0px 5px;">4</li><li style="box-sizing: border-box; padding: 0px 5px;">5</li><li style="box-sizing: border-box; padding: 0px 5px;">6</li><li style="box-sizing: border-box; padding: 0px 5px;">7</li><li style="box-sizing: border-box; padding: 0px 5px;">8</li><li style="box-sizing: border-box; padding: 0px 5px;">9</li><li style="box-sizing: border-box; padding: 0px 5px;">10</li><li style="box-sizing: border-box; padding: 0px 5px;">11</li><li style="box-sizing: border-box; padding: 0px 5px;">12</li></ul>
   
   <ul class="pre-numbering" style="box-sizing: border-box; position: absolute; width: 50px; top: 0px; left: 0px; margin: 0px; padding: 6px 0px 40px; border-right-width: 1px; border-right-style: solid; border-right-color: rgb(221, 221, 221); list-style: none; text-align: right; background-color: rgb(238, 238, 238);"><li style="box-sizing: border-box; padding: 0px 5px;">1</li><li style="box-sizing: border-box; padding: 0px 5px;">2</li><li style="box-sizing: border-box; padding: 0px 5px;">3</li><li style="box-sizing: border-box; padding: 0px 5px;">4</li><li style="box-sizing: border-box; padding: 0px 5px;">5</li><li style="box-sizing: border-box; padding: 0px 5px;">6</li><li style="box-sizing: border-box; padding: 0px 5px;">7</li><li style="box-sizing: border-box; padding: 0px 5px;">8</li><li style="box-sizing: border-box; padding: 0px 5px;">9</li><li style="box-sizing: border-box; padding: 0px 5px;">10</li><li style="box-sizing: border-box; padding: 0px 5px;">11</li><li style="box-sizing: border-box; padding: 0px 5px;">12</li></ul> 
  <p style="margin-top:0px; margin-bottom:1.1em">3.py-faster-rcnn/models/pascal_voc/ZF/faster_rcnn_alt_opt/stage2_fast_rcnn_train.pt修改</p> 
  <pre class="prettyprint" name="code" style="white-space: nowrap; word-wrap: break-word; box-sizing: border-box; position: relative; overflow-y: hidden; overflow-x: auto; margin-top: 0px; margin-bottom: 1.1em; font-family: 'Source Code Pro', monospace; padding: 5px 5px 5px 60px; line-height: 1.45; word-break: break-all; border: 1px solid rgba(128, 128, 128, 0.0745098); border-radius: 0px; background-color: rgba(128, 128, 128, 0.0470588);"><code class="hljs markdown has-numbering" style="display: block; padding: 0px; color: inherit; box-sizing: border-box; font-family: 'Source Code Pro', monospace;font-size:undefined; white-space: pre; border-radius: 0px; word-wrap: normal; background: transparent;"><span class="hljs-bullet" style="box-sizing: border-box;">1.  </span>layer {  
<span class="hljs-bullet" style="box-sizing: border-box;">2.    </span>name: 'data'  
<span class="hljs-bullet" style="box-sizing: border-box;">3.    </span>type: 'Python'  
<span class="hljs-bullet" style="box-sizing: border-box;">4.    </span>top: 'data'  
<span class="hljs-bullet" style="box-sizing: border-box;">5.    </span>top: 'rois'  
<span class="hljs-bullet" style="box-sizing: border-box;">6.    </span>top: 'labels'  
<span class="hljs-bullet" style="box-sizing: border-box;">7.    </span>top: 'bbox_targets'  
<span class="hljs-bullet" style="box-sizing: border-box;">8.    </span>top: 'bbox<span class="hljs-emphasis" style="box-sizing: border-box;">_inside_</span>weights'  
<span class="hljs-bullet" style="box-sizing: border-box;">9.    </span>top: 'bbox<span class="hljs-emphasis" style="box-sizing: border-box;">_outside_</span>weights'  
<span class="hljs-bullet" style="box-sizing: border-box;">10.   </span>python_param {  
<span class="hljs-bullet" style="box-sizing: border-box;">11.     </span>module: 'roi<span class="hljs-emphasis" style="box-sizing: border-box;">_data_</span>layer.layer'  
<span class="hljs-bullet" style="box-sizing: border-box;">12.     </span>layer: 'RoIDataLayer'  
<span class="hljs-bullet" style="box-sizing: border-box;">13.     </span>param<span class="hljs-emphasis" style="box-sizing: border-box;">_str: "'num_</span>classes': 16" #按训练集类别改，该值为类别数+1  
<span class="hljs-bullet" style="box-sizing: border-box;">14.   </span>}  
<span class="hljs-bullet" style="box-sizing: border-box;">15. </span>}</code>
   
   </pre><ul class="pre-numbering" style="box-sizing: border-box; position: absolute; width: 50px; top: 0px; left: 0px; margin: 0px; padding: 6px 0px 40px; border-right-width: 1px; border-right-style: solid; border-right-color: rgb(221, 221, 221); list-style: none; text-align: right; background-color: rgb(238, 238, 238);"><li style="box-sizing: border-box; padding: 0px 5px;">1</li><li style="box-sizing: border-box; padding: 0px 5px;">2</li><li style="box-sizing: border-box; padding: 0px 5px;">3</li><li style="box-sizing: border-box; padding: 0px 5px;">4</li><li style="box-sizing: border-box; padding: 0px 5px;">5</li><li style="box-sizing: border-box; padding: 0px 5px;">6</li><li style="box-sizing: border-box; padding: 0px 5px;">7</li><li style="box-sizing: border-box; padding: 0px 5px;">8</li><li style="box-sizing: border-box; padding: 0px 5px;">9</li><li style="box-sizing: border-box; padding: 0px 5px;">10</li><li style="box-sizing: border-box; padding: 0px 5px;">11</li><li style="box-sizing: border-box; padding: 0px 5px;">12</li><li style="box-sizing: border-box; padding: 0px 5px;">13</li><li style="box-sizing: border-box; padding: 0px 5px;">14</li><li style="box-sizing: border-box; padding: 0px 5px;">15</li></ul>
   
   <ul class="pre-numbering" style="box-sizing: border-box; position: absolute; width: 50px; top: 0px; left: 0px; margin: 0px; padding: 6px 0px 40px; border-right-width: 1px; border-right-style: solid; border-right-color: rgb(221, 221, 221); list-style: none; text-align: right; background-color: rgb(238, 238, 238);"><li style="box-sizing: border-box; padding: 0px 5px;">1</li><li style="box-sizing: border-box; padding: 0px 5px;">2</li><li style="box-sizing: border-box; padding: 0px 5px;">3</li><li style="box-sizing: border-box; padding: 0px 5px;">4</li><li style="box-sizing: border-box; padding: 0px 5px;">5</li><li style="box-sizing: border-box; padding: 0px 5px;">6</li><li style="box-sizing: border-box; padding: 0px 5px;">7</li><li style="box-sizing: border-box; padding: 0px 5px;">8</li><li style="box-sizing: border-box; padding: 0px 5px;">9</li><li style="box-sizing: border-box; padding: 0px 5px;">10</li><li style="box-sizing: border-box; padding: 0px 5px;">11</li><li style="box-sizing: border-box; padding: 0px 5px;">12</li><li style="box-sizing: border-box; padding: 0px 5px;">13</li><li style="box-sizing: border-box; padding: 0px 5px;">14</li><li style="box-sizing: border-box; padding: 0px 5px;">15</li></ul> 
  <pre class="prettyprint" name="code" style="white-space: nowrap; word-wrap: break-word; box-sizing: border-box; position: relative; overflow-y: hidden; overflow-x: auto; margin-top: 0px; margin-bottom: 1.1em; font-family: 'Source Code Pro', monospace; padding: 5px 5px 5px 60px; line-height: 1.45; word-break: break-all; border: 1px solid rgba(128, 128, 128, 0.0745098); border-radius: 0px; background-color: rgba(128, 128, 128, 0.0470588);"><code class="hljs markdown has-numbering" style="display: block; padding: 0px; color: inherit; box-sizing: border-box; font-family: 'Source Code Pro', monospace;font-size:undefined; white-space: pre; border-radius: 0px; word-wrap: normal; background: transparent;"> 1. layer {  
<span class="hljs-bullet" style="box-sizing: border-box;">2.    </span>name: "cls_score"  
<span class="hljs-bullet" style="box-sizing: border-box;">3.    </span>type: "InnerProduct"  
<span class="hljs-bullet" style="box-sizing: border-box;">4.    </span>bottom: "fc7"  
<span class="hljs-bullet" style="box-sizing: border-box;">5.    </span>top: "cls_score"  
<span class="hljs-bullet" style="box-sizing: border-box;">6.    </span>param { lr_mult: 1.0 }  
<span class="hljs-bullet" style="box-sizing: border-box;">7.    </span>param { lr_mult: 2.0 }  
<span class="hljs-bullet" style="box-sizing: border-box;">8.    </span>inner<span class="hljs-emphasis" style="box-sizing: border-box;">_product_</span>param {  
<span class="hljs-bullet" style="box-sizing: border-box;">9.      </span>num_output: 16 #按训练集类别改，该值为类别数+1  
<span class="hljs-bullet" style="box-sizing: border-box;">10.     </span>weight_filler {  
<span class="hljs-bullet" style="box-sizing: border-box;">11.       </span>type: "gaussian"  
<span class="hljs-bullet" style="box-sizing: border-box;">12.       </span>std: 0.01  
<span class="hljs-bullet" style="box-sizing: border-box;">13.     </span>}  
<span class="hljs-bullet" style="box-sizing: border-box;">14.     </span>bias_filler {  
<span class="hljs-bullet" style="box-sizing: border-box;">15.       </span>type: "constant"  
<span class="hljs-bullet" style="box-sizing: border-box;">16.       </span>value: 0  
<span class="hljs-bullet" style="box-sizing: border-box;">17.     </span>}  
<span class="hljs-bullet" style="box-sizing: border-box;">18.   </span>}  
<span class="hljs-bullet" style="box-sizing: border-box;">19. </span>}  </code>
   
   </pre><ul class="pre-numbering" style="box-sizing: border-box; position: absolute; width: 50px; top: 0px; left: 0px; margin: 0px; padding: 6px 0px 40px; border-right-width: 1px; border-right-style: solid; border-right-color: rgb(221, 221, 221); list-style: none; text-align: right; background-color: rgb(238, 238, 238);"><li style="box-sizing: border-box; padding: 0px 5px;">1</li><li style="box-sizing: border-box; padding: 0px 5px;">2</li><li style="box-sizing: border-box; padding: 0px 5px;">3</li><li style="box-sizing: border-box; padding: 0px 5px;">4</li><li style="box-sizing: border-box; padding: 0px 5px;">5</li><li style="box-sizing: border-box; padding: 0px 5px;">6</li><li style="box-sizing: border-box; padding: 0px 5px;">7</li><li style="box-sizing: border-box; padding: 0px 5px;">8</li><li style="box-sizing: border-box; padding: 0px 5px;">9</li><li style="box-sizing: border-box; padding: 0px 5px;">10</li><li style="box-sizing: border-box; padding: 0px 5px;">11</li><li style="box-sizing: border-box; padding: 0px 5px;">12</li><li style="box-sizing: border-box; padding: 0px 5px;">13</li><li style="box-sizing: border-box; padding: 0px 5px;">14</li><li style="box-sizing: border-box; padding: 0px 5px;">15</li><li style="box-sizing: border-box; padding: 0px 5px;">16</li><li style="box-sizing: border-box; padding: 0px 5px;">17</li><li style="box-sizing: border-box; padding: 0px 5px;">18</li><li style="box-sizing: border-box; padding: 0px 5px;">19</li></ul>
   
   <ul class="pre-numbering" style="box-sizing: border-box; position: absolute; width: 50px; top: 0px; left: 0px; margin: 0px; padding: 6px 0px 40px; border-right-width: 1px; border-right-style: solid; border-right-color: rgb(221, 221, 221); list-style: none; text-align: right; background-color: rgb(238, 238, 238);"><li style="box-sizing: border-box; padding: 0px 5px;">1</li><li style="box-sizing: border-box; padding: 0px 5px;">2</li><li style="box-sizing: border-box; padding: 0px 5px;">3</li><li style="box-sizing: border-box; padding: 0px 5px;">4</li><li style="box-sizing: border-box; padding: 0px 5px;">5</li><li style="box-sizing: border-box; padding: 0px 5px;">6</li><li style="box-sizing: border-box; padding: 0px 5px;">7</li><li style="box-sizing: border-box; padding: 0px 5px;">8</li><li style="box-sizing: border-box; padding: 0px 5px;">9</li><li style="box-sizing: border-box; padding: 0px 5px;">10</li><li style="box-sizing: border-box; padding: 0px 5px;">11</li><li style="box-sizing: border-box; padding: 0px 5px;">12</li><li style="box-sizing: border-box; padding: 0px 5px;">13</li><li style="box-sizing: border-box; padding: 0px 5px;">14</li><li style="box-sizing: border-box; padding: 0px 5px;">15</li><li style="box-sizing: border-box; padding: 0px 5px;">16</li><li style="box-sizing: border-box; padding: 0px 5px;">17</li><li style="box-sizing: border-box; padding: 0px 5px;">18</li><li style="box-sizing: border-box; padding: 0px 5px;">19</li></ul> 
  <pre class="prettyprint" name="code" style="white-space: nowrap; word-wrap: break-word; box-sizing: border-box; position: relative; overflow-y: hidden; overflow-x: auto; margin-top: 0px; margin-bottom: 1.1em; font-family: 'Source Code Pro', monospace; padding: 5px 5px 5px 60px; line-height: 1.45; word-break: break-all; border: 1px solid rgba(128, 128, 128, 0.0745098); border-radius: 0px; background-color: rgba(128, 128, 128, 0.0470588);"><code class="hljs markdown has-numbering" style="display: block; padding: 0px; color: inherit; box-sizing: border-box; font-family: 'Source Code Pro', monospace;font-size:undefined; white-space: pre; border-radius: 0px; word-wrap: normal; background: transparent;"><span class="hljs-bullet" style="box-sizing: border-box;">1.  </span>layer {  
<span class="hljs-bullet" style="box-sizing: border-box;">2.    </span>name: "bbox_pred"  
<span class="hljs-bullet" style="box-sizing: border-box;">3.    </span>type: "InnerProduct"  
<span class="hljs-bullet" style="box-sizing: border-box;">4.    </span>bottom: "fc7"  
<span class="hljs-bullet" style="box-sizing: border-box;">5.    </span>top: "bbox_pred"  
<span class="hljs-bullet" style="box-sizing: border-box;">6.    </span>param { lr_mult: 1.0 }  
<span class="hljs-bullet" style="box-sizing: border-box;">7.    </span>param { lr_mult: 2.0 }  
<span class="hljs-bullet" style="box-sizing: border-box;">8.    </span>inner<span class="hljs-emphasis" style="box-sizing: border-box;">_product_</span>param {  
<span class="hljs-bullet" style="box-sizing: border-box;">9.      </span>num_output: 64 #按训练集类别改，该值为（类别数+1）*4  
<span class="hljs-bullet" style="box-sizing: border-box;">10.     </span>weight_filler {  
<span class="hljs-bullet" style="box-sizing: border-box;">11.       </span>type: "gaussian"  
<span class="hljs-bullet" style="box-sizing: border-box;">12.       </span>std: 0.001  
<span class="hljs-bullet" style="box-sizing: border-box;">13.     </span>}  
<span class="hljs-bullet" style="box-sizing: border-box;">14.     </span>bias_filler {  
<span class="hljs-bullet" style="box-sizing: border-box;">15.       </span>type: "constant"  
<span class="hljs-bullet" style="box-sizing: border-box;">16.       </span>value: 0  
<span class="hljs-bullet" style="box-sizing: border-box;">17.     </span>}  
<span class="hljs-bullet" style="box-sizing: border-box;">18.   </span>}  
<span class="hljs-bullet" style="box-sizing: border-box;">19. </span>} </code>
   
   </pre><ul class="pre-numbering" style="box-sizing: border-box; position: absolute; width: 50px; top: 0px; left: 0px; margin: 0px; padding: 6px 0px 40px; border-right-width: 1px; border-right-style: solid; border-right-color: rgb(221, 221, 221); list-style: none; text-align: right; background-color: rgb(238, 238, 238);"><li style="box-sizing: border-box; padding: 0px 5px;">1</li><li style="box-sizing: border-box; padding: 0px 5px;">2</li><li style="box-sizing: border-box; padding: 0px 5px;">3</li><li style="box-sizing: border-box; padding: 0px 5px;">4</li><li style="box-sizing: border-box; padding: 0px 5px;">5</li><li style="box-sizing: border-box; padding: 0px 5px;">6</li><li style="box-sizing: border-box; padding: 0px 5px;">7</li><li style="box-sizing: border-box; padding: 0px 5px;">8</li><li style="box-sizing: border-box; padding: 0px 5px;">9</li><li style="box-sizing: border-box; padding: 0px 5px;">10</li><li style="box-sizing: border-box; padding: 0px 5px;">11</li><li style="box-sizing: border-box; padding: 0px 5px;">12</li><li style="box-sizing: border-box; padding: 0px 5px;">13</li><li style="box-sizing: border-box; padding: 0px 5px;">14</li><li style="box-sizing: border-box; padding: 0px 5px;">15</li><li style="box-sizing: border-box; padding: 0px 5px;">16</li><li style="box-sizing: border-box; padding: 0px 5px;">17</li><li style="box-sizing: border-box; padding: 0px 5px;">18</li><li style="box-sizing: border-box; padding: 0px 5px;">19</li></ul>
   
   <ul class="pre-numbering" style="box-sizing: border-box; position: absolute; width: 50px; top: 0px; left: 0px; margin: 0px; padding: 6px 0px 40px; border-right-width: 1px; border-right-style: solid; border-right-color: rgb(221, 221, 221); list-style: none; text-align: right; background-color: rgb(238, 238, 238);"><li style="box-sizing: border-box; padding: 0px 5px;">1</li><li style="box-sizing: border-box; padding: 0px 5px;">2</li><li style="box-sizing: border-box; padding: 0px 5px;">3</li><li style="box-sizing: border-box; padding: 0px 5px;">4</li><li style="box-sizing: border-box; padding: 0px 5px;">5</li><li style="box-sizing: border-box; padding: 0px 5px;">6</li><li style="box-sizing: border-box; padding: 0px 5px;">7</li><li style="box-sizing: border-box; padding: 0px 5px;">8</li><li style="box-sizing: border-box; padding: 0px 5px;">9</li><li style="box-sizing: border-box; padding: 0px 5px;">10</li><li style="box-sizing: border-box; padding: 0px 5px;">11</li><li style="box-sizing: border-box; padding: 0px 5px;">12</li><li style="box-sizing: border-box; padding: 0px 5px;">13</li><li style="box-sizing: border-box; padding: 0px 5px;">14</li><li style="box-sizing: border-box; padding: 0px 5px;">15</li><li style="box-sizing: border-box; padding: 0px 5px;">16</li><li style="box-sizing: border-box; padding: 0px 5px;">17</li><li style="box-sizing: border-box; padding: 0px 5px;">18</li><li style="box-sizing: border-box; padding: 0px 5px;">19</li></ul> 
  <p style="margin-top:0px; margin-bottom:1.1em">4.py-faster-rcnn/models/pascal_voc/ZF/faster_rcnn_alt_opt/stage2_rpn_train.pt修改</p> 
  <pre class="prettyprint" name="code" style="white-space: nowrap; word-wrap: break-word; box-sizing: border-box; position: relative; overflow-y: hidden; overflow-x: auto; margin-top: 0px; margin-bottom: 1.1em; font-family: 'Source Code Pro', monospace; padding: 5px 5px 5px 60px; line-height: 1.45; word-break: break-all; border: 1px solid rgba(128, 128, 128, 0.0745098); border-radius: 0px; background-color: rgba(128, 128, 128, 0.0470588);"><code class="hljs markdown has-numbering" style="display: block; padding: 0px; color: inherit; box-sizing: border-box; font-family: 'Source Code Pro', monospace;font-size:undefined; white-space: pre; border-radius: 0px; word-wrap: normal; background: transparent;"><span class="hljs-bullet" style="box-sizing: border-box;">1.  </span>layer {  
<span class="hljs-bullet" style="box-sizing: border-box;">2.    </span>name: 'input-data'  
<span class="hljs-bullet" style="box-sizing: border-box;">3.    </span>type: 'Python'  
<span class="hljs-bullet" style="box-sizing: border-box;">4.    </span>top: 'data'  
<span class="hljs-bullet" style="box-sizing: border-box;">5.    </span>top: 'im_info'  
<span class="hljs-bullet" style="box-sizing: border-box;">6.    </span>top: 'gt_boxes'  
<span class="hljs-bullet" style="box-sizing: border-box;">7.    </span>python_param {  
<span class="hljs-bullet" style="box-sizing: border-box;">8.      </span>module: 'roi<span class="hljs-emphasis" style="box-sizing: border-box;">_data_</span>layer.layer'  
<span class="hljs-bullet" style="box-sizing: border-box;">9.      </span>layer: 'RoIDataLayer'  
<span class="hljs-bullet" style="box-sizing: border-box;">10.     </span>param<span class="hljs-emphasis" style="box-sizing: border-box;">_str: "'num_</span>classes': 16" #按训练集类别改，该值为类别数+1  
<span class="hljs-bullet" style="box-sizing: border-box;">11.   </span>}  
<span class="hljs-bullet" style="box-sizing: border-box;">12. </span>}  </code>
   
   </pre><ul class="pre-numbering" style="box-sizing: border-box; position: absolute; width: 50px; top: 0px; left: 0px; margin: 0px; padding: 6px 0px 40px; border-right-width: 1px; border-right-style: solid; border-right-color: rgb(221, 221, 221); list-style: none; text-align: right; background-color: rgb(238, 238, 238);"><li style="box-sizing: border-box; padding: 0px 5px;">1</li><li style="box-sizing: border-box; padding: 0px 5px;">2</li><li style="box-sizing: border-box; padding: 0px 5px;">3</li><li style="box-sizing: border-box; padding: 0px 5px;">4</li><li style="box-sizing: border-box; padding: 0px 5px;">5</li><li style="box-sizing: border-box; padding: 0px 5px;">6</li><li style="box-sizing: border-box; padding: 0px 5px;">7</li><li style="box-sizing: border-box; padding: 0px 5px;">8</li><li style="box-sizing: border-box; padding: 0px 5px;">9</li><li style="box-sizing: border-box; padding: 0px 5px;">10</li><li style="box-sizing: border-box; padding: 0px 5px;">11</li><li style="box-sizing: border-box; padding: 0px 5px;">12</li></ul>
   
   <ul class="pre-numbering" style="box-sizing: border-box; position: absolute; width: 50px; top: 0px; left: 0px; margin: 0px; padding: 6px 0px 40px; border-right-width: 1px; border-right-style: solid; border-right-color: rgb(221, 221, 221); list-style: none; text-align: right; background-color: rgb(238, 238, 238);"><li style="box-sizing: border-box; padding: 0px 5px;">1</li><li style="box-sizing: border-box; padding: 0px 5px;">2</li><li style="box-sizing: border-box; padding: 0px 5px;">3</li><li style="box-sizing: border-box; padding: 0px 5px;">4</li><li style="box-sizing: border-box; padding: 0px 5px;">5</li><li style="box-sizing: border-box; padding: 0px 5px;">6</li><li style="box-sizing: border-box; padding: 0px 5px;">7</li><li style="box-sizing: border-box; padding: 0px 5px;">8</li><li style="box-sizing: border-box; padding: 0px 5px;">9</li><li style="box-sizing: border-box; padding: 0px 5px;">10</li><li style="box-sizing: border-box; padding: 0px 5px;">11</li><li style="box-sizing: border-box; padding: 0px 5px;">12</li></ul> 
  <p style="margin-top:0px; margin-bottom:1.1em">5.py-faster-rcnn/models/pascal_voc/ZF/faster_rcnn_alt_opt/faster_rcnn_test.pt修改</p> 
  <pre class="prettyprint" name="code" style="white-space: nowrap; word-wrap: break-word; box-sizing: border-box; position: relative; overflow-y: hidden; overflow-x: auto; margin-top: 0px; margin-bottom: 1.1em; font-family: 'Source Code Pro', monospace; padding: 5px 5px 5px 60px; line-height: 1.45; word-break: break-all; border: 1px solid rgba(128, 128, 128, 0.0745098); border-radius: 0px; background-color: rgba(128, 128, 128, 0.0470588);"><code class="hljs markdown has-numbering" style="display: block; padding: 0px; color: inherit; box-sizing: border-box; font-family: 'Source Code Pro', monospace;font-size:undefined; white-space: pre; border-radius: 0px; word-wrap: normal; background: transparent;"><span class="hljs-bullet" style="box-sizing: border-box;">1.  </span>layer {  
<span class="hljs-bullet" style="box-sizing: border-box;">2.    </span>name: "cls_score"  
<span class="hljs-bullet" style="box-sizing: border-box;">3.    </span>type: "InnerProduct"  
<span class="hljs-bullet" style="box-sizing: border-box;">4.    </span>bottom: "fc7"  
<span class="hljs-bullet" style="box-sizing: border-box;">5.    </span>top: "cls_score"  
<span class="hljs-bullet" style="box-sizing: border-box;">6.    </span>inner<span class="hljs-emphasis" style="box-sizing: border-box;">_product_</span>param {  
<span class="hljs-bullet" style="box-sizing: border-box;">7.      </span>num_output: 16 #按训练集类别改，该值为类别数+1  
<span class="hljs-bullet" style="box-sizing: border-box;">8.    </span>}  
<span class="hljs-bullet" style="box-sizing: border-box;">9.  </span>}  </code>
   
   </pre><ul class="pre-numbering" style="box-sizing: border-box; position: absolute; width: 50px; top: 0px; left: 0px; margin: 0px; padding: 6px 0px 40px; border-right-width: 1px; border-right-style: solid; border-right-color: rgb(221, 221, 221); list-style: none; text-align: right; background-color: rgb(238, 238, 238);"><li style="box-sizing: border-box; padding: 0px 5px;">1</li><li style="box-sizing: border-box; padding: 0px 5px;">2</li><li style="box-sizing: border-box; padding: 0px 5px;">3</li><li style="box-sizing: border-box; padding: 0px 5px;">4</li><li style="box-sizing: border-box; padding: 0px 5px;">5</li><li style="box-sizing: border-box; padding: 0px 5px;">6</li><li style="box-sizing: border-box; padding: 0px 5px;">7</li><li style="box-sizing: border-box; padding: 0px 5px;">8</li><li style="box-sizing: border-box; padding: 0px 5px;">9</li></ul>
   
   <ul class="pre-numbering" style="box-sizing: border-box; position: absolute; width: 50px; top: 0px; left: 0px; margin: 0px; padding: 6px 0px 40px; border-right-width: 1px; border-right-style: solid; border-right-color: rgb(221, 221, 221); list-style: none; text-align: right; background-color: rgb(238, 238, 238);"><li style="box-sizing: border-box; padding: 0px 5px;">1</li><li style="box-sizing: border-box; padding: 0px 5px;">2</li><li style="box-sizing: border-box; padding: 0px 5px;">3</li><li style="box-sizing: border-box; padding: 0px 5px;">4</li><li style="box-sizing: border-box; padding: 0px 5px;">5</li><li style="box-sizing: border-box; padding: 0px 5px;">6</li><li style="box-sizing: border-box; padding: 0px 5px;">7</li><li style="box-sizing: border-box; padding: 0px 5px;">8</li><li style="box-sizing: border-box; padding: 0px 5px;">9</li></ul> 
  <pre class="prettyprint" name="code" style="white-space: nowrap; word-wrap: break-word; box-sizing: border-box; position: relative; overflow-y: hidden; overflow-x: auto; margin-top: 0px; margin-bottom: 1.1em; font-family: 'Source Code Pro', monospace; padding: 5px 5px 5px 60px; line-height: 1.45; word-break: break-all; border: 1px solid rgba(128, 128, 128, 0.0745098); border-radius: 0px; background-color: rgba(128, 128, 128, 0.0470588);"><code class="hljs markdown has-numbering" style="display: block; padding: 0px; color: inherit; box-sizing: border-box; font-family: 'Source Code Pro', monospace;font-size:undefined; white-space: pre; border-radius: 0px; word-wrap: normal; background: transparent;"><span class="hljs-bullet" style="box-sizing: border-box;">1.  </span>layer {  
<span class="hljs-bullet" style="box-sizing: border-box;">2.    </span>name: "bbox_pred"  
<span class="hljs-bullet" style="box-sizing: border-box;">3.    </span>type: "InnerProduct"  
<span class="hljs-bullet" style="box-sizing: border-box;">4.    </span>bottom: "fc7"  
<span class="hljs-bullet" style="box-sizing: border-box;">5.    </span>top: "bbox_pred"  
<span class="hljs-bullet" style="box-sizing: border-box;">6.    </span>inner<span class="hljs-emphasis" style="box-sizing: border-box;">_product_</span>param {  
<span class="hljs-bullet" style="box-sizing: border-box;">7.      </span>num_output: 64 #按训练集类别改，该值为（类别数+1）*4  
<span class="hljs-bullet" style="box-sizing: border-box;">8.    </span>}  
<span class="hljs-bullet" style="box-sizing: border-box;">9.  </span>}  </code>
   
   </pre><ul class="pre-numbering" style="box-sizing: border-box; position: absolute; width: 50px; top: 0px; left: 0px; margin: 0px; padding: 6px 0px 40px; border-right-width: 1px; border-right-style: solid; border-right-color: rgb(221, 221, 221); list-style: none; text-align: right; background-color: rgb(238, 238, 238);"><li style="box-sizing: border-box; padding: 0px 5px;">1</li><li style="box-sizing: border-box; padding: 0px 5px;">2</li><li style="box-sizing: border-box; padding: 0px 5px;">3</li><li style="box-sizing: border-box; padding: 0px 5px;">4</li><li style="box-sizing: border-box; padding: 0px 5px;">5</li><li style="box-sizing: border-box; padding: 0px 5px;">6</li><li style="box-sizing: border-box; padding: 0px 5px;">7</li><li style="box-sizing: border-box; padding: 0px 5px;">8</li><li style="box-sizing: border-box; padding: 0px 5px;">9</li></ul>
   
   <ul class="pre-numbering" style="box-sizing: border-box; position: absolute; width: 50px; top: 0px; left: 0px; margin: 0px; padding: 6px 0px 40px; border-right-width: 1px; border-right-style: solid; border-right-color: rgb(221, 221, 221); list-style: none; text-align: right; background-color: rgb(238, 238, 238);"><li style="box-sizing: border-box; padding: 0px 5px;">1</li><li style="box-sizing: border-box; padding: 0px 5px;">2</li><li style="box-sizing: border-box; padding: 0px 5px;">3</li><li style="box-sizing: border-box; padding: 0px 5px;">4</li><li style="box-sizing: border-box; padding: 0px 5px;">5</li><li style="box-sizing: border-box; padding: 0px 5px;">6</li><li style="box-sizing: border-box; padding: 0px 5px;">7</li><li style="box-sizing: border-box; padding: 0px 5px;">8</li><li style="box-sizing: border-box; padding: 0px 5px;">9</li></ul> 
  <p style="margin-top:0px; margin-bottom:1.1em">6.py-faster-rcnn/lib/datasets/pascal_voc.py修改</p> 
  <pre class="prettyprint" name="code" style="white-space: nowrap; word-wrap: break-word; box-sizing: border-box; position: relative; overflow-y: hidden; overflow-x: auto; margin-top: 0px; margin-bottom: 1.1em; font-family: 'Source Code Pro', monospace; padding: 5px 5px 5px 60px; line-height: 1.45; word-break: break-all; border: 1px solid rgba(128, 128, 128, 0.0745098); border-radius: 0px; background-color: rgba(128, 128, 128, 0.0470588);"><code class="hljs haml has-numbering" style="display: block; padding: 0px; color: inherit; box-sizing: border-box; font-family: 'Source Code Pro', monospace;font-size:undefined; white-space: pre; border-radius: 0px; word-wrap: normal; background: transparent;">1.class pascal_voc(imdb):  
 -<span class="ruby" style="box-sizing: border-box;">    <span class="hljs-function" style="box-sizing: border-box;"><span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">def</span> </span>__init_<span class="hljs-number" style="color: rgb(0, 102, 102); box-sizing: border-box;">_</span>(<span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">self</span>, image_set, year, devkit_path=<span class="hljs-constant" style="box-sizing: border-box;">None</span>)<span class="hljs-symbol" style="color: rgb(0, 102, 102); box-sizing: border-box;">:</span>  
</span> -<span class="ruby" style="box-sizing: border-box;">        imdb.__init_<span class="hljs-number" style="color: rgb(0, 102, 102); box-sizing: border-box;">_</span>(<span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">self</span>, <span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">'voc_'</span> + year + <span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">'_'</span> + image_set)  
</span> -<span class="ruby" style="box-sizing: border-box;">        <span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">self</span>._year = year  
</span> -<span class="ruby" style="box-sizing: border-box;">        <span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">self</span>._image_set = image_set  
</span> -<span class="ruby" style="box-sizing: border-box;">        <span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">self</span>._devkit_path = <span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">self</span>._get_default_path() <span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">if</span> devkit_path is <span class="hljs-constant" style="box-sizing: border-box;">None</span> \  
</span> -<span class="ruby" style="box-sizing: border-box;">                            <span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">else</span> devkit_path  
</span> -<span class="ruby" style="box-sizing: border-box;">        <span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">self</span>._data_path = os.path.join(<span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">self</span>._devkit_path, <span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">'VOC'</span> + <span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">self</span>._year)  
</span> -<span class="ruby" style="box-sizing: border-box;">        <span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">self</span>._classes = (<span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">'__background__'</span>, <span class="hljs-comment" style="color: rgb(136, 0, 0); box-sizing: border-box;"># always index 0  </span>
</span> -<span class="ruby" style="box-sizing: border-box;">                         <span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">'你的标签1'</span>,<span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">'你的标签2'</span>,你的标签<span class="hljs-number" style="color: rgb(0, 102, 102); box-sizing: border-box;">3</span><span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">','</span>你的标签<span class="hljs-number" style="color: rgb(0, 102, 102); box-sizing: border-box;">4</span><span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">'  
</span></span> -<span class="ruby" style="box-sizing: border-box;">                   )  </span></code>
   
   </pre><ul class="pre-numbering" style="box-sizing: border-box; position: absolute; width: 50px; top: 0px; left: 0px; margin: 0px; padding: 6px 0px 40px; border-right-width: 1px; border-right-style: solid; border-right-color: rgb(221, 221, 221); list-style: none; text-align: right; background-color: rgb(238, 238, 238);"><li style="box-sizing: border-box; padding: 0px 5px;">1</li><li style="box-sizing: border-box; padding: 0px 5px;">2</li><li style="box-sizing: border-box; padding: 0px 5px;">3</li><li style="box-sizing: border-box; padding: 0px 5px;">4</li><li style="box-sizing: border-box; padding: 0px 5px;">5</li><li style="box-sizing: border-box; padding: 0px 5px;">6</li><li style="box-sizing: border-box; padding: 0px 5px;">7</li><li style="box-sizing: border-box; padding: 0px 5px;">8</li><li style="box-sizing: border-box; padding: 0px 5px;">9</li><li style="box-sizing: border-box; padding: 0px 5px;">10</li><li style="box-sizing: border-box; padding: 0px 5px;">11</li></ul>
   
   <ul class="pre-numbering" style="box-sizing: border-box; position: absolute; width: 50px; top: 0px; left: 0px; margin: 0px; padding: 6px 0px 40px; border-right-width: 1px; border-right-style: solid; border-right-color: rgb(221, 221, 221); list-style: none; text-align: right; background-color: rgb(238, 238, 238);"><li style="box-sizing: border-box; padding: 0px 5px;">1</li><li style="box-sizing: border-box; padding: 0px 5px;">2</li><li style="box-sizing: border-box; padding: 0px 5px;">3</li><li style="box-sizing: border-box; padding: 0px 5px;">4</li><li style="box-sizing: border-box; padding: 0px 5px;">5</li><li style="box-sizing: border-box; padding: 0px 5px;">6</li><li style="box-sizing: border-box; padding: 0px 5px;">7</li><li style="box-sizing: border-box; padding: 0px 5px;">8</li><li style="box-sizing: border-box; padding: 0px 5px;">9</li><li style="box-sizing: border-box; padding: 0px 5px;">10</li><li style="box-sizing: border-box; padding: 0px 5px;">11</li></ul> 
  <p style="margin-top:0px; margin-bottom:1.1em">上面要改的地方是 <br style=""> 　修改训练集文件夹：</p> 
  <pre class="prettyprint" name="code" style="white-space: nowrap; word-wrap: break-word; box-sizing: border-box; position: relative; overflow-y: hidden; overflow-x: auto; margin-top: 0px; margin-bottom: 1.1em; font-family: 'Source Code Pro', monospace; padding: 5px 5px 5px 60px; line-height: 1.45; word-break: break-all; border: 1px solid rgba(128, 128, 128, 0.0745098); border-radius: 0px; background-color: rgba(128, 128, 128, 0.0470588);"><code class="hljs oxygene has-numbering" style="display: block; padding: 0px; color: inherit; box-sizing: border-box; font-family: 'Source Code Pro', monospace;font-size:undefined; white-space: pre; border-radius: 0px; word-wrap: normal; background: transparent;"><span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">self</span>._data_path = os.path.<span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">join</span>(<span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">self</span>._devkit_path, <span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">'VOC'</span>+<span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">self</span>._year) </code>
   
   </pre><ul class="pre-numbering" style="box-sizing: border-box; position: absolute; width: 50px; top: 0px; left: 0px; margin: 0px; padding: 6px 0px 40px; border-right-width: 1px; border-right-style: solid; border-right-color: rgb(221, 221, 221); list-style: none; text-align: right; background-color: rgb(238, 238, 238);"><li style="box-sizing: border-box; padding: 0px 5px;">1</li></ul>
   
   <ul class="pre-numbering" style="box-sizing: border-box; position: absolute; width: 50px; top: 0px; left: 0px; margin: 0px; padding: 6px 0px 40px; border-right-width: 1px; border-right-style: solid; border-right-color: rgb(221, 221, 221); list-style: none; text-align: right; background-color: rgb(238, 238, 238);"><li style="box-sizing: border-box; padding: 0px 5px;">1</li></ul> 
  <p style="margin-top:0px; margin-bottom:1.1em">　用你的数据集直接替换原来VOC2007内的Annotations，ImageSets和JPEGImages就不用修改,以免出现各种错误。 <br style=""> <span style=""> 修改标签：</span> <br style=""> self._classes = (‘<span style="">background</span>‘, # always index 0 <br style=""> ‘你的标签1’,’你的标签2’,’你的标签3’,’你的标签4’) <br style=""> 修改成你的数据集的标签就行。 <br style=""> <span style="">（2）</span> <br style=""> cls = self._class_to_ind[obj.find(‘name’).text.lower().strip()] <br style=""> 这里把标签转成小写，如果你的标签含有大写字母，可能会出现KeyError的错误，所以建议标签用小写字母。建议训练的标签还是用小写的字母，如果最终需要用大写字母或中文显示标签，可参考：<a target="_blank" href="http://blog.csdn.net/sinat_30071459/article/details/51694037" style="color:rgb(51,102,153); text-decoration:none" rel="noopener noreferrer">http://blog.csdn.net/sinat_30071459/article/details/51694037</a></p> 
  <p style="margin-top:0px; margin-bottom:1.1em">7.py-faster-rcnn/lib/datasets/imdb.py修改 <br style=""> 　该文件的append_flipped_images(self)函数修改为：</p> 
  <pre class="prettyprint" name="code" style="white-space: nowrap; word-wrap: break-word; box-sizing: border-box; position: relative; overflow-y: hidden; overflow-x: auto; margin-top: 0px; margin-bottom: 1.1em; font-family: 'Source Code Pro', monospace; padding: 5px 5px 5px 60px; line-height: 1.45; word-break: break-all; border: 1px solid rgba(128, 128, 128, 0.0745098); border-radius: 0px; background-color: rgba(128, 128, 128, 0.0470588);"><code class="hljs markdown has-numbering" style="display: block; padding: 0px; color: inherit; box-sizing: border-box; font-family: 'Source Code Pro', monospace;font-size:undefined; white-space: pre; border-radius: 0px; word-wrap: normal; background: transparent;"><span class="hljs-bullet" style="box-sizing: border-box;">1.  </span>def append<span class="hljs-emphasis" style="box-sizing: border-box;">_flipped_</span>images(self):  
<span class="hljs-bullet" style="box-sizing: border-box;">2.          </span>num<span class="hljs-emphasis" style="box-sizing: border-box;">_images = self.num_</span>images  
<span class="hljs-bullet" style="box-sizing: border-box;">3.          </span>widths = [PIL.Image.open(self.image<span class="hljs-emphasis" style="box-sizing: border-box;">_path_</span>at(i)).size[0]  
<span class="hljs-bullet" style="box-sizing: border-box;">4.                    </span>for i in xrange(num_images)]  
<span class="hljs-bullet" style="box-sizing: border-box;">5.          </span>for i in xrange(num_images):  
<span class="hljs-bullet" style="box-sizing: border-box;">6.              </span>boxes = self.roidb[<span class="hljs-link_label" style="box-sizing: border-box;">i</span>][<span class="hljs-link_reference" style="box-sizing: border-box;">'boxes'</span>].copy()  
<span class="hljs-bullet" style="box-sizing: border-box;">7.              </span>oldx1 = boxes[:, 0].copy()  
<span class="hljs-bullet" style="box-sizing: border-box;">8.              </span>oldx2 = boxes[:, 2].copy()  
<span class="hljs-bullet" style="box-sizing: border-box;">9.              </span>boxes[:, 0] = widths[i] - oldx2 - 1  
<span class="hljs-bullet" style="box-sizing: border-box;">10.             </span>print boxes[:, 0]  
<span class="hljs-bullet" style="box-sizing: border-box;">11.             </span>boxes[:, 2] = widths[i] - oldx1 - 1  
<span class="hljs-bullet" style="box-sizing: border-box;">12.             </span>print boxes[:, 0]  
<span class="hljs-bullet" style="box-sizing: border-box;">13.             </span>assert (boxes[:, 2] &gt;= boxes[:, 0]).all()  
<span class="hljs-bullet" style="box-sizing: border-box;">14.             </span>entry = {'boxes' : boxes,  
<span class="hljs-bullet" style="box-sizing: border-box;">15.                      </span>'gt<span class="hljs-emphasis" style="box-sizing: border-box;">_overlaps' : self.roidb[i]['gt_</span>overlaps'],  
<span class="hljs-bullet" style="box-sizing: border-box;">16.                      </span>'gt<span class="hljs-emphasis" style="box-sizing: border-box;">_classes' : self.roidb[i]['gt_</span>classes'],  
<span class="hljs-bullet" style="box-sizing: border-box;">17.                      </span>'flipped' : True}  
<span class="hljs-bullet" style="box-sizing: border-box;">18.             </span>self.roidb.append(entry)  
<span class="hljs-bullet" style="box-sizing: border-box;">19.         </span>self.<span class="hljs-emphasis" style="box-sizing: border-box;">_image_</span>index = self.<span class="hljs-emphasis" style="box-sizing: border-box;">_image_</span>index * 2  </code>
   
   </pre><ul class="pre-numbering" style="box-sizing: border-box; position: absolute; width: 50px; top: 0px; left: 0px; margin: 0px; padding: 6px 0px 40px; border-right-width: 1px; border-right-style: solid; border-right-color: rgb(221, 221, 221); list-style: none; text-align: right; background-color: rgb(238, 238, 238);"><li style="box-sizing: border-box; padding: 0px 5px;">1</li><li style="box-sizing: border-box; padding: 0px 5px;">2</li><li style="box-sizing: border-box; padding: 0px 5px;">3</li><li style="box-sizing: border-box; padding: 0px 5px;">4</li><li style="box-sizing: border-box; padding: 0px 5px;">5</li><li style="box-sizing: border-box; padding: 0px 5px;">6</li><li style="box-sizing: border-box; padding: 0px 5px;">7</li><li style="box-sizing: border-box; padding: 0px 5px;">8</li><li style="box-sizing: border-box; padding: 0px 5px;">9</li><li style="box-sizing: border-box; padding: 0px 5px;">10</li><li style="box-sizing: border-box; padding: 0px 5px;">11</li><li style="box-sizing: border-box; padding: 0px 5px;">12</li><li style="box-sizing: border-box; padding: 0px 5px;">13</li><li style="box-sizing: border-box; padding: 0px 5px;">14</li><li style="box-sizing: border-box; padding: 0px 5px;">15</li><li style="box-sizing: border-box; padding: 0px 5px;">16</li><li style="box-sizing: border-box; padding: 0px 5px;">17</li><li style="box-sizing: border-box; padding: 0px 5px;">18</li><li style="box-sizing: border-box; padding: 0px 5px;">19</li></ul>
   
   <ul class="pre-numbering" style="box-sizing: border-box; position: absolute; width: 50px; top: 0px; left: 0px; margin: 0px; padding: 6px 0px 40px; border-right-width: 1px; border-right-style: solid; border-right-color: rgb(221, 221, 221); list-style: none; text-align: right; background-color: rgb(238, 238, 238);"><li style="box-sizing: border-box; padding: 0px 5px;">1</li><li style="box-sizing: border-box; padding: 0px 5px;">2</li><li style="box-sizing: border-box; padding: 0px 5px;">3</li><li style="box-sizing: border-box; padding: 0px 5px;">4</li><li style="box-sizing: border-box; padding: 0px 5px;">5</li><li style="box-sizing: border-box; padding: 0px 5px;">6</li><li style="box-sizing: border-box; padding: 0px 5px;">7</li><li style="box-sizing: border-box; padding: 0px 5px;">8</li><li style="box-sizing: border-box; padding: 0px 5px;">9</li><li style="box-sizing: border-box; padding: 0px 5px;">10</li><li style="box-sizing: border-box; padding: 0px 5px;">11</li><li style="box-sizing: border-box; padding: 0px 5px;">12</li><li style="box-sizing: border-box; padding: 0px 5px;">13</li><li style="box-sizing: border-box; padding: 0px 5px;">14</li><li style="box-sizing: border-box; padding: 0px 5px;">15</li><li style="box-sizing: border-box; padding: 0px 5px;">16</li><li style="box-sizing: border-box; padding: 0px 5px;">17</li><li style="box-sizing: border-box; padding: 0px 5px;">18</li><li style="box-sizing: border-box; padding: 0px 5px;">19</li></ul> 
  <p style="margin-top:0px; margin-bottom:1.1em">注：为防止与之前的模型搞混,训练前把output文件夹删除（或改个其他名），还要把py-faster-rcnn/data/cache中的文件和 <br style=""> py-faster-rcnn/data/VOCdevkit2007/annotations_cache中的文件删除（如果有的话）。 <br style=""> <span style="">4) 训练参数设置</span> <br style=""> 　可在py-faster-rcnn/models/pascal_voc/ZF/faster_rcnn_alt_opt中的solve文件设置，迭代次数可在py-faster-rcnn\tools的train_faster_rcnn_alt_opt.py中修改： <br style=""> max_iters = [80000, 40000, 80000, 40000] <br style=""> 　分别为4个阶段（rpn第1阶段，fast rcnn第1阶段，rpn第2阶段，fast rcnn第2阶段）的迭代次数。可改成你希望的迭代次数。如果改了这些数值，最好把py-faster-rcnn/models/pascal_voc/ZF/faster_rcnn_alt_opt里对应的solver文件（有4个）也修改，stepsize小于上面修改的数值。 <br style=""> <span style="">5) 开始训练</span> <br style=""> 进入py-faster-rcnn， <br style=""> 执行</p> 
  <pre class="prettyprint" name="code" style="white-space: nowrap; word-wrap: break-word; box-sizing: border-box; position: relative; overflow-y: hidden; overflow-x: auto; margin-top: 0px; margin-bottom: 1.1em; font-family: 'Source Code Pro', monospace; padding: 5px 5px 5px 60px; line-height: 1.45; word-break: break-all; border: 1px solid rgba(128, 128, 128, 0.0745098); border-radius: 0px; background-color: rgba(128, 128, 128, 0.0470588);"><code class="hljs avrasm has-numbering" style="display: block; padding: 0px; color: inherit; box-sizing: border-box; font-family: 'Source Code Pro', monospace;font-size:undefined; white-space: pre; border-radius: 0px; word-wrap: normal; background: transparent;">./experiments/scripts/faster_rcnn_alt_opt<span class="hljs-preprocessor" style="color: rgb(68, 68, 68); box-sizing: border-box;">.sh</span> <span class="hljs-number" style="color: rgb(0, 102, 102); box-sizing: border-box;">0</span> ZF pascal_voc </code>
   
   </pre><ul class="pre-numbering" style="box-sizing: border-box; position: absolute; width: 50px; top: 0px; left: 0px; margin: 0px; padding: 6px 0px 40px; border-right-width: 1px; border-right-style: solid; border-right-color: rgb(221, 221, 221); list-style: none; text-align: right; background-color: rgb(238, 238, 238);"><li style="box-sizing: border-box; padding: 0px 5px;">1</li></ul>
   
   <ul class="pre-numbering" style="box-sizing: border-box; position: absolute; width: 50px; top: 0px; left: 0px; margin: 0px; padding: 6px 0px 40px; border-right-width: 1px; border-right-style: solid; border-right-color: rgb(221, 221, 221); list-style: none; text-align: right; background-color: rgb(238, 238, 238);"><li style="box-sizing: border-box; padding: 0px 5px;">1</li></ul> 
  <p style="margin-top:0px; margin-bottom:1.1em">这样，就开始训练了。 <br style=""> 我训练这里出错： <br style=""> <span style="font-family:黑体; font-size:14px; color:#0099ff">开始数据集的制作中，标签的名字是数字1，出现KeyError ‘3’</span></p> 
  <p style="margin-top:0px; margin-bottom:1.1em">解决：在生成XML文件的代码中修改标签的name为小写英文字母。 <br style=""> <span style="font-family:黑体; font-size:14px; color:#0099ff">错误： <br style=""> File “/py-faster-rcnn/tools/../lib/datasets/imdb.py”, line 108, in append_flipped_images <br style=""> assert (boxes[:, 2] &gt;= boxes[:, 0]).all()</span> <br style=""> <span style="">解决：</span>检查自己数据发现，左上角坐标（x,y）可能为0，或标定区域溢出图片 <br style=""> 1、修改lib/datasets/imdb.py，append_flipped_images()函数 <br style=""> 数据整理，在一行代码为 boxes[:, 2] = widths[i] - oldx1 - 1下加入代码： <br style=""> for b in range(len(boxes)): <br style=""> if boxes[b][2]&lt; boxes[b][0]: <br style=""> boxes[b][0] = 0 <br style=""> 2、修改lib/datasets/pascal_voc.py，_load_pascal_annotation(,)函数 <br style=""> 将对Xmin,Ymin,Xmax,Ymax减一去掉，变为： <br style=""> <img src="https://images2.imgbox.com/e8/c4/YjZbBHgs_o.png" alt="这里写图片描述" title="" style="border:none; max-width:100%"></p> 
  <p style="margin-top:0px; margin-bottom:1.1em"><span style="">6) 测试</span> <br style=""> 将训练得到的py-faster-rcnn\output\faster_rcnn_alt_opt***_trainval中ZF的caffemodel拷贝至py-faster-rcnn\data\faster_rcnn_models（如果没有这个文件夹，就新建一个），然后，修改：py-faster-rcnn\tools\demo.py,主要修改：</p> 
  <pre class="prettyprint" name="code" style="white-space: nowrap; word-wrap: break-word; box-sizing: border-box; position: relative; overflow-y: hidden; overflow-x: auto; margin-top: 0px; margin-bottom: 1.1em; font-family: 'Source Code Pro', monospace; padding: 5px 5px 5px 60px; line-height: 1.45; word-break: break-all; border: 1px solid rgba(128, 128, 128, 0.0745098); border-radius: 0px; background-color: rgba(128, 128, 128, 0.0470588);"><code class="hljs bash has-numbering" style="display: block; padding: 0px; color: inherit; box-sizing: border-box; font-family: 'Source Code Pro', monospace;font-size:undefined; white-space: pre; border-radius: 0px; word-wrap: normal; background: transparent;"><span class="hljs-number" style="color: rgb(0, 102, 102); box-sizing: border-box;">1</span>.  CLASSES = (<span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">'__background__'</span>,  
<span class="hljs-number" style="color: rgb(0, 102, 102); box-sizing: border-box;">2</span>.             <span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">'你的标签1'</span>, <span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">'你的标签2'</span>, <span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">'你的标签3'</span>, <span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">'你的标签4'</span>)  </code>
   
   </pre><ul class="pre-numbering" style="box-sizing: border-box; position: absolute; width: 50px; top: 0px; left: 0px; margin: 0px; padding: 6px 0px 40px; border-right-width: 1px; border-right-style: solid; border-right-color: rgb(221, 221, 221); list-style: none; text-align: right; background-color: rgb(238, 238, 238);"><li style="box-sizing: border-box; padding: 0px 5px;">1</li><li style="box-sizing: border-box; padding: 0px 5px;">2</li></ul>
   
   <ul class="pre-numbering" style="box-sizing: border-box; position: absolute; width: 50px; top: 0px; left: 0px; margin: 0px; padding: 6px 0px 40px; border-right-width: 1px; border-right-style: solid; border-right-color: rgb(221, 221, 221); list-style: none; text-align: right; background-color: rgb(238, 238, 238);"><li style="box-sizing: border-box; padding: 0px 5px;">1</li><li style="box-sizing: border-box; padding: 0px 5px;">2</li></ul> 
  <p style="margin-top:0px; margin-bottom:1.1em">改成你的数据集标签：</p> 
  <pre class="prettyprint" name="code" style="white-space: nowrap; word-wrap: break-word; box-sizing: border-box; position: relative; overflow-y: hidden; overflow-x: auto; margin-top: 0px; margin-bottom: 1.1em; font-family: 'Source Code Pro', monospace; padding: 5px 5px 5px 60px; line-height: 1.45; word-break: break-all; border: 1px solid rgba(128, 128, 128, 0.0745098); border-radius: 0px; background-color: rgba(128, 128, 128, 0.0470588);"><code class="hljs bash has-numbering" style="display: block; padding: 0px; color: inherit; box-sizing: border-box; font-family: 'Source Code Pro', monospace;font-size:undefined; white-space: pre; border-radius: 0px; word-wrap: normal; background: transparent;"><span class="hljs-number" style="color: rgb(0, 102, 102); box-sizing: border-box;">1</span>.  NETS = {<!-- --><span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">'vgg16'</span>: (<span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">'VGG16'</span>,  
<span class="hljs-number" style="color: rgb(0, 102, 102); box-sizing: border-box;">2</span>.                    <span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">'VGG16_faster_rcnn_final.caffemodel'</span>),  
<span class="hljs-number" style="color: rgb(0, 102, 102); box-sizing: border-box;">3</span>.          <span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">'zf'</span>: (<span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">'ZF'</span>,  
<span class="hljs-number" style="color: rgb(0, 102, 102); box-sizing: border-box;">4</span>.                    <span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">'ZF_faster_rcnn_final.caffemodel'</span>)} </code>
   
   </pre><ul class="pre-numbering" style="box-sizing: border-box; position: absolute; width: 50px; top: 0px; left: 0px; margin: 0px; padding: 6px 0px 40px; border-right-width: 1px; border-right-style: solid; border-right-color: rgb(221, 221, 221); list-style: none; text-align: right; background-color: rgb(238, 238, 238);"><li style="box-sizing: border-box; padding: 0px 5px;">1</li><li style="box-sizing: border-box; padding: 0px 5px;">2</li><li style="box-sizing: border-box; padding: 0px 5px;">3</li><li style="box-sizing: border-box; padding: 0px 5px;">4</li></ul>
   
   <ul class="pre-numbering" style="box-sizing: border-box; position: absolute; width: 50px; top: 0px; left: 0px; margin: 0px; padding: 6px 0px 40px; border-right-width: 1px; border-right-style: solid; border-right-color: rgb(221, 221, 221); list-style: none; text-align: right; background-color: rgb(238, 238, 238);"><li style="box-sizing: border-box; padding: 0px 5px;">1</li><li style="box-sizing: border-box; padding: 0px 5px;">2</li><li style="box-sizing: border-box; padding: 0px 5px;">3</li><li style="box-sizing: border-box; padding: 0px 5px;">4</li></ul> 
  <p style="margin-top:0px; margin-bottom:1.1em">上面ZF的caffemodel改成你的caffemodel。</p> 
  <pre class="prettyprint" name="code" style="white-space: nowrap; word-wrap: break-word; box-sizing: border-box; position: relative; overflow-y: hidden; overflow-x: auto; margin-top: 0px; margin-bottom: 1.1em; font-family: 'Source Code Pro', monospace; padding: 5px 5px 5px 60px; line-height: 1.45; word-break: break-all; border: 1px solid rgba(128, 128, 128, 0.0745098); border-radius: 0px; background-color: rgba(128, 128, 128, 0.0470588);"><code class="hljs bash has-numbering" style="display: block; padding: 0px; color: inherit; box-sizing: border-box; font-family: 'Source Code Pro', monospace;font-size:undefined; white-space: pre; border-radius: 0px; word-wrap: normal; background: transparent;"><span class="hljs-number" style="color: rgb(0, 102, 102); box-sizing: border-box;">1</span>.  im_names = [<span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">'1559.jpg'</span>,<span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">'1564.jpg'</span>]  </code>
   
   </pre><ul class="pre-numbering" style="box-sizing: border-box; position: absolute; width: 50px; top: 0px; left: 0px; margin: 0px; padding: 6px 0px 40px; border-right-width: 1px; border-right-style: solid; border-right-color: rgb(221, 221, 221); list-style: none; text-align: right; background-color: rgb(238, 238, 238);"><li style="box-sizing: border-box; padding: 0px 5px;">1</li></ul>
   
   <ul class="pre-numbering" style="box-sizing: border-box; position: absolute; width: 50px; top: 0px; left: 0px; margin: 0px; padding: 6px 0px 40px; border-right-width: 1px; border-right-style: solid; border-right-color: rgb(221, 221, 221); list-style: none; text-align: right; background-color: rgb(238, 238, 238);"><li style="box-sizing: border-box; padding: 0px 5px;">1</li></ul> 
  <p style="margin-top:0px; margin-bottom:1.1em">改成你的测试图片。(测试图片放在py-faster-rcnn\data\demo中) <br style=""> 7) 结果 <br style=""> 在py-faster-rcnn下， <br style=""> 执行：./tools/demo.py –net zf <br style=""> 或者将默认的模型改为zf：</p> 
  <pre class="prettyprint" name="code" style="white-space: nowrap; word-wrap: break-word; box-sizing: border-box; position: relative; overflow-y: hidden; overflow-x: auto; margin-top: 0px; margin-bottom: 1.1em; font-family: 'Source Code Pro', monospace; padding: 5px 5px 5px 60px; line-height: 1.45; word-break: break-all; border: 1px solid rgba(128, 128, 128, 0.0745098); border-radius: 0px; background-color: rgba(128, 128, 128, 0.0470588);"><code class="hljs mel has-numbering" style="display: block; padding: 0px; color: inherit; box-sizing: border-box; font-family: 'Source Code Pro', monospace;font-size:undefined; white-space: pre; border-radius: 0px; word-wrap: normal; background: transparent;">parser.add_argument(<span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">'--net'</span>, dest=<span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">'demo_net'</span>, <span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">help</span>=<span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">'Network to use [vgg16]'</span>,  
                        choices=NETS.keys(), <span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">default</span>=<span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">'vgg16'</span>)  </code>
   
   </pre><ul class="pre-numbering" style="box-sizing: border-box; position: absolute; width: 50px; top: 0px; left: 0px; margin: 0px; padding: 6px 0px 40px; border-right-width: 1px; border-right-style: solid; border-right-color: rgb(221, 221, 221); list-style: none; text-align: right; background-color: rgb(238, 238, 238);"><li style="box-sizing: border-box; padding: 0px 5px;">1</li><li style="box-sizing: border-box; padding: 0px 5px;">2</li></ul>
   
   <ul class="pre-numbering" style="box-sizing: border-box; position: absolute; width: 50px; top: 0px; left: 0px; margin: 0px; padding: 6px 0px 40px; border-right-width: 1px; border-right-style: solid; border-right-color: rgb(221, 221, 221); list-style: none; text-align: right; background-color: rgb(238, 238, 238);"><li style="box-sizing: border-box; padding: 0px 5px;">1</li><li style="box-sizing: border-box; padding: 0px 5px;">2</li></ul> 
  <p style="margin-top:0px; margin-bottom:1.1em">修改： <br style=""> default=’zf’ <br style=""> 执行：./tools/demo.py</p> 
  <p style="margin-top:0px; margin-bottom:1.1em"></p> 
  <p style="margin-top:0px; margin-bottom:1.1em; padding-top:0px; padding-bottom:0px; color:rgb(85,85,85); font-family:'microsoft yahei'; font-size:14px; line-height:35px"> 在安装完成caffe后，并且编译完成github上的faster-rcnn <a target="_blank" href="http://lib.csdn.net/base/python" rel="nofollow noopener noreferrer" class="replace_word" title="Python知识库" style="text-decoration:none; color:rgb(223,52,52); font-weight:bold">Python</a>版之后，可以采用自己的数据来训练faster-rcnn了。 <br style=""> 一，文件修改： <br style=""> 1，在py-faster-rcnn目录下，找到lib/datasets/pascal_voc.py 文件打开逐一修改相应的函数： <br style=""> 如果打算添加中文注释请，在文件开图添加<code style="font-family:'Source Code Pro',monospace; padding:2px 4px; font-size:12.6px; color:rgb(63,63,63); white-space:nowrap">#encoding:utf-8</code>，不然会报错。 <br style=""> 以下为修改的细节：</p> 
  <p style="margin-top:0px; margin-bottom:1.1em; padding-top:0px; padding-bottom:0px; color:rgb(85,85,85); font-family:'microsoft yahei'; font-size:14px; line-height:35px"> 1）、初始化函数init的修改，同时修改类名：</p> 
  <pre class="prettyprint" name="code" style="white-space: nowrap; word-wrap: break-word; box-sizing: border-box; position: relative; overflow-y: hidden; overflow-x: auto; margin-top: 0px; margin-bottom: 1.1em; font-family: 'Source Code Pro', monospace; padding: 5px 5px 5px 60px; font-size: 14px; line-height: 1.45; word-break: break-all; color: rgb(51, 51, 51); border: 1px solid rgba(128, 128, 128, 0.0745098); border-radius: 0px; background-color: rgba(128, 128, 128, 0.0470588);"><code class="hljs ruby has-numbering" style="display: block; padding: 0px; color: inherit; box-sizing: border-box; font-family: 'Source Code Pro', monospace;font-size:undefined; white-space: pre; border-radius: 0px; word-wrap: normal; background: transparent;"><span class="hljs-class" style="box-sizing: border-box;"><span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">class</span> <span class="hljs-title" style="box-sizing: border-box; color: rgb(102, 0, 102);">hs</span>(<span class="hljs-title" style="box-sizing: border-box; color: rgb(102, 0, 102);">imdb</span>):</span>
    <span class="hljs-function" style="box-sizing: border-box;"><span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">def</span> </span>__init_<span class="hljs-number" style="color: rgb(0, 102, 102); box-sizing: border-box;">_</span>(<span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">self</span>, image_set, devkit_path=<span class="hljs-constant" style="box-sizing: border-box;">None</span>)<span class="hljs-symbol" style="color: rgb(0, 102, 102); box-sizing: border-box;">:</span>  <span class="hljs-comment" style="color: rgb(136, 0, 0); box-sizing: border-box;"># modified</span>
        imdb.__init_<span class="hljs-number" style="color: rgb(0, 102, 102); box-sizing: border-box;">_</span>(<span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">self</span>, image_set)
        <span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">self</span>._image_set = image_set
        <span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">self</span>._devkit_path = devkit_path<span class="hljs-comment" style="color: rgb(136, 0, 0); box-sizing: border-box;">#datasets路径</span>
        <span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">self</span>._data_path = os.path.join(<span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">self</span>._devkit_path,image_set)   <span class="hljs-comment" style="color: rgb(136, 0, 0); box-sizing: border-box;">#图片文件夹路径</span>
        <span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">self</span>._classes = (<span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">'__background__'</span>, <span class="hljs-comment" style="color: rgb(136, 0, 0); box-sizing: border-box;"># always index 0</span>
                         <span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">'jyz'</span>,<span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">'fzc'</span>,<span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">'qnq'</span>)   <span class="hljs-comment" style="color: rgb(136, 0, 0); box-sizing: border-box;">#two classes</span>
        <span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">self</span>._class_to_ind = dict(zip(<span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">self</span>.classes, xrange(<span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">self</span>.num_classes))) 
        <span class="hljs-comment" style="color: rgb(136, 0, 0); box-sizing: border-box;"># form the dict{'__background__':'0','person':'1'}</span>
        <span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">self</span>._image_ext = <span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">'.jpg'</span>
        <span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">self</span>._image_index = <span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">self</span>._load_image_set_index(<span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">'ImageList.txt'</span>)
        <span class="hljs-comment" style="color: rgb(136, 0, 0); box-sizing: border-box;"># Default to roidb handler</span>
        <span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">self</span>._roidb_handler = <span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">self</span>.selective_search_roidb
        <span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">self</span>._salt = str(uuid.uuid4())
        <span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">self</span>._comp_id = <span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">'comp4'</span>

        <span class="hljs-comment" style="color: rgb(136, 0, 0); box-sizing: border-box;"># PASCAL specific config options</span>
        <span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">self</span>.config = {<!-- --><span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">'cleanup'</span>     <span class="hljs-symbol" style="color: rgb(0, 102, 102); box-sizing: border-box;">:</span> <span class="hljs-constant" style="box-sizing: border-box;">True</span>,
                       <span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">'use_salt'</span>    <span class="hljs-symbol" style="color: rgb(0, 102, 102); box-sizing: border-box;">:</span> <span class="hljs-constant" style="box-sizing: border-box;">True</span>,
                       <span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">'use_diff'</span>    <span class="hljs-symbol" style="color: rgb(0, 102, 102); box-sizing: border-box;">:</span> <span class="hljs-constant" style="box-sizing: border-box;">False</span>,
                       <span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">'matlab_eval'</span> <span class="hljs-symbol" style="color: rgb(0, 102, 102); box-sizing: border-box;">:</span> <span class="hljs-constant" style="box-sizing: border-box;">False</span>,
                       <span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">'rpn_file'</span>    <span class="hljs-symbol" style="color: rgb(0, 102, 102); box-sizing: border-box;">:</span> <span class="hljs-constant" style="box-sizing: border-box;">None</span>,
                       <span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">'min_size'</span>    <span class="hljs-symbol" style="color: rgb(0, 102, 102); box-sizing: border-box;">:</span> <span class="hljs-number" style="color: rgb(0, 102, 102); box-sizing: border-box;">16</span>}  <span class="hljs-comment" style="color: rgb(136, 0, 0); box-sizing: border-box;">#小于16个像素的框扔掉</span>

        assert os.path.exists(<span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">self</span>._devkit_path), \
                <span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">'VOCdevkit path does not exist: {}'</span>.format(<span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">self</span>._devkit_path)
        assert os.path.exists(<span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">self</span>._data_path), \
                <span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">'Path does not exist: {}'</span>.format(<span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">self</span>._data_path)
</code>
   
   </pre><ul class="pre-numbering" style="box-sizing: border-box; position: absolute; width: 50px; top: 0px; left: 0px; margin: 0px; padding: 6px 0px 40px; border-right-width: 1px; border-right-style: solid; border-right-color: rgb(221, 221, 221); list-style: none; text-align: right; background-color: rgb(238, 238, 238);"><li style="box-sizing: border-box; padding: 0px 5px;">1</li><li style="box-sizing: border-box; padding: 0px 5px;">2</li><li style="box-sizing: border-box; padding: 0px 5px;">3</li><li style="box-sizing: border-box; padding: 0px 5px;">4</li><li style="box-sizing: border-box; padding: 0px 5px;">5</li><li style="box-sizing: border-box; padding: 0px 5px;">6</li><li style="box-sizing: border-box; padding: 0px 5px;">7</li><li style="box-sizing: border-box; padding: 0px 5px;">8</li><li style="box-sizing: border-box; padding: 0px 5px;">9</li><li style="box-sizing: border-box; padding: 0px 5px;">10</li><li style="box-sizing: border-box; padding: 0px 5px;">11</li><li style="box-sizing: border-box; padding: 0px 5px;">12</li><li style="box-sizing: border-box; padding: 0px 5px;">13</li><li style="box-sizing: border-box; padding: 0px 5px;">14</li><li style="box-sizing: border-box; padding: 0px 5px;">15</li><li style="box-sizing: border-box; padding: 0px 5px;">16</li><li style="box-sizing: border-box; padding: 0px 5px;">17</li><li style="box-sizing: border-box; padding: 0px 5px;">18</li><li style="box-sizing: border-box; padding: 0px 5px;">19</li><li style="box-sizing: border-box; padding: 0px 5px;">20</li><li style="box-sizing: border-box; padding: 0px 5px;">21</li><li style="box-sizing: border-box; padding: 0px 5px;">22</li><li style="box-sizing: border-box; padding: 0px 5px;">23</li><li style="box-sizing: border-box; padding: 0px 5px;">24</li><li style="box-sizing: border-box; padding: 0px 5px;">25</li><li style="box-sizing: border-box; padding: 0px 5px;">26</li><li style="box-sizing: border-box; padding: 0px 5px;">27</li><li style="box-sizing: border-box; padding: 0px 5px;">28</li><li style="box-sizing: border-box; padding: 0px 5px;">29</li><li style="box-sizing: border-box; padding: 0px 5px;">30</li></ul>
   
   <ul class="pre-numbering" style="box-sizing: border-box; position: absolute; width: 50px; top: 0px; left: 0px; margin: 0px; padding: 6px 0px 40px; border-right-width: 1px; border-right-style: solid; border-right-color: rgb(221, 221, 221); list-style: none; text-align: right; background-color: rgb(238, 238, 238);"><li style="box-sizing: border-box; padding: 0px 5px;">1</li><li style="box-sizing: border-box; padding: 0px 5px;">2</li><li style="box-sizing: border-box; padding: 0px 5px;">3</li><li style="box-sizing: border-box; padding: 0px 5px;">4</li><li style="box-sizing: border-box; padding: 0px 5px;">5</li><li style="box-sizing: border-box; padding: 0px 5px;">6</li><li style="box-sizing: border-box; padding: 0px 5px;">7</li><li style="box-sizing: border-box; padding: 0px 5px;">8</li><li style="box-sizing: border-box; padding: 0px 5px;">9</li><li style="box-sizing: border-box; padding: 0px 5px;">10</li><li style="box-sizing: border-box; padding: 0px 5px;">11</li><li style="box-sizing: border-box; padding: 0px 5px;">12</li><li style="box-sizing: border-box; padding: 0px 5px;">13</li><li style="box-sizing: border-box; padding: 0px 5px;">14</li><li style="box-sizing: border-box; padding: 0px 5px;">15</li><li style="box-sizing: border-box; padding: 0px 5px;">16</li><li style="box-sizing: border-box; padding: 0px 5px;">17</li><li style="box-sizing: border-box; padding: 0px 5px;">18</li><li style="box-sizing: border-box; padding: 0px 5px;">19</li><li style="box-sizing: border-box; padding: 0px 5px;">20</li><li style="box-sizing: border-box; padding: 0px 5px;">21</li><li style="box-sizing: border-box; padding: 0px 5px;">22</li><li style="box-sizing: border-box; padding: 0px 5px;">23</li><li style="box-sizing: border-box; padding: 0px 5px;">24</li><li style="box-sizing: border-box; padding: 0px 5px;">25</li><li style="box-sizing: border-box; padding: 0px 5px;">26</li><li style="box-sizing: border-box; padding: 0px 5px;">27</li><li style="box-sizing: border-box; padding: 0px 5px;">28</li><li style="box-sizing: border-box; padding: 0px 5px;">29</li><li style="box-sizing: border-box; padding: 0px 5px;">30</li></ul> 
  <p style="margin-top:0px; margin-bottom:1.1em; padding-top:0px; padding-bottom:0px; color:rgb(85,85,85); font-family:'microsoft yahei'; font-size:14px; line-height:35px"> 2）修改image_path_from_index函数的修改：</p> 
  <pre class="prettyprint" name="code" style="white-space: nowrap; word-wrap: break-word; box-sizing: border-box; position: relative; overflow-y: hidden; overflow-x: auto; margin-top: 0px; margin-bottom: 1.1em; font-family: 'Source Code Pro', monospace; padding: 5px 5px 5px 60px; font-size: 14px; line-height: 1.45; word-break: break-all; color: rgb(51, 51, 51); border: 1px solid rgba(128, 128, 128, 0.0745098); border-radius: 0px; background-color: rgba(128, 128, 128, 0.0470588);"><code class="hljs python has-numbering" style="display: block; padding: 0px; color: inherit; box-sizing: border-box; font-family: 'Source Code Pro', monospace;font-size:undefined; white-space: pre; border-radius: 0px; word-wrap: normal; background: transparent;"><span class="hljs-function" style="box-sizing: border-box;"><span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">def</span> <span class="hljs-title" style="box-sizing: border-box;">image_path_from_index</span><span class="hljs-params" style="color: rgb(102, 0, 102); box-sizing: border-box;">(self, index)</span>:</span> <span class="hljs-comment" style="color: rgb(136, 0, 0); box-sizing: border-box;">#modified</span>
    <span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">"""
    Construct an image path from the image's "index" identifier.
    """</span>
    image_path = os.path.join(self._data_path,index +<span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">'.jpg'</span>)
    <span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">assert</span> os.path.exists(image_path), \
            <span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">'Path does not exist: {}'</span>.format(image_path)
    <span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">return</span> image_path</code>
   
   </pre><ul class="pre-numbering" style="box-sizing: border-box; position: absolute; width: 50px; top: 0px; left: 0px; margin: 0px; padding: 6px 0px 40px; border-right-width: 1px; border-right-style: solid; border-right-color: rgb(221, 221, 221); list-style: none; text-align: right; background-color: rgb(238, 238, 238);"><li style="box-sizing: border-box; padding: 0px 5px;">1</li><li style="box-sizing: border-box; padding: 0px 5px;">2</li><li style="box-sizing: border-box; padding: 0px 5px;">3</li><li style="box-sizing: border-box; padding: 0px 5px;">4</li><li style="box-sizing: border-box; padding: 0px 5px;">5</li><li style="box-sizing: border-box; padding: 0px 5px;">6</li><li style="box-sizing: border-box; padding: 0px 5px;">7</li><li style="box-sizing: border-box; padding: 0px 5px;">8</li></ul>
   
   <ul class="pre-numbering" style="box-sizing: border-box; position: absolute; width: 50px; top: 0px; left: 0px; margin: 0px; padding: 6px 0px 40px; border-right-width: 1px; border-right-style: solid; border-right-color: rgb(221, 221, 221); list-style: none; text-align: right; background-color: rgb(238, 238, 238);"><li style="box-sizing: border-box; padding: 0px 5px;">1</li><li style="box-sizing: border-box; padding: 0px 5px;">2</li><li style="box-sizing: border-box; padding: 0px 5px;">3</li><li style="box-sizing: border-box; padding: 0px 5px;">4</li><li style="box-sizing: border-box; padding: 0px 5px;">5</li><li style="box-sizing: border-box; padding: 0px 5px;">6</li><li style="box-sizing: border-box; padding: 0px 5px;">7</li><li style="box-sizing: border-box; padding: 0px 5px;">8</li></ul> 
  <p style="margin-top:0px; margin-bottom:1.1em; padding-top:0px; padding-bottom:0px; color:rgb(85,85,85); font-family:'microsoft yahei'; font-size:14px; line-height:35px"> 3）修改_load_image_set_index函数：</p> 
  <pre class="prettyprint" name="code" style="white-space: nowrap; word-wrap: break-word; box-sizing: border-box; position: relative; overflow-y: hidden; overflow-x: auto; margin-top: 0px; margin-bottom: 1.1em; font-family: 'Source Code Pro', monospace; padding: 5px 5px 5px 60px; font-size: 14px; line-height: 1.45; word-break: break-all; color: rgb(51, 51, 51); border: 1px solid rgba(128, 128, 128, 0.0745098); border-radius: 0px; background-color: rgba(128, 128, 128, 0.0470588);"><code class="hljs python has-numbering" style="display: block; padding: 0px; color: inherit; box-sizing: border-box; font-family: 'Source Code Pro', monospace;font-size:undefined; white-space: pre; border-radius: 0px; word-wrap: normal; background: transparent;"><span class="hljs-function" style="box-sizing: border-box;"><span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">def</span> <span class="hljs-title" style="box-sizing: border-box;">_load_image_set_index</span><span class="hljs-params" style="color: rgb(102, 0, 102); box-sizing: border-box;">(self,imagelist)</span>:</span> <span class="hljs-comment" style="color: rgb(136, 0, 0); box-sizing: border-box;"># modified</span>
    <span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">"""
    Load the indexes listed in this dataset's image set file.
    """</span>
    <span class="hljs-comment" style="color: rgb(136, 0, 0); box-sizing: border-box;"># Example path to image set file:</span>
    <span class="hljs-comment" style="color: rgb(136, 0, 0); box-sizing: border-box;"># self._devkit_path + /VOCdevkit2007/VOC2007/ImageSets/Main/val.txt</span>
    image_set_file = os.path.join(self._devkit_path, imagelist)
    <span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">assert</span> os.path.exists(image_set_file), \
            <span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">'Path does not exist: {}'</span>.format(image_set_file)
    <span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">with</span> open(image_set_file) <span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">as</span> f:
        image_index = [x.strip() <span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">for</span> x <span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">in</span> f.readlines()]
    <span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">return</span> image_index</code>
   
   </pre><ul class="pre-numbering" style="box-sizing: border-box; position: absolute; width: 50px; top: 0px; left: 0px; margin: 0px; padding: 6px 0px 40px; border-right-width: 1px; border-right-style: solid; border-right-color: rgb(221, 221, 221); list-style: none; text-align: right; background-color: rgb(238, 238, 238);"><li style="box-sizing: border-box; padding: 0px 5px;">1</li><li style="box-sizing: border-box; padding: 0px 5px;">2</li><li style="box-sizing: border-box; padding: 0px 5px;">3</li><li style="box-sizing: border-box; padding: 0px 5px;">4</li><li style="box-sizing: border-box; padding: 0px 5px;">5</li><li style="box-sizing: border-box; padding: 0px 5px;">6</li><li style="box-sizing: border-box; padding: 0px 5px;">7</li><li style="box-sizing: border-box; padding: 0px 5px;">8</li><li style="box-sizing: border-box; padding: 0px 5px;">9</li><li style="box-sizing: border-box; padding: 0px 5px;">10</li><li style="box-sizing: border-box; padding: 0px 5px;">11</li><li style="box-sizing: border-box; padding: 0px 5px;">12</li></ul>
   
   <ul class="pre-numbering" style="box-sizing: border-box; position: absolute; width: 50px; top: 0px; left: 0px; margin: 0px; padding: 6px 0px 40px; border-right-width: 1px; border-right-style: solid; border-right-color: rgb(221, 221, 221); list-style: none; text-align: right; background-color: rgb(238, 238, 238);"><li style="box-sizing: border-box; padding: 0px 5px;">1</li><li style="box-sizing: border-box; padding: 0px 5px;">2</li><li style="box-sizing: border-box; padding: 0px 5px;">3</li><li style="box-sizing: border-box; padding: 0px 5px;">4</li><li style="box-sizing: border-box; padding: 0px 5px;">5</li><li style="box-sizing: border-box; padding: 0px 5px;">6</li><li style="box-sizing: border-box; padding: 0px 5px;">7</li><li style="box-sizing: border-box; padding: 0px 5px;">8</li><li style="box-sizing: border-box; padding: 0px 5px;">9</li><li style="box-sizing: border-box; padding: 0px 5px;">10</li><li style="box-sizing: border-box; padding: 0px 5px;">11</li><li style="box-sizing: border-box; padding: 0px 5px;">12</li></ul> 
  <p style="margin-top:0px; margin-bottom:1.1em; padding-top:0px; padding-bottom:0px; color:rgb(85,85,85); font-family:'microsoft yahei'; font-size:14px; line-height:35px"> 4）修改_load_pascal_annotation(self, index):</p> 
  <pre class="prettyprint" name="code" style="white-space: nowrap; word-wrap: break-word; box-sizing: border-box; position: relative; overflow-y: hidden; overflow-x: auto; margin-top: 0px; margin-bottom: 1.1em; font-family: 'Source Code Pro', monospace; padding: 5px 5px 5px 60px; font-size: 14px; line-height: 1.45; word-break: break-all; color: rgb(51, 51, 51); border: 1px solid rgba(128, 128, 128, 0.0745098); border-radius: 0px; background-color: rgba(128, 128, 128, 0.0470588);"><code class="hljs python has-numbering" style="display: block; padding: 0px; color: inherit; box-sizing: border-box; font-family: 'Source Code Pro', monospace;font-size:undefined; white-space: pre; border-radius: 0px; word-wrap: normal; background: transparent;"><span class="hljs-function" style="box-sizing: border-box;"><span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">def</span> <span class="hljs-title" style="box-sizing: border-box;">_load_pascal_annotation</span><span class="hljs-params" style="color: rgb(102, 0, 102); box-sizing: border-box;">(self, index)</span>:</span>    <span class="hljs-comment" style="color: rgb(136, 0, 0); box-sizing: border-box;">#modified</span>
    <span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">"""
    Load image and bounding boxes info from XML file in the PASCAL VOC
    format.
    """</span>
    filename = os.path.join(self._devkit_path, <span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">'Annotations'</span>, index + <span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">'.xml'</span>)
    tree = ET.parse(filename)
    objs = tree.findall(<span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">'object'</span>)
    <span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">if</span> <span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">not</span> self.config[<span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">'use_diff'</span>]:
        <span class="hljs-comment" style="color: rgb(136, 0, 0); box-sizing: border-box;"># Exclude the samples labeled as difficult</span>
        non_diff_objs = [
            obj <span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">for</span> obj <span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">in</span> objs <span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">if</span> int(obj.find(<span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">'difficult'</span>).text) == <span class="hljs-number" style="color: rgb(0, 102, 102); box-sizing: border-box;">0</span>]
        <span class="hljs-comment" style="color: rgb(136, 0, 0); box-sizing: border-box;"># if len(non_diff_objs) != len(objs):</span>
        <span class="hljs-comment" style="color: rgb(136, 0, 0); box-sizing: border-box;">#     print 'Removed {} difficult objects'.format(</span>
        <span class="hljs-comment" style="color: rgb(136, 0, 0); box-sizing: border-box;">#         len(objs) - len(non_diff_objs))</span>
        objs = non_diff_objs
    num_objs = len(objs)

    boxes = np.zeros((num_objs, <span class="hljs-number" style="color: rgb(0, 102, 102); box-sizing: border-box;">4</span>), dtype=np.uint16)
    gt_classes = np.zeros((num_objs), dtype=np.int32)
    overlaps = np.zeros((num_objs, self.num_classes), dtype=np.float32)
    <span class="hljs-comment" style="color: rgb(136, 0, 0); box-sizing: border-box;"># "Seg" area for pascal is just the box area</span>
    seg_areas = np.zeros((num_objs), dtype=np.float32)

    <span class="hljs-comment" style="color: rgb(136, 0, 0); box-sizing: border-box;"># Load object bounding boxes into a data frame.</span>
    <span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">for</span> ix, obj <span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">in</span> enumerate(objs):
        bbox = obj.find(<span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">'bndbox'</span>)
        <span class="hljs-comment" style="color: rgb(136, 0, 0); box-sizing: border-box;"># Make pixel indexes 0-based</span>
        x1 = float(bbox.find(<span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">'xmin'</span>).text)
        y1 = float(bbox.find(<span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">'ymin'</span>).text)
        x2 = float(bbox.find(<span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">'xmax'</span>).text)
        y2 = float(bbox.find(<span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">'ymax'</span>).text)
        cls = self._class_to_ind[obj.find(<span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">'name'</span>).text.lower().strip()]
        boxes[ix, :] = [x1, y1, x2, y2]
        gt_classes[ix] = cls
        overlaps[ix, cls] = <span class="hljs-number" style="color: rgb(0, 102, 102); box-sizing: border-box;">1.0</span>
        seg_areas[ix] = (x2 - x1 + <span class="hljs-number" style="color: rgb(0, 102, 102); box-sizing: border-box;">1</span>) * (y2 - y1 + <span class="hljs-number" style="color: rgb(0, 102, 102); box-sizing: border-box;">1</span>)

    overlaps = scipy.sparse.csr_matrix(overlaps)

    <span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">return</span> {<!-- --><span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">'boxes'</span> : boxes,
            <span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">'gt_classes'</span>: gt_classes,
            <span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">'gt_overlaps'</span> : overlaps,
            <span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">'flipped'</span> : <span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">False</span>,
            <span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">'seg_areas'</span> : seg_areas}</code>
   
   </pre><ul class="pre-numbering" style="box-sizing: border-box; position: absolute; width: 50px; top: 0px; left: 0px; margin: 0px; padding: 6px 0px 40px; border-right-width: 1px; border-right-style: solid; border-right-color: rgb(221, 221, 221); list-style: none; text-align: right; background-color: rgb(238, 238, 238);"><li style="box-sizing: border-box; padding: 0px 5px;">1</li><li style="box-sizing: border-box; padding: 0px 5px;">2</li><li style="box-sizing: border-box; padding: 0px 5px;">3</li><li style="box-sizing: border-box; padding: 0px 5px;">4</li><li style="box-sizing: border-box; padding: 0px 5px;">5</li><li style="box-sizing: border-box; padding: 0px 5px;">6</li><li style="box-sizing: border-box; padding: 0px 5px;">7</li><li style="box-sizing: border-box; padding: 0px 5px;">8</li><li style="box-sizing: border-box; padding: 0px 5px;">9</li><li style="box-sizing: border-box; padding: 0px 5px;">10</li><li style="box-sizing: border-box; padding: 0px 5px;">11</li><li style="box-sizing: border-box; padding: 0px 5px;">12</li><li style="box-sizing: border-box; padding: 0px 5px;">13</li><li style="box-sizing: border-box; padding: 0px 5px;">14</li><li style="box-sizing: border-box; padding: 0px 5px;">15</li><li style="box-sizing: border-box; padding: 0px 5px;">16</li><li style="box-sizing: border-box; padding: 0px 5px;">17</li><li style="box-sizing: border-box; padding: 0px 5px;">18</li><li style="box-sizing: border-box; padding: 0px 5px;">19</li><li style="box-sizing: border-box; padding: 0px 5px;">20</li><li style="box-sizing: border-box; padding: 0px 5px;">21</li><li style="box-sizing: border-box; padding: 0px 5px;">22</li><li style="box-sizing: border-box; padding: 0px 5px;">23</li><li style="box-sizing: border-box; padding: 0px 5px;">24</li><li style="box-sizing: border-box; padding: 0px 5px;">25</li><li style="box-sizing: border-box; padding: 0px 5px;">26</li><li style="box-sizing: border-box; padding: 0px 5px;">27</li><li style="box-sizing: border-box; padding: 0px 5px;">28</li><li style="box-sizing: border-box; padding: 0px 5px;">29</li><li style="box-sizing: border-box; padding: 0px 5px;">30</li><li style="box-sizing: border-box; padding: 0px 5px;">31</li><li style="box-sizing: border-box; padding: 0px 5px;">32</li><li style="box-sizing: border-box; padding: 0px 5px;">33</li><li style="box-sizing: border-box; padding: 0px 5px;">34</li><li style="box-sizing: border-box; padding: 0px 5px;">35</li><li style="box-sizing: border-box; padding: 0px 5px;">36</li><li style="box-sizing: border-box; padding: 0px 5px;">37</li><li style="box-sizing: border-box; padding: 0px 5px;">38</li><li style="box-sizing: border-box; padding: 0px 5px;">39</li><li style="box-sizing: border-box; padding: 0px 5px;">40</li><li style="box-sizing: border-box; padding: 0px 5px;">41</li><li style="box-sizing: border-box; padding: 0px 5px;">42</li><li style="box-sizing: border-box; padding: 0px 5px;">43</li><li style="box-sizing: border-box; padding: 0px 5px;">44</li><li style="box-sizing: border-box; padding: 0px 5px;">45</li></ul>
   
   <ul class="pre-numbering" style="box-sizing: border-box; position: absolute; width: 50px; top: 0px; left: 0px; margin: 0px; padding: 6px 0px 40px; border-right-width: 1px; border-right-style: solid; border-right-color: rgb(221, 221, 221); list-style: none; text-align: right; background-color: rgb(238, 238, 238);"><li style="box-sizing: border-box; padding: 0px 5px;">1</li><li style="box-sizing: border-box; padding: 0px 5px;">2</li><li style="box-sizing: border-box; padding: 0px 5px;">3</li><li style="box-sizing: border-box; padding: 0px 5px;">4</li><li style="box-sizing: border-box; padding: 0px 5px;">5</li><li style="box-sizing: border-box; padding: 0px 5px;">6</li><li style="box-sizing: border-box; padding: 0px 5px;">7</li><li style="box-sizing: border-box; padding: 0px 5px;">8</li><li style="box-sizing: border-box; padding: 0px 5px;">9</li><li style="box-sizing: border-box; padding: 0px 5px;">10</li><li style="box-sizing: border-box; padding: 0px 5px;">11</li><li style="box-sizing: border-box; padding: 0px 5px;">12</li><li style="box-sizing: border-box; padding: 0px 5px;">13</li><li style="box-sizing: border-box; padding: 0px 5px;">14</li><li style="box-sizing: border-box; padding: 0px 5px;">15</li><li style="box-sizing: border-box; padding: 0px 5px;">16</li><li style="box-sizing: border-box; padding: 0px 5px;">17</li><li style="box-sizing: border-box; padding: 0px 5px;">18</li><li style="box-sizing: border-box; padding: 0px 5px;">19</li><li style="box-sizing: border-box; padding: 0px 5px;">20</li><li style="box-sizing: border-box; padding: 0px 5px;">21</li><li style="box-sizing: border-box; padding: 0px 5px;">22</li><li style="box-sizing: border-box; padding: 0px 5px;">23</li><li style="box-sizing: border-box; padding: 0px 5px;">24</li><li style="box-sizing: border-box; padding: 0px 5px;">25</li><li style="box-sizing: border-box; padding: 0px 5px;">26</li><li style="box-sizing: border-box; padding: 0px 5px;">27</li><li style="box-sizing: border-box; padding: 0px 5px;">28</li><li style="box-sizing: border-box; padding: 0px 5px;">29</li><li style="box-sizing: border-box; padding: 0px 5px;">30</li><li style="box-sizing: border-box; padding: 0px 5px;">31</li><li style="box-sizing: border-box; padding: 0px 5px;">32</li><li style="box-sizing: border-box; padding: 0px 5px;">33</li><li style="box-sizing: border-box; padding: 0px 5px;">34</li><li style="box-sizing: border-box; padding: 0px 5px;">35</li><li style="box-sizing: border-box; padding: 0px 5px;">36</li><li style="box-sizing: border-box; padding: 0px 5px;">37</li><li style="box-sizing: border-box; padding: 0px 5px;">38</li><li style="box-sizing: border-box; padding: 0px 5px;">39</li><li style="box-sizing: border-box; padding: 0px 5px;">40</li><li style="box-sizing: border-box; padding: 0px 5px;">41</li><li style="box-sizing: border-box; padding: 0px 5px;">42</li><li style="box-sizing: border-box; padding: 0px 5px;">43</li><li style="box-sizing: border-box; padding: 0px 5px;">44</li><li style="box-sizing: border-box; padding: 0px 5px;">45</li></ul> 
  <p style="margin-top:0px; margin-bottom:1.1em; padding-top:0px; padding-bottom:0px; color:rgb(85,85,85); font-family:'microsoft yahei'; font-size:14px; line-height:35px"> 5）main下面修改相应的路径：</p> 
  <pre class="prettyprint" name="code" style="white-space: nowrap; word-wrap: break-word; box-sizing: border-box; position: relative; overflow-y: hidden; overflow-x: auto; margin-top: 0px; margin-bottom: 1.1em; font-family: 'Source Code Pro', monospace; padding: 5px 5px 5px 60px; font-size: 14px; line-height: 1.45; word-break: break-all; color: rgb(51, 51, 51); border: 1px solid rgba(128, 128, 128, 0.0745098); border-radius: 0px; background-color: rgba(128, 128, 128, 0.0470588);"><code class="hljs python has-numbering" style="display: block; padding: 0px; color: inherit; box-sizing: border-box; font-family: 'Source Code Pro', monospace;font-size:undefined; white-space: pre; border-radius: 0px; word-wrap: normal; background: transparent;">
<span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">if</span> __name__ == <span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">'__main__'</span>:
    <span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">from</span> datasets.hs <span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">import</span> hs
    d = hs(<span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">'hs'</span>, <span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">'/home/panyiming/py-faster-rcnn/lib/datasets'</span>)
    res = d.roidb
    <span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">from</span> IPython <span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">import</span> embed; embed()</code>
   
   </pre><ul class="pre-numbering" style="box-sizing: border-box; position: absolute; width: 50px; top: 0px; left: 0px; margin: 0px; padding: 6px 0px 40px; border-right-width: 1px; border-right-style: solid; border-right-color: rgb(221, 221, 221); list-style: none; text-align: right; background-color: rgb(238, 238, 238);"><li style="box-sizing: border-box; padding: 0px 5px;">1</li><li style="box-sizing: border-box; padding: 0px 5px;">2</li><li style="box-sizing: border-box; padding: 0px 5px;">3</li><li style="box-sizing: border-box; padding: 0px 5px;">4</li><li style="box-sizing: border-box; padding: 0px 5px;">5</li><li style="box-sizing: border-box; padding: 0px 5px;">6</li></ul>
   
   <ul class="pre-numbering" style="box-sizing: border-box; position: absolute; width: 50px; top: 0px; left: 0px; margin: 0px; padding: 6px 0px 40px; border-right-width: 1px; border-right-style: solid; border-right-color: rgb(221, 221, 221); list-style: none; text-align: right; background-color: rgb(238, 238, 238);"><li style="box-sizing: border-box; padding: 0px 5px;">1</li><li style="box-sizing: border-box; padding: 0px 5px;">2</li><li style="box-sizing: border-box; padding: 0px 5px;">3</li><li style="box-sizing: border-box; padding: 0px 5px;">4</li><li style="box-sizing: border-box; padding: 0px 5px;">5</li><li style="box-sizing: border-box; padding: 0px 5px;">6</li></ul> 
  <p style="margin-top:0px; margin-bottom:1.1em; padding-top:0px; padding-bottom:0px; color:rgb(85,85,85); font-family:'microsoft yahei'; font-size:14px; line-height:35px"> 2，在py-faster-rcnn目录下，找到lib/datasets/factory.py 并修改，修改后的文件如下：</p> 
  <pre class="prettyprint" name="code" style="white-space: nowrap; word-wrap: break-word; box-sizing: border-box; position: relative; overflow-y: hidden; overflow-x: auto; margin-top: 0px; margin-bottom: 1.1em; font-family: 'Source Code Pro', monospace; padding: 5px 5px 5px 60px; font-size: 14px; line-height: 1.45; word-break: break-all; color: rgb(51, 51, 51); border: 1px solid rgba(128, 128, 128, 0.0745098); border-radius: 0px; background-color: rgba(128, 128, 128, 0.0470588);"><code class="hljs python has-numbering" style="display: block; padding: 0px; color: inherit; box-sizing: border-box; font-family: 'Source Code Pro', monospace;font-size:undefined; white-space: pre; border-radius: 0px; word-wrap: normal; background: transparent;"><span class="hljs-comment" style="color: rgb(136, 0, 0); box-sizing: border-box;"># --------------------------------------------------------</span>
<span class="hljs-comment" style="color: rgb(136, 0, 0); box-sizing: border-box;"># Fast R-CNN</span>
<span class="hljs-comment" style="color: rgb(136, 0, 0); box-sizing: border-box;"># Copyright (c) 2015 Microsoft</span>
<span class="hljs-comment" style="color: rgb(136, 0, 0); box-sizing: border-box;"># Licensed under The MIT License [see LICENSE for details]</span>
<span class="hljs-comment" style="color: rgb(136, 0, 0); box-sizing: border-box;"># Written by Ross Girshick</span>
<span class="hljs-comment" style="color: rgb(136, 0, 0); box-sizing: border-box;"># --------------------------------------------------------</span>

<span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">"""Factory method for easily getting imdbs by name."""</span>

__sets = {}

<span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">from</span> datasets.hs <span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">import</span> hs
<span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">import</span> numpy <span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">as</span> np

<span class="hljs-comment" style="color: rgb(136, 0, 0); box-sizing: border-box;"># # Set up voc_&lt;year&gt;_&lt;split&gt; using selective search "fast" mode</span>
<span class="hljs-comment" style="color: rgb(136, 0, 0); box-sizing: border-box;"># for year in ['2007', '2012']:</span>
<span class="hljs-comment" style="color: rgb(136, 0, 0); box-sizing: border-box;">#     for split in ['train', 'val', 'trainval', 'test']:</span>
<span class="hljs-comment" style="color: rgb(136, 0, 0); box-sizing: border-box;">#         name = 'voc_{}_{}'.format(year, split)</span>
<span class="hljs-comment" style="color: rgb(136, 0, 0); box-sizing: border-box;">#         __sets[name] = (lambda split=split, year=year: pascal_voc(split, year))</span>
<span class="hljs-comment" style="color: rgb(136, 0, 0); box-sizing: border-box;">#</span>
<span class="hljs-comment" style="color: rgb(136, 0, 0); box-sizing: border-box;"># # Set up coco_2014_&lt;split&gt;</span>
<span class="hljs-comment" style="color: rgb(136, 0, 0); box-sizing: border-box;"># for year in ['2014']:</span>
<span class="hljs-comment" style="color: rgb(136, 0, 0); box-sizing: border-box;">#     for split in ['train', 'val', 'minival', 'valminusminival']:</span>
<span class="hljs-comment" style="color: rgb(136, 0, 0); box-sizing: border-box;">#         name = 'coco_{}_{}'.format(year, split)</span>
<span class="hljs-comment" style="color: rgb(136, 0, 0); box-sizing: border-box;">#         __sets[name] = (lambda split=split, year=year: coco(split, year))</span>
<span class="hljs-comment" style="color: rgb(136, 0, 0); box-sizing: border-box;">#</span>
<span class="hljs-comment" style="color: rgb(136, 0, 0); box-sizing: border-box;"># # Set up coco_2015_&lt;split&gt;</span>
<span class="hljs-comment" style="color: rgb(136, 0, 0); box-sizing: border-box;"># for year in ['2015']:</span>
<span class="hljs-comment" style="color: rgb(136, 0, 0); box-sizing: border-box;">#     for split in ['test', 'test-dev']:</span>
<span class="hljs-comment" style="color: rgb(136, 0, 0); box-sizing: border-box;">#         name = 'coco_{}_{}'.format(year, split)</span>
<span class="hljs-comment" style="color: rgb(136, 0, 0); box-sizing: border-box;">#         __sets[name] = (lambda split=split, year=year: coco(split, year))</span>

name = <span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">'hs'</span>
devkit = <span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">'/home/panyiming/py-faster-rcnn/lib/datasets'</span>
__sets[<span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">'hs'</span>] = (<span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">lambda</span> name = name,devkit = devkit: hs(name,devkit))

<span class="hljs-function" style="box-sizing: border-box;"><span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">def</span> <span class="hljs-title" style="box-sizing: border-box;">get_imdb</span><span class="hljs-params" style="color: rgb(102, 0, 102); box-sizing: border-box;">(name)</span>:</span>
    <span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">"""Get an imdb (image database) by name."""</span>
    <span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">if</span> <span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">not</span> __sets.has_key(name):
        <span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">raise</span> KeyError(<span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">'Unknown dataset: {}'</span>.format(name))
    <span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">return</span> __sets[name]()

<span class="hljs-function" style="box-sizing: border-box;"><span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">def</span> <span class="hljs-title" style="box-sizing: border-box;">list_imdbs</span><span class="hljs-params" style="color: rgb(102, 0, 102); box-sizing: border-box;">()</span>:</span>
    <span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">"""List all registered imdbs."""</span>
    <span class="hljs-keyword" style="color: rgb(0, 0, 136); box-sizing: border-box;">return</span> __sets.keys()</code>
   
   </pre><ul class="pre-numbering" style="box-sizing: border-box; position: absolute; width: 50px; top: 0px; left: 0px; margin: 0px; padding: 6px 0px 40px; border-right-width: 1px; border-right-style: solid; border-right-color: rgb(221, 221, 221); list-style: none; text-align: right; background-color: rgb(238, 238, 238);"><li style="box-sizing: border-box; padding: 0px 5px;">1</li><li style="box-sizing: border-box; padding: 0px 5px;">2</li><li style="box-sizing: border-box; padding: 0px 5px;">3</li><li style="box-sizing: border-box; padding: 0px 5px;">4</li><li style="box-sizing: border-box; padding: 0px 5px;">5</li><li style="box-sizing: border-box; padding: 0px 5px;">6</li><li style="box-sizing: border-box; padding: 0px 5px;">7</li><li style="box-sizing: border-box; padding: 0px 5px;">8</li><li style="box-sizing: border-box; padding: 0px 5px;">9</li><li style="box-sizing: border-box; padding: 0px 5px;">10</li><li style="box-sizing: border-box; padding: 0px 5px;">11</li><li style="box-sizing: border-box; padding: 0px 5px;">12</li><li style="box-sizing: border-box; padding: 0px 5px;">13</li><li style="box-sizing: border-box; padding: 0px 5px;">14</li><li style="box-sizing: border-box; padding: 0px 5px;">15</li><li style="box-sizing: border-box; padding: 0px 5px;">16</li><li style="box-sizing: border-box; padding: 0px 5px;">17</li><li style="box-sizing: border-box; padding: 0px 5px;">18</li><li style="box-sizing: border-box; padding: 0px 5px;">19</li><li style="box-sizing: border-box; padding: 0px 5px;">20</li><li style="box-sizing: border-box; padding: 0px 5px;">21</li><li style="box-sizing: border-box; padding: 0px 5px;">22</li><li style="box-sizing: border-box; padding: 0px 5px;">23</li><li style="box-sizing: border-box; padding: 0px 5px;">24</li><li style="box-sizing: border-box; padding: 0px 5px;">25</li><li style="box-sizing: border-box; padding: 0px 5px;">26</li><li style="box-sizing: border-box; padding: 0px 5px;">27</li><li style="box-sizing: border-box; padding: 0px 5px;">28</li><li style="box-sizing: border-box; padding: 0px 5px;">29</li><li style="box-sizing: border-box; padding: 0px 5px;">30</li><li style="box-sizing: border-box; padding: 0px 5px;">31</li><li style="box-sizing: border-box; padding: 0px 5px;">32</li><li style="box-sizing: border-box; padding: 0px 5px;">33</li><li style="box-sizing: border-box; padding: 0px 5px;">34</li><li style="box-sizing: border-box; padding: 0px 5px;">35</li><li style="box-sizing: border-box; padding: 0px 5px;">36</li><li style="box-sizing: border-box; padding: 0px 5px;">37</li><li style="box-sizing: border-box; padding: 0px 5px;">38</li><li style="box-sizing: border-box; padding: 0px 5px;">39</li><li style="box-sizing: border-box; padding: 0px 5px;">40</li><li style="box-sizing: border-box; padding: 0px 5px;">41</li><li style="box-sizing: border-box; padding: 0px 5px;">42</li><li style="box-sizing: border-box; padding: 0px 5px;">43</li><li style="box-sizing: border-box; padding: 0px 5px;">44</li><li style="box-sizing: border-box; padding: 0px 5px;">45</li></ul>
   
   <ul class="pre-numbering" style="box-sizing: border-box; position: absolute; width: 50px; top: 0px; left: 0px; margin: 0px; padding: 6px 0px 40px; border-right-width: 1px; border-right-style: solid; border-right-color: rgb(221, 221, 221); list-style: none; text-align: right; background-color: rgb(238, 238, 238);"><li style="box-sizing: border-box; padding: 0px 5px;">1</li><li style="box-sizing: border-box; padding: 0px 5px;">2</li><li style="box-sizing: border-box; padding: 0px 5px;">3</li><li style="box-sizing: border-box; padding: 0px 5px;">4</li><li style="box-sizing: border-box; padding: 0px 5px;">5</li><li style="box-sizing: border-box; padding: 0px 5px;">6</li><li style="box-sizing: border-box; padding: 0px 5px;">7</li><li style="box-sizing: border-box; padding: 0px 5px;">8</li><li style="box-sizing: border-box; padding: 0px 5px;">9</li><li style="box-sizing: border-box; padding: 0px 5px;">10</li><li style="box-sizing: border-box; padding: 0px 5px;">11</li><li style="box-sizing: border-box; padding: 0px 5px;">12</li><li style="box-sizing: border-box; padding: 0px 5px;">13</li><li style="box-sizing: border-box; padding: 0px 5px;">14</li><li style="box-sizing: border-box; padding: 0px 5px;">15</li><li style="box-sizing: border-box; padding: 0px 5px;">16</li><li style="box-sizing: border-box; padding: 0px 5px;">17</li><li style="box-sizing: border-box; padding: 0px 5px;">18</li><li style="box-sizing: border-box; padding: 0px 5px;">19</li><li style="box-sizing: border-box; padding: 0px 5px;">20</li><li style="box-sizing: border-box; padding: 0px 5px;">21</li><li style="box-sizing: border-box; padding: 0px 5px;">22</li><li style="box-sizing: border-box; padding: 0px 5px;">23</li><li style="box-sizing: border-box; padding: 0px 5px;">24</li><li style="box-sizing: border-box; padding: 0px 5px;">25</li><li style="box-sizing: border-box; padding: 0px 5px;">26</li><li style="box-sizing: border-box; padding: 0px 5px;">27</li><li style="box-sizing: border-box; padding: 0px 5px;">28</li><li style="box-sizing: border-box; padding: 0px 5px;">29</li><li style="box-sizing: border-box; padding: 0px 5px;">30</li><li style="box-sizing: border-box; padding: 0px 5px;">31</li><li style="box-sizing: border-box; padding: 0px 5px;">32</li><li style="box-sizing: border-box; padding: 0px 5px;">33</li><li style="box-sizing: border-box; padding: 0px 5px;">34</li><li style="box-sizing: border-box; padding: 0px 5px;">35</li><li style="box-sizing: border-box; padding: 0px 5px;">36</li><li style="box-sizing: border-box; padding: 0px 5px;">37</li><li style="box-sizing: border-box; padding: 0px 5px;">38</li><li style="box-sizing: border-box; padding: 0px 5px;">39</li><li style="box-sizing: border-box; padding: 0px 5px;">40</li><li style="box-sizing: border-box; padding: 0px 5px;">41</li><li style="box-sizing: border-box; padding: 0px 5px;">42</li><li style="box-sizing: border-box; padding: 0px 5px;">43</li><li style="box-sizing: border-box; padding: 0px 5px;">44</li><li style="box-sizing: border-box; padding: 0px 5px;">45</li></ul> 
  <p style="margin-top:0px; margin-bottom:1.1em; padding-top:0px; padding-bottom:0px; color:rgb(85,85,85); font-family:'microsoft yahei'; font-size:14px; line-height:35px"> 二、模型的选择、训练以及<a target="_blank" href="http://lib.csdn.net/base/softwaretest" rel="nofollow noopener noreferrer" class="replace_word" title="软件测试知识库" style="text-decoration:none; color:rgb(223,52,52); font-weight:bold">测试</a>： <br style=""> 1.预训练模型介绍 <br style=""> 在github官网上的py-faster-rcnn的编译安装教程中有一步如下：</p> 
  <pre class="prettyprint" name="code" style="white-space: nowrap; word-wrap: break-word; box-sizing: border-box; position: relative; overflow-y: hidden; overflow-x: auto; margin-top: 0px; margin-bottom: 1.1em; font-family: 'Source Code Pro', monospace; padding: 5px 5px 5px 60px; font-size: 14px; line-height: 1.45; word-break: break-all; color: rgb(51, 51, 51); border: 1px solid rgba(128, 128, 128, 0.0745098); border-radius: 0px; background-color: rgba(128, 128, 128, 0.0470588);"><code class="hljs bash has-numbering" style="display: block; padding: 0px; color: inherit; box-sizing: border-box; font-family: 'Source Code Pro', monospace;font-size:undefined; white-space: pre; border-radius: 0px; word-wrap: normal; background: transparent;"><span class="hljs-built_in" style="color: rgb(102, 0, 102); box-sizing: border-box;">cd</span> <span class="hljs-variable" style="color: rgb(102, 0, 102); box-sizing: border-box;">$FRCN_ROOT</span>
./data/scripts/fetch_faster_rcnn_models.sh</code>
   
   </pre><ul class="pre-numbering" style="box-sizing: border-box; position: absolute; width: 50px; top: 0px; left: 0px; margin: 0px; padding: 6px 0px 40px; border-right-width: 1px; border-right-style: solid; border-right-color: rgb(221, 221, 221); list-style: none; text-align: right; background-color: rgb(238, 238, 238);"><li style="box-sizing: border-box; padding: 0px 5px;">1</li><li style="box-sizing: border-box; padding: 0px 5px;">2</li></ul>
   
   <ul class="pre-numbering" style="box-sizing: border-box; position: absolute; width: 50px; top: 0px; left: 0px; margin: 0px; padding: 6px 0px 40px; border-right-width: 1px; border-right-style: solid; border-right-color: rgb(221, 221, 221); list-style: none; text-align: right; background-color: rgb(238, 238, 238);"><li style="box-sizing: border-box; padding: 0px 5px;">1</li><li style="box-sizing: border-box; padding: 0px 5px;">2</li></ul> 
  <p style="margin-top:0px; margin-bottom:1.1em; padding-top:0px; padding-bottom:0px; color:rgb(85,85,85); font-family:'microsoft yahei'; font-size:14px; line-height:35px"> 执行完成之后会在/data/scripts下产生压缩文件faster_rcnn_models.tgz，解压得到faster_rcnn_model文件夹，faster_rcnn_model文件夹下面是作者用faster rcnn训练好的三个网络,分别对应着小、中、大型网络，大家可以试用一下这几个网络，看一些检测效果，他们训练都迭代了80000次，数据集都是pascal_voc的数据集。</p> 
  <p style="margin-top:0px; margin-bottom:1.1em; padding-top:0px; padding-bottom:0px; color:rgb(85,85,85); font-family:'microsoft yahei'; font-size:14px; line-height:35px"> 可以通过执行如下命令下载Imagenet上训练好的通用模型：</p> 
  <pre class="prettyprint" name="code" style="white-space: nowrap; word-wrap: break-word; box-sizing: border-box; position: relative; overflow-y: hidden; overflow-x: auto; margin-top: 0px; margin-bottom: 1.1em; font-family: 'Source Code Pro', monospace; padding: 5px 5px 5px 60px; font-size: 14px; line-height: 1.45; word-break: break-all; color: rgb(51, 51, 51); border: 1px solid rgba(128, 128, 128, 0.0745098); border-radius: 0px; background-color: rgba(128, 128, 128, 0.0470588);"><code class="hljs bash has-numbering" style="display: block; padding: 0px; color: inherit; box-sizing: border-box; font-family: 'Source Code Pro', monospace;font-size:undefined; white-space: pre; border-radius: 0px; word-wrap: normal; background: transparent;"><span class="hljs-built_in" style="color: rgb(102, 0, 102); box-sizing: border-box;">cd</span> <span class="hljs-variable" style="color: rgb(102, 0, 102); box-sizing: border-box;">$FRCN_ROOT</span>
./data/scripts/fetch_imagenet_models.sh</code>
   
   </pre><ul class="pre-numbering" style="box-sizing: border-box; position: absolute; width: 50px; top: 0px; left: 0px; margin: 0px; padding: 6px 0px 40px; border-right-width: 1px; border-right-style: solid; border-right-color: rgb(221, 221, 221); list-style: none; text-align: right; background-color: rgb(238, 238, 238);"><li style="box-sizing: border-box; padding: 0px 5px;">1</li><li style="box-sizing: border-box; padding: 0px 5px;">2</li></ul>
   
   <ul class="pre-numbering" style="box-sizing: border-box; position: absolute; width: 50px; top: 0px; left: 0px; margin: 0px; padding: 6px 0px 40px; border-right-width: 1px; border-right-style: solid; border-right-color: rgb(221, 221, 221); list-style: none; text-align: right; background-color: rgb(238, 238, 238);"><li style="box-sizing: border-box; padding: 0px 5px;">1</li><li style="box-sizing: border-box; padding: 0px 5px;">2</li></ul> 
  <p style="margin-top:0px; margin-bottom:1.1em; padding-top:0px; padding-bottom:0px; color:rgb(85,85,85); font-family:'microsoft yahei'; font-size:14px; line-height:35px"> 执行完成之后会在/data/scripts下产生压缩文件imagenet_models.tgz，解压得到imagenet_models文件夹，imagenet_model文件夹下面是在Imagenet上训练好的通用模型，在这里用来初始化网络的参数.</p> 
  <p style="margin-top:0px; margin-bottom:1.1em; padding-top:0px; padding-bottom:0px; color:rgb(85,85,85); font-family:'microsoft yahei'; font-size:14px; line-height:35px"> 2.修改模型文件配置 <br style=""> 模型文件在models下面对应的网络文件夹下，在这里我用中型网络的配置文件修改为例子 <br style=""> 比如：我的检测目标物是3类 ，那么我的类别就有两个类别即 background 和 3类目标 <br style=""> 因此，首先打开网络的模型文件夹，打开train.prototxt修改的地方重要有三个 <br style=""> 分别是个地方</p> 
  <pre style="white-space:pre-wrap; word-wrap:break-word; margin-top:0px; margin-bottom:10.5px; font-family:'Source Code Pro',monospace; padding:10px; font-size:14px; line-height:1.45; word-break:break-all; color:rgb(51,51,51)"><code style="font-family:'Source Code Pro',monospace; padding:0px; font-size:undefined; color:inherit; white-space:pre; word-wrap:normal; background-color:transparent">首先在data层把num_classes 从原来的21类 20类+背景 ，改成 4类 3类目标+背景
接在在cls_score层把num_output 从原来的21 改成 4
RoI Proposal下有个名为name: 'roi-data'的层，将其num_classes修改为4
在bbox_pred层把num_output 从原来的84 改成16， 为检测类别个数乘以4，
</code></pre> 
  <p style="margin-top:0px; margin-bottom:1.1em; padding-top:0px; padding-bottom:0px; color:rgb(85,85,85); font-family:'microsoft yahei'; font-size:14px; line-height:35px"> 如果你要进一步修改网络训练中的学习速率，步长，gamma值，以及输出模型的名字，需要在同目录下的solver.prototxt中修改。</p> 
  <p style="margin-top:0px; margin-bottom:1.1em; padding-top:0px; padding-bottom:0px; color:rgb(85,85,85); font-family:'microsoft yahei'; font-size:14px; line-height:35px"> 3.启动Fast RCNN网络训练</p> 
  <pre class="prettyprint" name="code" style="white-space: nowrap; word-wrap: break-word; box-sizing: border-box; position: relative; overflow-y: hidden; overflow-x: auto; margin-top: 0px; margin-bottom: 1.1em; font-family: 'Source Code Pro', monospace; padding: 5px 5px 5px 60px; font-size: 14px; line-height: 1.45; word-break: break-all; color: rgb(51, 51, 51); border: 1px solid rgba(128, 128, 128, 0.0745098); border-radius: 0px; background-color: rgba(128, 128, 128, 0.0470588);"><code class="hljs brainfuck has-numbering" style="display: block; padding: 0px; color: inherit; box-sizing: border-box; font-family: 'Source Code Pro', monospace;font-size:undefined; white-space: pre; border-radius: 0px; word-wrap: normal; background: transparent;"><span class="hljs-comment" style="color: rgb(136, 0, 0); box-sizing: border-box;">python</span> <span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">.</span><span class="hljs-comment" style="color: rgb(136, 0, 0); box-sizing: border-box;">/tools/train_net</span><span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">.</span><span class="hljs-comment" style="color: rgb(136, 0, 0); box-sizing: border-box;">py</span> <span class="hljs-literal" style="color: rgb(0, 102, 102); box-sizing: border-box;">-</span><span class="hljs-literal" style="color: rgb(0, 102, 102); box-sizing: border-box;">-</span><span class="hljs-comment" style="color: rgb(136, 0, 0); box-sizing: border-box;">gpu</span> <span class="hljs-comment" style="color: rgb(136, 0, 0); box-sizing: border-box;">1</span> <span class="hljs-literal" style="color: rgb(0, 102, 102); box-sizing: border-box;">-</span><span class="hljs-literal" style="color: rgb(0, 102, 102); box-sizing: border-box;">-</span><span class="hljs-comment" style="color: rgb(136, 0, 0); box-sizing: border-box;">solver</span> <span class="hljs-comment" style="color: rgb(136, 0, 0); box-sizing: border-box;">models/hs/faster_rcnn_end2end/solver</span><span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">.</span><span class="hljs-comment" style="color: rgb(136, 0, 0); box-sizing: border-box;">prototxt</span> <span class="hljs-literal" style="color: rgb(0, 102, 102); box-sizing: border-box;">-</span><span class="hljs-literal" style="color: rgb(0, 102, 102); box-sizing: border-box;">-</span><span class="hljs-comment" style="color: rgb(136, 0, 0); box-sizing: border-box;">weights</span> <span class="hljs-comment" style="color: rgb(136, 0, 0); box-sizing: border-box;">data/imagenet_models/VGG_CNN_M_1024</span><span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">.</span><span class="hljs-comment" style="color: rgb(136, 0, 0); box-sizing: border-box;">v2</span><span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">.</span><span class="hljs-comment" style="color: rgb(136, 0, 0); box-sizing: border-box;">caffemodel</span> <span class="hljs-literal" style="color: rgb(0, 102, 102); box-sizing: border-box;">-</span><span class="hljs-literal" style="color: rgb(0, 102, 102); box-sizing: border-box;">-</span><span class="hljs-comment" style="color: rgb(136, 0, 0); box-sizing: border-box;">imdb</span> <span class="hljs-comment" style="color: rgb(136, 0, 0); box-sizing: border-box;">hs</span> <span class="hljs-literal" style="color: rgb(0, 102, 102); box-sizing: border-box;">-</span><span class="hljs-literal" style="color: rgb(0, 102, 102); box-sizing: border-box;">-</span><span class="hljs-comment" style="color: rgb(136, 0, 0); box-sizing: border-box;">iters</span> <span class="hljs-comment" style="color: rgb(136, 0, 0); box-sizing: border-box;">80000</span> <span class="hljs-literal" style="color: rgb(0, 102, 102); box-sizing: border-box;">-</span><span class="hljs-literal" style="color: rgb(0, 102, 102); box-sizing: border-box;">-</span><span class="hljs-comment" style="color: rgb(136, 0, 0); box-sizing: border-box;">cfg</span> <span class="hljs-comment" style="color: rgb(136, 0, 0); box-sizing: border-box;">experiments/cfgs/faster_rcnn_end2end</span><span class="hljs-string" style="color: rgb(0, 136, 0); box-sizing: border-box;">.</span><span class="hljs-comment" style="color: rgb(136, 0, 0); box-sizing: border-box;">yml</span></code>
   
   </pre><ul class="pre-numbering" style="box-sizing: border-box; position: absolute; width: 50px; top: 0px; left: 0px; margin: 0px; padding: 6px 0px 40px; border-right-width: 1px; border-right-style: solid; border-right-color: rgb(221, 221, 221); list-style: none; text-align: right; background-color: rgb(238, 238, 238);"><li style="box-sizing: border-box; padding: 0px 5px;">1</li></ul>
   
   <ul class="pre-numbering" style="box-sizing: border-box; position: absolute; width: 50px; top: 0px; left: 0px; margin: 0px; padding: 6px 0px 40px; border-right-width: 1px; border-right-style: solid; border-right-color: rgb(221, 221, 221); list-style: none; text-align: right; background-color: rgb(238, 238, 238);"><li style="box-sizing: border-box; padding: 0px 5px;">1</li></ul> 
  <p style="margin-top:0px; margin-bottom:1.1em; padding-top:0px; padding-bottom:0px; color:rgb(85,85,85); font-family:'microsoft yahei'; font-size:14px; line-height:35px"> 命令解析： <br style=""> 1）、train_net.py是网络的训练文件，之后的参数都是附带的输入参数。 <br style=""> 3）、–gpu 代表机器上的GPU编号，如果是nvidia系列的tesla显卡，可以在终端中输入nvidia-smi来查看当前的显卡负荷，选择合适的显卡。 <br style=""> 4）、–solver 代表模型的配置文件，train.prototxt的文件路径已经包含在这个文件之中。 <br style=""> 5）、-weights 代表初始化的权重文件，这里用的是Imagenet上预训练好的模型，中型的网络我们选择用VGG_CNN_M_1024.v2.caffemodel，此步可以省略，省略后会自动初始化。 <br style=""> 6）、–imdb 这里给出的训练的<a target="_blank" href="http://lib.csdn.net/base/mysql" rel="nofollow noopener noreferrer" class="replace_word" title="MySQL知识库" style="text-decoration:none; color:rgb(223,52,52); font-weight:bold">数据库</a>名字需要在factory.py的_sets中，我在文件里面有。_sets[‘hs’]，train_net.py这个文件会调用factory.py再生成hs这个类，来读取数据。</p> 
  <p style="margin-top:0px; margin-bottom:1.1em; padding-top:0px; padding-bottom:0px; color:rgb(85,85,85); font-family:'microsoft yahei'; font-size:14px; line-height:35px"> 4.启动Fast RCNN网络检测 <br style=""> 可以参考tools下面的demo.py 文件，来做检测，并且将检测的坐标结果输出到相应的txt文件中。</p> 
  <br> 
 </div> 
</div>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/5882ba22383fcc00d3e777423b279c3c/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">OC类型常量的使用</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/5766cad9bb6687dc74e6605cacc44a03/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">在Oracle11g 中新建用户，授予只读用户权限详细步骤 (批量执行授权多表查询)</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>