<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>js获取img宽高 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="js获取img宽高" />
<meta property="og:description" content="知识点1 如果写了var img = new Image（100 ，100）， img.src = ‘1.png’ ，这样的作用是可以把img缓存到浏览器中，常用来做图片预加载。
知识点2 html代码：
[外链图片转存失败(img-dfDsOQbF-1562240215537)(https://mp.csdn.net/mdeditor/1.png)] js代码：
var imgW = document.getElementsByTagName(&#39;img&#39;)[0].style.width; 上面这种获取图片宽高方法，必须有style=“width:400px”，才能获取图片宽高。
知识点3 html代码：
&lt;style&gt; img{ padding:20px;border:1px solid red;} &lt;/style&gt; [外链图片转存失败(img-1OTZrTAM-1562240215538)(https://mp.csdn.net/mdeditor/1.png)] js代码：
window.onload = function(){ var img = document.getElementsByTagName(&#39;img&#39;)[0], imgOffsetWidth = img.offsetWidth, //442px imgClientWidth = img.clientWidth; //440px; } 其实offsetWidth得到的是width值&#43;padding值&#43;border值，clientWidth得到的是width值&#43;padding值。但是值得注意的是，如果把style=&#34;width:400px&#34;去掉，那么它们获取的就是真实图片的宽高。
知识点4 html代码：
[外链图片转存失败(img-NkUAK1sD-1562240215538)(https://mp.csdn.net/mdeditor/1.png)] js代码：
//naturalWidth只是用于Firefox/IE9/Safari/Chrome/Opera浏览器 window.onload = function(){ var img = document.getElementsByTagName(&#39;img&#39;)[0]; nWidth = img.naturalWidth //图片真实宽度 nHeight = img.naturalHeight //图片真实高度 } naturalWidth和naturaHeight都是获取图片真实宽高的值，但是只适用于的IE9以上浏览器，所以对于IE9以下得用其他方法。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/f4e74164627542a88f45bdaf4edfae1b/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2017-02-12T16:03:56+08:00" />
<meta property="article:modified_time" content="2017-02-12T16:03:56+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">js获取img宽高</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h3><a id="1_0"></a>知识点1</h3> 
<p>如果写了var img = new Image（100 ，100）， img.src = ‘1.png’ ，这样的作用是可以把img缓存到浏览器中，常用来做图片预加载。</p> 
<h3><a id="2_3"></a>知识点2</h3> 
<p>html代码：</p> 
<pre><code class="prism language-html">[外链图片转存失败(img-dfDsOQbF-1562240215537)(https://mp.csdn.net/mdeditor/1.png)]
</code></pre> 
<p>js代码：</p> 
<pre><code class="prism language-javascript"><span class="token keyword">var</span> imgW <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">'img'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>width<span class="token punctuation">;</span>
</code></pre> 
<p>上面这种获取图片宽高方法，必须有style=“width:400px”，才能获取图片宽高。</p> 
<h3><a id="3_17"></a>知识点3</h3> 
<p>html代码：</p> 
<pre><code>&lt;style&gt;
img{ padding:20px;border:1px solid red;}
&lt;/style&gt;
[外链图片转存失败(img-1OTZrTAM-1562240215538)(https://mp.csdn.net/mdeditor/1.png)]
</code></pre> 
<p>js代码：</p> 
<pre><code>window.onload = function(){
	var img = document.getElementsByTagName('img')[0], 
	imgOffsetWidth = img.offsetWidth,  //442px
	imgClientWidth = img.clientWidth;  //440px;
}

</code></pre> 
<p>其实offsetWidth得到的是width值+padding值+border值，clientWidth得到的是width值+padding值。但是值得注意的是，如果把style="width:400px"去掉，那么它们获取的就是真实图片的宽高。</p> 
<h3><a id="4_38"></a>知识点4</h3> 
<p>html代码：</p> 
<pre><code>[外链图片转存失败(img-NkUAK1sD-1562240215538)(https://mp.csdn.net/mdeditor/1.png)]
</code></pre> 
<p>js代码：</p> 
<pre><code>//naturalWidth只是用于Firefox/IE9/Safari/Chrome/Opera浏览器
window.onload = function(){
	var img = document.getElementsByTagName('img')[0];
	nWidth = img.naturalWidth     //图片真实宽度
	nHeight = img.naturalHeight   //图片真实高度
}
</code></pre> 
<p>naturalWidth和naturaHeight都是获取图片真实宽高的值，但是只适用于的IE9以上浏览器，所以对于IE9以下得用其他方法。</p> 
<h3><a id="5_57"></a>知识点5</h3> 
<p>html代码：</p> 
<pre><code>[外链图片转存失败(img-YKj95iEa-1562240215539)(https://mp.csdn.net/mdeditor/1.png)]
</code></pre> 
<p>js代码：</p> 
<pre><code>window.onload = function(){
	var img = document.getElementById('ii')
	alert(img.width)  //400
}
</code></pre> 
<p>以上这种方式可以获取给img标签设置的 width=400的值，但是如果没有在标签中设置 width=400，那么img.width获取的就是图片真实的宽高。</p> 
<h3><a id="6_73"></a>知识点6</h3> 
<p>html代码：</p> 
<pre><code>无img标签
</code></pre> 
<p>js代码：</p> 
<pre><code>&lt;script type="text/javascript" src="http://apps.bdimg.com/libs/zepto/1.1.4/zepto.min.js"&gt;&lt;/script&gt;
&lt;script type="text/javascript"&gt;
	var img = new Image();
	img.src = "1.jpg";
	$(img).appendTo("body")
&lt;/script&gt;
</code></pre> 
<p>这样也可以生成image标签。</p> 
<h3><a id="7_92"></a>知识点7</h3> 
<p>html 代码：</p> 
<pre><code>[外链图片转存失败(img-uLxunGkc-1562240215539)(https://mp.csdn.net/mdeditor/1.png)]
</code></pre> 
<p>js代码：</p> 
<pre><code>// 传入img对象，通过回调函数获取image宽高
function getImgNaturalDimensions(img, callback) {
    var nWidth, nHeight;
    if (img.naturalWidth) { // 现代浏览器，这个有点疑问，怎么保证图片已经完全加载完毕，需要优化
        nWidth = img.naturalWidth;
        nHeight = img.naturalHeight;
    } else { // IE6/7/8
        var imgae = new Image();
        image.src = img.src;
        image.onload = function() {
            callback(image.width, image.height);
        }
    }
    return [nWidth, nHeight]
}

var img = document.getElementByID('ii');
getImgNaturalDimensions(img , function( arr ){
	alert(arr[0])  //图片宽度
	alert(arr[1])  //图片高度
})


//如果只有图片的路径，则用法为：
function getImgNaturalDimensions(src, callback) {
    var nWidth, nHeight
   
    var imgae = new Image()
    image.src = src;
    image.onload = function() {
        callback(image.width, image.height);
    }
    return [nWidth, nHeight];
}

getImgNaturalDimensions('1.png' , function( arr ){
	alert(arr[0])  //图片宽度
	alert(arr[1])  //图片高度
})
</code></pre> 
<p>上面是获取图片大小的封装方法，注意以上获取图片大小的任何方法都必须有个前提，就是必须保证图片已经加载完毕，否则获取都是0，0。</p> 
<h3><a id="_144"></a>探究问题</h3> 
<p>以上几种获取图片大小的方式，如果给img标签加上了padding、border等样式，看看获取的结果如何？</p> 
<h3><a id="_147"></a>参考链接：</h3> 
<p><a href="http://www.cnblogs.com/koukouyifan/p/4066564.html" rel="nofollow">http://www.cnblogs.com/koukouyifan/p/4066564.html</a><br> <a href="http://blog.csdn.net/jimmyhandy/article/details/48654223">http://blog.csdn.net/jimmyhandy/article/details/48654223</a><br> <a href="http://blog.csdn.net/isaisai/article/details/52467738">http://blog.csdn.net/isaisai/article/details/52467738</a><br> <a href="http://www.tuicool.com/articles/RRbmMr" rel="nofollow">http://www.tuicool.com/articles/RRbmMr</a></p> 
<h3><a id="_153"></a>福利</h3> 
<p>下载地址：<a href="http://edu.duolaimier.cn/forum.php" rel="nofollow">网盘链接</a></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/7cd43bf76aede7b3a6818ba96be9d1a3/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">在 JDK 7 版本以上， Comparator 要满足自反性，传递性，对称性</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/7dfcbda86036898a3a70d1a46f7140b1/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">[C#]Array.Sort()排序的原理</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>