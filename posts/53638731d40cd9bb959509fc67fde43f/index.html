<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>提升测试多样性，揭秘Pytest插件pytest-randomly - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="提升测试多样性，揭秘Pytest插件pytest-randomly" />
<meta property="og:description" content="大家可能知道在Pytest测试生态中，插件扮演着不可或缺的角色，为开发者提供了丰富的功能和工具。其中，pytest-randomly 插件以其能够引入随机性的特性而备受欢迎。本文将深入探讨 pytest-randomly 插件的应用，以及如何通过引入随机性来提升测试用例的多样性。
什么是pytest-randomly？
pytest-randomly 是Pytest的一个插件，它的主要目的是为测试用例引入随机性。通过使用该插件，测试用例的执行顺序可以被随机化，这有助于发现一些在特定顺序下才会出现的问题，提高测试的覆盖性。
安装pytest-randomly
在开始之前，首先需要安装`pytest-randomly`插件。使用以下命令：
pip install pytest pytest-randomly 基本用法
默认情况下，pytest-randomly 会随机打乱测试用例的执行顺序。你只需在运行测试时添加 --randomly-seed 参数以确保结果可复现。
pytest --randomly-dont-reorganize --randomly-seed=&lt;seed_value&gt; - --randomly-dont-reorganize : 禁止重新组织测试用例的顺序。
- --randomly-seed=&lt;seed_value&gt; : 使用指定的种子值进行随机化，确保结果可复现。
案例演示
考虑一个简单的测试场景，有两个测试用例，分别测试加法和减法：
# test_operations.py def test_addition(): assert 1 &#43; 2 == 3 def test_subtraction(): assert 5 - 3 == 2 运行这两个测试用例，结果应该是全部通过。现在，我们引入`pytest-randomly`插件，看看会发生什么。
应用pytest-randomly
首先，确保已安装 pytest-randomly 插件。接下来，在运行测试时添加 --randomly-seed 参数：
pytest --randomly-seed=42 test_operations.py 在这个例子中，我们使用了种子值42。--randomly-seed 参数为开发者提供了控制随机性的手段，使测试的随机化过程更加可控和可复现。在调试和发现特定条件下的问题时，通过调整种子值，你可以更灵活地利用 pytest-randomly 插件。
最终测试结果可能是：​​​​​​​
============================== test session starts ============================== collected 2 items test_operations." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/53638731d40cd9bb959509fc67fde43f/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-10T08:45:09+08:00" />
<meta property="article:modified_time" content="2024-01-10T08:45:09+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">提升测试多样性，揭秘Pytest插件pytest-randomly</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>大家可能知道在Pytest测试生态中，插件扮演着不可或缺的角色，为开发者提供了丰富的功能和工具。其中，<strong>pytest-r</strong><strong>andomly</strong> 插件以其能够引入随机性的特性而备受欢迎。本文将深入探讨 <strong>pytest-r</strong><strong>andomly </strong>插件的应用，以及如何通过引入随机性来提升测试用例的多样性。</p> 
<p class="img-center"><img alt="图片" height="47" src="https://images2.imgbox.com/df/74/GadyGXYv_o.png" width="50"></p> 
<p style="text-align:center;"><strong>什么是pytest-randomly？</strong></p> 
<p style="text-align:center;"></p> 
<p><strong>pytest-randomly </strong>是Pytest的一个插件，它的主要目的是为测试用例引入随机性。通过使用该插件，测试用例的执行顺序可以被随机化，这有助于发现一些在特定顺序下才会出现的问题，提高测试的覆盖性。</p> 
<p class="img-center"><img alt="图片" height="47" src="https://images2.imgbox.com/80/19/Xs7ASEWd_o.png" width="50"></p> 
<p style="text-align:center;"><strong>安装pytest-randomly</strong></p> 
<p></p> 
<p>在开始之前，首先需要安装`pytest-randomly`插件。使用以下命令：</p> 
<pre><code>pip install pytest pytest-randomly</code></pre> 
<p class="img-center"><img alt="图片" height="47" src="https://images2.imgbox.com/b4/e5/gGAQGHJE_o.png" width="50"></p> 
<p style="text-align:center;"><strong>基本用法</strong></p> 
<p>默认情况下，<strong>pytest-randomly </strong>会随机打乱测试用例的执行顺序。你只需在运行测试时添加 <strong>--randomly-seed</strong> 参数以确保结果可复现。</p> 
<pre><code>pytest --randomly-dont-reorganize --randomly-seed=&lt;seed_value&gt;</code></pre> 
<p>- <strong>--randomly-dont-reorganize </strong>: 禁止重新组织测试用例的顺序。</p> 
<p>- <strong>--randomly-seed=&lt;seed_value&gt;</strong> : 使用指定的种子值进行随机化，确保结果可复现。</p> 
<p></p> 
<p class="img-center"><img alt="图片" height="47" src="https://images2.imgbox.com/13/1e/Y9BY005H_o.png" width="50"></p> 
<p style="text-align:center;"><strong>案例演示</strong></p> 
<p></p> 
<p>考虑一个简单的测试场景，有两个测试用例，分别测试加法和减法：</p> 
<pre><code class="language-python"># test_operations.py


def test_addition():
    assert 1 + 2 == 3


def test_subtraction():
    assert 5 - 3 == 2</code></pre> 
<p>运行这两个测试用例，结果应该是全部通过。现在，我们引入`pytest-randomly`插件，看看会发生什么。</p> 
<p class="img-center"><img alt="图片" height="47" src="https://images2.imgbox.com/af/20/g5zDmTOI_o.png" width="50"></p> 
<p style="text-align:center;"><strong>应用pytest-randomly</strong></p> 
<p>首先，确保已安装 <strong>pytest-randomly </strong>插件。接下来，在运行测试时添加 <strong>--randomly-seed </strong>参数：</p> 
<pre><code>pytest --randomly-seed=42 test_operations.py</code></pre> 
<p>在这个例子中，我们使用了种子值42。<strong>--randomly-seed</strong> 参数为开发者提供了控制随机性的手段，使测试的随机化过程更加可控和可复现。在调试和发现特定条件下的问题时，通过调整种子值，你可以更灵活地利用 pytest-randomly 插件。</p> 
<p><br> 最终测试结果可能是：​​​​​​​</p> 
<pre><code class="language-bash">============================== test session starts ==============================
collected 2 items                                                              


test_operations.py ..                                                        [100%]


============================== 2 passed in 0.12s ===============================</code></pre> 
<p>然后，再次运行相同的命令，结果应该是相同的：</p> 
<pre><code class="language-bash">============================== test session starts ==============================
collected 2 items                                                              


test_operations.py ..                                                        [100%]


============================== 2 passed in 0.11s ===============================</code></pre> 
<p class="img-center"><img alt="图片" height="47" src="https://images2.imgbox.com/35/5d/oe1IoWnL_o.png" width="50"></p> 
<p style="text-align:center;"><strong>提升测试多样性</strong></p> 
<p></p> 
<p>通过引入随机性，我们可以提升测试的多样性。在一个大型项目中，测试用例的执行顺序可能会影响到一些隐藏的问题。<strong>pytest-randomly </strong>插件让我们能够以不同的次序运行测试，从而更容易发现这些问题。</p> 
<p class="img-center"><img alt="图片" height="47" src="https://images2.imgbox.com/36/0d/E00GmzIc_o.png" width="50"></p> 
<p style="text-align:center;"><strong>结合其他插件</strong></p> 
<p><strong>pytest-randomly </strong>还可以与其他插件结合使用，例如 <strong>pytest-cov</strong> 。在运行测试时，你可以将两个插件的参数结合起来：</p> 
<pre><code>pytest --randomly-dont-reorganize --randomly-seed=42 --cov=your_module tests/</code></pre> 
<p></p> 
<p>这样，你既可以享受到 <strong>pytest-randomly</strong> 插件带来的随机性，又可以测量测试覆盖率。</p> 
<p>另外，打个小广告，笔者在CSDN有自动化测试视频教程，有兴趣的可以扫描如下二维码了解下，谢谢。</p> 
<p style="text-align:center;"><img alt="" height="97" src="https://images2.imgbox.com/bf/b6/Eq20RJwz_o.png" width="97"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/1455054021dcf38616568cc52ab3b77c/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">QT上位机开发（动态添加控件）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/db37a09094a51c3c52a5e444799a3af6/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Vue 缓存Hook：提高接口性能，减少重复请求</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>