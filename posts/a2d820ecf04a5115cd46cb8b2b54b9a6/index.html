<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>使用51单片机驱动舵机程序分析 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="使用51单片机驱动舵机程序分析" />
<meta property="og:description" content="舵机，又称伺服马达，是一种具有闭环控制系统的机电结构。舵机主要是由外 壳、电路板、无核心马达、齿轮与位置检测器所构成。其工作原理是由控制器发出PWM（脉冲宽度调制）信号给舵机，经电路板上的IC处理后计算出转动方向， 再驱动无核心马达转动，透过减速齿轮将动力传至摆臂，同时由位置检测器（电位器）返回位置信号，判断是否已经到达设定位置，一般舵机只能旋转180度。舵机有3根线，棕色为地，红色为电源正，橙色为信号线，但不同牌子的舵机，线的颜色可能不同，需要注意。 舵机的转动位置是靠控制PWM（脉冲宽度调制）信号的占空比来实现的，标准PWM（脉冲宽度调制）信号的周期固定为20ms，占空比0.5～2.5ms 的正脉冲宽度和舵机的转角-90°～90°（即0~180度）相对应。注意，由于舵机牌子不同，其控制器解析出的脉冲宽度也不同，所以对于同一信号，不同牌子的舵机旋转的角度也不同。其原理是：它内部有一个基准电路，产生周期为20ms，宽度为1.5ms的基准信号， 控制信号由接收机的通道进入信号调制芯片，获得直流偏置电压。将获得的直流偏置电压与电位器的电压比较，获得电压差输出。最后，电压差的正负输出到电机驱动芯片决定电机的正反转。当电机转速一定时，通过级联减速齿轮带动电位器旋转，使得电压差为0，电机停止转动。
0.5ms------------0度；
1.0ms------------45度；
1.5ms------------90度；
2.0ms-----------135度；
2.5ms-----------180度；
采用11.0592MHZ的51单片机驱动舵机转动程序如下：
//上电自动转动 #include &lt;reg52.h&gt; unsigned char count; //0.5ms次数标识 sbit pwm =P1^0 ; //PWM信号输出 sbit jia =P2^4; //角度增加按键检测IO口 sbit jian =P2^5; //角度减少按键检测IO口 unsigned char jd; //角度标识 sbit pwm1 =P0^0 ; //PWM信号输出给示波器，检测PWM波用 void delay(unsigned char i)//延时 { unsigned char j,k; for(j=i;j&gt;0;j--) for(k=125;k&gt;0;k--); } void Time0_Init() //定时器0初始化 { //定时器0装初值 用示波器检测后，11.0592MHZ晶振 定时0.5ms进入中断 装初值如下 TH0 = (65536-445)/256; TL0 = (65536-445)%256; TMOD = 0x01; //定时器0工作在方式1 IE = 0x82;	//IE=0x82=1000 0010 等价于 EA=1 开总中断 ET0=1 开定时器0中断 TR0=1; //开定时器0 } void Time0_Int() interrupt 1 //中断程序 { //重装初值 TH0 = (65536-445)/256; TL0 = (65536-445)%256; if(count&lt; jd) { pwm=1; //确实小于，PWM输出高电平 pwm1=pwm; //接示波器用的io口，观测PWM波形用	}	//判断0." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/a2d820ecf04a5115cd46cb8b2b54b9a6/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2018-01-05T20:29:22+08:00" />
<meta property="article:modified_time" content="2018-01-05T20:29:22+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">使用51单片机驱动舵机程序分析</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2><span style="font-family:SimSun; font-size:18px; font-weight:normal"><span style="color:rgb(69,69,69)">舵机，又称伺服马达，</span><span style="color:rgb(69,69,69)">是一种具有闭环控制系统的机电结构。舵机主要是由外 壳、电路板、无核心马达、齿轮与位置检测器所构成。其工作原理是由控制器发出PWM（脉冲宽度调制）信号给舵机，经电路板上的IC处理后计算出转动方向， 再驱动无核心马达转动，透过减速齿轮将动力传至摆臂，同时由位置检测器（电位器）返回位置信号，判断是否已经到达设定位置，一般舵机只能旋转180度。舵机有3根线，棕色为地，红色为电源正，橙色为信号线，但不同牌子的舵机，线的颜色可能不同，</span><span style="color:rgb(69,69,69)">需要</span><span style="color:rgb(69,69,69)">注意。</span></span></h2> 
<p><span style="color:rgb(69,69,69)"><span style="font-family:SimSun; font-size:18px">舵机的转动位置是靠控制PWM（脉冲宽度调制）信号的占空比来实现的，标准PWM（脉冲宽度调制）信号的周期固定为20ms，占空比0.5～2.5ms 的正脉冲宽度和舵机的转角-90°～90°（即0~180度）相对应。注意，由于舵机牌子不同，其控制器解析出的脉冲宽度也不同，所以对于同一信号，不同牌子的舵机旋转的角度也不同。其原理是：它内部有一个基准电路，产生周期为20ms，宽度为1.5ms的基准信号， 控制信号由接收机的通道进入信号调制芯片，获得直流偏置电压。将获得的直流偏置电压与电位器的电压比较，获得电压差输出。最后，电压差的正负输出到电机驱动芯片决定电机的正反转。当电机转速一定时，通过级联减速齿轮带动电位器旋转，使得电压差为0，电机停止转动。</span></span></p> 
<p><span style="color:rgb(50,62,50)">   0.5ms------------0度；</span></p> 
<p><span style="color:rgb(50,62,50)">   1.0ms------------45度；</span></p> 
<p><span style="color:rgb(50,62,50)">   1.5ms------------90度；</span></p> 
<p><span style="color:rgb(50,62,50)">   2.0ms-----------135度；</span></p> 
<p><span style="color:rgb(50,62,50)">   2.5ms-----------180度；</span></p> 
<p><span style="color:rgb(69,69,69)"> </span></p> 
<p><span style="font-family:宋体">采用</span>11.0592MHZ<span style="font-family:宋体">的</span><span style="font-family:Calibri">51</span><span style="font-family:宋体">单片机驱动舵机转动程序如下：</span></p> 
<p></p> 
<pre><code class="language-html">//上电自动转动

#include &lt;reg52.h&gt;

unsigned char count;      //0.5ms次数标识

sbit pwm =P1^0 ;          //PWM信号输出

sbit jia =P2^4;           //角度增加按键检测IO口

sbit jian =P2^5;           //角度减少按键检测IO口

unsigned char jd;         //角度标识

 

sbit pwm1 =P0^0 ;          //PWM信号输出给示波器，检测PWM波用

void delay(unsigned char i)//延时

{

  unsigned char j,k;

  for(j=i;j&gt;0;j--)

    for(k=125;k&gt;0;k--);

}

void Time0_Init()          //定时器0初始化

{

//定时器0装初值 用示波器检测后，11.0592MHZ晶振 定时0.5ms进入中断 装初值如下

TH0  = (65536-445)/256;

TL0  = (65536-445)%256;

 
TMOD = 0x01;    //定时器0工作在方式1   

IE = 0x82;	//IE=0x82=1000 0010 等价于 EA=1 开总中断  ET0=1 开定时器0中断

  TR0=1;          //开定时器0

}

void Time0_Int() interrupt 1 //中断程序

{

//重装初值

TH0  = (65536-445)/256;

TL0  = (65536-445)%256;

 

    if(count&lt; jd)

{

 pwm=1;                  //确实小于，PWM输出高电平

 pwm1=pwm;              //接示波器用的io口，观测PWM波形用	    }	//判断0.5ms次数是否小于角度标识

 //pwm=1;                  //确实小于，PWM输出高电平

    else

{

 pwm=0;                  //确实小于，PWM输出高电平

 pwm1=pwm;             //接示波器用的io口，观测PWM波形用	}

    //  pwm=0;                  //大于则输出低电平

    count=(count+1);          //0.5ms次数加1

    count=count%40;     //次数始终保持为40 即保持周期为20ms

}

 

//此注销掉部分为通过按键控制舵机转动的程序，功能为通过jia按键控制正转，

//通过jian按键控制反转

/*void keyscan()              //按键扫描

{

   if(jia==0)               //角度增加按键是否按下

  {

    delay(10);              //按下延时，消抖

    if(jia==0)              //确实按下

     {

      jd++;                 //角度标识加1

      count=0;              //按键按下 则20ms周期从新开始

      if(jd==6)

        jd=5;               //已经是180度，则保持

      while(jia==0);        //等待按键放开

     }

  }

  if(jian==0)                //角度减小按键是否按下

  {

    delay(10);

    if(jian==0)

     {

      jd--;                 //角度标识减1

      count=0;

      if(jd==0)

        jd=1;               //已经是0度，则保持

      while(jan==0);

     }

  }

}*/

 
void main()

{

//上电，舵机自动正反转    

//应注意每次步进是延时函数delay参数的设置，此处延时函数参数设置的并不理想    

while(1)

{

  for(jd=1;jd&lt;6;jd++)

{

count=0;

Time0_Init();

delay(50000000);

}

delay(50000000);

for(jd=6;jd&gt;0;jd--)

{

count=0;

Time0_Init();

delay(50000000);

}

}

}</code></pre> 
<br> 
<br> 
<p></p> 
<p> </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/4ec487afced7acf9ffe9496dbd670772/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">C#连接sqlServer数据库详解</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/9cd501bfb27eac1ed58795a89063cf98/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Bash on Windows各种配置</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>