<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>el-tree 搜索匹配结果高亮、关键字高亮 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="el-tree 搜索匹配结果高亮、关键字高亮" />
<meta property="og:description" content="1、背景 最近项目中用到了el-tree组件，根据产品的需求，需要做el-tree的关键词过滤功能，并且需要命中的关键字高亮显示，在这里记录一下实现的过程。
话不多说，先上效果图：
左侧是搜索命中结果高亮，右侧是命中的关键词高亮。
2、实现 看了上面的效果图，下面针对上面的两种情况分别进行实现。
2.1、命中的结果高亮 命中的结果高亮如上的效果图左侧部分，具体的实现代码如下：
1）结构代码
&lt;!-- 匹配结果高亮 --&gt; &lt;div class=&#34;content-item&#34;&gt; &lt;el-input style=&#34;width:200px&#34; v-model=&#34;filterText&#34; placeholder=&#34;搜索&#34; prefix-icon=&#34;el-icon-search&#34; clearable&gt; &lt;/el-input&gt; &lt;el-tree style=&#34;width:200px&#34; ref=&#34;tree&#34; node-key=&#34;gid&#34; :data=&#34;userDatas&#34; :filter-node-method=&#34;filterNode&#34; :default-expand-all=&#34;true&#34;&gt; &lt;span class=&#34;custom-tree-node&#34; slot-scope=&#34;{ node }&#34;&gt; &lt;span :class=&#34;node.text&#34;&gt;{{node.label}}&lt;/span&gt; &lt;/span&gt; &lt;/el-tree&gt; &lt;/div&gt; 主要就包括了一个 el-input 和 el-tree 组件
关键点：
第一、使用了 el-tree 组件自带的 filter-node-method 属性，描述如下：
对树节点进行筛选时执行的方法，返回 true 表示这个节点可以显示，返回 false 则表示这个节点会被隐藏Function(value, data, node) 官网地址：Element - The world&#39;s most popular Vue UI framework
第二、使用了 slot-scope 自定义树节点的内容，参数为 { node, data }" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/577ae6b83302b221ae9a2dc8dd041c78/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-07-19T13:51:20+08:00" />
<meta property="article:modified_time" content="2022-07-19T13:51:20+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">el-tree 搜索匹配结果高亮、关键字高亮</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2>1、背景</h2> 
<p>最近项目中用到了el-tree组件，根据产品的需求，需要做el-tree的关键词过滤功能，并且需要命中的关键字高亮显示，在这里记录一下实现的过程。</p> 
<p>话不多说，先上效果图：</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/6d/c0/jCPpj1p5_o.gif"></p> 
<p> 左侧是搜索命中结果高亮，右侧是命中的关键词高亮。</p> 
<h2>2、实现</h2> 
<p>看了上面的效果图，下面针对上面的两种情况分别进行实现。</p> 
<h3>2.1、命中的结果高亮</h3> 
<p>命中的结果高亮如上的效果图左侧部分，具体的实现代码如下：</p> 
<p>1）结构代码</p> 
<pre><code class="language-javascript">    &lt;!-- 匹配结果高亮 --&gt;
    &lt;div class="content-item"&gt;
    &lt;el-input
    style="width:200px" 
    v-model="filterText"
    placeholder="搜索"
    prefix-icon="el-icon-search"
    clearable&gt;
    &lt;/el-input&gt;
    &lt;el-tree 
        style="width:200px" 
        ref="tree"
        node-key="gid"
        :data="userDatas"
        :filter-node-method="filterNode"
        :default-expand-all="true"&gt;
        &lt;span class="custom-tree-node" slot-scope="{ node }"&gt;
            &lt;span :class="node.text"&gt;{<!-- -->{node.label}}&lt;/span&gt;
        &lt;/span&gt;
    &lt;/el-tree&gt;
    &lt;/div&gt;</code></pre> 
<p>主要就包括了一个 el-input 和 el-tree 组件</p> 
<p> 关键点：</p> 
<p>第一、使用了 el-tree 组件自带的 filter-node-method 属性，描述如下：</p> 
<table><tbody><tr><td>对树节点进行筛选时执行的方法，返回 true 表示这个节点可以显示，返回 false 则表示这个节点会被隐藏</td><td>Function(value, data, node)</td></tr></tbody></table> 
<p>官网地址：<a href="https://element.eleme.cn/#/zh-CN/component/tree%23scoped-slot" rel="nofollow" title="Element - The world's most popular Vue UI framework">Element - The world's most popular Vue UI framework</a></p> 
<p>第二、使用了 slot-scope 自定义树节点的内容，参数为 { node, data }</p> 
<p>2）js代码</p> 
<pre><code class="language-javascript">watch:{
    filterText(value){
        this.$refs.tree.filter(value)
},

 methods: {
    filterNode(value, data, node){
        node.text = "";
        if(!value) return true;
        if(data.label.indexOf(value) !== -1){
            node.text = "red"
        }
        return data.label.indexOf(value) !== -1
    }
},

  data() {
    return {
        filterText:"",
        filterText1:"",
        userDatas:[
            
{gid:'0001',label:'测试01',children:[{gid:'00012',label:'测试0112'},           {gid:'00013',label:'测试0113'}]},
            
{gid:'0002',label:'测试02',children:[{gid:'00021',label:'测试0221'},{gid:'00022',label:'测试0222'}]},
            
{gid:'0003',label:'测试03',children:[{gid:'00031',label:'测试0331'},{gid:'00332',label:'测试0333'}]},
        ],
    }
  },</code></pre> 
<p>关键点：在 filterNode 方法中对 node节点中的text进行赋值，当命中后设置它的样式为红色</p> 
<p>3）样式代码</p> 
<pre><code class="language-css">.content-item{
    width: 300px;
    height: 100%;
    display: flex;
    flex-direction: column;
}
.red{
    color: red;
}</code></pre> 
<p>到这里命中结果高亮已经完成。</p> 
<h3>2.2、命中的关键词高亮</h3> 
<p>命中的结果高亮如上的效果图右侧部分，具体的实现代码如下：</p> 
<p>1）结构代码</p> 
<pre><code class="language-javascript">&lt;!-- 匹配关键字高亮 --&gt;
    &lt;div class="content-item"&gt;
    &lt;el-input
    style="width:200px" 
    v-model="filterText1"
    placeholder="搜索"
    prefix-icon="el-icon-search"
    clearable&gt;
    &lt;/el-input&gt;
    &lt;el-tree 
        style="width:200px" 
        ref="tree1"
        node-key="gid"
        :data="userDatas"
        highlight-current
        :filter-node-method="filterNode1"
        :default-expand-all="true"&gt;
        &lt;span slot-scope="{ node }" class="custom-tree-node"&gt;
            &lt;span v-if="!filterText1"&gt;{<!-- -->{ node.label }}&lt;/span&gt;
            &lt;span v-if="filterText1" v-html="node.label.replace(new RegExp(filterText1,'g'),`&lt;font style='color:red'&gt;${filterText1}&lt;/font&gt;`)" /&gt;
        &lt;/span&gt;
    &lt;/el-tree&gt;
    &lt;/div&gt;</code></pre> 
<p>关键点：</p> 
<pre><code class="language-html">v-html="node.label.replace(new RegExp(filterText1,'g'),`&lt;font style='color:red'&gt;${filterText1}&lt;/font&gt;`)"</code></pre> 
<p>使用正则将filterText1 替换为 </p> 
<pre><code class="language-html">&lt;font style='color:red'&gt;${filterText1}&lt;/font&gt;</code></pre> 
<p>2）js代码</p> 
<pre><code class="language-javascript">watch:{
    filterText1(value){
        this.$refs.tree1.filter(value)
    }
  },
  methods: {
    filterNode1(value, data, node){
        if(!value) return true;
        return data.label.indexOf(value) !== -1
    },
  },</code></pre> 
<p>样式代码同上，到这里命中关键字高亮就可以了。</p> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/1345756c309a952a864bb472f0c19be1/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Win7 Win10系统下在右下角的usb设备中显示了SATA硬盘</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/9b86167a66f727a61ae10e3efe9f2ecf/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">如何利用Matlab对指定条件下的excel单元格填充颜色</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>