<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Redis7.0源码安装与部署 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Redis7.0源码安装与部署" />
<meta property="og:description" content="环境依赖 gcc gcc-c&#43;&#43; [root@redis ~]# yum install gcc* -y 下载安装包 [root@redis ~]# wget https://download.redis.io/redis-stable.tar.gz --2023-07-13 16:54:01-- https://download.redis.io/redis-stable.tar.gz Resolving download.redis.io (download.redis.io)... 45.60.125.1 Connecting to download.redis.io (download.redis.io)|45.60.125.1|:443... connected. HTTP request sent, awaiting response... 200 OK Length: 3071850 (2.9M) [application/octet-stream] Saving to: ‘redis-stable.tar.gz’ 100%[======================================&gt;] 3,071,850 29.8KB/s in 65s 2023-07-13 16:55:06 (46.3 KB/s) - ‘redis-stable.tar.gz’ saved [3071850/3071850] [root@redis ~]# ll total 3004 -rw-------. 1 root root 1294 Jul 13 11:32 anaconda-ks.cfg -rw-r--r--. 1 root root 3071850 Jul 10 19:52 redis-stable." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/04ac15e7ed27263f73cbfc73bd19b2b7/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-08-10T13:01:14+08:00" />
<meta property="article:modified_time" content="2023-08-10T13:01:14+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Redis7.0源码安装与部署</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2 style="background-color:transparent;">环境依赖</h2> 
<pre><code class="hljs">gcc gcc-c++

[root@redis ~]# yum install gcc* -y
</code></pre> 
<h2>下载安装包</h2> 
<pre><code class="hljs">[root@redis ~]# wget https://download.redis.io/redis-stable.tar.gz
--2023-07-13 16:54:01--  https://download.redis.io/redis-stable.tar.gz
Resolving download.redis.io (download.redis.io)... 45.60.125.1
Connecting to download.redis.io (download.redis.io)|45.60.125.1|:443... connected.
HTTP request sent, awaiting response... 200 OK
Length: 3071850 (2.9M) [application/octet-stream]
Saving to: ‘redis-stable.tar.gz’

100%[======================================&gt;] 3,071,850   29.8KB/s   in 65s    

2023-07-13 16:55:06 (46.3 KB/s) - ‘redis-stable.tar.gz’ saved [3071850/3071850]

[root@redis ~]# ll
total 3004
-rw-------. 1 root root    1294 Jul 13 11:32 anaconda-ks.cfg
-rw-r--r--. 1 root root 3071850 Jul 10 19:52 redis-stable.tar.gz</code></pre> 
<h2 style="background-color:transparent;">解压缩</h2> 
<pre><code class="hljs">
[root@redis ~]# tar -zxf redis-stable.tar.gz 


[root@redis ~]# ll -h redis-stable
total 272K
-rw-rw-r--.  1 1000 1000  45K Jul 10 19:39 00-RELEASENOTES
-rw-rw-r--.  1 1000 1000   51 Jul 10 19:39 BUGS
-rw-rw-r--.  1 1000 1000 5.0K Jul 10 19:39 CODE_OF_CONDUCT.md
-rw-rw-r--.  1 1000 1000 2.6K Jul 10 19:39 CONTRIBUTING.md
-rw-rw-r--.  1 1000 1000 1.5K Jul 10 19:39 COPYING
drwxrwxr-x.  7 1000 1000  119 Jul 10 19:39 deps
-rw-rw-r--.  1 1000 1000   11 Jul 10 19:39 INSTALL
-rw-rw-r--.  1 1000 1000  151 Jul 10 19:39 Makefile
-rw-rw-r--.  1 1000 1000 6.8K Jul 10 19:39 MANIFESTO
-rw-rw-r--.  1 1000 1000  22K Jul 10 19:39 README.md
-rw-rw-r--.  1 1000 1000 105K Jul 10 19:39 redis.conf
-rwxrwxr-x.  1 1000 1000  279 Jul 10 19:39 runtest
-rwxrwxr-x.  1 1000 1000  283 Jul 10 19:39 runtest-cluster
-rwxrwxr-x.  1 1000 1000 1.6K Jul 10 19:39 runtest-moduleapi
-rwxrwxr-x.  1 1000 1000  285 Jul 10 19:39 runtest-sentinel
-rw-rw-r--.  1 1000 1000 1.7K Jul 10 19:39 SECURITY.md
-rw-rw-r--.  1 1000 1000  14K Jul 10 19:39 sentinel.conf
drwxrwxr-x.  4 1000 1000 8.0K Jul 10 19:39 src
drwxrwxr-x. 11 1000 1000  199 Jul 10 19:39 tests
-rw-rw-r--.  1 1000 1000 3.0K Jul 10 19:39 TLS.md
drwxrwxr-x.  8 1000 1000 4.0K Jul 10 19:39 utils

</code></pre> 
<h2>编译安装</h2> 
<pre><code class="hljs">[root@redis redis-stable]# make

。。。
Hint: It's a good idea to run 'make test' ;)

make[1]: Leaving directory `/root/redis-stable/src'


[root@redis redis-stable]# make install
cd src &amp;&amp; make install
which: no python3 in (/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/root/bin)
make[1]: Entering directory `/root/redis-stable/src'
    CC Makefile.dep
make[1]: Leaving directory `/root/redis-stable/src'
which: no python3 in (/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/root/bin)
make[1]: Entering directory `/root/redis-stable/src'

Hint: It's a good idea to run 'make test' ;)

    INSTALL redis-server
    INSTALL redis-benchmark
    INSTALL redis-cli
make[1]: Leaving directory `/root/redis-stable/src'


默认安装目录/usr/local/bin

[root@redis redis-stable]# ll -h /usr/local/bin/
total 22M
-rwxr-xr-x. 1 root root 5.0M Jul 13 17:30 redis-benchmark
lrwxrwxrwx. 1 root root   12 Jul 13 17:30 redis-check-aof -&gt; redis-server
lrwxrwxrwx. 1 root root   12 Jul 13 17:30 redis-check-rdb -&gt; redis-server
-rwxr-xr-x. 1 root root 5.2M Jul 13 17:30 redis-cli
lrwxrwxrwx. 1 root root   12 Jul 13 17:30 redis-sentinel -&gt; redis-server
-rwxr-xr-x. 1 root root  11M Jul 13 17:30 redis-server</code></pre> 
<h2>修改配置文件</h2> 
<pre><code class="hljs">[root@redis redis-stable]# vim /redis/redis.conf 
daemonize yes
protected-mode no
#bind 127.0.0.1 -::1
requirepass oracle</code></pre> 
<h2>添加环境变量</h2> 
<pre><code class="hljs">[root@redis ~]# vim .bash_profile 
export PATH=/usr/local/bin:$PATH
[root@redis ~]# source .bash_profile </code></pre> 
<h2>启动服务</h2> 
<pre><code class="hljs">[root@redis ~]# redis-server /redis/redis.conf 

[root@redis ~]# ps -ef |grep redis
root       6001      1  0 18:20 ?        00:00:00 redis-server *:6379
root       6007   1417  0 18:20 pts/0    00:00:00 grep --color=auto redis


[root@redis ~]# redis-server --help
Usage: ./redis-server [/path/to/redis.conf] [options] [-]
       ./redis-server - (read config from stdin)
       ./redis-server -v or --version
       ./redis-server -h or --help
       ./redis-server --test-memory &lt;megabytes&gt;
       ./redis-server --check-system

Examples:
       ./redis-server (run the server with default conf)
       echo 'maxmemory 128mb' | ./redis-server -
       ./redis-server /etc/redis/6379.conf
       ./redis-server --port 7777
       ./redis-server --port 7777 --replicaof 127.0.0.1 8888
       ./redis-server /etc/myredis.conf --loglevel verbose -
       ./redis-server /etc/myredis.conf --loglevel verbose

Sentinel mode:
       ./redis-server /etc/sentinel.conf --sentinel
       
 </code></pre> 
<h2>查看版本</h2> 
<pre><code class="hljs">[root@redis ~]# redis-server --version
Redis server v=7.0.12 sha=00000000:0 malloc=jemalloc-5.2.1 bits=64 build=3c6460644b75d16c</code></pre> 
<h2>连接redis</h2> 
<pre><code class="hljs">[root@redis ~]# redis-cli -hlocalhost -p6379 --pass
Unrecognized option or bad number of args for: '-hlocalhost'
[root@redis ~]# redis-cli -h localhost -p 6379 --pass
Unrecognized option or bad number of args for: '--pass'
[root@redis ~]# redis-cli -h localhost -p 6379 -a
Unrecognized option or bad number of args for: '-a'


[root@redis ~]# redis-cli -h localhost -p 6379 -a oracle
Warning: Using a password with '-a' or '-u' option on the command line interface may not be safe.
localhost:6379&gt; 


[root@redis ~]# redis-cli -h localhost -p 6379 --pass oracle
Warning: Using a password with '-a' or '-u' option on the command line interface may not be safe.
localhost:6379&gt; 


[root@redis ~]# ps -ef |grep redis |grep -v grep
root       6001      1  0 18:20 ?        00:00:00 redis-server *:6379
root       6018   1417  0 18:27 pts/0    00:00:00 redis-cli -h localhost -p 6379 --pass oracle


localhost:6379&gt; ping
PONG
localhost:6379&gt; ping
PONG

localhost:6379&gt; set key helloworld
OK
localhost:6379&gt; get key
"helloworld"</code></pre> 
<h2 style="background-color:transparent;">关闭服务</h2> 
<pre><code class="hljs">1、在客户端里面关闭
localhost:6379&gt; shutdown
not connected&gt; 
not connected&gt; exit
[root@redis ~]# ps -ef |grep redis | grep -v grep


2、单实例关闭
redis-cli -a oracle shutdown
[root@redis ~]# redis-server /redis/redis.conf 
[root@redis ~]# ps -ef |grep redis | grep -v grep
root       6067      1  0 18:43 ?        00:00:00 redis-server *:6379


3、多实例关闭
redis-cli -p 6379,6378,6377 shutdown</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/c1b7b4d54f0f90dadf72eba998a461fe/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">input上传文件-vue3 -ts使用formData上传和base64上传</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/e9906c4421fe4a9d0aa0fccac64dcb36/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">ESPFriends之ESP32模型部署训练历险记(一)</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>