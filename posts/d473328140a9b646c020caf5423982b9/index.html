<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Linux操作系统单网卡双IP的设置 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Linux操作系统单网卡双IP的设置" />
<meta property="og:description" content="Centos5下：
1、配置第一个IP地址：
[root@Linux root]#cd /etc/sysconfig/network-scripts [root@Linux network-scripts]#vi ifcfg-eth0 DEVICE=eth0 BOOTPROTO=static BROADCAST=192.168.80.255 //*广播地址*// IPADDR=192.168.80.189 //*第一个IP地址*// NETMASK=255.255.255.0 //*网络掩码*// NETWORK=192.168.80.0 //*所在网段*// ONBOOT=yes :wq //*保存退出*//
2、复制第一个IP地址配置文件为第二个IP地址配置文件，并修改里面的IP地址：
[root@Linux network-scripts]#cp ifcfg-eth0 ifcfg-eth1 [root@Linux network-scripts]#vi ifcfg-eth1 DEVICE=eth0:1 //用eth0也可以，也能通，但是重启网卡时会提示eth0 file existed！ BOOTPROTO=static BROADCAST=192.168.80.255 //*广播地址*// IPADDR=192.168.80.199 //*第二个IP地址*// NETMASK=255.255.255.0 //*网络掩码*// NETWORK=192.168.80.0 //*所在网段*// ONBOOT=yes :wq //*保存退出*//
3、重启网卡： [root@Linux network-scripts]#service network restart 或： [root@Linux network-scripts]#ifdown eth0 [root@Linux network-scripts]#ifup eth0 或 [root@Linux network-scripts]#ifconfig eth0 down [root@Linux network-scripts]#ifconfig eth0 up
方法二：在配置第二个IP地址的时候有变化其他
1、配置第一个IP地址以及网关：
[root@Linux root]#cd /etc/sysconfig/network-scripts [root@Linux network-scripts]#vi ifcfg-eth0 DEVICE=eth0 BOOTPROTO=static BROADCAST=192." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/d473328140a9b646c020caf5423982b9/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2012-12-08T15:18:08+08:00" />
<meta property="article:modified_time" content="2012-12-08T15:18:08+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Linux操作系统单网卡双IP的设置</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div class="artical-content-bak main-content editor-side-new"> 
 <div class="con editor-preview-side" id="result"> 
  <p>Centos5下：</p> 
  <p>1、配置第一个IP地址：</p> 
  <p>    [root@Linux root]#cd /etc/sysconfig/network-scripts <br>    [root@Linux network-scripts]#vi ifcfg-eth0 <br>    DEVICE=eth0 <br>    BOOTPROTO=static <br>    BROADCAST=192.168.80.255 //*广播地址*// <br>    IPADDR=192.168.80.189 //*第一个IP地址*// <br>    NETMASK=255.255.255.0 //*网络掩码*// <br>    NETWORK=192.168.80.0 //*所在网段*// <br>    ONBOOT=yes <br>    :wq //*保存退出*//</p> 
  <p>    2、复制第一个IP地址配置文件为第二个IP地址配置文件，并修改里面的IP地址：</p> 
  <p>    [root@Linux network-scripts]#cp ifcfg-eth0 ifcfg-eth1 <br>    [root@Linux network-scripts]#vi ifcfg-eth1 <br>    DEVICE=eth0:1 //用eth0也可以，也能通，但是重启网卡时会提示eth0 file existed！ <br>    BOOTPROTO=static <br>    BROADCAST=192.168.80.255 //*广播地址*// <br>    IPADDR=192.168.80.199 //*第二个IP地址*// <br>    NETMASK=255.255.255.0 //*网络掩码*// <br>    NETWORK=192.168.80.0 //*所在网段*// <br>    ONBOOT=yes <br>    :wq //*保存退出*//</p> 
  <p>3、重启网卡： <br>    [root@Linux network-scripts]#service network restart <br>或： <br>    [root@Linux network-scripts]#ifdown eth0 <br>    [root@Linux network-scripts]#ifup eth0 <br>或 <br>    [root@Linux network-scripts]#ifconfig eth0 down <br>    [root@Linux network-scripts]#ifconfig eth0 up</p> 
  <p>方法二：在配置第二个IP地址的时候有变化其他</p> 
  <p>1、配置第一个IP地址以及网关：</p> 
  <p>[root@Linux root]#cd /etc/sysconfig/network-scripts <br>    [root@Linux network-scripts]#vi ifcfg-eth0 <br>    DEVICE=eth0 <br>    BOOTPROTO=static <br>    BROADCAST=192.168.80.255 //*广播地址*// <br>    IPADDR=192.168.80.189 //*第一个IP地址*// <br>    NETMASK=255.255.255.0 //*网络掩码*// <br>    NETWORK=192.168.80.0 //*所在网段*// <br>    GATEWAY=192.168.80.1</p> 
  <p>ONBOOT=yes <br>    :wq //*保存退出*//</p> 
  <p>2：复制第一个IP地址配置文件为第二个IP地址配置文件，并修改里面的IP地址：</p> 
  <p>[root@Linux network-scripts]#cp ifcfg-eth0 ifcfg-eth0：1 //变化的地方 <br>    [root@Linux network-scripts]#vi ifcfg-eth0：1 //变化的地方，这里与ubuntu系统不同没有ifcfg-eth0:0 <br>    DEVICE=eth0：1 //变化的地方 <br>    BOOTPROTO=static <br>    BROADCAST=192.168.80.255 //*广播地址*// <br>    IPADDR=192.168.80.199 //*第二个IP地址*// <br>    NETMASK=255.255.255.0 //*网络掩码*// <br>    NETWORK=192.168.80.0 //*所在网段*// <br>    ONBOOT=yes <br>    :wq //*保存退出*//</p> 
  <p>注意了，只能有一个网关，将网关地址配置在实际存在的ifcfg-eth0文件里，不要配置到虚拟出来的ifcfg-eth0：1之中。否则有问题。在这里得到一个经验就是配置网关可以直接在ifcfg-eth0或ifcfg-eth1这些配置文件里配置与在network配置文件里配置没有什么不同。</p> 
  <p>这两种方法的优缺点：第一种方法有个问题就是可能重启之后网卡eth0配置的能起来，eth1可能起不来，同一网段的IP估计应该没问题，都是同一个网关，要是双线，电信和联通双IP配置的话，只能选用方法2比较保险一些，方法1估计有点问题，没有测试过，不过记得有这么两种方法就是了，只能配置电信或是联通的网关作为出口，这样就一定要确保eth0这个真实的网卡配置文件一定要是选作出口的电信或联通的IP配置，而那虚拟的ifcfg-eth1里边配置另一个。</p> 
  <p>单网卡双IP双网关的配置办法：</p> 
  <p>单网卡双IP的配置办法如上两种办法，双网关需要执行如下命令：</p> 
  <p>route add –net 192.168.10.0 netmask 255.255.255.0 gw 192.168.10.1</p> 
  <p>route add –net 192.168.20.0 netmask 255.255.255.0 gw 192.168.20.1</p> 
  <p>……..</p> 
  <p>CentOS 6除了支持以上两种方法之外新版本还支持如下这种配置方法：</p> 
  <p>在新一版本的centos系统即为centos6这个版本中，有很多地方和之前的版本有所不同，这里也是这样有些差别：</p> 
  <p>如果要在一个网卡上实现多IP地址，就可以简单的在相应的网卡配置文件中简单的添加如下设置，这里关键，必须的有。</p> 
  <p>[root@localhost network-scripts]# vi ifcfg-eth1</p> 
  <p>DEVICE="eth1"</p> 
  <p>NM_CONTROLLED="yes"</p> 
  <p>BOOTPROTO=none</p> 
  <p>ONBOOT="yes"</p> 
  <p>IPADDR="172.16.1.1"</p> 
  <p>NETMASK="255.255.0.0"</p> 
  <p>IPADDR2="172.16.1.2" //这里是新加的IP</p> 
  <p>IPADDR3="172.16.1.3"</p> 
  <p>TYPE=Ethernet</p> 
  <p>PREFIX=16</p> 
  <p>PREFIX2=16</p> 
  <p>PREFIX3=16</p> 
  <p>DEFROUTE=yes</p> 
  <p>IPV4_FAILURE_FATAL=yes</p> 
  <p>IPV6INIT=no</p> 
  <p>NAME="System eth1"</p> 
  <p>UUID=9c92fad9-6ecb-3e6c-eb4d-8a47c6f50c04</p> 
  <p>HWADDR=00:0C:29:4E:63:EC //这里也很关键</p> 
  <p>Ubuntu下配置单网卡双IP：</p> 
  <p>sudo vi /etc/network/interfaces</p> 
  <p># This file describes the network interfaces available on your system</p> 
  <p># and how to activate them. For more information, see interfaces(5).</p> 
  <p># The loopback network interface</p> 
  <p>auto lo</p> 
  <p>iface lo inet loopback</p> 
  <p># The primary network interface</p> 
  <p>auto eth0</p> 
  <p>iface eth0 inet static</p> 
  <p>address 119.167.227.17</p> 
  <p>netmask 255.255.255.192</p> 
  <p>network 119.167.227.0</p> 
  <p>broadcast 119.167.227.255</p> 
  <p>gateway 119.167.227.62</p> 
  <p># dns-* options are implemented by the resolvconf package, if installed</p> 
  <p>dns-nameservers 202.102.128.68</p> 
  <p>dns-search workgroup</p> 
  <p># Virtual IP 01</p> 
  <p>auto eth0:0</p> 
  <p>iface eth0:0 inet static</p> 
  <p>address 119.167.227.18</p> 
  <p>netmask 255.255.255.192</p> 
  <p>network 119.167.227.0</p> 
  <p>broadcast 119.167.227.255</p> 
  <p>gateway 119.167.227.62</p> 
  <p># dns-* options are implemented by the resolvconf package, if installed</p> 
  <p>dns-nameservers 202.102.128.68</p> 
  <p>dns-search workgroup</p> 
  <p># Virtual IP 02</p> 
  <p>auto eth0:1</p> 
  <p>iface eth0:1 inet static</p> 
  <p>address 119.167.227.19</p> 
  <p>netmask 255.255.255.192</p> 
  <p>network 119.167.227.0</p> 
  <p>broadcast 119.167.227.255</p> 
  <p>gateway 119.167.227.62</p> 
  <p># dns-* options are implemented by the resolvconf package, if installed</p> 
  <p>dns-nameservers 202.102.128.68</p> 
  <p>dns-search workgroup</p> 
  <p># Virtual IP 03</p> 
  <p>auto eth0:2</p> 
  <p>iface eth0:2 inet static</p> 
  <p>address 119.167.227.20</p> 
  <p>netmask 255.255.255.192</p> 
  <p>network 119.167.227.0</p> 
  <p>broadcast 119.167.227.255</p> 
  <p>gateway 119.167.227.62</p> 
  <p># dns-* options are implemented by the resolvconf package, if installed</p> 
  <p>dns-nameservers 202.102.128.68</p> 
  <p>dns-search workgroup</p> 
  <p># The second network interface</p> 
  <p>auto eth1</p> 
  <p>iface eth1 inet static</p> 
  <p>address 192.168.1.2</p> 
  <p>netmask 255.255.255.0</p> 
  <p>network 192.168.1.0</p> 
  <p>broadcast 192.168.1.255</p> 
  <p>以上是自己工作中的一个配置例子。亲测。</p> 
 </div> 
</div> 
<p>转载于:https://blog.51cto.com/korolev/1082642</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/cd4a904b58baf417b7937d8d09c93608/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Golanger Web Framework(框架简单实现了MVC的设计方式)</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/75aeea65296f02e0ea7c07d1c24aae0c/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">C&#43;&#43;数组指针、指针数组、函数指针的核心概念</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>