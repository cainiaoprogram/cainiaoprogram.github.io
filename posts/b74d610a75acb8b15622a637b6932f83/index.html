<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Vue实战开发--后台管理系统Vue&#43;Element ui（10） - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Vue实战开发--后台管理系统Vue&#43;Element ui（10）" />
<meta property="og:description" content="本节课完成user页面下的diolog表单，表单里的元素都是动态渲染，以一个CommonForm组件的形式放入user页面。
1.CommonForm组件 新建CommonForm.vue组件，添加props，用于接受3个参数，formLabel为一个数组，form的相关配置，form的表单数据，类型为Object，表单布局inline，为一个布尔值。el-form添加属性，首先是ref标识，可以通过refs拿到ref实例，label-width为初始高度，但是会根据内容变化而变化，并不固定。model用来数据的双向绑定（重要），我们传入的数据是form。inline属性表示dialog样式，inline表示上下排列。对传入的form进行遍历，label表示表单域名称。表单组件有input（姓名、年龄、地址）、select（性别选择）、switch、datepicker（日期）、option（下拉）。
首先判断组件的type，input组件设置placeholder属性，表示input框内的文字，使用字符串拼接。v-model进行数据绑定，拿到form下面的[item.model]，form前面已经model过了，这里就可以使用。switch、select（）、switch、datepicker、option的方法也类似。
最后对组件进行扩展，slot后面会讲个slot的作用。
&lt;template&gt; &lt;el-form ref=&#34;form&#34; label-width=&#34;100px&#34; :model=&#34;form&#34; :inline=&#34;inline&#34;&gt; &lt;el-form-item v-for=&#34;item in formLabel&#34; :key=&#34;item.label&#34; :label=&#34;item.label&#34;&gt; &lt;el-input v-if=&#34;item.type === &#39;input&#39;&#34; :placeholder=&#34;&#39;请输入&#39;&#43;item.label&#34; v-model=&#34;form[item.model]&#34;&gt; &lt;/el-input&gt; &lt;el-switch v-if=&#34;item.type === &#39;switch&#39;&#34; v-model=&#34;form[item.model]&#34;&gt; &lt;/el-switch&gt; &lt;el-date-picker v-if=&#34;item.type === &#39;date&#39;&#34; type=&#34;date&#34; value-format=&#34;yyyy-MM-dd&#34; placeholder=&#34;选择日期&#34; v-model=&#34;form[item.model]&#34;&gt; &lt;/el-date-picker&gt; &lt;el-select v-if=&#34;item.type === &#39;select&#39;&#34; placeholder=&#34;请选择&#34; v-model=&#34;form[item.model]&#34;&gt; &lt;el-option v-for=&#34;item in item.opts&#34; :key=&#34;item.value&#34; :label=&#34;item.label&#34; :value=&#34;item.value&#34;&gt; &lt;/el-option&gt; &lt;/el-select&gt; &lt;/el-form-item&gt; &lt;el-form-item&gt; &lt;slot&gt;&lt;/slot&gt; &lt;/el-form-item&gt; &lt;/el-form&gt; &lt;/template&gt; &lt;script&gt; export default{ name:&#39;CommonForm&#39;, // 由外部组件传入数据。 props:{ formLabel:Array, form:Object, inline:Boolean, }, data(){ } } &lt;/script&gt; 2." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/b74d610a75acb8b15622a637b6932f83/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-06-15T22:51:31+08:00" />
<meta property="article:modified_time" content="2022-06-15T22:51:31+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Vue实战开发--后台管理系统Vue&#43;Element ui（10）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>本节课完成user页面下的diolog表单，表单里的元素都是动态渲染，以一个CommonForm组件的形式放入user页面。</p> 
<p><img alt="" height="361" src="https://images2.imgbox.com/1c/12/911rKHDH_o.png" width="951"></p> 
<p></p> 
<h2>1.CommonForm组件</h2> 
<p>新建CommonForm.vue组件，添加props，用于接受3个参数，formLabel为一个数组，form的相关配置，form的表单数据，类型为Object，表单布局inline，为一个布尔值。el-form添加属性，首先是ref标识，可以通过refs拿到ref实例，label-width为初始高度，但是会根据内容变化而变化，并不固定。model用来数据的双向绑定（重要），我们传入的数据是form。inline属性表示dialog样式，inline表示上下排列。对传入的form进行遍历，label表示表单域名称。表单组件有input（姓名、年龄、地址）、select（性别选择）、switch、datepicker（日期）、option（下拉）。</p> 
<p>首先判断组件的type，input组件设置placeholder属性，表示input框内的文字，使用字符串拼接。v-model进行数据绑定，拿到form下面的[item.model]，form前面已经model过了，这里就可以使用。switch、select（）、switch、datepicker、option的方法也类似。</p> 
<p>最后对组件进行扩展，slot后面会讲个slot的作用。</p> 
<pre><code class="language-javascript">&lt;template&gt;
    &lt;el-form ref="form" label-width="100px" :model="form" :inline="inline"&gt;
        &lt;el-form-item v-for="item in formLabel" :key="item.label" :label="item.label"&gt;
            &lt;el-input
                v-if="item.type === 'input'"
                :placeholder="'请输入'+item.label"
                v-model="form[item.model]"&gt;
            &lt;/el-input&gt;
            &lt;el-switch
                v-if="item.type === 'switch'"
                v-model="form[item.model]"&gt;
            &lt;/el-switch&gt;
            &lt;el-date-picker
                v-if="item.type === 'date'"
                type="date"
                value-format="yyyy-MM-dd"
                placeholder="选择日期"
                v-model="form[item.model]"&gt;
            &lt;/el-date-picker&gt;
            &lt;el-select
                v-if="item.type === 'select'"
                placeholder="请选择"
                v-model="form[item.model]"&gt;
                    &lt;el-option
                        v-for="item in item.opts"
                        :key="item.value"
                        :label="item.label"
                        :value="item.value"&gt;
                    &lt;/el-option&gt;
            &lt;/el-select&gt;
        &lt;/el-form-item&gt;
        &lt;el-form-item&gt;
            &lt;slot&gt;&lt;/slot&gt;
        &lt;/el-form-item&gt;
    &lt;/el-form&gt;
&lt;/template&gt;

&lt;script&gt;
export default{
    name:'CommonForm',
    // 由外部组件传入数据。
    props:{
        formLabel:Array,
        form:Object,
        inline:Boolean,
    },
    data(){

    }
}
&lt;/script&gt;
</code></pre> 
<h2>2.User引入CommonForm</h2> 
<p>引入CommonForm，</p> 
<pre><code class="language-javascript">import CommonForm from '../../src/components/CommonForm.vue'

        components:{
            CommonForm
        },</code></pre> 
<p>这里吧前面的表单以一个dialog弹窗显示， dialog表头可能是新增用户或更新用户，这里需要对title进行判断，这里还没写到更新，所以operateType给默认值add，visible属性表示弹窗是否显示，这里用isShow指代，给一个false默认值。在dialog里面引入CommonForm标签。operateFormLabel数组提前准备好，存放的是CommonForm的用户input内容。</p> 
<pre><code class="language-javascript">            &lt;common-form
                :formLabel="operateFormLabel"
                :form="operateForm"
                :inline="true"
                ref="form"&gt;
            &lt;/common-form&gt;</code></pre> 
<p>operateFormLabel赋值给formLabel，operateForm赋值给form，inline默认为true，即样式为inline布局，<span style="color:#fe2c24;">ref拿到组件实例</span>。加上弹窗底部footer，利用刚刚的slot标签。添加两个button。分别是“取消”“确定”。第一个button设定点击事件，将isShow设为false，第二个button添加点击事件comfirm函数，这里预留空值，type设置为primary（高亮显示）。</p> 
<p>在dialog外还有两个button，分别是新增和搜索。新增按钮添加addUser事件。搜索按钮添加getList事件，这里再一次引入CommonForm，因为我们需要一个input输入框，但是我们考科一通过更换数据而不是更换组件达到目标效果。<span style="color:#fe2c24;">注意对比两次引入CommonForm组件的不同之处。</span>formLabel数组，包含一个对象，因为只有一个搜索框，对象里包含三个属性，model、label、type，model为自定义名称、label为输入框前的标签、type为输入类型。SearchForm存放keyworld内容。</p> 
<pre><code class="language-javascript">            &lt;common-form
                :formLabel="formLabel"
                :form="searchFrom"
                :inline="true"
                ref="form"&gt;</code></pre> 
<p>编辑addUser函数</p> 
<pre><code class="language-javascript">            addUser(){
                this.isShow = true,
                this.operateType = 'add',
                this.operateForm = {
                    name:'',
                    addr:'',
                    age:'',
                    birth:'',
                    sex:''
                }
            },</code></pre> 
<p>自此，user下的index.vue文件如下：</p> 
<pre><code class="language-javascript">&lt;template&gt;
    &lt;div class="manage"&gt;
        &lt;!-- dialog为弹窗内容 --&gt;
        &lt;el-dialog
            :title="operateType === 'add' ? '新增用户' : '更新用户'"
            :visible.sync="isShow"&gt;
            &lt;!-- 这里冒号是将数据传送给CommonForm组件。 --&gt;
            &lt;common-form
                :formLabel="operateFormLabel"
                :form="operateForm"
                :inline="true"
                ref="form"&gt;
            &lt;/common-form&gt;
            &lt;div slot="footer" class="dialog-footer"&gt;
                &lt;el-button @click="isShow = false"&gt;取消&lt;/el-button&gt;
                &lt;el-button type="primary" @click="confirm"&gt;确认&lt;/el-button&gt;
            &lt;/div&gt;
        &lt;/el-dialog&gt;
        &lt;div class="manage-header"&gt;
            &lt;el-button type="primary" @click="addUser"&gt;+新增&lt;/el-button&gt;
            &lt;common-form
                :formLabel="formLabel"
                :form="searchFrom"
                :inline="true"
                ref="form"&gt;
                &lt;el-button type="primary" @click='getList'&gt;+搜索&lt;/el-button&gt;
            &lt;/common-form&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/template&gt;
&lt;script&gt;
import CommonForm from '../../src/components/CommonForm.vue'
    export default{
        name:'User',
        components:{
            CommonForm
        },
        data(){
            return{
                operateType:'add',
                isShow:false,
                operateFormLabel:[
                    {
                        model: 'name',
                        label: '姓名',
                        type: 'input'
                    },
                    {
                        model: 'age',
                        label: '年龄',
                        type: 'input'
                    },
                    {
                        model: 'sex',
                        label: '性别',
                        type: 'select',
                        opts: [
                            {
                                label: '男',
                                value: 1
                            },
                            {
                                label: '女',
                                value: 0
                            }
                        ]
                    },
                    {
                        model: 'birth',
                        label: '出生日期',
                        type: 'date'
                    },
                    {
                        model: 'addr',
                        label: '地址',
                        type: 'input'
                    }
                ],
                operateForm:{
                    name:'',
                    addr:'',
                    age:'',
                    birth:'',
                    sex:''
                },
                formLabel:[
                    {
                        model:"keyword",
                        label:'',
                        type:'input'
                    },
                ],
                searchFrom:{
                    keyword:'',
                }
            }
        },
        methods:{
            confirm(){

            },
            addUser(){
                this.isShow = true,
                this.operateType = 'add',
                this.operateForm = {
                    name:'',
                    addr:'',
                    age:'',
                    birth:'',
                    sex:''
                }
            },
            getList(){

            }
        }
    }
&lt;/script&gt;
</code></pre> 
<p>添加样式，弹性布局，左右两边靠边，上下对齐。</p> 
<pre><code class="language-javascript">&lt;style lang="less" scoped&gt;
.manage-header{
    display: flex;
    justify-content: space-between;
    align-items: center;
}
&lt;/style&gt;</code></pre> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/1bfdec3c364a907ea45d2a53b67f67a5/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Matlab学术绘图</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/5c4cbfcec9918d9397d13a9be27c4583/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">js，forEach如何传递参数</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>