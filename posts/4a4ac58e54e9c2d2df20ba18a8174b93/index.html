<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>[树梢]利用dom4j模拟spring的getbean功能 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="[树梢]利用dom4j模拟spring的getbean功能" />
<meta property="og:description" content="1.beans.xml &lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt;
&lt;beans xmlns=&#34;http://www.springframework.org/schema/beans&#34;
xmlns:xsi=&#34;http://www.w3.org/2001/XMLSchema-instance&#34;
xmlns:tx=&#34;http://www.springframework.org/schema/tx&#34;
xmlns:aop=&#34;http://www.springframework.org/schema/aop&#34; xsi:schemaLocation=&#34;
http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-4.0.xsd
http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-4.0.xsd
http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-4.0.xsd
&#34;&gt;
&lt;!-- &lt;bean id=&#34;dataSource&#34; class=&#34;org.springframework.jdbc.datasource.DriverManagerDataSource&#34;&gt;
&lt;property name=&#34;driverClassName&#34; value=&#34;com.mysql.jdbc.Driver&#34;/&gt;
&lt;property name=&#34;url&#34; value=&#34;jdbc:mysql://localhost:3306/affairs&#34; /&gt;
&lt;property name=&#34;username&#34; value=&#34;root&#34;/&gt;
&lt;property name=&#34;password&#34; value=&#34;123456&#34;/&gt;
&lt;/bean&gt;
--&gt;
&lt;bean id=&#34;student&#34; class=&#34;testspring.bean.Student&#34; &gt;
&lt;!-- collaborators and configuration for this bean go here --&gt;
&lt;property name = &#34;clazz&#34; value = &#34;三年二班&#34;&gt;&lt;/property&gt;
&lt;/bean&gt;
&lt;/beans&gt;
2.pojo类Student /**
* */
package testspring.bean;
/**
* @author 无痕菌" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/4a4ac58e54e9c2d2df20ba18a8174b93/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-01-21T16:03:53+08:00" />
<meta property="article:modified_time" content="2022-01-21T16:03:53+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">[树梢]利用dom4j模拟spring的getbean功能</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2>1.beans.xml</h2> 
<p>&lt;?xml version="1.0" encoding="UTF-8"?&gt;<br> &lt;beans xmlns="http://www.springframework.org/schema/beans"<br>  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"<br>   xmlns:tx="http://www.springframework.org/schema/tx"<br>    xmlns:aop="http://www.springframework.org/schema/aop" <br>    xsi:schemaLocation="<br> http://www.springframework.org/schema/beans <br> http://www.springframework.org/schema/beans/spring-beans-4.0.xsd<br> http://www.springframework.org/schema/tx <br> http://www.springframework.org/schema/tx/spring-tx-4.0.xsd<br> http://www.springframework.org/schema/aop <br> http://www.springframework.org/schema/aop/spring-aop-4.0.xsd<br> "&gt;<br>    <br>  <br>  &lt;!--  <br>    &lt;bean id="dataSource" <br>       class="org.springframework.jdbc.datasource.DriverManagerDataSource"&gt;<br>       &lt;property name="driverClassName" value="com.mysql.jdbc.Driver"/&gt;<br>       &lt;property name="url" value="jdbc:mysql://localhost:3306/affairs" /&gt;<br>       &lt;property  name="username" value="root"/&gt;<br>       &lt;property name="password" value="123456"/&gt;<br>    &lt;/bean&gt;<br>    --&gt;<br>    &lt;bean id="student" class="testspring.bean.Student" &gt;<br>        &lt;!-- collaborators and configuration for this bean go here --&gt;<br>         &lt;property name = "clazz" value = "三年二班"&gt;&lt;/property&gt;<br>    &lt;/bean&gt;<br> &lt;/beans&gt;</p> 
<h2>2.pojo类Student</h2> 
<p>/**<br>  * <br>  */<br> package testspring.bean;</p> 
<p>/**<br>  * @author 无痕菌<br>  *<br>  */<br> public class Student {<!-- --><br>     private int id = 1;<br>     private String name  = "张三";<br>     private String clazz = "大四一班";<br>     /**<br>      * @return id<br>      */<br>     public int getId() {<!-- --><br>         return id;<br>     }<br>     /**<br>      * @param id 要设置的 id<br>      */<br>     public void setId(int id) {<!-- --><br>         this.id = id;<br>     }<br>     /**<br>      * @return name<br>      */<br>     public String getName() {<!-- --><br>         return name;<br>     }<br>     /**<br>      * @param name 要设置的 name<br>      */<br>     public void setName(String name) {<!-- --><br>         this.name = name;<br>     }<br>     /**<br>      * @return clazz<br>      */<br>     public String getClazz() {<!-- --><br>         return clazz;<br>     }<br>     /**<br>      * @param clazz 要设置的 clazz<br>      */<br>     public void setClazz(String clazz) {<!-- --><br>         this.clazz = clazz;<br>     } }<br>  </p> 
<h2>3.dom4j实现spring的getbean功能的模拟</h2> 
<p>/**<br>  * <br>  */<br> package springReadBeanTest;</p> 
<p>import java.io.File;<br> import java.util.Iterator;</p> 
<p>import org.dom4j.Document;<br> import org.dom4j.DocumentException;<br> import org.dom4j.Element;<br> import org.dom4j.io.SAXReader;</p> 
<p>import testspring.bean.Student;</p> 
<p>/**<br>  * @author 无痕菌<br>  *<br>  */<br> public class Dom4jXmlParseGetBean {<!-- --></p> 
<p>    /**<br>     *作者:alice<br>     *  日期:2022年1月21日<br>     *返回值:void<br>      *参数: @param args<br>      * @throws DocumentException <br>      */<br>     public static void main(String[] args) throws DocumentException  {<!-- --><br>         <br>         File file = new File("src/springReadBeanTest/Beans.xml");<br>         SAXReader reader = new SAXReader();<br>         // 读取文件作为文档<br>         Document doc = reader.read(file);<br>         // 获取文档的根元素<br>         Element root = doc.getRootElement();<br>         // 根据跟元素找到全部的子节点<br>         Iterator&lt;Element&gt; iter = root.elementIterator();<br>         while(iter.hasNext()){<!-- --><br>             <br>         Element name = iter.next();<br>         if(name.getName().contentEquals("bean")){<!-- --><br>             String aString = name.attributeValue("class");<br>             System.err.println(aString);<br>         try {<!-- --><br>             Student student = (Student) Class.forName(aString).newInstance();<br>             System.err.println(student.getName());<br>         } catch (InstantiationException|IllegalAccessException |ClassNotFoundException e) {<!-- --><br>             // TODO 自动生成的 catch 块<br>             e.printStackTrace();<br>         } <br>         //System.out.println("value = " + name.getText());<br>         }</p> 
<p>        /* 使用DocumentHelper来创建 Document对象<br>         Document document = DocumentHelper.createDocument();<br>         // 创建元素并设置关系<br>         Element person = document.addElement("person");<br>         Element name = person.addElement("name");<br>         Element age = person.addElement("age");<br>         // 设置文本<br>         name.setText("shsxt");<br>         age.setText("10");<br>         // 创建格式化输出器<br>         OutputFormat of = OutputFormat.createPrettyPrint();<br>         of.setEncoding("utf-8");<br>         // 输出到文件<br>         File file = new File("resource/outputdom4j.xml");<br>         XMLWriter writer = new XMLWriter(new FileOutputStream(new<br>         File(file.getAbsolutePath())),of);<br>         // 写出<br>         writer.write(document);<br>         writer.flush();<br>         writer.close();<br>         */<br>         <br>         <br>         <br>         </p> 
<p>    }<br>     }<br> }</p> 
<p><br>  </p> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/d8cfda6d25dfb6997ee73aebf03c5026/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">https加密的实现</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/b85d5b2608fbd688438b1395918f85a7/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Yocto编译与分析</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>