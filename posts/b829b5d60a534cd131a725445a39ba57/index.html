<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Android————一个简单记账本(Bookkeeping) - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Android————一个简单记账本(Bookkeeping)" />
<meta property="og:description" content="Android————一个简单记账本 简述实体类数据库建表Dao类 插入数据效果图布局代码适配器获取数据效果图布局代码 显示数据适配器效果图布局代码 最终效果图 简述 实现功能： 1：先将数据添加到数据库中(SQLite) 2: 使用RecyclerView将数据库中的数据展示出来 //备注：带加号的ImageButton用于添加数据，带勾的ImageButton用于获取数据并展示 //先按带加号的在按带勾的 实体类 public class Event { private String Title; private String Time; private double Money; public Event(){ } public Event(String Title, String Time, double Money) { this.Title = Title; this.Time = Time; this.Money = Money; } public String getTitle() { return Title; } public String getTime() { return Time; } public double getMoney() { return Money; } public void setTitle(String Title) { this." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/b829b5d60a534cd131a725445a39ba57/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-04-16T14:18:11+08:00" />
<meta property="article:modified_time" content="2022-04-16T14:18:11+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Android————一个简单记账本(Bookkeeping)</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atelier-sulphurpool-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p> 
<div class="toc"> 
 <h4>Android————一个简单记账本</h4> 
 <ul><li><a href="#_1" rel="nofollow">简述</a></li><li><ul><li><a href="#_10" rel="nofollow">实体类</a></li><li><a href="#_52" rel="nofollow">数据库</a></li><li><ul><li><a href="#_53" rel="nofollow">建表</a></li><li><a href="#Dao_87" rel="nofollow">Dao类</a></li></ul> 
   </li><li><a href="#_116" rel="nofollow">插入数据</a></li><li><ul><li><a href="#_117" rel="nofollow">效果图</a></li><li><a href="#_119" rel="nofollow">布局代码</a></li><li><a href="#_157" rel="nofollow">适配器</a></li><li><a href="#_197" rel="nofollow">获取数据</a></li><li><a href="#_287" rel="nofollow">效果图</a></li><li><a href="#_289" rel="nofollow">布局代码</a></li></ul> 
   </li><li><a href="#_393" rel="nofollow">显示数据</a></li><li><ul><li><a href="#_450" rel="nofollow">适配器效果图</a></li><li><a href="#_453" rel="nofollow">布局代码</a></li></ul> 
  </li></ul> 
  </li><li><a href="#_486" rel="nofollow">最终效果图</a></li></ul> 
</div> 
<p></p> 
<h2><a id="_1"></a>简述</h2> 
<pre><code>实现功能：
1：先将数据添加到数据库中(SQLite)
2: 使用RecyclerView将数据库中的数据展示出来
//备注：带加号的ImageButton用于添加数据，带勾的ImageButton用于获取数据并展示
//先按带加号的在按带勾的
</code></pre> 
<h3><a id="_10"></a>实体类</h3> 
<pre><code>public class Event {
    private String Title;
    private String Time;
    private double Money;
    public Event(){

    }
    public Event(String Title, String Time, double Money)
    {
        this.Title = Title;
        this.Time = Time;
        this.Money = Money;
    }

    public String getTitle() {
        return Title;
    }

    public String getTime() {
        return Time;
    }

    public double getMoney() {
        return Money;
    }

    public void setTitle(String Title) {
        this.Title = Title;
    }

    public void setTime(String Time) {
        this.Time = Time;
    }

    public void setMoney(double Money) {
        this.Money = Money;
    }
}
</code></pre> 
<h3><a id="_52"></a>数据库</h3> 
<h4><a id="_53"></a>建表</h4> 
<pre><code>public class MyHelper extends SQLiteOpenHelper {
    public static final String DataBaseName = "Bookkeeping.db";
    public static final SQLiteDatabase.CursorFactory factory = null;
    public static final int version = 1;

    public static final String Title = "Title";
    public static final String Time = "Time";
    public static final String Money = "Money";

    public static final String TableName = "BookkeepingTable";
    public MyHelper(@Nullable Context context) {
        super(context, DataBaseName, factory, version);
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        String sql = "create table "+ TableName +" ( "+Title+" varchar(20) primary key, "+Time+" varchar(20), "+Money+" Double);";
//         String sql = "create table BookkeepingTable ("
//                + "Title text primary key, "
//                + "Time text, "
//                + "Money double)";
        db.execSQL(sql);
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        db.execSQL("drop table if exists "+TableName);
        onCreate(db);
    }
}
</code></pre> 
<h4><a id="Dao_87"></a>Dao类</h4> 
<pre><code>public class Dao {
    public static final String TAG = "Bookkeeping";
    private SQLiteDatabase DB;
    private MyHelper helper;
    public Dao(Context context){
        helper = new MyHelper(context);
    }
    public void Insert(Event event){
        DB = helper.getReadableDatabase();
        if (DB.isOpen())
        {
            ContentValues values = new ContentValues();
            values.put(MyHelper.Title,event.getTitle());
            values.put(MyHelper.Time,event.getTime());
            values.put(MyHelper.Money,event.getMoney());
            long RowId = DB.insert(MyHelper.TableName,null,values);
            if(RowId == -1)
                Log.i(TAG, "数据插入失败！");
            else
                Log.i(TAG, "数据插入成功！"+RowId);
            DB.close();
        }

    }
}
</code></pre> 
<h3><a id="_116"></a>插入数据</h3> 
<h4><a id="_117"></a>效果图</h4> 
<p><img src="https://images2.imgbox.com/e7/dc/PDFg2UXD_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="_119"></a>布局代码</h4> 
<pre><code>代码如下：
&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;RelativeLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal"&gt;
    &lt;TextView
            android:id="@+id/Title"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:textSize="20sp"
            android:singleLine="true"
            android:hint="主题:"/&gt;
    &lt;TextView
            android:id="@+id/Time"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginLeft="150dp"
            android:textSize="20sp"
            android:singleLine="true"
            android:hint="时间:"/&gt;
    &lt;TextView
            android:id="@+id/Money"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_marginLeft="300dp"
            android:textSize="20sp"
            android:singleLine="true"
            android:hint="金钱:"/&gt;

&lt;/RelativeLayout&gt;
</code></pre> 
<h4><a id="_157"></a>适配器</h4> 
<pre><code>public class MyRecyclerView extends RecyclerView.Adapter&lt;MyRecyclerView.ViewHolder&gt; {
    private List&lt;Event&gt; EventList;
    public MyRecyclerView(List&lt;Event&gt; EventList)
    {
       this.EventList = EventList;
    }

    public ViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {
        View view = LayoutInflater.from(parent.getContext()).inflate(R.layout.recyclerview_item,parent,false);
        return new ViewHolder(view);
    }
    //给子控件赋值
    @Override
    public void onBindViewHolder(@NonNull ViewHolder holder, int position) {
        Event event = EventList.get(position);
        holder.Title.setText(event.getTitle());
        holder.Time.setText(event.getTime());
        holder.Money.setText(event.getMoney()+"");

    }

    @Override
    public int getItemCount() {
        return EventList.size();
    }
    static class ViewHolder extends RecyclerView.ViewHolder {
        TextView Title,Money,Time;
        public ViewHolder(@NonNull View itemView) {
            super(itemView);
            Title = (TextView) itemView.findViewById(R.id.Title);
            Time = (TextView) itemView.findViewById(R.id.Time);
            Money = (TextView) itemView.findViewById(R.id.Money);
        }
    }

}
</code></pre> 
<h4><a id="_197"></a>获取数据</h4> 
<pre><code>public class AddThing extends AppCompatActivity implements DatePicker.OnDateChangedListener{
    private RadioGroup Group;
    private RadioButton Pay,InCome;
    private DatePicker datePicker;
    private TextView TipsTitle,TipsTime,TipsMoney,TipsMoneyType;
    private EditText editTitle,editTime,editMoney;
    private Button btn_Submit;
    public static int MoneyType = 0;
    public static String DatePickerTime = null;
    public static String Title = null;
    public static String Time = null;
    public static double Money = 0;
    Dao dao = null;
    Event event = null;


    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_add_thing);


        btn_Submit = (Button) findViewById(R.id.submit);

        datePicker = (DatePicker) findViewById(R.id.addThing);

        Group = (RadioGroup) findViewById(R.id.Group);
        Pay = (RadioButton) findViewById(R.id.Pay);
        InCome = (RadioButton) findViewById(R.id.InCome);

        TipsMoneyType = (TextView) findViewById(R.id.TipsMoneyType);
        TipsTitle = (TextView) findViewById(R.id.TipsTitle);
        TipsTime = (TextView) findViewById(R.id.TipsTime);
        TipsMoney = (TextView) findViewById(R.id.TipsMoney);

        editTitle = (EditText) findViewById(R.id.editTitle);
        editTime = (EditText) findViewById(R.id.editTime);
        editMoney = (EditText) findViewById(R.id.editMoney);

        Calendar calendar = Calendar.getInstance();
        int year = calendar.get(Calendar.YEAR);
        int monthOfYear = calendar.get(Calendar.MONTH);
        int dayOfMonth = calendar.get(Calendar.DAY_OF_MONTH);
        datePicker.init(year, monthOfYear, dayOfMonth, this);

        Group.setOnCheckedChangeListener(new RadioGroup.OnCheckedChangeListener() {
            @Override
            public void onCheckedChanged(RadioGroup group, int checkedId) {
                RadioButton radioButton = (RadioButton) group.findViewById(checkedId);
                if (radioButton.getText().equals("支付")) {
                    MoneyType = 1;
                } else {
                    MoneyType = 0;
                }
            }
        });

        btn_Submit.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                dao = new Dao(AddThing.this);//创建数据库和表

                Title = editTitle.getText().toString().trim();
                Time = editTime.getText().toString();
                try {
                    Money = Double.valueOf(editMoney.getText().toString());
                } catch (NumberFormatException e) {
                    e.printStackTrace();
                }
                if ("".equals(Title))
                {
                    Toast.makeText(AddThing.this,"不能为空",Toast.LENGTH_SHORT).show();
                    return;
                }

                dao.Insert(new Event(Title,Time,Money));
                Log.d(Dao.TAG,"succees!");
            }
        });
    }

    @Override
    public void onDateChanged(DatePicker view, int year, int monthOfYear, int dayOfMonth) {
        editTime.setText(year + "-"+ monthOfYear+ "-"+ dayOfMonth+ "");
    }
}
</code></pre> 
<h4><a id="_287"></a>效果图</h4> 
<p><img src="https://images2.imgbox.com/0a/40/9zu9Y4wZ_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="_289"></a>布局代码</h4> 
<pre><code>&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;RelativeLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"&gt;
    &lt;LinearLayout
     android:layout_width="match_parent"
     android:layout_height="wrap_content"
     android:orientation="vertical"&gt;
    &lt;TextView
        android:id="@+id/TipsMoneyType"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="20dp"
        android:text="请选择金钱类型："/&gt;

    &lt;RadioGroup
        android:id="@+id/Group"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginLeft="100dp"&gt;
        &lt;RadioButton
        android:id="@+id/Pay"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="支付"/&gt;
        &lt;RadioButton
        android:id="@+id/InCome"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="收入"/&gt;
    &lt;/RadioGroup&gt;
    &lt;/LinearLayout&gt;
    &lt;TextView
        android:id="@+id/TipsTitle"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="请输入主题："
        android:layout_marginTop="120dp"/&gt;
    &lt;EditText
        android:id="@+id/editTitle"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:hint="Please input title:"
        android:layout_marginLeft="90dp"
        android:layout_marginTop="105dp"/&gt;
    &lt;TextView
        android:id="@+id/TipsTime"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="请选择时间："
        android:layout_below="@id/TipsTitle"
        android:layout_marginTop="50dp"/&gt;
    &lt;EditText
        android:id="@+id/editTime"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:hint="Please choose time:"
        android:layout_below="@id/editTitle"
        android:layout_marginTop="23dp"
        android:layout_marginLeft="80dp"/&gt;
    &lt;DatePicker
        android:id="@+id/addThing"
        android:layout_width="match_parent"
        android:layout_height="100dp"
        android:calendarViewShown="false"
        android:spinnersShown="true"
        android:datePickerMode="spinner"
        android:headerBackground="#ffffff"
        android:layout_below="@id/editTime"
        android:layout_marginTop="20dp"/&gt;
    &lt;TextView
        android:id="@+id/TipsMoney"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:hint="请输入金额:"
        android:layout_marginTop="20dp"
        android:layout_below="@id/addThing"/&gt;
    &lt;EditText
        android:id="@+id/editMoney"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:hint="Please input money:"
        android:layout_below="@id/addThing"
        android:layout_marginLeft="80dp"
        android:layout_marginTop="3dp"/&gt;
    &lt;Button
        android:id="@+id/submit"
        android:layout_height="wrap_content"
        android:layout_width="100dp"
        android:text="Submit"
        android:layout_below="@id/editMoney"
        android:textAllCaps="false"
        android:layout_marginTop="80dp"
        android:gravity="center"
        android:layout_marginLeft="150dp"/&gt;


&lt;/RelativeLayout&gt;
</code></pre> 
<h3><a id="_393"></a>显示数据</h3> 
<pre><code>MainActivity.java中的代码如下：
public class MainActivity extends AppCompatActivity  {
    private RecyclerView Recyclerview;
    private ImageButton imageButton,imageButtonGet;
    private MyRecyclerView adapter;
    private List&lt;Event&gt; EventList = new ArrayList&lt;&gt;();

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        Recyclerview = (RecyclerView) findViewById(R.id.EventDisplayInterface);
        imageButton = (ImageButton) findViewById(R.id.AddButton);
        imageButtonGet = (ImageButton) findViewById(R.id.getInformation);

        //绑定适配器
        LinearLayoutManager manager = new LinearLayoutManager(MainActivity.this);
        Recyclerview.setLayoutManager(manager);

        adapter = new MyRecyclerView(EventList);
        Recyclerview.setAdapter(adapter);

        imageButton.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                Intent intent = new Intent(MainActivity.this,AddThing.class);
                startActivity(intent);
            }
        });

        imageButtonGet.setOnClickListener(new View.OnClickListener() {
           Event event = new Event();
            @Override
            public void onClick(View v) {
                String Title = AddThing.Title;
                String Time = AddThing.Time;
                double Money = AddThing.Money;
                if ( ("".equals(Title)) &amp;&amp; ( "".equals(Time)))
                {
                    Toast.makeText(MainActivity.this,"内容不能为空",Toast.LENGTH_SHORT).show();
                }
                else {
                    event = new Event(Title, Time, Money);
                    EventList.add(event);
                    adapter.notifyItemChanged(EventList.size() - 1);
                    Recyclerview.scrollToPosition(EventList.size() - 1);
                    Toast.makeText(MainActivity.this,"111111111",Toast.LENGTH_SHORT).show();
                }
            }
        });
    }
}
</code></pre> 
<h4><a id="_450"></a>适配器效果图</h4> 
<p><img src="https://images2.imgbox.com/64/32/TpOb8bS1_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="_453"></a>布局代码</h4> 
<pre><code>&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;RelativeLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical"&gt;
    &lt;androidx.recyclerview.widget.RecyclerView
            android:id="@+id/EventDisplayInterface"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"/&gt;
    &lt;ImageButton
            android:id="@+id/AddButton"
            android:layout_width="100dp"
            android:layout_height="100dp"
            android:src="@drawable/add"
            android:scaleType="centerInside"
            android:layout_marginTop="480dp"
            android:layout_marginLeft="20dp"
            android:background="#00ff"/&gt;
    &lt;ImageButton
            android:id="@+id/getInformation"
            android:layout_width="100dp"
            android:layout_height="80dp"
            android:src="@drawable/get"
            android:scaleType="centerInside"
            android:layout_marginTop="490dp"
            android:layout_marginLeft="250dp"
            android:background="#00ff"/&gt;
    &lt;/RelativeLayout&gt;
</code></pre> 
<h2><a id="_486"></a>最终效果图</h2> 
<p><img src="https://images2.imgbox.com/85/d5/1LaJiBOT_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/37/f9/UcDG8IOr_o.png" alt="在这里插入图片描述"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/429176b00e379fd5dea7a01504608b8a/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">STM32————按键实现控制LED灯</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/6929dc1cbc5e16832ad3df0146717ebf/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【系统分析师之路】如何备考系统分析师与架构师（软件水平考试）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>