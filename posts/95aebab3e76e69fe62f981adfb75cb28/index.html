<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>elementUI树状多选表格 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="elementUI树状多选表格" />
<meta property="og:description" content="树状多选表格 需回显已选择的 可控制展开收起
&lt;el-button v-if=&#34;!fold&#34; @click=&#34;foldShow&#34;&gt; &lt;i color=&#34;pink&#34; class=&#34;el-icon-circle-plus&#34;&gt;&lt;/i&gt;全部展开 &lt;/el-button&gt; &lt;el-button v-if=&#34;fold&#34; @click=&#34;foldNone&#34;&gt; &lt;i color=&#34;pink&#34; class=&#34;el-icon-remove&#34;&gt;&lt;/i&gt;全部收起 &lt;/el-button&gt; &lt;el-table v-loading=&#34;loading&#34; :data=&#34;deptList&#34; row-key=&#34;id&#34; default-expand-all :tree-props=&#34;{children: &#39;children&#39;, hasChildren: &#39;hasChildren&#39;}&#34; ref=&#34;checkTable&#34; @select=&#34;select&#34; @select-all=&#34;selectAll&#34; @selection-change=&#34;selChange&#34;&gt; &lt;el-table-column type=&#34;selection&#34; width=&#34;55&#34;&gt;&lt;/el-table-column&gt; &lt;el-table-column prop=&#34;roadName&#34; label=&#34;路线编号&#34; &gt;&lt;/el-table-column&gt; &lt;el-table-column prop=&#34;name&#34; label=&#34;路线编号及所属公司&#34;&gt;&lt;/el-table-column&gt; &lt;/el-table&gt; fold:true,
// 遮罩层
ZDSJloading:true,
// 表格树数据
deptList: [],
forArr(arr, isExpand) { arr.forEach(i =&gt; { this.$refs.checkTable.toggleRowExpansion(i, isExpand) if (i.children) { this.forArr(i.children, isExpand) } }) }, foldShow(){ this.fold=!this.fold this.forArr(this.deptList, true) }, foldNone(){ this." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/95aebab3e76e69fe62f981adfb75cb28/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-12-14T14:46:51+08:00" />
<meta property="article:modified_time" content="2021-12-14T14:46:51+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">elementUI树状多选表格</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>树状多选表格 需回显已选择的 可控制展开收起</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/04/b4/VlmXo9mS_o.gif"></p> 
<p> </p> 
<pre><code>&lt;el-button v-if="!fold" @click="foldShow"&gt;
   &lt;i color="pink" class="el-icon-circle-plus"&gt;&lt;/i&gt;全部展开
&lt;/el-button&gt;
&lt;el-button v-if="fold" @click="foldNone"&gt;
  &lt;i color="pink" class="el-icon-remove"&gt;&lt;/i&gt;全部收起
&lt;/el-button&gt;
&lt;el-table v-loading="loading" :data="deptList" row-key="id" default-expand-all :tree-props="{children: 'children', hasChildren: 'hasChildren'}" ref="checkTable" @select="select" @select-all="selectAll" @selection-change="selChange"&gt;
   &lt;el-table-column type="selection" width="55"&gt;&lt;/el-table-column&gt;
   &lt;el-table-column prop="roadName" label="路线编号" &gt;&lt;/el-table-column&gt;
   &lt;el-table-column prop="name" label="路线编号及所属公司"&gt;&lt;/el-table-column&gt;
&lt;/el-table&gt; </code></pre> 
<blockquote> 
 <p> fold:true,</p> 
 <p>// 遮罩层</p> 
 <p>ZDSJloading:true,</p> 
 <p>// 表格树数据</p> 
 <p> deptList: [],</p> 
</blockquote> 
<pre><code>forArr(arr, isExpand) {
    arr.forEach(i =&gt; {
      this.$refs.checkTable.toggleRowExpansion(i, isExpand)
      if (i.children) {
        this.forArr(i.children, isExpand)
      }
    })
},
foldShow(){
  this.fold=!this.fold
  this.forArr(this.deptList, true)
},
foldNone(){
  this.fold=!this.fold
  this.forArr(this.deptList, false)
},
select (selection, row) {
   // console.log(selection, row,'999090');
   if (selection.some(el =&gt; { return row.id === el.id })) {
     if (row.children) {
       row.children.map(j =&gt; {
         this.toggleSelection(j, true)
       })
     }
   } else {
     if (row.children) {
       row.children.map(j =&gt; {
         this.toggleSelection(j, false)
       })
     }
   }
},
selectAll(selection) {
  // tabledata第一层只要有在selection里面就是全选
  const isSelect = selection.some(el =&gt; {
  const tableDataIds = this.deptList.map(j =&gt; j.id)
  return tableDataIds.includes(el.id)
 })
  // tableDate第一层只要有不在selection里面就是全不选
  const isCancel = !this.deptList.every(el =&gt; {
  const selectIds = selection.map(j =&gt; j.id)
  return selectIds.includes(el.id)
 })
  if (isSelect) {
    selection.map(el =&gt; {
      if (el.children) {
        el.children.map(j =&gt; {
          this.toggleSelection(j, true)
        })
      }
    })
  }
  if (isCancel) {
    this.deptList.map(el =&gt; {
       if (el.children) {
         el.children.map(j =&gt; {
         this.toggleSelection(j, false)
       })
      }
    })
   }
 },
    selChange(v){
    this.selectArr=[]
    v.map(i=&gt;{
      this.selectArr.push(i.roadName)
    })
    console.log(this.selectArr,'selectArr')
    },
    toggleSelection (row, select) {
      if (row) {
        this.$nextTick(() =&gt; {
          this.$refs.checkTable &amp;&amp; this.$refs.checkTable.toggleRowSelection(row, select)
        })
      }
    },
// 列表发布按钮
    publish(e){
      this.pub=true;
      this.form = e;
      this.id1s=e.id
      this.getTableData();
      this.fbl=e.deviceResolution
      console.log(e,'1234567890');
      this.ZDSJloading = true;
      pubZDSJ(e.FInt_ID).then(res=&gt;{
        // this.formSub.displayCont=res.data.content
        this.$set(this.formSub, 'displayCont', res.data.content)
         res.data.all.result.map(i=&gt;{
           i.children.map(j=&gt;{
               if(j.id==z){
                this.$nextTick(()=&gt;{
                    this.toggleSelection(j, true)
                })
              }
            })
           })
        })
         this.deptList=res.data.all.result
        console.log(this.deptList,'this.deptListthis.deptListthis.deptList');
        this.ZDSJloading = false;
      })
    },</code></pre> 
<p> select select-all方法为网上查找所得</p> 
<blockquote> 
 <p>小tip：</p> 
 <p>// this.formSub.displayCont=res.data.content</p> 
 <p>this.$set(this.formSub, 'displayCont', res.data.content)</p> 
 <p><span style="color:#956fe7;">直接赋值的话 有问题 不能修改 所以用$set方法就可以了</span></p> 
</blockquote> 
<p></p> 
<p>因为甲方需求问题 太长浏览不方便，该版本替换掉了，最终并未采用 </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/553cf6bd81fe5cc5ec5fa24dcce50dcd/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Java使用Cipher类实现加密，包括DES，DES3，AES和RSA加密</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/e0cd05ab66f16415beb2728f7ba18b0d/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">FT61F023-RB辉芒微微控制器(MCU)单片机方案开发编程</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>