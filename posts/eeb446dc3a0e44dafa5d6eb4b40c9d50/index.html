<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Linux下MySQL主从配置 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Linux下MySQL主从配置" />
<meta property="og:description" content="1.两台Linux安装同一版本的MySQL。 2.保证主从服务器数据库内容一致。 3.master服务器配置 3.1创建一个有复制权限的用户，只限slave远程连接访问（为了方便我给了repuser所有权限） mysql&gt;GRANT REPLICATION SLAVE ON *.* to &#39;repuser&#39;@&#39;%&#39; identified by &#39;123456&#39;; mysql&gt;flush privileges; 3.2编辑mysql的配置文件 my.cnf中设置两个必须的参数，没有的添加，有的直接更改即可。 log-bin=mysql-bin server-id = 1 保存之后，重启服务。 3.3查看master状态，记录下两个参数 mysql&gt; show master status; &#43;------------------&#43;----------&#43;--------------&#43;------------------&#43;-------------------&#43; File | Position | Binlog_Do_DB | Binlog_Ignore_DB | Executed_Gtid_Set | &#43;------------------&#43;----------&#43;--------------&#43;------------------&#43;-------------------&#43; | mysql-bin.000012 | 346 | | | | &#43;------------------&#43;----------&#43;--------------&#43;------------------&#43;-------------------&#43; 1 row in set 4.slave服务器配置 4.1编辑mysql的配置文件 my.cnf中设置两个必须的参数，没有的添加，有的直接更改即可。 log-bin=mysql-bin server-id = 2 保存之后，重启服务。 4.2slave服务器重启后，登录mysql mysql&gt;stop slave; mysql&gt;change master to master_host=&#39;192.168.1.108&#39;,master_port=3307,master_user=&#39;repuser&#39;,master_password=&#39;123456&#39;,master_log_file=&#39;mysql-bin.000012&#39;,master_log_pos=346; mysql&gt;start slave; 5." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/eeb446dc3a0e44dafa5d6eb4b40c9d50/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2016-08-25T13:10:01+08:00" />
<meta property="article:modified_time" content="2016-08-25T13:10:01+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Linux下MySQL主从配置</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    1.两台Linux安装同一版本的MySQL。 
<br> 2.保证主从服务器数据库内容一致。 
<br> 3.master服务器配置 
<br>   3.1创建一个有复制权限的用户，只限slave远程连接访问（为了方便我给了repuser所有权限） 
<br>     mysql&gt;GRANT REPLICATION SLAVE ON *.* to 'repuser'@'%' identified by '123456'; 
<br>     mysql&gt;flush privileges; 
<br>   3.2编辑mysql的配置文件 
<br>     my.cnf中设置两个必须的参数，没有的添加，有的直接更改即可。 
<br>     log-bin=mysql-bin 
<br>     server-id  = 1 
<br>     保存之后，重启服务。 
<br>   3.3查看master状态，记录下两个参数 
<br>     mysql&gt; show master status; 
<br>     +------------------+----------+--------------+------------------+-------------------+ 
<br>       File             | Position | Binlog_Do_DB | Binlog_Ignore_DB | Executed_Gtid_Set | 
<br>     +------------------+----------+--------------+------------------+-------------------+ 
<br>     | mysql-bin.000012 |      346 |              |                  |                   | 
<br>     +------------------+----------+--------------+------------------+-------------------+ 
<br>     1 row in set 
<br> 4.slave服务器配置 
<br>   4.1编辑mysql的配置文件 
<br>     my.cnf中设置两个必须的参数，没有的添加，有的直接更改即可。 
<br>     log-bin=mysql-bin 
<br>     server-id  = 2 
<br>     保存之后，重启服务。 
<br>   4.2slave服务器重启后，登录mysql 
<br>     mysql&gt;stop slave; 
<br>     mysql&gt;change master to master_host='192.168.1.108',master_port=3307,master_user='repuser',master_password='123456',master_log_file='mysql-bin.000012',master_log_pos=346; 
<br>     mysql&gt;start slave; 
<br> 5.验证是否成功 
<br>   mysql&gt; show slave status; 
<br>   当这个参数都为yes时，证明主从复制成功 
<br>   Slave_IO_Running: Yes   Slave_SQL_Running: Yes 
<br> 6.温馨提示 
<br>   6.1如果不小心对从数据库进行了写入操作，主从关系就会终止，需要重启依次主从数据库从步骤4.2开始重新配置。 
<br>   6.2binlog-do-db=test #需要备份数据，多个写多行#   
<br>        binlog-ignore-db=mysql#不需要备份的数据库，多个写多行 
<br>        建议全部备份就什么都不写，如果配置这些参数容易造成主从数据库不同步。
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/670c4a07685c20795fb8811adfc2aa42/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">DHCP V6 server配置</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/8d92c243abc3d018618420c63c7f8414/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">损坏的主控文件表,CHKDSK被终止.如何恢复数据</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>