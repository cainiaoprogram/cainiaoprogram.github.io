<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Mac中安装homebrew全过程(附常用问题解决办法) - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Mac中安装homebrew全过程(附常用问题解决办法)" />
<meta property="og:description" content="2021-01-24更新：
由于homebrew已经移除了下面的脚本，所以下面的方法不一定还有效.而科大镜像源提供的帮助文档未能成功，所以，这里提供清华镜像源的帮助文档
清华镜像源homebrew安装帮助文档
1.最简单粗暴的方法直接去homebrew的官网，复制命令，粘贴到终端里执行，如果一切正常，那你就不用往下看了。
2.如果安装过程特别慢，最后报错。你可以这么做。
首先：curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install &gt;&gt; brew_instal，复制此命令到终端，执行。
执行完这个命令之后，你去Mac里的当前目录去找，应该会有一个brew_instal的文件。
这一步和下面一步的目的主要是因为:
官网的命令执行的太慢，我们先把官网的install脚本中的地址改为科大的镜像地址，然后再安装.
其次：打开这个文件，将BREW_REPO = &#34;https://github.com/Homebrew/brew&#34;.freeze这句话改为BREW_REPO = &#34;git://mirrors.ustc.edu.cn/brew.git&#34;.freeze
紧接着：在终端里执行/usr/bin/ruby ./brew_install这个命令，此时你会发现安装过程相比较之前特别的快，但是最后会报这个错误：
fatal: unable to access &#39;https://github.com/Homebrew/homebrew-core/&#39;: LibreSSL SSL_read: SSL_ERROR_SYSCALL, errno 54
Error: Failure while executing: git clone https://github.com/Homebrew/homebrew-core /usr/local/Homebrew/Library/Taps/homebrew/homebrew-core --depth=1
Error: Failure while executing: /usr/local/bin/brew tap homebrew/core
最后：执行下面的命令，替换源：
1.cd &#34;$(brew --repo)&#34;
2.git remote set-url origin git://mirrors.ustc.edu.cn/brew.git
3.cd &#34;$(brew --repo)/Library/Taps/homebrew/homebrew-core&#34;
4.git remote set-url origin git://mirrors.ustc.edu.cn/homebrew-core.git
默认不安装cask 有需要的可以替换(以下步骤可选)
cd &#34;$(brew --repo)/Library/Taps/homebrew/homebrew-cask&#34;
git remote set-url origin git://mirrors." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/db01b2e0378b9efff97d12b816312db3/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-12-23T20:23:04+08:00" />
<meta property="article:modified_time" content="2022-12-23T20:23:04+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Mac中安装homebrew全过程(附常用问题解决办法)</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>2021-01-24更新：</p> 
<p>由于homebrew已经移除了下面的脚本，所以下面的方法不一定还有效.而科大镜像源提供的帮助文档未能成功，所以，这里提供清华镜像源的帮助文档</p> 
<p><a href="https://mirrors.tuna.tsinghua.edu.cn/help/homebrew/" rel="nofollow" title="清华镜像源homebrew安装帮助文档">清华镜像源homebrew安装帮助文档</a></p> 
<p></p> 
<p>1.最简单粗暴的方法直接去homebrew的官网，复制命令，粘贴到终端里执行，如果一切正常，那你就不用往下看了。</p> 
<p>2.如果安装过程特别慢，最后报错。你可以这么做。</p> 
<p><strong>首先</strong>：<span style="color:#f33b45;">curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install &gt;&gt; brew_instal</span>，复制此命令到终端，执行。</p> 
<p>执行完这个命令之后，你去Mac里的当前目录去找，应该会有一个brew_instal的文件。</p> 
<p><span style="color:#86ca5e;">这一步和下面一步的目的主要是因为:</span></p> 
<p>官网的命令执行的太慢，我们先把官网的install脚本中的地址改为科大的镜像地址，然后再安装.</p> 
<p><strong>其次</strong>：打开这个文件，将BREW_REPO = "https://github.com/Homebrew/brew".freeze这句话改为BREW_REPO = "git://mirrors.ustc.edu.cn/brew.git".freeze</p> 
<p><strong>紧接着</strong>：在终端里执行<span style="color:#f33b45;">/usr/bin/ruby ./brew_install</span>这个命令，此时你会发现安装过程相比较之前特别的快，但是最后会报这个错误：</p> 
<p>fatal: unable to access 'https://github.com/Homebrew/homebrew-core/': LibreSSL SSL_read: SSL_ERROR_SYSCALL, errno 54</p> 
<p>Error: Failure while executing: git clone https://github.com/Homebrew/homebrew-core /usr/local/Homebrew/Library/Taps/homebrew/homebrew-core --depth=1</p> 
<p>Error: Failure while executing: /usr/local/bin/brew tap homebrew/core<br><strong>最后</strong>：执行下面的命令，替换源：</p> 
<p><span style="color:#f33b45;"><code>1.cd "$(brew --repo)"</code><br><code>2.git remote set-url origin git://mirrors.ustc.edu.cn/brew.git</code><br><code>3.cd "$(brew --repo)/Library/Taps/homebrew/homebrew-core"</code><br><code>4.git remote set-url origin git://mirrors.ustc.edu.cn/homebrew-core.git</code></span><br><code>默认不安装cask 有需要的可以替换(以下步骤可选)</code><br><span style="color:#f33b45;"><code>cd "$(brew --repo)/Library/Taps/homebrew/homebrew-cask"</code><br><code>git remote set-url origin git://mirrors.ustc.edu.cn/homebrew-cask.git</code></span></p> 
<p>最后一步：替换bintray镜像：</p> 
<p><span style="color:#f33b45;"><code>1.echo 'export HOMEBREW_BOTTLE_DOMAIN=https://mirrors.ustc.edu.cn/homebrew-bottles' &gt;&gt; ~/.bash_profile</code><br><code>2.source ~/.bash_profile</code></span></p> 
<p><code>至此，Mac上的homebrew就安装完了，你可以使用brew -v,查看以下是否安装成功。接下来，如果，想要安装什么就直接搜命令去吧。</code></p> 
<p>实际上以上几个步骤就是更换git的上游地址，安装完homebrew之后可以在/usr/local/Homebrew下看到隐藏的.git文件夹，代表这是一个git仓库，而homebrew的三个核心，homebrew-core、homebrew-cask、homebrew-services的目录均在/usr/local/Homebrew/Library/Tags/homebrew下，进入每个目录都是都一个单独的仓库，所以上面的命令就不难理解了，仅仅是为这三个git仓库的origin源更换一个地址，更换为科大的git地址</p> 
<p><strong>说明：</strong></p> 
<p>这里的镜像源为<a href="http://mirrors.ustc.edu.cn/" rel="nofollow" title="科大的镜像地址">科大的镜像地址</a>，操作步骤是按照科大的镜像操作完成的。可以去科大的镜像网站查找你所需要的源，然后点击后面的help即可查看如何操作</p> 
<p><img alt="" src="https://images2.imgbox.com/8b/a2/Y4ECBxMg_o.jpg"></p> 
<p><strong>备注：</strong></p> 
<p>再推荐一个图形界面的工具cakebrew。安装命令</p> 
<pre><code class="language-bash">brew cask install cakebrew
或者
brew install cakebrew</code></pre> 
<p>如果想要homebrew不提示升级某个formula，可以使用</p> 
<pre><code class="language-bash">brew pin &lt;formula&gt;</code></pre> 
<p>如果想恢复，则可以使用</p> 
<pre><code class="language-bash">brew unpin &lt;formula&gt;</code></pre> 
<p>官方说明文档<a href="https://docs.brew.sh/FAQ#how-do-i-stop-certain-formulae-from-being-updated" rel="nofollow" title="FAQ (Frequently Asked Questions) — Homebrew Documentation">FAQ (Frequently Asked Questions) — Homebrew Documentation</a></p> 
<p>疑问解答：</p> 
<p>问：brew 和 brew cask 有什么不同？</p> 
<p>答：可以简单理解为brew是安装一些在命令行中使用的软件，而brew cask是安装一些带有图形界面的软件。也可以直接看<a href="https://github.com/Homebrew/homebrew-cask" title="官方GitHub">官方GitHub</a>上的文档描述，简洁明了.</p> 
<p>2022年12月23日更新：实际使用过程中直接使用brew 即可，对于cask的软件brew install也是可以安装的</p> 
<p>问：brew tap的命令是干嘛的?<a href="https://docs.brew.sh/Taps" rel="nofollow" title="命令介绍">命令介绍</a></p> 
<p>答：由于一些原因，homebrew无法收集到一些软件的信息，所以，软件开发者可以手动的让brew追踪这些软件，同时也会让brew管理这些软件。使用brew tap 命令可以查看目前都有哪些存储库。软件开发者告诉brew要克隆的仓库地址，其格式为https://github.com/user/repo名字，其中repo名字前缀必须为homebrew-。</p> 
<p>举例说明，ES本身的存储库brew并没有收录，于是，ES官方在GitHub上建立了一个名字为homebrew-tap的仓库。那么此时我们可以在命令行中这样安装es</p> 
<pre><code class="language-bash">brew tap elastic/tap

brew install elastic/tap/elasticsearch-full</code></pre> 
<p><img alt="" height="62" src="https://images2.imgbox.com/03/30/7GKfheZO_o.jpg" width="1052"></p> 
<p><img alt="" src="https://images2.imgbox.com/1f/7b/05FXZKXm_o.jpg"><br> 可以看到，ES是完全按照brew的规范新建的仓库，</p> 
<p>问：为什么brew tap关联es存储库时没有使用brew tap elastic/homewbrew-tap呢？</p> 
<p>答：因为brew tap会自动加上的homebrew-的前缀</p> 
<p><img alt="" src="https://images2.imgbox.com/c1/69/nF7LDWss_o.jpg"></p> 
<p>brew tap 默认的位置是GitHub位置，如果要换成其他位置，可以使用第二中URL的方式</p> 
<p>问：如何install固定版本的软件？</p> 
<p>答：brew search一下，如果该软件有在brew存储库中有多个版本直接选择要安装的版本即可。如果没有的话，就要分情况处理了，</p> 
<p>第一种情况：</p> 
<p>如果brew存储库没有要找的软件版本，可以使用brew create自己建建立对应软件的.rb文件。brew create 软件的实际下载路径。具体使用可以参考<a href="https://docs.brew.sh/Manpage#create-options-url" rel="nofollow" title="官方brew create文档">官方brew create文档</a>或官方首页的文档即可。也可以参考以下几篇文章<a href="https://www.huangyunkun.com/2014/10/10/create-a-homebrew-formula/" rel="nofollow" title="自定义Homebrew的Formula – 夜明的孤行灯">自定义Homebrew的Formula – 夜明的孤行灯</a></p> 
<p>和<a href="https://liam.page/2016/07/30/release-your-own-app-in-Homebrew/" rel="nofollow" title="在 Homebrew 上发布自己的 App | 始终">在 Homebrew 上发布自己的 App | 始终</a> </p> 
<p>第二种情况：</p> 
<p>如果brew存储库有该软件的版本，但是只有最新的版本，那么要安装以前的版本怎么处理呢？</p> 
<p>来到<a href="https://github.com/Homebrew/homebrew-core" title="brew-core官方GitHub仓库">brew-core官方GitHub仓库</a>，在仓库里搜索要找的软件的版本,如：查询zookeeper ,git clone到本地，查看zookeeper.rb的提交历史，找到3.4.14的版本的提交历史，将里面的内容复制，替换现在的zookeeper.rb文件，文件位置在/usr/local/Homebrew/Libraay/Taps/homebrew/homewbrew-core/下。</p> 
<p>重新</p> 
<pre><code class="language-bash">brew install zoopkeeper</code></pre> 
<p>就可以安装3.4.14版本了.</p> 
<p>由于3.5以及以上版本的zookeeper对于JDK8有bug，所以我们让zookeeper保持在3.4.14,不更新</p> 
<pre><code class="language-bash">brew pin zookeeper</code></pre> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/c64bcbbf0fac7a59710656035ad8851a/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">基于开源的Micro-RTSP，使用VLC和ffmpeg拉流播放RTSP视频流，本例使用安信可ESP32 CAM进行推流。</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/bab6d463688d627f5be74604ffcc8f36/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">贝尔曼最优方程(Bellman Optimality Equation)</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>