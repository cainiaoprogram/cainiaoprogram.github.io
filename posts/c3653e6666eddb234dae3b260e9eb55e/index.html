<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Callable接口与Runnable接口的区别 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Callable接口与Runnable接口的区别" />
<meta property="og:description" content="Java代码
public interface Executor {
/**
* Executes the given command at some time in the future. The command
* may execute in a new thread, in a pooled thread, or in the calling
* thread, at the discretion of the &lt;tt&gt;Executor&lt;/tt&gt; implementation.
*
* @param command the runnable task
* @throws RejectedExecutionException if this task cannot be
* accepted for execution.
* @throws NullPointerException if command is null" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/c3653e6666eddb234dae3b260e9eb55e/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2015-09-07T16:38:41+08:00" />
<meta property="article:modified_time" content="2015-09-07T16:38:41+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Callable接口与Runnable接口的区别</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p><span style="font-size:18px">Java代码</span></p> 
<p><span style="font-size:18px">public interface Executor {<!-- --></span></p> 
<p><span style="font-size:18px">    /**<br>      * Executes the given command at some time in the future.  The command<br>      * may execute in a new thread, in a pooled thread, or in the calling<br>      * thread, at the discretion of the &lt;tt&gt;Executor&lt;/tt&gt; implementation.<br>      *<br>      * @param command the runnable task<br>      * @throws RejectedExecutionException if this task cannot be<br>      * accepted for execution.<br>      * @throws NullPointerException if command is null<br>      */<br>     void execute(Runnable command);<br> }</span></p> 
<p><span style="font-size:18px">Java代码</span></p> 
<p><span style="font-size:18px">//接口ExecutorService继承自Executor，它的目的是为我们管理Thread对象，从而简化并发编程<br> public interface ExecutorService extends Executor {<!-- --></span></p> 
<p><span style="font-size:18px">    &lt;T&gt; Future&lt;T&gt; submit(Callable&lt;T&gt; task);<br>    <br>     &lt;T&gt; Future&lt;T&gt; submit(Runnable task, T result);</span></p> 
<p><span style="font-size:18px">    Future&lt;?&gt; submit(Runnable task);...   <br> }</span></p> 
<p><span style="font-size:18px">Java代码</span></p> 
<p><span style="font-size:18px">public interface Callable&lt;V&gt; {<!-- --><br>     /**<br>      * Computes a result, or throws an exception if unable to do so.<br>      *<br>      * @return computed result<br>      * @throws Exception if unable to compute a result<br>      */<br>     V call() throws Exception;<br> }</span></p> 
<p><br> <span style="font-size:18px">public interface Runnable {<!-- --><br>    <br>     public abstract void run();<br> }</span></p> 
<p><span style="font-size:18px">Java代码</span></p> 
<p><span style="font-size:18px">public interface Future&lt;V&gt; {<!-- --><br>     <br>     boolean cancel(boolean mayInterruptIfRunning);    </span></p> 
<p><span style="font-size:18px">    /**<br>      * Waits if necessary for the computation to complete, and then<br>      * retrieves its result.<br>      *<br>      * @return the computed result  <br>      */<br>     V get() throws InterruptedException, ExecutionException;</span></p> 
<p><span style="font-size:18px">   <br>     V get(long timeout, TimeUnit unit)<br>         throws InterruptedException, ExecutionException, TimeoutException;<br> }</span></p> 
<p style="text-align:left; padding-bottom:0px; line-height:25px; padding-left:0px; padding-right:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; padding-top:0px"> <span style="font-size:18px">Callable接口和Runnable接口相似，区别就是Callable需要实现call方法，而Runnable需要实现run方法；并且，<span style="color:#800080"><strong>call方法还可以返回任何对象</strong></span>，无论是什么对象，JVM都会当作Object来处理。但是如果使用了泛型，我们就不用每次都对Object进行转换了。</span></p> 
<p style="text-align:left; padding-bottom:0px; line-height:25px; padding-left:0px; padding-right:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; padding-top:0px"> <span style="font-size:18px"> </span></p> 
<p style="text-align:left; padding-bottom:0px; line-height:25px; padding-left:0px; padding-right:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; padding-top:0px"> <span style="font-size:18px"><span style="font-family:simsun; color:#464646; line-height:21px; background-color:#eaf7fd">Runnable和Callable都是接口</span><br style="line-height:21px; background-color:#eaf7fd; font-family:simsun; color:#464646"> <br style="line-height:21px; background-color:#eaf7fd; font-family:simsun; color:#464646"> <span style="font-family:simsun; color:#464646; line-height:21px; background-color:#eaf7fd">不同之处：</span><br style="line-height:21px; background-color:#eaf7fd; font-family:simsun; color:#464646"> <span style="font-family:simsun; color:#464646; line-height:21px; background-color:#eaf7fd; font-size:16px">1.<strong><span style="color:#800080">Callable可以返回一个类型V，而Runnable不可以</span></strong></span><br style="line-height:21px; background-color:#eaf7fd; font-family:simsun; color:#464646"> <span style="font-family:simsun; color:#464646; line-height:21px; background-color:#eaf7fd; font-size:16px">2.<strong><span style="color:#800080">Callable能够抛出checked exception,而Runnable不可以</span></strong>。</span><br style="line-height:21px; background-color:#eaf7fd; font-family:simsun; color:#464646"> <span style="font-family:simsun; color:#464646; line-height:21px; background-color:#eaf7fd; font-size:16px">3.Runnable是自从java1.1就有了，而Callable是1.5之后才加上去的</span><br style="line-height:21px; background-color:#eaf7fd; font-family:simsun; color:#464646"> <span style="font-family:simsun; color:#464646; line-height:21px; background-color:#eaf7fd; font-size:16px">4.<span style="color:#800080"><strong>Callable和Runnable都可以应用于executors。而Thread类只支持Runnable</strong></span>.</span><br style="line-height:21px; background-color:#eaf7fd; font-family:simsun; color:#464646"> <span style="font-family:simsun; color:#464646; line-height:21px; background-color:#eaf7fd; font-size:16px">上面只是简单的不同，其实这两个接口在用起来差别还是很大的。Callable与executors联合在一起，在任务完成时可立刻获得一个更新了的Future。而Runable却要自己处理</span></span></p> 
<p style="text-align:left; padding-bottom:0px; line-height:25px; padding-left:0px; padding-right:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; padding-top:0px"> <span style="font-size:18px"> </span></p> 
<p style="text-align:left; padding-bottom:0px; line-height:25px; padding-left:0px; padding-right:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; padding-top:0px"> <span style="font-size:18px">  Future接口，一般都是取回Callable执行的状态用的。其中的主要方法：</span></p> 
<ul style="text-align:left; padding-bottom:0px; line-height:25px; margin:0px 0px 1.5em; padding-left:0px; padding-right:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; padding-top:0px"><li style="padding-bottom:0px; margin:0px 0px 0.25em 30px; padding-left:0px; padding-right:0px; padding-top:0px"> <span style="font-size:18px">cancel，取消Callable的执行，当Callable还没有完成时</span></li><li style="padding-bottom:0px; margin:0px 0px 0.25em 30px; padding-left:0px; padding-right:0px; padding-top:0px"> <span style="font-size:18px">get，获得Callable的返回值</span></li><li style="padding-bottom:0px; margin:0px 0px 0.25em 30px; padding-left:0px; padding-right:0px; padding-top:0px"> <span style="font-size:18px">isCanceled，判断是否取消了</span></li><li style="padding-bottom:0px; margin:0px 0px 0.25em 30px; padding-left:0px; padding-right:0px; padding-top:0px"> <span style="font-size:18px">isDone，判断是否完成</span></li></ul> 
<p style="text-align:left; padding-bottom:0px; line-height:25px; padding-left:0px; padding-right:0px; font-family:Helvetica,Tahoma,Arial,sans-serif; font-size:14px; padding-top:0px"> <span style="font-size:18px"> </span></p> 
<p style="padding-bottom:0px; padding-left:0px; padding-right:0px; padding-top:0px"> <span style="font-size:18px">用Executor来构建线程池，应该要做的事：</span></p> 
<p style="padding-bottom:0px; padding-left:0px; padding-right:0px; padding-top:0px"> <span style="font-size:18px">1).调用Executors类中的静态方法newCachedThreadPool(必要时创建新线程，空闲线程会被保留60秒)或newFixedThreadPool(包含固定数量的线程池)等，返回的是一个实现了ExecutorService 接口的ThreadPoolExecutor类或者是一个实现了ScheduledExecutorServiece接口的类对象。</span></p> 
<p style="padding-bottom:0px; padding-left:0px; padding-right:0px; padding-top:0px"> <span style="font-size:18px">2).调用submit提交Runnable或Callable对象。</span></p> 
<p style="padding-bottom:0px; padding-left:0px; padding-right:0px; padding-top:0px"> <span style="font-size:18px">3).如果想要取消一个任务，或如果提交Callable对象，那就要保存好返回的Future对象。</span></p> 
<p style="padding-bottom:0px; padding-left:0px; padding-right:0px; padding-top:0px"> <span style="font-size:18px">4).<span style="color:#800080"><strong>当不再提交任何任务时，调用shutdown方法</strong></span>。</span></p> 
<p style="padding-bottom:0px; padding-left:0px; padding-right:0px; padding-top:0px"> <span style="font-size:18px"></span> </p> 
<p style="padding-bottom:0px; padding-left:0px; padding-right:0px; padding-top:0px"> <span style="font-size:18px">举2个例子如下：</span></p> 
<p style="padding-bottom:0px; padding-left:0px; padding-right:0px; padding-top:0px"> <span style="font-size:18px">java代码</span></p> 
<p><span style="font-size:18px">package thread.test04;<br> import java.util.concurrent.*;<br> public class ThreadTestA {<!-- --><br>  public static void main(String[] args) {<!-- --><br>   ExecutorService e=Executors.newFixedThreadPool(10);<br>   e.execute(new MyRunnableA());<br>   e.execute(new MyRunnableB());<br> &amp;nbsp;  e.shutdown();<br> &amp;nbsp; }</span></p> 
<p><span style="font-size:18px">}</span></p> 
<p><span style="font-size:18px">class MyRunnableA implements Runnable{<!-- --><br>  <br>  public void run(){<!-- --><br>   System.out.println("Runnable:run()....");<br>   int i=0;<br>   while(i&lt;20){<!-- --><br>    i++;<br>    for(int j=0;j&lt;1000000;j++);<br>    System.out.println("i="+i);<br>   }<br>  }<br> }</span></p> 
<p><span style="font-size:18px">class MyRunnableB implements Runnable{<!-- --><br>  public void run(){<!-- --><br>   char c='A'-1;<br>   while(c&lt;'Z'){<!-- --><br>    c++;<br>    for(int j=0;j&lt;1000000;j++);<br>    System.out.println("c="+c);<br>   }<br>  }<br> }</span></p> 
<p><span style="font-size:18px">java代码</span></p> 
<p><span style="font-size:18px">package thread.test04;</span></p> 
<p><span style="font-size:18px">import java.util.concurrent.Callable;<br> import java.util.concurrent.ExecutionException;<br> import java.util.concurrent.ExecutorService;<br> import java.util.concurrent.Executors;<br> import java.util.concurrent.Future;</span></p> 
<p><span style="font-size:18px">public class ThreadTestB {<!-- --><br>  public static void main(String[] args) {<!-- --><br>   ExecutorService e=Executors.newFixedThreadPool(10);<br>   Future f1=e.submit(new MyCallableA());<br>   Future f2=e.submit(new MyCallableA());<br>   Future f3=e.submit(new MyCallableA());<br>   Future f4=e.submit(new MyCallableA());<br>   Future f5=e.submit(new MyCallableA());<br>   System.out.println("--Future.get()....");<br>   try {<!-- --><br>    System.out.println(f1.get());<br>    System.out.println(f2.get());<br>    System.out.println(f3.get());<br>    System.out.println(f4.get());<br>    System.out.println(f5.get());<br>   } catch (InterruptedException e1) {<!-- --><br>    e1.printStackTrace();<br>   } catch (ExecutionException e1) {<!-- --><br>    e1.printStackTrace();<br>   }<br>   <br>   e.shutdown();<br>   <br>  }</span></p> 
<p><span style="font-size:18px">}</span></p> 
<p><span style="font-size:18px">class MyCallableA implements Callable&lt;String&gt;{<!-- --><br>  public String call() throws Exception {<!-- --><br>   System.out.println("开始执行Callable");<br>   String[] ss={"zhangsan","lisi"};<br>   long[] num=new long[2];<br>   for(int i=0;i&lt;1000000;i++){<!-- --><br>    num[(int)(Math.random()*2)]++;<br>   }<br>   <br>   if(num[0]&gt;num[1]){<!-- --><br>    return ss[0];<br>   }else if(num[0]&lt;num[1]){<!-- --><br>    throw new Exception("弃权!");<br>   }else{<!-- --><br>    return ss[1];<br>   }<br>  }<br>  <br> }</span></p> 
<p><span style="font-size:18px"> </span></p> 
<p><span style="font-size:18px"></span></p> 
<p><br> <span style="font-size:18px"> </span></p> 
<p style="padding-bottom:0px; padding-left:0px; padding-right:0px; padding-top:0px"> <span style="font-size:18px"></span> </p> 
<p><span style="font-size:18px"></span> </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/7b437fe619611fc1ca0eeee3556f53e1/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Java RMI 框架（远程方法调用）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/44d53ddd34f5c112cf0f5418b7adbfbb/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Struts 2详细工作流程及原理</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>