<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>从 MySQL 迁移数据到 Oracle 中的全过程 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="从 MySQL 迁移数据到 Oracle 中的全过程" />
<meta property="og:description" content="一、前言 这里记录一次将MySQL数据库中的表数据迁移到Oracle数据库中的全过程 ，使用工具 Navicat，版本 12.0.11
操作环境及所用工具： mysql5.7oracle18cwindowsNavicat12.0.11idea 二、开始移植 点击 工具 -&gt; 数据传输
左边 源 标识mysql数据库 ， 右边 目标 标识要移植到的oracle数据库
高级选项中勾选大写
温馨小提示：
如果字段名和表名都为小写，oracle操作数据的时候将会出现找不到表或视图的错误，解决方法是必须加上双引号才能查询到， 这样的话我们通过程序操作数据的时候必须加上双引号，即大大加重了迁移数据库后的工作量，因此这里需勾选转换对象名为大写 ，同时在转换过程中如果字段名出现oracle关键字的话，它会自动给我们加上双引号解决关键字的困扰！！！
【 ex: user -&gt; &#34;USER&#34; number -&gt; &#34;NUMBER&#34; desc -&gt; &#34;DESC&#34; level -&gt; &#34;LEVEL&#34; 】
选择需要移植的表，这里我一把梭全选了~
然后等待数据传输完成
如果最后遇到如下情况，可暂不管，直接关闭即可~
然后查看oracle，如下，数据导入成功
温馨小提示：传输过程中可能会存在有部分几张表不成功，手动导一下就好了~~
三、问题 1、解决oracle自增主键 oracle设置自增主键的几种方式： 序列 &#43; 触发器序列 &#43; Hibernate配置 (注：此方式仅适用于通过Hibernate连接数据库的方式)oracle12c版本之后新增 自增列语法 GENERATED BY DEFAULT AS IDENTITY 解决思路： 在ddl 创建表sql中添加自增主键的命令，重新创建一次表结构，然后再将oracle中的数据单独导入
这里由于小编oracle版本为18c 因此在创建表的时候加上自增主键语法即可完成！
① 备份数据 -&gt; 数据泵方式 数据泵 -&gt; 数据泵导出" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/8b90da5073dafc32301ee2349bad35f0/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2019-12-25T18:47:34+08:00" />
<meta property="article:modified_time" content="2019-12-25T18:47:34+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">从 MySQL 迁移数据到 Oracle 中的全过程</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-tomorrow-night">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h4><a id="_0"></a>一、前言</h4> 
<p>这里记录一次将<code>MySQL</code>数据库中的表数据迁移到<code>Oracle</code>数据库中的全过程 ，使用工具 <code>Navicat</code>，版本 12.0.11</p> 
<h6><a id="_4"></a>操作环境及所用工具：</h6> 
<ol><li>mysql5.7</li><li>oracle18c</li><li>windows</li><li>Navicat12.0.11</li><li>idea</li></ol> 
<p><img src="https://images2.imgbox.com/a5/1e/M5yLzxTl_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="_14"></a>二、开始移植</h4> 
<p>点击 <code>工具</code> -&gt; <code>数据传输</code></p> 
<p><img src="https://images2.imgbox.com/fd/ab/tIURo0Zu_o.png" alt="在这里插入图片描述"><br> 左边 <code>源</code> 标识mysql数据库 ， 右边 <code>目标</code> 标识要移植到的oracle数据库<br> <img src="https://images2.imgbox.com/cc/ef/Xi1up3KD_o.png" alt="在这里插入图片描述"><br> 高级选项中勾选<code>大写</code></p> 
<blockquote> 
 <p><strong>温馨小提示：</strong><br> 如果字段名和表名都为小写，oracle操作数据的时候将会出现找不到表或视图的错误，解决方法是必须加上双引号才能查询到， 这样的话我们通过程序操作数据的时候必须加上双引号，即大大加重了迁移数据库后的工作量，因此这里需<code>勾选转换对象名为大写</code> ，同时在转换过程中如果字段名出现oracle关键字的话，它会自动给我们加上双引号解决关键字的困扰！！！<br> 【 ex: <code>user -&gt; "USER"</code> <code>number -&gt; "NUMBER"</code> <code>desc -&gt; "DESC"</code> <code>level -&gt; "LEVEL"</code> 】</p> 
</blockquote> 
<p><img src="https://images2.imgbox.com/23/57/UOOTskM9_o.png" alt="在这里插入图片描述"></p> 
<p>选择需要移植的表，这里我一把梭全选了~<br> <img src="https://images2.imgbox.com/85/a4/lUa5na2z_o.png" alt="在这里插入图片描述"><br> 然后等待数据传输完成<br> <img src="https://images2.imgbox.com/3c/1b/zXAoeJ26_o.png" alt="在这里插入图片描述"><br> 如果最后遇到如下情况，可暂不管，直接关闭即可~<br> <img src="https://images2.imgbox.com/8e/18/fWwzqp41_o.png" alt="在这里插入图片描述"><br> 然后查看oracle，如下，数据导入成功<br> <img src="https://images2.imgbox.com/b9/e7/31JGBZ3y_o.png" alt="在这里插入图片描述"></p> 
<blockquote> 
 <p>温馨小提示：传输过程中可能会存在有部分几张表不成功，手动导一下就好了~~</p> 
</blockquote> 
<h4><a id="_42"></a>三、问题</h4> 
<h5><a id="1oracle_44"></a>1、解决oracle自增主键</h5> 
<h6><a id="oracle_46"></a>oracle设置自增主键的几种方式：</h6> 
<ol><li><code>序列</code> + <code>触发器</code></li><li><code>序列</code> + <code>Hibernate配置</code> (注：此方式仅适用于通过Hibernate连接数据库的方式)</li><li>oracle12c版本之后新增 自增列语法 <code>GENERATED BY DEFAULT AS IDENTITY</code></li></ol> 
<h6><a id="_52"></a>解决思路：</h6> 
<p>在ddl 创建表sql中添加自增主键的命令，重新创建一次表结构，然后再将oracle中的数据单独导入<br> 这里由于小编oracle版本为18c 因此在创建表的时候加上自增主键语法即可完成！</p> 
<h6><a id="____57"></a>① 备份数据 -&gt; 数据泵方式</h6> 
<p><code>数据泵</code> -&gt; <code>数据泵导出</code><br> <img src="https://images2.imgbox.com/bd/d8/BlMKbeoj_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/e7/81/dQPyXeft_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/a2/76/qOxfbjJ9_o.png" alt="在这里插入图片描述"></p> 
<h6><a id="_ideaddl_64"></a>② idea中如下查看ddl</h6> 
<p><img src="https://images2.imgbox.com/ad/e8/HIn2UWZ9_o.png" alt="在这里插入图片描述"><br> 然后将ddl拷贝到一个txt文本文件中保存<br> <img src="https://images2.imgbox.com/98/5c/EbINv0KV_o.png" alt="在这里插入图片描述"></p> 
<h6><a id="_ddl_69"></a>③ ddl文件内容替换自增主键工具类</h6> 
<blockquote> 
 <p><strong>温馨小提示：</strong><br> 这里小编数据库中的时间类型为 <code>DATE</code> 类型 需 改为 <code>TIMESTAMP</code> 类型 ，这个问题可以直接使用idea的替换功能完成修改~ ，其余修改可根据个人实际情况来进行修改<br> <img src="https://images2.imgbox.com/de/2e/dMeRMGPP_o.png" alt="在这里插入图片描述"></p> 
</blockquote> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MySQLToOracleTest</span> <span class="token punctuation">{<!-- --></span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span>String<span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">try</span> <span class="token punctuation">{<!-- --></span>
            <span class="token function">replaceDDLContent</span><span class="token punctuation">(</span><span class="token string">"D:\\Users\\zq\\Desktop\\oracle测试\\oracle_ddl.txt"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// TODO 这里修改为自己的ddl文件存放位置</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * 替换文本文件中的 自增主键ID
     *
     * @param path
     * @throws IOException
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">replaceDDLContent</span><span class="token punctuation">(</span>String path<span class="token punctuation">)</span> <span class="token keyword">throws</span> IOException <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 原有的内容</span>
        String srcStr <span class="token operator">=</span> <span class="token string">"not null"</span><span class="token punctuation">;</span>
        <span class="token comment">// 要替换的内容</span>
        String replaceStr <span class="token operator">=</span> <span class="token string">"GENERATED BY DEFAULT AS IDENTITY"</span><span class="token punctuation">;</span>
        <span class="token comment">// 读</span>
        File file <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>
        FileReader in <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileReader</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>
        BufferedReader bufIn <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferedReader</span><span class="token punctuation">(</span>in<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 内存流, 作为临时流</span>
        CharArrayWriter tempStream <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CharArrayWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 替换</span>
        String line <span class="token operator">=</span> null<span class="token punctuation">;</span>
        <span class="token comment">// 需要替换的行</span>
        Map<span class="token generics function"><span class="token punctuation">&lt;</span>Integer<span class="token punctuation">,</span> Object<span class="token punctuation">&gt;</span></span> lineMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token operator">&lt;</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token number">104</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//定义顺序变量</span>
        <span class="token keyword">int</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>line <span class="token operator">=</span> bufIn<span class="token punctuation">.</span><span class="token function">readLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> null<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            count<span class="token operator">++</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>line<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">"create table"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                lineMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>count <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">,</span> line<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            <span class="token comment">//遍历map中的键</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span>Integer key <span class="token operator">:</span> lineMap<span class="token punctuation">.</span><span class="token function">keySet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>count <span class="token operator">==</span> key <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>line<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">"NVARCHAR2"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
                    <span class="token comment">// TODO 在这里这是自增主键哦</span>
                    line <span class="token operator">=</span> line<span class="token punctuation">.</span><span class="token function">replaceAll</span><span class="token punctuation">(</span>srcStr<span class="token punctuation">,</span> replaceStr<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    lineMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>count<span class="token punctuation">,</span> line<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>

            <span class="token comment">// 将该行写入内存</span>
            tempStream<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>line<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// 添加换行符</span>
            tempStream<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>System<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">"line.separator"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// 关闭 输入流</span>
        bufIn<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 将内存中的流 写入 文件</span>
        FileWriter out <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileWriter</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>
        tempStream<span class="token punctuation">.</span><span class="token function">writeTo</span><span class="token punctuation">(</span>out<span class="token punctuation">)</span><span class="token punctuation">;</span>
        out<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"文件存放位置:"</span> <span class="token operator">+</span> path<span class="token punctuation">)</span><span class="token punctuation">;</span>
        System<span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>lineMap<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre> 
<h6><a id="_ddlidea_142"></a>④ 将替换过后的ddl拷贝到idea中的一个新控制台中运行创建表</h6> 
<p>全选ddl，然后点击左上角运行创建表 【 注：这里需先清空该库下所有表，因此步骤①要先备份一下从mysql迁移到oracle后的表数据，不要忘记哦！！】<br> <img src="https://images2.imgbox.com/68/9a/gxx2s4Yx_o.png" alt="在这里插入图片描述"><br> 等待表全部创建成功，如下所示：<br> <img src="https://images2.imgbox.com/5a/ee/3fZVhfCm_o.png" alt="在这里插入图片描述"></p> 
<h6><a id="__148"></a>⑤ 导入备份数据</h6> 
<p><code>数据泵</code> -&gt; <code>数据泵导入</code><br> <img src="https://images2.imgbox.com/ed/29/r5KUM3DK_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/cb/9c/G8oMph7e_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/49/43/ix034lIX_o.png" alt="在这里插入图片描述"></p> 
<h6><a id="__155"></a>⑥ 最后查看数据导入成功！</h6> 
<p><img src="https://images2.imgbox.com/ec/4c/tvcshWBH_o.png" alt="在这里插入图片描述"></p> 
<p>这时候，数据有了，自增主键也有了，但是存在一个问题就是插入数据的时候主键自增ID都是从1开始自增，如果表中没有数据都还ok，问题是如果表有数据，就会出现主键ID重复的问题！！！</p> 
<h5><a id="2IDID_161"></a>2、解决自增主键ID无法从表数据ID最大值开始增值</h5> 
<h6><a id="IDsql_163"></a>思路：拼接出修改表自增ID从几开始的sql即可！</h6> 
<pre><code class="prism language-sql"><span class="token keyword">SELECT</span>
	<span class="token string">'SELECT '</span><span class="token string">'ALTER TABLE SEWAGE_GY.'</span> <span class="token operator">||</span> t1<span class="token punctuation">.</span>table_name <span class="token operator">||</span> <span class="token string">' MODIFY('</span> <span class="token operator">||</span> t1<span class="token punctuation">.</span>Column_Name <span class="token operator">||</span> <span class="token string">' Generated as Identity (START WITH '</span><span class="token string">' || MAX( '</span> <span class="token operator">||</span> t1<span class="token punctuation">.</span>Column_Name <span class="token operator">||</span> <span class="token string">'+1 ) || '</span><span class="token string">'));'</span><span class="token string">' FROM '</span> <span class="token operator">||</span> t1<span class="token punctuation">.</span>table_name <span class="token operator">||</span> <span class="token string">' UNION ALL'</span> <span class="token keyword">AS</span> FINAL_SQL
<span class="token keyword">FROM</span> cols t1
<span class="token keyword">LEFT</span> <span class="token keyword">JOIN</span> user_col_comments t2 <span class="token keyword">ON</span> t1<span class="token punctuation">.</span>Table_name <span class="token operator">=</span> t2<span class="token punctuation">.</span>Table_name <span class="token operator">AND</span> t1<span class="token punctuation">.</span>Column_Name <span class="token operator">=</span> t2<span class="token punctuation">.</span>Column_Name
<span class="token keyword">LEFT</span> <span class="token keyword">JOIN</span> user_tab_comments t3 <span class="token keyword">ON</span> t1<span class="token punctuation">.</span>Table_name <span class="token operator">=</span> t3<span class="token punctuation">.</span>Table_name
<span class="token keyword">WHERE</span>
	<span class="token operator">NOT</span> <span class="token keyword">EXISTS</span> <span class="token punctuation">(</span>
        <span class="token keyword">SELECT</span> t4<span class="token punctuation">.</span>Object_Name
        <span class="token keyword">FROM</span> User_objects t4
        <span class="token keyword">WHERE</span>
            t4<span class="token punctuation">.</span>Object_Type <span class="token operator">=</span> <span class="token string">'TABLE'</span>
            <span class="token operator">AND</span> t4<span class="token punctuation">.</span><span class="token keyword">TEMPORARY</span> <span class="token operator">=</span> <span class="token string">'Y'</span>
            <span class="token operator">AND</span> t4<span class="token punctuation">.</span>Object_Name <span class="token operator">=</span> t1<span class="token punctuation">.</span>Table_Name
	<span class="token punctuation">)</span>
	<span class="token operator">AND</span> t1<span class="token punctuation">.</span>IDENTITY_COLUMN <span class="token operator">=</span> <span class="token string">'YES'</span>
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span> t1<span class="token punctuation">.</span>Table_Name<span class="token punctuation">,</span> t1<span class="token punctuation">.</span>Column_ID
</code></pre> 
<p>命令解析：</p> 
<pre><code class="prism language-sql"><span class="token comment"># 设置表主键ID从多少开始自增  ex:下面标识从10000开始自增</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> 数据库名<span class="token punctuation">.</span>表名 <span class="token keyword">MODIFY</span><span class="token punctuation">(</span>主键ID Generated <span class="token keyword">as</span> <span class="token keyword">Identity</span> <span class="token punctuation">(</span><span class="token keyword">START</span> <span class="token keyword">WITH</span> <span class="token number">10000</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment"># 查询该库下所有表名</span>
<span class="token keyword">SELECT</span> table_name <span class="token keyword">FROM</span> user_tables<span class="token punctuation">;</span>

<span class="token comment"># 查询出指定表的主键ID字段名</span>
<span class="token keyword">SELECT</span> t1<span class="token punctuation">.</span>table_name<span class="token punctuation">,</span>t1<span class="token punctuation">.</span>Column_Name
<span class="token keyword">FROM</span> cols t1
	<span class="token keyword">LEFT</span> <span class="token keyword">JOIN</span> user_col_comments t2 <span class="token keyword">ON</span> t1<span class="token punctuation">.</span>Table_name <span class="token operator">=</span> t2<span class="token punctuation">.</span>Table_name <span class="token operator">AND</span> t1<span class="token punctuation">.</span>Column_Name <span class="token operator">=</span> t2<span class="token punctuation">.</span>Column_Name
	<span class="token keyword">LEFT</span> <span class="token keyword">JOIN</span> user_tab_comments t3 <span class="token keyword">ON</span> t1<span class="token punctuation">.</span>Table_name <span class="token operator">=</span> t3<span class="token punctuation">.</span>Table_name 
<span class="token keyword">WHERE</span> <span class="token operator">NOT</span> <span class="token keyword">EXISTS</span> <span class="token punctuation">(</span>
		<span class="token keyword">SELECT</span> t4<span class="token punctuation">.</span>Object_Name 
		<span class="token keyword">FROM</span> User_objects t4 
		<span class="token keyword">WHERE</span> t4<span class="token punctuation">.</span>Object_Type <span class="token operator">=</span> <span class="token string">'TABLE'</span> 
			<span class="token operator">AND</span> t4<span class="token punctuation">.</span><span class="token keyword">TEMPORARY</span> <span class="token operator">=</span> <span class="token string">'Y'</span> 
			<span class="token operator">AND</span> t4<span class="token punctuation">.</span>Object_Name <span class="token operator">=</span> t1<span class="token punctuation">.</span>Table_Name 
	<span class="token punctuation">)</span> 
	<span class="token operator">AND</span> t1<span class="token punctuation">.</span>table_name <span class="token operator">=</span> <span class="token string">'表名'</span> 
	<span class="token operator">AND</span> t1<span class="token punctuation">.</span>IDENTITY_COLUMN <span class="token operator">=</span> <span class="token string">'YES'</span> 
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span> t1<span class="token punctuation">.</span>Table_Name<span class="token punctuation">,</span> t1<span class="token punctuation">.</span>Column_ID

<span class="token comment"># 查询该库下所有表名+表主键字段名</span>
<span class="token keyword">SELECT</span> t1<span class="token punctuation">.</span>table_name<span class="token punctuation">,</span>t1<span class="token punctuation">.</span>Column_Name
<span class="token keyword">FROM</span> cols t1
	<span class="token keyword">LEFT</span> <span class="token keyword">JOIN</span> user_col_comments t2 <span class="token keyword">ON</span> t1<span class="token punctuation">.</span>Table_name <span class="token operator">=</span> t2<span class="token punctuation">.</span>Table_name <span class="token operator">AND</span> t1<span class="token punctuation">.</span>Column_Name <span class="token operator">=</span> t2<span class="token punctuation">.</span>Column_Name
	<span class="token keyword">LEFT</span> <span class="token keyword">JOIN</span> user_tab_comments t3 <span class="token keyword">ON</span> t1<span class="token punctuation">.</span>Table_name <span class="token operator">=</span> t3<span class="token punctuation">.</span>Table_name 
<span class="token keyword">WHERE</span> <span class="token operator">NOT</span> <span class="token keyword">EXISTS</span> <span class="token punctuation">(</span>
		<span class="token keyword">SELECT</span> t4<span class="token punctuation">.</span>Object_Name 
		<span class="token keyword">FROM</span> User_objects t4 
		<span class="token keyword">WHERE</span> t4<span class="token punctuation">.</span>Object_Type <span class="token operator">=</span> <span class="token string">'TABLE'</span> 
			<span class="token operator">AND</span> t4<span class="token punctuation">.</span><span class="token keyword">TEMPORARY</span> <span class="token operator">=</span> <span class="token string">'Y'</span> 
			<span class="token operator">AND</span> t4<span class="token punctuation">.</span>Object_Name <span class="token operator">=</span> t1<span class="token punctuation">.</span>Table_Name 
	<span class="token punctuation">)</span> 
	<span class="token operator">AND</span> t1<span class="token punctuation">.</span>IDENTITY_COLUMN <span class="token operator">=</span> <span class="token string">'YES'</span> 
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span> t1<span class="token punctuation">.</span>Table_Name<span class="token punctuation">,</span> t1<span class="token punctuation">.</span>Column_ID
</code></pre> 
<p><img src="https://images2.imgbox.com/5b/36/X6Ac9CAg_o.png" alt="在这里插入图片描述"><br> 拷贝到新的控制台后注意删除最后一个 <code>UNION ALL</code> 再运行哦！！！<br> <img src="https://images2.imgbox.com/8c/74/gXH7j2j5_o.png" alt="在这里插入图片描述"><br> 最终完成自增主键ID从表数据最大值开始自增！<br> <img src="https://images2.imgbox.com/95/42/titdGkZC_o.png" alt="在这里插入图片描述"></p> 
<h5><a id="3sql_231"></a>3、程序中的sql语句转换</h5> 
<p>这里结合个人语言实际操作…</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/d0c0c50a93ffe6ad80664dfa067c1d74/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">cookie存取信息</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/22a9889144f8316db1bfeb865191dbb6/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">关于运行scrapy项目时提示 ModuleNotFoundError: No module named &#39;pymongo‘的解决方案</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>