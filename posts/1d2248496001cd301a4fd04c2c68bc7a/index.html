<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>五、磁盘管理与文件系统 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="五、磁盘管理与文件系统" />
<meta property="og:description" content="目录
1、磁盘概述
MBR与磁盘的分区表示
主启动记录（MBR）磁盘分区
文件系统类型
开始敲
检测并确认新硬盘
fdisk命令
如何规划硬盘分区
创建文件系统
挂载、卸载文件系统
mkswap命令 (创建交换文件系统)
设置文件系统的自动挂载 1、磁盘概述 磁盘的物理结构
盘片 （硬盘有多少个盘片，每盘片2面） 磁头（每面一个磁头）
磁盘的数据结构
扇区：盘片被分为多个扇形区域，每个扇区存放512字节的数据，硬盘的最小储存单位
磁道：同一盘片不同半径的同心圆，是由磁头在盘片表面划出的圆形轨迹
柱面：不同盘片相同半径构成的圆柱面，由同一半径圆的多个磁道组成
硬盘存储容量=磁头数 x 磁道（柱面）数 x 每道扇区数 x 每扇区字节数（512字节）
可以用柱面/磁头/扇区来唯一定位磁盘上每一个区域
硬盘接口类型
IDE：并口数据线连接主板与硬盘，抗干扰性太差，且排线占用空间较大，不利电脑内部散热，已逐渐被 SATA 所取代
SATA：抗干扰性强，支持热插拔等功能，速度快，纠错能力强
SCSI：小型机系统接口，SCSI硬盘广为工作站级个人电脑以及服务器所使用，资料传输时CPU占用率较低，转速快，支持热插拔等。
SAS：是新一代的SCSI技术，和SATA硬盘相同，都是采取序列式技术以获得更高的传输速度，可达到 6Gb/s。
MBR与磁盘的分区表示 主引导记录（MBR:Master Boot Record）
MBR位于硬盘第一个物理扇区处（512字节）
MBR中包含硬盘的主引导程序和硬盘分区表
分区表有四个分区记录区，每个分区记录区占16个字节
Linux中讲硬盘。分区等设备均表示为文件
磁盘分区结构
硬盘中的主分区数目只有四个
主分区和扩展分区的序号限制在1~4
扩展分区再分为逻辑分区
逻辑分区的序列号将始终从5开始
主启动记录（MBR）磁盘分区 MBR是主引导记录，位于硬盘第一个物理扇区处，MBR中包含硬盘的主引导程序和硬盘分区表。MBR总共512字节，
前446字节是主引导记录，分区表保存在MBR扇区中的第447-510字节中。分区表有4个分区记录区，每个分区记录区占16字节。
主启动记录(MBR)磁盘分区支持最大卷为2.2TB，每个磁盘最多有4个主分区，或3个主分区、1个扩展分区和在扩展分区里面分多个逻辑分区)。
文件系统类型 XFS文件系统
存放文件和目录数据的分区
高性能的日志型文件系统，特别擅长于处理大文件，可支持上百万TB的存储空间
CentOS 7系统中默认使用的文件系统
SWAP，交换文件系统
为Linux 系统建立交换分区
一般设置为物理内存的1.5~2倍
Linux支持的其他文件系统类型
EXT4、JFS、 FAT16、 FAT32、 NTFS、" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/1d2248496001cd301a4fd04c2c68bc7a/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-04-01T23:48:09+08:00" />
<meta property="article:modified_time" content="2022-04-01T23:48:09+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">五、磁盘管理与文件系统</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p id="main-toc"><strong>目录</strong></p> 
<p id="-toc" style="margin-left:0px;"></p> 
<p id="-toc" style="margin-left:0px;"></p> 
<p id="1%E3%80%81%E7%A3%81%E7%9B%98%E6%A6%82%E8%BF%B0-toc" style="margin-left:0px;"><a href="#1%E3%80%81%E7%A3%81%E7%9B%98%E6%A6%82%E8%BF%B0" rel="nofollow">1、磁盘概述</a></p> 
<p id="%C2%A0MBR%E4%B8%8E%E7%A3%81%E7%9B%98%E7%9A%84%E5%88%86%E5%8C%BA%E8%A1%A8%E7%A4%BA-toc" style="margin-left:0px;"><a href="#%C2%A0MBR%E4%B8%8E%E7%A3%81%E7%9B%98%E7%9A%84%E5%88%86%E5%8C%BA%E8%A1%A8%E7%A4%BA" rel="nofollow"> MBR与磁盘的分区表示</a></p> 
<p id="%C2%A0%E4%B8%BB%E5%90%AF%E5%8A%A8%E8%AE%B0%E5%BD%95%EF%BC%88MBR%EF%BC%89%E7%A3%81%E7%9B%98%E5%88%86%E5%8C%BA-toc" style="margin-left:0px;"><a href="#%C2%A0%E4%B8%BB%E5%90%AF%E5%8A%A8%E8%AE%B0%E5%BD%95%EF%BC%88MBR%EF%BC%89%E7%A3%81%E7%9B%98%E5%88%86%E5%8C%BA" rel="nofollow"> 主启动记录（MBR）磁盘分区</a></p> 
<p id="%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E7%B1%BB%E5%9E%8B-toc" style="margin-left:0px;"><a href="#%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E7%B1%BB%E5%9E%8B" rel="nofollow">文件系统类型</a></p> 
<p id="%E5%BC%80%E5%A7%8B%E6%95%B2-toc" style="margin-left:0px;"><a href="#%E5%BC%80%E5%A7%8B%E6%95%B2" rel="nofollow">开始敲</a></p> 
<p id="%E6%A3%80%E6%B5%8B%E5%B9%B6%E7%A1%AE%E8%AE%A4%E6%96%B0%E7%A1%AC%E7%9B%98-toc" style="margin-left:40px;"><a href="#%E6%A3%80%E6%B5%8B%E5%B9%B6%E7%A1%AE%E8%AE%A4%E6%96%B0%E7%A1%AC%E7%9B%98" rel="nofollow">检测并确认新硬盘</a></p> 
<p id="fdisk%E5%91%BD%E4%BB%A4-toc" style="margin-left:40px;"><a href="#fdisk%E5%91%BD%E4%BB%A4" rel="nofollow">fdisk命令</a></p> 
<p id="%E5%A6%82%E4%BD%95%E8%A7%84%E5%88%92%E7%A1%AC%E7%9B%98%E5%88%86%E5%8C%BA-toc" style="margin-left:40px;"><a href="#%E5%A6%82%E4%BD%95%E8%A7%84%E5%88%92%E7%A1%AC%E7%9B%98%E5%88%86%E5%8C%BA" rel="nofollow">如何规划硬盘分区</a></p> 
<p id="%E5%88%9B%E5%BB%BA%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F-toc" style="margin-left:0px;"><a href="#%E5%88%9B%E5%BB%BA%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F" rel="nofollow">创建文件系统</a></p> 
<p id="%E6%8C%82%E8%BD%BD%E3%80%81%E5%8D%B8%E8%BD%BD%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F-toc" style="margin-left:0px;"><a href="#%E6%8C%82%E8%BD%BD%E3%80%81%E5%8D%B8%E8%BD%BD%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F" rel="nofollow">挂载、卸载文件系统</a></p> 
<p id="%C2%A0mkswap%E5%91%BD%E4%BB%A4%20(%E5%88%9B%E5%BB%BA%E4%BA%A4%E6%8D%A2%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F)-toc" style="margin-left:40px;"><a href="#%C2%A0mkswap%E5%91%BD%E4%BB%A4%20%28%E5%88%9B%E5%BB%BA%E4%BA%A4%E6%8D%A2%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%29" rel="nofollow"> mkswap命令 (创建交换文件系统)</a></p> 
<p id="%E8%AE%BE%E7%BD%AE%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E7%9A%84%E8%87%AA%E5%8A%A8%E6%8C%82%E8%BD%BD%C2%A0-toc" style="margin-left:0px;"><a href="#%E8%AE%BE%E7%BD%AE%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E7%9A%84%E8%87%AA%E5%8A%A8%E6%8C%82%E8%BD%BD%C2%A0" rel="nofollow">设置文件系统的自动挂载 </a></p> 
<hr id="hr-toc"> 
<p></p> 
<h2></h2> 
<h2></h2> 
<h2 id="1%E3%80%81%E7%A3%81%E7%9B%98%E6%A6%82%E8%BF%B0">1、磁盘概述</h2> 
<p><strong>磁盘的物理结构</strong></p> 
<p><span style="color:#fe2c24;">盘片 </span>（硬盘有多少个盘片，每盘片2面）   <span style="color:#fe2c24;">磁头</span>（每面一个磁头）</p> 
<p><span style="color:#0d0016;"><strong>磁盘的数据结构</strong></span></p> 
<p><span style="color:#fe2c24;">扇区：</span>盘片被分为多个扇形区域，每个扇区存放512字节的数据，硬盘的最小储存单位</p> 
<p><span style="color:#fe2c24;">磁道：</span>同一盘片不同半径的同心圆，是由磁头在盘片表面划出的圆形轨迹</p> 
<p><span style="color:#fe2c24;">柱面：</span>不同盘片相同半径构成的圆柱面，由同一半径圆的多个磁道组成</p> 
<p>硬盘存储容量=磁头数 x <em>磁道（柱面）数   x   </em>每道扇区数  x  每扇区字节数（512字节）</p> 
<p>可以用柱面/磁头/扇区来唯一定位磁盘上每一个区域</p> 
<p><strong>硬盘接口类型</strong></p> 
<p><strong>IDE：并口数据线连接主板与硬盘，抗干扰性太差，且排线占用空间较大，不利电脑内部散热，已逐渐被 SATA 所取代<br>  SATA：抗干扰性强，支持热插拔等功能，速度快，纠错能力强<br>  SCSI：小型机系统接口，SCSI硬盘广为工作站级个人电脑以及服务器所使用，资料传输时CPU占用率较低，转速快，支持热插拔等。<br>  SAS：是新一代的SCSI技术，和SATA硬盘相同，都是采取序列式技术以获得更高的传输速度，可达到 6Gb/s。</strong></p> 
<h2 id="%C2%A0MBR%E4%B8%8E%E7%A3%81%E7%9B%98%E7%9A%84%E5%88%86%E5%8C%BA%E8%A1%A8%E7%A4%BA"> MBR与磁盘的分区表示</h2> 
<p><strong>主引导记录（MBR:Master  Boot  Record）</strong></p> 
<p>MBR位于硬盘第一个物理扇区处（512字节）</p> 
<p>MBR中包含硬盘的主引导程序和硬盘分区表</p> 
<p>分区表有四个分区记录区，每个分区记录区占16个字节</p> 
<p><strong>Linux中讲硬盘。分区等设备均表示为文件</strong></p> 
<p><img alt="" height="265" src="https://images2.imgbox.com/14/90/GLD2yoT1_o.png" width="594"></p> 
<p> <strong>磁盘分区结构</strong></p> 
<p>硬盘中的主分区数目只有四个</p> 
<p>主分区和扩展分区的序号限制在1~4</p> 
<p>扩展分区再分为逻辑分区</p> 
<p>逻辑分区的序列号将始终从5开始</p> 
<p><img alt="" height="411" src="https://images2.imgbox.com/b8/62/5Qp06Y74_o.png" width="791"></p> 
<h2 id="%C2%A0%E4%B8%BB%E5%90%AF%E5%8A%A8%E8%AE%B0%E5%BD%95%EF%BC%88MBR%EF%BC%89%E7%A3%81%E7%9B%98%E5%88%86%E5%8C%BA"> 主启动记录（MBR）磁盘分区</h2> 
<p>MBR是主引导记录，位于硬盘第一个物理扇区处，MBR中包含硬盘的主引导程序和硬盘分区表。MBR总共512字节，<br> 前446字节是主引导记录，分区表保存在MBR扇区中的第447-510字节中。分区表有4个分区记录区，每个分区记录区占16字节。<br> 主启动记录(MBR)磁盘分区支持最大卷为2.2TB，每个磁盘最多有4个主分区，或3个主分区、1个扩展分区和在扩展分区里面分多个逻辑分区)。</p> 
<h2 id="%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E7%B1%BB%E5%9E%8B">文件系统类型</h2> 
<p><strong>XFS文件系统</strong></p> 
<p>存放文件和目录数据的分区</p> 
<p>高性能的日志型文件系统，特别擅长于处理大文件，可支持上百万TB的存储空间</p> 
<p>CentOS 7系统中默认使用的文件系统</p> 
<p><strong>SWAP，交换文件系统</strong></p> 
<p><span style="color:#fe2c24;">为Linux 系统建立交换分区</span></p> 
<p>一般设置为物理内存的1.5~2倍</p> 
<p><strong>Linux支持的其他文件系统类型</strong></p> 
<p>EXT4、JFS、       FAT16、  FAT32、 NTFS、</p> 
<h2 id="%E5%BC%80%E5%A7%8B%E6%95%B2">开始敲</h2> 
<h3 id="%E6%A3%80%E6%B5%8B%E5%B9%B6%E7%A1%AE%E8%AE%A4%E6%96%B0%E7%A1%AC%E7%9B%98">检测并确认新硬盘</h3> 
<h3 id="fdisk%E5%91%BD%E4%BB%A4"><strong>fdisk命令</strong></h3> 
<p>查看或管理磁盘分区</p> 
<p><span style="color:#fe2c24;">fdisk   -l （磁盘设备）</span></p> 
<p>或者</p> 
<p><span style="color:#fe2c24;">fdisk （磁盘设备）</span></p> 
<p><img alt="" height="274" src="https://images2.imgbox.com/c7/db/s6ObIhpz_o.png" width="899"></p> 
<p> 引导分区  起始分区  结束分区  块大小  分区所对应的系统ID号   系统类型</p> 
<p><strong>交互模式中的常用指令</strong></p> 
<p>m：获取帮助菜单</p> 
<p>n：新建分区</p> 
<p>p：查看分区情况</p> 
<p>d：删除分区</p> 
<p>t：变更分区的类型</p> 
<p>w：保存分区操作并退出</p> 
<p>q：不保存分区操作并退出</p> 
<h3 id="%E5%A6%82%E4%BD%95%E8%A7%84%E5%88%92%E7%A1%AC%E7%9B%98%E5%88%86%E5%8C%BA">如何规划硬盘分区</h3> 
<p>先在虚拟机里面</p> 
<p><img alt="" height="458" src="https://images2.imgbox.com/e7/d7/BxzcSgVN_o.png" width="741"></p> 
<p>删除分区<img alt="" height="126" src="https://images2.imgbox.com/a1/78/dBHYqGuA_o.png" width="294"></p> 
<p></p> 
<h2 id="%E5%88%9B%E5%BB%BA%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F">创建文件系统</h2> 
<p><strong>mkfs命令</strong></p> 
<p>Make Filesystem，创建文件系统（格式化）</p> 
<p>mkfs -t 文件系统类型 分区设备 </p> 
<p><img alt="" height="309" src="https://images2.imgbox.com/92/45/OsAKsiZr_o.png" width="816"></p> 
<p style="margin-left:.0001pt;text-align:justify;">df -h查看挂载信息， 一定没有，创建一个目录,设置挂载</p> 
<h2 id="%E6%8C%82%E8%BD%BD%E3%80%81%E5%8D%B8%E8%BD%BD%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F">挂载、卸载文件系统</h2> 
<p><strong>mount命令</strong></p> 
<p>挂载文件系统、ISO镜像到指定文件夹</p> 
<p>mount [-t 类型] 存储设备 挂载点目录</p> 
<p>mount -o loop ISO 镜像文件 挂载点目录</p> 
<p><img alt="" height="342" src="https://images2.imgbox.com/5e/19/6v0pZDYc_o.png" width="635"></p> 
<p> 试验一下</p> 
<p><img alt="" height="95" src="https://images2.imgbox.com/8f/d7/TTQnqreg_o.png" width="393"></p> 
<p><strong>umount命令</strong></p> 
<p>卸载已挂载的文件系统<br> 注：退出当前挂载的目录 （对比上面，卸载完就没有了）</p> 
<p><img alt="" height="263" src="https://images2.imgbox.com/dc/e1/X57SM8xB_o.png" width="635"></p> 
<h3 id="%C2%A0mkswap%E5%91%BD%E4%BB%A4%20(%E5%88%9B%E5%BB%BA%E4%BA%A4%E6%8D%A2%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F)"> <strong>mkswap命令 (创建交换文件系统)</strong></h3> 
<p><strong>进入交换界面（p查看一下）</strong></p> 
<p><img alt="" height="319" src="https://images2.imgbox.com/90/f8/WiJ1pQch_o.png" width="655"></p> 
<p> 想要改swap，创建交换文件系统，l查看，可知82号</p> 
<p><img alt="" height="242" src="https://images2.imgbox.com/55/51/xmyd4nmm_o.png" width="837"></p> 
<p> 我想改第二个分区。使用t改成82，再查看</p> 
<p><img alt="" height="394" src="https://images2.imgbox.com/8e/c1/7LZdtmnq_o.png" width="688"></p> 
<p> 然后直接w保存就好了</p> 
<p>然后我们要格式化这个分区</p> 
<p><img alt="" height="99" src="https://images2.imgbox.com/fe/ba/7RGdZzCf_o.png" width="552"></p> 
<p> 有一个启动系统交换区（swapon）</p> 
<p>在查看lsclk </p> 
<p><img alt="" height="298" src="https://images2.imgbox.com/17/8f/SyvZvUSh_o.png" width="909"></p> 
<p>swapon -s</p> 
<p><img alt="" height="156" src="https://images2.imgbox.com/48/cd/NrObaonQ_o.png" width="955"></p> 
<p> 友好方式查看内存与不友好区别</p> 
<p><img alt="" height="328" src="https://images2.imgbox.com/17/9d/c6jTmZpz_o.png" width="842"></p> 
<p> 关闭交换分区</p> 
<p><img alt="" height="61" src="https://images2.imgbox.com/55/b8/1Tq9Yz21_o.png" width="408"></p> 
<h2 id="%E8%AE%BE%E7%BD%AE%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E7%9A%84%E8%87%AA%E5%8A%A8%E6%8C%82%E8%BD%BD%C2%A0">设置文件系统的自动挂载 </h2> 
<p>  <span style="color:#fe2c24;"><strong> /etc/fstab配置文件</strong></span></p> 
<p>   包含需要开机后自动挂载的文件系统记录（相当于Linux操作系统在每次开机时，会自动读取/etc/fstab文件的内容，自动挂载所指定的文件系统）<img alt="" height="362" src="https://images2.imgbox.com/c0/0a/cLGvZxpq_o.png" width="661"></p> 
<p></p> 
<p></p> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/a771b28ab2aa310e8e33329cfdff64f2/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">net 6框架下的EF Core操作数据库表操作基本增删改查</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/0d716d8f6f726a297fdf7c9d9ac85590/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">hadoop搭建-------大数据平台</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>