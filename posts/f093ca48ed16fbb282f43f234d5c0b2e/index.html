<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>正点原子IMX6ULL阿尔法开发板点亮LED - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="正点原子IMX6ULL阿尔法开发板点亮LED" />
<meta property="og:description" content="目录
一、准备工作
二、编写程序，使得LED能让我们控制
三、开发板上运行可执行程序
四、作者自述
一、准备工作 1.开发板为出厂时的镜像时不需要进行修改
2.开发板不为出厂时的镜像时需要进行修改，改回原来的系统镜像。
(1)官网下载LINUX阿尔法A盘资料
(2)找到开发工具
(2) 进入到【正点原子】阿尔法Linux开发板（A盘）-基础资料(1)\05、开发工具\04、正点原子MFG_TOOL出厂固件烧录工具\mfgtool目录下双击运行Mfgtool2-eMMC-ddr512-eMMC.vbs烧写原来的系统镜像：如下所示
tips：根据自己开发板是ddr大小和烧写的去向做选择，我这里使用的时emmc版本，ddr为512,所以我选择上述工具。
(3)数据线连接OTG接口，拨码开关拨到USB启动，出现如下所示方为正常，即可点击下载
tips：镜像烧录过程中会出现短暂识别不到USB，这为正常现象，静静等待烧录完成即可。
(4)镜像烧写完成标志，如下所示：
(5)将拨码开关重新拨到emmc启动，重启开发板即可，出现以下信息为进入系统成功。
二、编写程序，使得LED能让我们控制 1.程序代码如下:
#include &lt;stdio.h&gt; #include &lt;stdlib.h&gt; #include &lt;string.h&gt; #include &lt;unistd.h&gt; #include &lt;fcntl.h&gt; #include &lt;sys/stat.h&gt; #include &lt;sys/types.h&gt; //触发方式 #define LED_TRIGGER &#34;/sys/class/leds/sys-led/trigger&#34; //亮度等级 #define LED_BRIGHTNESS &#34;/sys/class/leds/sys-led/brightness&#34; #define USAGE() fprintf(stderr,&#34;usage:\n&#34;&#34; %s&lt;on|off&gt;\n&#34;&#34; %s&lt;trigger&gt;&lt;type&gt;\n&#34;,\ argv[0],argv[0]) int main(int argc,char* argv[]) { int fd1,fd2,ret; //检验传参 if(argc &lt; 2) { USAGE(); exit(-1); } //打开文件 fd1 = open(LED_TRIGGER,O_RDWR); if(fd1 == -1) { perror(&#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/f093ca48ed16fbb282f43f234d5c0b2e/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-06-12T17:03:14+08:00" />
<meta property="article:modified_time" content="2023-06-12T17:03:14+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">正点原子IMX6ULL阿尔法开发板点亮LED</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p id="main-toc"><strong>目录</strong></p> 
<p id="-toc" style="margin-left:40px;"></p> 
<p id="%E4%B8%80%E3%80%81%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C-toc" style="margin-left:40px;"><a href="#%E4%B8%80%E3%80%81%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C" rel="nofollow">一、准备工作</a></p> 
<p id="%E4%BA%8C%E3%80%81%E7%BC%96%E5%86%99%E7%A8%8B%E5%BA%8F%EF%BC%8C%E4%BD%BF%E5%BE%97LED%E8%83%BD%E8%AE%A9%E6%88%91%E4%BB%AC%E6%8E%A7%E5%88%B6-toc" style="margin-left:40px;"><a href="#%E4%BA%8C%E3%80%81%E7%BC%96%E5%86%99%E7%A8%8B%E5%BA%8F%EF%BC%8C%E4%BD%BF%E5%BE%97LED%E8%83%BD%E8%AE%A9%E6%88%91%E4%BB%AC%E6%8E%A7%E5%88%B6" rel="nofollow">二、编写程序，使得LED能让我们控制</a></p> 
<p id="%E4%B8%89%E3%80%81%E5%BC%80%E5%8F%91%E6%9D%BF%E4%B8%8A%E8%BF%90%E8%A1%8C%E5%8F%AF%E6%89%A7%E8%A1%8C%E7%A8%8B%E5%BA%8F-toc" style="margin-left:40px;"><a href="#%E4%B8%89%E3%80%81%E5%BC%80%E5%8F%91%E6%9D%BF%E4%B8%8A%E8%BF%90%E8%A1%8C%E5%8F%AF%E6%89%A7%E8%A1%8C%E7%A8%8B%E5%BA%8F" rel="nofollow">三、开发板上运行可执行程序</a></p> 
<p id="%E5%9B%9B%E3%80%81%E4%BD%9C%E8%80%85%E8%87%AA%E8%BF%B0-toc" style="margin-left:40px;"><a href="#%E5%9B%9B%E3%80%81%E4%BD%9C%E8%80%85%E8%87%AA%E8%BF%B0" rel="nofollow">四、作者自述</a></p> 
<hr id="hr-toc"> 
<p></p> 
<h3 id="%E4%B8%80%E3%80%81%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C"><span style="color:#0d0016;">一、准备工作</span></h3> 
<p><span style="color:#0d0016;">1.开发板为出厂时的镜像时不需要进行修改</span></p> 
<p><span style="color:#0d0016;">2.开发板不为出厂时的镜像时需要进行修改，改回原来的系统镜像。</span></p> 
<p>(1)官网下载LINUX阿尔法A盘资料</p> 
<p>(2)找到开发工具</p> 
<p><img alt="" height="835" src="https://images2.imgbox.com/a9/c6/RWIrxFgZ_o.png" width="1200"></p> 
<p>(2) 进入到【正点原子】阿尔法Linux开发板（A盘）-基础资料(1)\05、开发工具\04、正点原子MFG_TOOL出厂固件烧录工具\mfgtool目录下双击运行Mfgtool2-eMMC-ddr512-eMMC.vbs烧写原来的系统镜像：如下所示</p> 
<p><img alt="" height="860" src="https://images2.imgbox.com/0d/d0/F0SSaIsm_o.png" width="1200"></p> 
<p><span style="color:#fe2c24;"> tips：</span><span style="color:#0d0016;">根据自己开发板是ddr大小和烧写的去向做选择，我这里使用的时emmc版本，ddr为512,所以我选择上述工具。</span></p> 
<p>(3)数据线连接OTG接口，拨码开关拨到USB启动，出现如下所示方为正常，即可点击下载</p> 
<p><img alt="" height="180" src="https://images2.imgbox.com/a8/66/5fJlIj0l_o.png" width="434"></p> 
<p><span style="color:#fe2c24;">tips：</span>镜像烧录过程中会出现短暂识别不到USB，这为正常现象，静静等待烧录完成即可。</p> 
<p>(4)镜像烧写完成标志，如下所示：</p> 
<p><img alt="" height="168" src="https://images2.imgbox.com/5c/25/Te2aeYGv_o.png" width="409"></p> 
<p>(5)将拨码开关重新拨到emmc启动，重启开发板即可，出现以下信息为进入系统成功。</p> 
<p><img alt="" height="846" src="https://images2.imgbox.com/d8/e9/nljjiwYy_o.png" width="1200"></p> 
<h3 id="%E4%BA%8C%E3%80%81%E7%BC%96%E5%86%99%E7%A8%8B%E5%BA%8F%EF%BC%8C%E4%BD%BF%E5%BE%97LED%E8%83%BD%E8%AE%A9%E6%88%91%E4%BB%AC%E6%8E%A7%E5%88%B6">二、编写程序，使得LED能让我们控制</h3> 
<p>1.程序代码如下:</p> 
<pre><code>#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;string.h&gt;
#include &lt;unistd.h&gt;
#include &lt;fcntl.h&gt;
#include &lt;sys/stat.h&gt;
#include &lt;sys/types.h&gt;

//触发方式
#define LED_TRIGGER     "/sys/class/leds/sys-led/trigger"
//亮度等级
#define LED_BRIGHTNESS  "/sys/class/leds/sys-led/brightness"
#define USAGE()     fprintf(stderr,"usage:\n""   %s&lt;on|off&gt;\n""   %s&lt;trigger&gt;&lt;type&gt;\n",\
                            argv[0],argv[0])

int main(int argc,char* argv[])
{
    int fd1,fd2,ret;

    //检验传参
    if(argc &lt; 2)
    {
        USAGE();
        exit(-1);
    }

    //打开文件
    fd1 = open(LED_TRIGGER,O_RDWR);
    if(fd1 == -1)
    {
        perror("open error1");
        exit(-1);
    }

    fd2 = open(LED_BRIGHTNESS,O_RDWR);
    if(fd2 == -1)
    {
        perror("open error2");
        ret = -1;
        goto out1;
    }

    //根据传参控制LED
    if(strcmp(argv[1],"on") == 0) //使用字符串比较函数,相等返回0
    {
        //修改触发方式，无触发none
        write(fd1,"none",4);
        //修改亮度等级为1
        write(fd2,"1",1);
    }
    else if(strcmp(argv[1],"off") == 0)
    {
        //修改触发方式，无触发none
        write(fd1,"none",4);
        //修改亮度等级为0
        write(fd2,"0",1);
    }
    else if(strcmp(argv[1],"trigger") == 0)
    {
        //检验传参
        if(argc != 3)
        {
            USAGE();
            ret = -1;
            goto out2;
        }

        //修改触发方式
        if(write(fd1,argv[2],strlen(argv[2])) &lt; 0)
        {
            perror("write error");
            ret = -1;
            goto out2;
        }
    }
    else
    {
        USAGE();
    }
    
    

out2:
    close(fd2);
out1:
    close(fd1);
    exit(-1);
}</code></pre> 
<p>2.编译可执行文件</p> 
<p>        因为我是在X86架构CPU上写的LED程序，但是我们要在ARM架构上运行这个可执行文件，GCC编译出来的可执行文件为x86类型，所以我们得使用交叉编译工具在X86架构上编译程ARM架构的可执行文件。交叉编译工具可以参考《正点原子驱动开发指南》pdf的163页，详细的去讲述了如何去安装这个交叉编译工具。</p> 
<p>3.生成可执行文件如下所示：</p> 
<p><img alt="" height="129" src="https://images2.imgbox.com/b4/3e/B3aHOgBl_o.png" width="1084"></p> 
<h3 id="%E4%B8%89%E3%80%81%E5%BC%80%E5%8F%91%E6%9D%BF%E4%B8%8A%E8%BF%90%E8%A1%8C%E5%8F%AF%E6%89%A7%E8%A1%8C%E7%A8%8B%E5%BA%8F">三、开发板上运行可执行程序</h3> 
<p>1.将可执行程序放到开发板上</p> 
<p>(1)本实验这里使用的是nfs和tftp进行网络下载。将可执行程序拷贝到文件系统目录下即可。</p> 
<p><img alt="" height="73" src="https://images2.imgbox.com/59/9f/sswZsR96_o.png" width="744"></p> 
<p>(2)查看开发板上有无这个文件，如下所示：</p> 
<p><img alt="" height="86" src="https://images2.imgbox.com/48/ce/cKobSlpH_o.png" width="1004"></p> 
<p> (3)点亮LED灯</p> 
<p><img alt="" height="39" src="https://images2.imgbox.com/a9/98/bHlVJQBO_o.png" width="602"></p> 
<p><span style="color:#fe2c24;"> tips：</span>亮红色的为可程序控制的LED灯<img alt="" height="1200" src="https://images2.imgbox.com/af/42/H7GV2vsB_o.jpg" width="1200"></p> 
<p><span style="color:#0d0016;"> 2.其它方法</span></p> 
<p>        将可执行文件放到【正点原子】阿尔法Linux开发板（A盘）-基础资料(1)\05、开发工具\04、正点原子MFG_TOOL出厂固件烧录工具\mfgtool\Profiles\Linux\OS Firmware\files\filesystem目录下的rootfs.tar.bz2压缩包里。然后回到文章开头重新对它进行烧录即可。</p> 
<p><img alt="" height="552" src="https://images2.imgbox.com/d7/49/9hNakYOy_o.png" width="1200"> </p> 
<h3 id="%E5%9B%9B%E3%80%81%E4%BD%9C%E8%80%85%E8%87%AA%E8%BF%B0">四、作者自述</h3> 
<p>        文章只是记录一下生活，文章有错的地方欢迎指出。</p> 
<p></p> 
<p></p> 
<p></p> 
<p></p> 
<p></p> 
<p></p> 
<p></p> 
<p></p> 
<p></p> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/822e103162a87a671e025e3fdf219b95/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">springboot整合quartz实现定时任务动态增删改查</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/ef156de1946a63cdd9b0ca4db2114fd7/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">设计模式之抽象工厂设计模式</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>