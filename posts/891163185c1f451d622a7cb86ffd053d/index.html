<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Mybatis的插件 PageHelper 分页查询使用方法 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Mybatis的插件 PageHelper 分页查询使用方法" />
<meta property="og:description" content="Mybatis的一个插件，PageHelper，非常方便mybatis分页查询。国内牛人的一个开源项目，有兴趣的可以去看源码，都有中文注释（ps：某些源码一大堆英文，痛哭流涕！）
在github上仓库地址为：Mybatis-PageHelper
它支持基本主流与常用的数据库，这可以在它的文档上看到。这里记录一下使用的基本方法
0.查看文档与使用准备 开发文档有中文文档也有英文文档
PageHelper官方文档
============================================
====================================================================================
1.配置拦截器插件 这个是配置在mybatis-config.xml文件中
文档中的示例：
&lt;!-- plugins在配置文件中的位置必须符合要求，否则会报错，顺序如下: properties?, settings?, typeAliases?, typeHandlers?, objectFactory?,objectWrapperFactory?, plugins?, environments?, databaseIdProvider?, mappers? --&gt; &lt;plugins&gt; &lt;!-- com.github.pagehelper为PageHelper类所在包名 --&gt; &lt;plugin interceptor=&#34;com.github.pagehelper.PageInterceptor&#34;&gt; &lt;!-- 使用下面的方式配置参数，后面会有所有的参数介绍 --&gt; &lt;property name=&#34;param1&#34; value=&#34;value1&#34;/&gt; &lt;/plugin&gt; &lt;/plugins&gt; 我的配置：
&lt;plugins&gt; &lt;plugin interceptor=&#34;com.github.pagehelper.PageInterceptor&#34;&gt; &lt;!-- config params as the following --&gt; &lt;!--&lt;!–分页参数合理化 –&gt;--&gt; &lt;property name=&#34;reasonable&#34; value=&#34;true&#34;/&gt; &lt;/plugin&gt; &lt;/plugins&gt; 一些配置参数的说明可以参考文档： 【分页插件参数介绍】
这里就说明一下reasonable的配置：
reasonable：分页合理化参数，默认值为false。当该参数设置为 true 时，pageNum&lt;=0 时会查询第一页，pageNum&gt;pages（超过总数时），会查询最后一页。默认false 时，直接根据参数进行查询。
那么如何选择这些配置参数，文档中也给出了详细说明：【如何选择配置这些参数】
2.在代码中使用 官方文档也有这部分说明和案例，那么我就以自己的使用案例
@RequestMapping(&#34;/emps&#34;) public String list(@RequestParam(required = false,defaultValue = &#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/891163185c1f451d622a7cb86ffd053d/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2017-08-30T18:54:16+08:00" />
<meta property="article:modified_time" content="2017-08-30T18:54:16+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Mybatis的插件 PageHelper 分页查询使用方法</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>Mybatis的一个插件，PageHelper，非常方便mybatis分页查询。国内牛人的一个开源项目，有兴趣的可以去看源码，都有中文注释（ps：某些源码一大堆英文，痛哭流涕！）</p> 
<p>在github上仓库地址为：<a target="_blank" href="https://github.com/pagehelper/Mybatis-PageHelper" rel="noopener noreferrer">Mybatis-PageHelper</a></p> 
<p>它支持基本主流与常用的数据库，这可以在它的文档上看到。这里记录一下使用的基本方法</p> 
<p><br> </p> 
<h2>0.查看文档与使用准备</h2> 
<p>开发文档有中文文档也有英文文档</p> 
<p><br> </p> 
<p><span style="font-size:24px"><a target="_blank" href="https://github.com/pagehelper/Mybatis-PageHelper/blob/master/wikis/zh/HowToUse.md" rel="noopener noreferrer">PageHelper官方文档</a></span></p> 
<p><span style="font-size:24px"><a target="_blank" href="https://github.com/pagehelper/Mybatis-PageHelper/blob/master/wikis/zh/HowToUse.md" rel="noopener noreferrer"><br> <span style="background-color:rgb(0,0,0)">============================================</span></a></span></p> 
<p><a target="_blank" href="https://github.com/pagehelper/Mybatis-PageHelper/blob/master/wikis/zh/HowToUse.md" rel="noopener noreferrer"><br> </a></p> 
<p><a target="_blank" href="https://github.com/pagehelper/Mybatis-PageHelper/blob/master/wikis/zh/HowToUse.md" rel="noopener noreferrer"><img src="https://images2.imgbox.com/74/29/Ce3hYRQf_o.jpg" alt="" width="598" height="297"><br> </a></p> 
<p><a target="_blank" href="https://github.com/pagehelper/Mybatis-PageHelper/blob/master/wikis/zh/HowToUse.md" rel="noopener noreferrer"><span style="color:#000000">====================================================================================</span><br> </a></p> 
<p><a target="_blank" href="https://github.com/pagehelper/Mybatis-PageHelper/blob/master/wikis/zh/HowToUse.md" rel="noopener noreferrer"><br> </a></p> 
<p><a target="_blank" href="https://github.com/pagehelper/Mybatis-PageHelper/blob/master/wikis/zh/HowToUse.md" rel="noopener noreferrer"><img src="https://images2.imgbox.com/a2/8e/TWJ5TL9J_o.jpg" alt="" width="597" height="264"><br> </a></p> 
<p><a target="_blank" href="https://github.com/pagehelper/Mybatis-PageHelper/blob/master/wikis/zh/HowToUse.md" rel="noopener noreferrer"><br> </a></p> 
<p><a target="_blank" href="https://github.com/pagehelper/Mybatis-PageHelper/blob/master/wikis/zh/HowToUse.md" rel="noopener noreferrer"><img src="https://images2.imgbox.com/5f/03/iv6lwnio_o.jpg" alt=""></a><br> </p> 
<h2>1.配置拦截器插件</h2> 
<p><br> <span style="font-size:18px">这个是配置在mybatis-config.xml文件中</span></p> 
<p>文档中的示例：</p> 
<pre><code class="language-java">&lt;!-- 
    plugins在配置文件中的位置必须符合要求，否则会报错，顺序如下:
    properties?, settings?, 
    typeAliases?, typeHandlers?, 
    objectFactory?,objectWrapperFactory?, 
    plugins?, 
    environments?, databaseIdProvider?, mappers?
--&gt;
&lt;plugins&gt;
    &lt;!-- com.github.pagehelper为PageHelper类所在包名 --&gt;
    &lt;plugin interceptor="com.github.pagehelper.PageInterceptor"&gt;
        &lt;!-- 使用下面的方式配置参数，后面会有所有的参数介绍 --&gt;
        &lt;property name="param1" value="value1"/&gt;
	&lt;/plugin&gt;
&lt;/plugins&gt;</code></pre> 
<p>我的配置：<br> </p> 
<pre><code class="language-java">    &lt;plugins&gt;
        &lt;plugin interceptor="com.github.pagehelper.PageInterceptor"&gt;
            &lt;!-- config params as the following --&gt;
            &lt;!--&lt;!–分页参数合理化  –&gt;--&gt;
            &lt;property name="reasonable" value="true"/&gt;
        &lt;/plugin&gt;
    &lt;/plugins&gt;</code></pre> 
<p>一些配置参数的说明可以参考文档： 【分页插件参数介绍】</p> 
<p>这里就说明一下reasonable的配置：</p> 
<p><code>reasonable</code>：分页合理化参数，默认值为<code>false</code>。当该参数设置为 <code>true</code> 时，<code>pageNum&lt;=0</code> 时会查询第一页，<code>pageNum&gt;pages</code>（超过总数时），会查询最后一页。默认<code>false</code> 时，直接根据参数进行查询。</p> 
<p><br> </p> 
<p>那么如何选择这些配置参数，文档中也给出了详细说明：【如何选择配置这些参数】</p> 
<p><br> </p> 
<h2>2.在代码中使用</h2> 
<p>官方文档也有这部分说明和案例，那么我就以自己的使用案例</p> 
<pre><code class="language-java">    @RequestMapping("/emps")
    public String list(@RequestParam(required = false,defaultValue = "1",value = "pn")Integer pn,
                       Map&lt;String,Object&gt; map){

        //引入分页查询，使用PageHelper分页功能
        //在查询之前传入当前页，然后多少记录
        PageHelper.startPage(pn,5);
        //startPage后紧跟的这个查询就是分页查询
        List&lt;Employee&gt; emps = employeeService.getAll();
        //使用PageInfo包装查询结果，只需要将pageInfo交给页面就可以
        PageInfo pageInfo = new PageInfo&lt;&gt;(emps,5);
        //pageINfo封装了分页的详细信息，也可以指定连续显示的页数

        map.put("pageInfo",pageInfo);
        return "list";
    }</code></pre> 
<br> 以上使用说明： 
<p>·在查询调用方法前声明分页信息（当前页，每页记录数）</p> 
<p>·在查询调用方法对查询结果进行包装成PageInfo对象，也可以是定连续显示的页数，这也是常用功能。</p> 
<p>注意：都是与查询方法紧挨着的，不要中间夹杂其它无关语句</p> 
<p><br> </p> 
<p>之后把信息放在ModelAndView中就可以在前台访问了。</p> 
<p><br> </p> 
<p>下面说一下为什么要把查询结果包装成PageInfo对象</p> 
<p><br> </p> 
<h2>3.PageInfo类说明</h2> 
<p><br> 类源码（更多源码去github上查看即可）：</p> 
<p></p> 
<pre><code class="language-java">public class PageInfo&lt;T&gt; implements Serializable {
    private static final long serialVersionUID = 1L;
    //当前页
    private int pageNum;
    //每页的数量
    private int pageSize;
    //当前页的数量
    private int size;

    //由于startRow和endRow不常用，这里说个具体的用法
    //可以在页面中"显示startRow到endRow 共size条数据"

    //当前页面第一个元素在数据库中的行号
    private int startRow;
    //当前页面最后一个元素在数据库中的行号
    private int endRow;
    //总记录数
    private long total;
    //总页数
    private int pages;
    //结果集
    private List&lt;T&gt; list;

    //前一页
    private int prePage;
    //下一页
    private int nextPage;

    //是否为第一页
    private boolean isFirstPage = false;
    //是否为最后一页
    private boolean isLastPage = false;
    //是否有前一页
    private boolean hasPreviousPage = false;
    //是否有下一页
    private boolean hasNextPage = false;
    //导航页码数
    private int navigatePages;
    //所有导航页号
    private int[] navigatepageNums;
    //导航条上的第一页
    private int navigateFirstPage;
    //导航条上的最后一页
    private int navigateLastPage;

    public PageInfo() {
    }

    /**
     * 包装Page对象
     *
     * @param list
     */
    public PageInfo(List&lt;T&gt; list) {
        this(list, 8);
    }

    /**
     * 包装Page对象
     *
     * @param list          page结果
     * @param navigatePages 页码数量
     */
    public PageInfo(List&lt;T&gt; list, int navigatePages) {
        if (list instanceof Page) {
            Page page = (Page) list;
            this.pageNum = page.getPageNum();
            this.pageSize = page.getPageSize();

            this.pages = page.getPages();
            this.list = page;
            this.size = page.size();
            this.total = page.getTotal();
            //由于结果是&gt;startRow的，所以实际的需要+1
            if (this.size == 0) {
                this.startRow = 0;
                this.endRow = 0;
            } else {
                this.startRow = page.getStartRow() + 1;
                //计算实际的endRow（最后一页的时候特殊）
                this.endRow = this.startRow - 1 + this.size;
            }
        } else if (list instanceof Collection) {
            this.pageNum = 1;
            this.pageSize = list.size();

            this.pages = this.pageSize &gt; 0 ? 1 : 0;
            this.list = list;
            this.size = list.size();
            this.total = list.size();
            this.startRow = 0;
            this.endRow = list.size() &gt; 0 ? list.size() - 1 : 0;
        }
        if (list instanceof Collection) {
            this.navigatePages = navigatePages;
            //计算导航页
            calcNavigatepageNums();
            //计算前后页，第一页，最后一页
            calcPage();
            //判断页面边界
            judgePageBoudary();
        }
    }


.......
}
</code></pre> 
<p></p> 
<p>这里只列出所有属性和构造方法，那么可以清晰的看到一些属性的含义，一些属性是如何初始化，并且初始化值是怎样的，更多详细情况可以自己去查看源码，都有中文注释</p> 
<p><br> </p> 
<p>那么可以很方便在页面进行值的获取输出</p> 
<p><br> </p> 
<h2>4.在页面获取值（实现分页）</h2> 
<p></p> 
<pre><code class="language-html">&lt;!--通过bootstrap的栅格系统布局--&gt;
&lt;div class="container"&gt;

    &lt;!--标题--&gt;
    &lt;div class="row"&gt;
        &lt;div class="col-md-12"&gt;
            &lt;h1&gt;SSM-CRUD&lt;/h1&gt;
        &lt;/div&gt;

    &lt;/div&gt;

    &lt;!--按钮--&gt;
    &lt;div class="row"&gt;
        &lt;div class="col-md-4 col-md-offset-8"&gt;
            &lt;button class="btn btn-primary"&gt;新增&lt;/button&gt;
            &lt;button class="btn btn-danger"&gt;删除&lt;/button&gt;
        &lt;/div&gt;
    &lt;/div&gt;

    &lt;!--显示表格数据--&gt;
    &lt;div class="row"&gt;
        &lt;div class="col-md-12"&gt;
            &lt;table class="table table-hover"&gt;
                &lt;tr&gt;
                    &lt;th&gt;#&lt;/th&gt;
                    &lt;th&gt;empName&lt;/th&gt;
                    &lt;th&gt;gender&lt;/th&gt;
                    &lt;th&gt;email&lt;/th&gt;
                    &lt;th&gt;deptName&lt;/th&gt;
                    &lt;th&gt;操作&lt;/th&gt;
                &lt;/tr&gt;


                &lt;c:forEach items="${pageInfo.list}" var="emp"&gt;
                    &lt;tr&gt;
                        &lt;th&gt;${emp.empId}&lt;/th&gt;
                        &lt;th&gt;${emp.empName}&lt;/th&gt;
                        &lt;th&gt;${emp.gender=="M"?"男":"女" }&lt;/th&gt;
                        &lt;th&gt;${emp.email}&lt;/th&gt;
                        &lt;th&gt;${emp.department.deptName}&lt;/th&gt;
                        &lt;th&gt;
                            &lt;button class="btn btn-primary"&gt;
                                &lt;span class="glyphicon glyphicon-pencil" aria-hidden="true"&gt;&lt;/span&gt;
                                编辑
                            &lt;/button&gt;

                            &lt;button class="btn btn-danger"&gt;
                                &lt;span class="glyphicon glyphicon-trash" aria-hidden="true"&gt;&lt;/span&gt;
                                删除
                            &lt;/button&gt;

                        &lt;/th&gt;
                    &lt;/tr&gt;
                &lt;/c:forEach&gt;

            &lt;/table&gt;
        &lt;/div&gt;

    &lt;/div&gt;

    &lt;!--显示分页信息--&gt;
    &lt;div class="row"&gt;
        &lt;!--文字信息--&gt;
        &lt;div class="col-md-6"&gt;
            当前第 ${pageInfo.pageNum} 页.总共 ${pageInfo.pages} 页.一共 ${pageInfo.total} 条记录
        &lt;/div&gt;

        &lt;!--点击分页--&gt;
        &lt;div class="col-md-6"&gt;
            &lt;nav aria-label="Page navigation"&gt;
                &lt;ul class="pagination"&gt;
                    
                    &lt;li&gt;&lt;a href="${pageContext.request.contextPath}/emps?pn=1"&gt;首页&lt;/a&gt;&lt;/li&gt;
                    
                    &lt;!--上一页--&gt;
                    &lt;li&gt;
                        &lt;c:if test="${pageInfo.hasPreviousPage}"&gt;
                            &lt;a href="${pageContext.request.contextPath}/emps?pn=${pageInfo.pageNum-1}" aria-label="Previous"&gt;
                                &lt;span aria-hidden="true"&gt;«&lt;/span&gt;
                            &lt;/a&gt;
                        &lt;/c:if&gt;
                    &lt;/li&gt;

                    &lt;!--循环遍历连续显示的页面，若是当前页就高亮显示，并且没有链接--&gt;
                    &lt;c:forEach items="${pageInfo.navigatepageNums}" var="page_num"&gt;
                        &lt;c:if test="${page_num == pageInfo.pageNum}"&gt;
                            &lt;li class="active"&gt;&lt;a href="#"&gt;${page_num}&lt;/a&gt;&lt;/li&gt;
                        &lt;/c:if&gt;
                        &lt;c:if test="${page_num != pageInfo.pageNum}"&gt;
                            &lt;li&gt;&lt;a href="${pageContext.request.contextPath}/emps?pn=${page_num}"&gt;${page_num}&lt;/a&gt;&lt;/li&gt;
                        &lt;/c:if&gt;
                    &lt;/c:forEach&gt;

                    &lt;!--下一页--&gt;
                    &lt;li&gt;
                        &lt;c:if test="${pageInfo.hasNextPage}"&gt;
                            &lt;a href="${pageContext.request.contextPath}/emps?pn=${pageInfo.pageNum+1}"
                               aria-label="Next"&gt;
                                &lt;span aria-hidden="true"&gt;»&lt;/span&gt;
                            &lt;/a&gt;
                        &lt;/c:if&gt;
                    &lt;/li&gt;
                    
                    &lt;li&gt;&lt;a href="${pageContext.request.contextPath}/emps?pn=${pageInfo.pages}"&gt;尾页&lt;/a&gt;&lt;/li&gt;
                &lt;/ul&gt;
            &lt;/nav&gt;
        &lt;/div&gt;

    &lt;/div&gt;


&lt;/div&gt;</code></pre> 
<br> 最后显示： 
<p></p> 
<p><img src="https://images2.imgbox.com/55/92/qe2Xdmqq_o.jpg" alt=""><br> </p> 
<p><br> 以上很常见的分页需求，可以非常方便的使用。<br> 并且支持各种数据库，可以有多种方式进行引入插件，对于springBoot也有非常好的整合使用。<br> <br> </p> 
<h2>PageHelpe开源地址</h2> 
<p><span style="font-size:18px"><br> github项目地址：https://github.com/pagehelper/Mybatis-PageHelper<br> 码云 项目地址：http://git.oschina.net/free/Mybatis_PageHelper</span><br> <br> <br> </p> 
<p><br> </p> 
<p><br> </p> 
<p><br> </p> 
<p><br> </p> 
<p><br> </p> 
<p><br> </p> 
<p><br> </p> 
<pre><code class="language-html"></code><pre name="code" class="html"><code class="language-html"><pre></pre>
<pre></pre>
<pre></pre>
</code></pre></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/6fce59e86b2769787376a6667c4564bf/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">利用cublas库函数cublasSgetrfBatched和cublasSgetriBatched求矩阵的逆</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/71c950054975d168b09536476cdcb33f/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Spark获取并分析Mysql数据</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>