<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>第一个IDEA---登录功能(超级详细！) - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="第一个IDEA---登录功能(超级详细！)" />
<meta property="og:description" content="首先，今天是10.24祝大家代码之路越走越顺越走越远吧，早日年入百万脱离苦海！ 言归正传，先放图，建立框架如下图所示：（我会按照从上往下的顺序一一列出）
话不多说，上代码！！！
1.UserAction:
package Action; import model.User; import java.sql.*; public class UserAction { private User u;//这个东西和set,get都必须要有，不然你可以试试 public UserAction() { } public User getU() {//直接自动生成就行 return u; } public void setU(User u) { this.u = u; } public UserAction(User u) { this.u = u; } public String Login() { Connection con = null; PreparedStatement ps = null; ResultSet rs = null; try { String driver = &#34;com.mysql.cj.jdbc.Driver&#34;; Class.forName(driver); String url = &#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/001618f86ed4141c730ddf22b2104fab/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-10-24T15:28:13+08:00" />
<meta property="article:modified_time" content="2021-10-24T15:28:13+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">第一个IDEA---登录功能(超级详细！)</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h4 id="%E9%A6%96%E5%85%88%EF%BC%8C%E4%BB%8A%E5%A4%A9%E6%98%AF10.24%E7%A5%9D%E5%A4%A7%E5%AE%B6%E4%BB%A3%E7%A0%81%E4%B9%8B%E8%B7%AF%E8%B6%8A%E8%B5%B0%E8%B6%8A%E9%A1%BA%E8%B6%8A%E8%B5%B0%E8%B6%8A%E8%BF%9C%E5%90%A7%EF%BC%8C%E6%97%A9%E6%97%A5%E5%B9%B4%E5%85%A5%E7%99%BE%E4%B8%87%E8%84%B1%E7%A6%BB%E8%8B%A6%E6%B5%B7%EF%BC%81">首先，今天是10.24祝大家代码之路越走越顺越走越远吧，早日年入百万脱离苦海！</h4> 
<p>言归正传，先放图，建立框架如下图所示：（我会按照从上往下的顺序一一列出）</p> 
<p><img alt="" height="568" src="https://images2.imgbox.com/18/93/fQcYgH5s_o.png" width="462"></p> 
<p id="main-toc"> 话不多说，上代码！！！</p> 
<p>1.UserAction:</p> 
<pre><code class="language-java">package Action;

import model.User;

import java.sql.*;

public class UserAction {
    private User u;//这个东西和set,get都必须要有，不然你可以试试

    public UserAction() {
    }

    public User getU() {//直接自动生成就行
        return u;
    }

    public void setU(User u) {
        this.u = u;
    }

    public UserAction(User u) {
        this.u = u;
    }
    public String Login() {
        Connection con = null;
        PreparedStatement ps = null;
        ResultSet rs = null;
        try {
            String driver = "com.mysql.cj.jdbc.Driver";
            Class.forName(driver);
            String url = "jdbc:mysql://localhost:3306/testel?&amp;useSSL=false&amp;serverTimezone=UTC";
            String user = "root";
            String password = "123";//数据库的东西自己看着改，毕竟咱们不是一个数据库
            con = DriverManager.getConnection(url, user, password);
            String sql = "select * from user1 where userid=? and userpwd=?";
            ps = con.prepareStatement(sql);
            ps.setString(1, u.getUserid());
            //ps.setString(2, u.getUsername());
            ps.setString(2, u.getUserpwd());
            rs = ps.executeQuery();
            if (rs.next()) {
                return "1";
            }
        } catch (ClassNotFoundException | SQLException e) {
            e.printStackTrace();
        } finally {
            try {
                if (rs != null) rs.close();
                if (ps != null) ps.close();
                if (con != null) con.close();
            } catch (SQLException throwables) {
                throwables.printStackTrace();
            }
        }

        return "0";

    }

}
</code></pre> 
<p> 2.User:</p> 
<pre><code class="language-java">package model;

public class User {
    private String userid,username,userpwd;//与数据库保持一致，这样比较简单
    public User(){}//防止以后用到，提前写上
    public User(String userid,String username,String userpwd){
        this.userid=userid;
        this.username=username;
        this.userpwd=userpwd;
    }
    public String getUserid() {//自动生成
        return userid;
    }

    public void setUserid(String userid) {
        this.userid = userid;
    }

    public String getUsername() {
        return username;
    }

    public void setUsername(String username) {
        this.username = username;
    }

    public String getUserpwd() {
        return userpwd;
    }

    public void setUserpwd(String userpwd) {
        this.userpwd = userpwd;
    }
}
</code></pre> 
<p>3.struts.xml:</p> 
<pre><code class="language-html">&lt;?xml version="1.0" encoding="UTF-8"?&gt;

&lt;!DOCTYPE struts PUBLIC
        "-//Apache Software Foundation//DTD Struts Configuration 2.5//EN"
        "http://struts.apache.org/dtds/struts-2.5.dtd"&gt;

&lt;struts&gt;
    &lt;package name="default" namespace="/" extends="struts-default"&gt;//一般情况下这样写不会错，除非你建立的架构不一样，namespace可以改
        &lt;action name="login" class="Action.UserAction" method="Login"&gt;
            &lt;result name="1"&gt;/positive.jsp&lt;/result&gt;//根据返回值跳转界面
            &lt;result name="0"&gt;/negative.jsp&lt;/result&gt;
        &lt;/action&gt;
    &lt;/package&gt;

&lt;/struts&gt;</code></pre> 
<p> 4.web.xml:</p> 
<pre><code class="language-html">&lt;!DOCTYPE web-app PUBLIC
 "-//Sun Microsystems, Inc.//DTD Web Application 2.3//EN"
 "http://java.sun.com/dtd/web-app_2_3.dtd" &gt;

&lt;web-app&gt;
  &lt;display-name&gt;Archetype Created Web Application&lt;/display-name&gt;
  &lt;filter&gt;//直接复制老师的就行
    &lt;filter-name&gt;struts2&lt;/filter-name&gt;
    &lt;filter-class&gt;org.apache.struts2.dispatcher.filter.StrutsPrepareAndExecuteFilter&lt;/filter-class&gt;
  &lt;/filter&gt;
  &lt;filter-mapping&gt;
    &lt;filter-name&gt;struts2&lt;/filter-name&gt;
    &lt;url-pattern&gt;/*&lt;/url-pattern&gt;
  &lt;/filter-mapping&gt;

&lt;/web-app&gt;
</code></pre> 
<p>5.login.jsp:</p> 
<pre><code class="language-html">&lt;%--
  Created by IntelliJ IDEA.
  User: hp
  Date: 2021/10/23
  Time: 19:36
  To change this template use File | Settings | File Templates.
--%&gt;
&lt;%@ page contentType="text/html;charset=UTF-8" language="java" %&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;Title&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;table&gt;
    &lt;form action="/login"&gt;
        ID:&lt;input type="text" name="u.userid"&gt;&lt;br&gt;//u是User的对象，看看上面就知道了
        姓名：&lt;input type="text" name="u.username"&gt;&lt;br&gt;
        密码：&lt;input type="text" name="u.userpwd"&gt;&lt;br&gt;
        &lt;input type="submit" value="登录"&gt;
    &lt;/form&gt;
&lt;/table&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre> 
<p>6.negative.jsp:</p> 
<pre><code class="language-html">&lt;%--
  Created by IntelliJ IDEA.
  User: hp
  Date: 2021/10/23
  Time: 19:36
  To change this template use File | Settings | File Templates.
--%&gt;
&lt;%@ page contentType="text/html;charset=UTF-8" language="java" %&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;Title&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
failure!
&lt;/body&gt;
&lt;/html&gt;
</code></pre> 
<p> </p> 
<p> 7.positive.jsp:</p> 
<pre><code class="language-html">&lt;%--
  Created by IntelliJ IDEA.
  User: hp
  Date: 2021/10/23
  Time: 19:35
  To change this template use File | Settings | File Templates.
--%&gt;
&lt;%@ page contentType="text/html;charset=UTF-8" language="java" %&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;Title&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
success!//知道成功了就行
&lt;/body&gt;
&lt;/html&gt;
</code></pre> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/cceb465c221e2693fe2c3a21f5c9a4c1/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">java学习笔记（2）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/7e6c6fe219aaf6c9ae00cbfef91b40f0/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">关于计算机无法连接虚拟磁盘服务的解决办法</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>