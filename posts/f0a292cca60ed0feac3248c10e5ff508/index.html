<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Vue--如何自己实现双向数据绑定v-model ？ - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Vue--如何自己实现双向数据绑定v-model ？" />
<meta property="og:description" content="1. Vue 响应式实现原理 vue2响应式的原理是借助数据劫持和发布订阅者模式 1、数据劫持：
目的：能够感知到数据的改变。
数据劫持是：使用ES5的Object.defineProperty()。把data配置项中的所有数据进行遍历，转成setter和getter（或者说，给每个属性增加set和get函数）既就是：访问器属性。
2、发布订阅者模式：
目的：当数据改变时，（直接和间接）使用该数据的模板处都会有相应的改变（模板会重新渲染）
Vue 3 的响应式原理基于 Proxy 对象和 Reactive API 实现 2. Vue v-model双向数据绑定实现原理 v-model 指令是 Vue 提供的一个语法糖，它可以在表单控件上双向绑定数据。
实际上，v-model 的背后是一个与组件相同的语法糖，其原理也是基于组件的通信功能。
v-model的本质是利用事件和属性的结合，例如：
1）、针对文本框（单行和多行）：value属性和input事件。 如果加上修饰符 lazy。事件变成了change事件。
2）、针对radio：使用的checked属性和change事件。同时，需要给radio加上value属性。
3）、针对checkbox：使用的checked属性和change事件。
3.1）、如果应用在多选时，需要给checkbox加上value属性。
3.3）、如果应用在单选时，不需要加。
4）、针对select：使用value属性和change事件。
以下是 v-model 实现原理的详细步骤： 1. 将表单控件封装成自定义组件 通过将表单控件封装成自定义组件，我们可以使用组件的 props 和 emit 方法方便地处理数据的双向绑定。
&lt;template&gt; &lt;input :value=&#34;innerValue&#34; @input=&#34;onInput&#34;&gt; &lt;/template&gt; &lt;script&gt; export default { name: &#39;MyInput&#39;, props: { value: String, }, emits: [&#39;update:value&#39;], data() { return { innerValue: this.value, }; }, methods: { onInput(event) { this." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/f0a292cca60ed0feac3248c10e5ff508/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-05-30T19:32:38+08:00" />
<meta property="article:modified_time" content="2023-05-30T19:32:38+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Vue--如何自己实现双向数据绑定v-model ？</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2 id="articleContentId">1. Vue 响应式实现原理</h2> 
<h4>        vue2响应式的原理是借助<strong>数据劫持</strong>和<strong>发布订阅者模式</strong></h4> 
<p>        <strong>1、数据劫持：</strong></p> 
<p style="text-align:justify;">        目的：能够感知到数据的改变。</p> 
<p>        数据劫持是：使用ES5的Object.defineProperty()。把data配置项中的所有数据进行遍历，转成setter和getter（或者说，给每个属性增加set和get函数）既就是：访问器属性。</p> 
<p><strong>        2、发布订阅者模式：</strong></p> 
<p>        目的：当数据改变时，（直接和间接）使用该数据的模板处都会有相应的改变（模板会重新渲染）</p> 
<h4>        Vue 3 的响应式原理基于 Proxy 对象和 Reactive API 实现</h4> 
<h3>2. Vue v-model双向数据绑定实现原理</h3> 
<p>        v-model 指令是 Vue 提供的一个<strong>语法糖</strong>，它可以在表单控件上双向绑定数据。</p> 
<p>        实际上，v-model 的背后是一个与组件相同的语法糖，其原理也是基于组件的通信功能。</p> 
<p>        v-model的本质是<strong>利用事件和属性的结合</strong>，例如：</p> 
<p>                1）、针对文本框（单行和多行）：value属性和input事件。 如果加上修饰符 lazy。事件变成了change事件。</p> 
<p>                2）、针对radio：使用的checked属性和change事件。同时，需要给radio加上value属性。</p> 
<p>                3）、针对checkbox：使用的checked属性和change事件。</p> 
<p>                        3.1）、如果应用在多选时，需要给checkbox加上value属性。</p> 
<p>                        3.3）、如果应用在单选时，不需要加。</p> 
<p>                4）、针对select：使用value属性和change事件。</p> 
<h4>        以下是 v-model 实现原理的详细步骤：</h4> 
<p>        <strong>1. 将表单控件封装成自定义组件 </strong></p> 
<p>                通过将表单控件封装成自定义组件，我们可以使用组件的 props 和 emit 方法方便地处理数据的双向绑定。</p> 
<pre><code class="language-javascript">&lt;template&gt;
  &lt;input :value="innerValue" @input="onInput"&gt;
&lt;/template&gt;

&lt;script&gt;
export default {
  name: 'MyInput',
  props: {
    value: String,
  },
  emits: ['update:value'],
  
  data() {
    return {
      innerValue: this.value,
    };
  },
  
  methods: {
    onInput(event) {
      this.innerValue = event.target.value;
      this.$emit('update:value', this.innerValue);
    },
  },
};
&lt;/script&gt;
</code></pre> 
<p>        <strong>2. 在父组件中使用自定义组件绑定 v-model</strong></p> 
<p>        在父组件中使用自定义组件的方式与原生的表单控件相同，只需要将 v-model 绑定到自定义组件的 value 属性即可</p> 
<pre><code class="language-javascript">&lt;template&gt;
  &lt;my-input v-model="message"&gt;&lt;/my-input&gt;
&lt;/template&gt;

&lt;script&gt;
import MyInput from './MyInput.vue';

export default {
  components: {
    MyInput,
  },
  
  data() {
    return {
      message: '',
    };
  },
};
&lt;/script&gt;
</code></pre> 
<blockquote> 
 <p>     <strong>在这里， <code>v-model="message"</code> 等价于 <code>:</code></strong></p> 
 <p><strong><code>  value="message" @update:value="value =&gt; message = value"</code>。</strong></p> 
 <p><strong>      也就是在一个自定义组件上使用 <code>v-model</code> 实际上是语法糖，将 <code>value</code> 属性和 <code>update:value</code> 事件绑定起来了。</strong></p> 
</blockquote> 
<p> </p> 
<hr> 
<p><strong>在 Vue.js 中 v-model 主要是通过自定义组件的方式实现的。可以通过将原生表单控件封装成一个带有 props 和emit 的组件，并且在父组件中以 v-model 方式使用该组件，来完成数据的双向绑定。</strong> </p> 
<p> </p> 
<p>         </p> 
<p>        </p> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/3358f11a02a6609053fe8a501375a9f3/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">分布式监控平台——Zabbix6.0</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/ea9c25cb0a4f01873c7d9928c942204e/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Python报错 UnicodeDecodeError: ‘gbk‘ codec can‘t decode bytein position 2: illegal multibyte sequence</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>