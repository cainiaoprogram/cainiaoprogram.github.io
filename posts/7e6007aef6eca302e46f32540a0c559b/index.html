<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Redis基本原理和基础知识 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Redis基本原理和基础知识" />
<meta property="og:description" content="目录
一、基本原理
（一）非关系型数据库
（二）关系型数据库与非关系型数据库的区别
（三）Redis简介
1.什么是Redis
2.数据存储结构
3.默认端口号
4.数据类型
（1）五大基础类型
（2）三种特殊类型
（四）Redis优点
1.极高的数据读写速度
2.支持丰富的数据类型
3.支持数据的持久化
4.原子性
5.支持数据备份
（五）redis快的原因
二、部署Redis
（一）环境准备
（二）修改内核参数
（三）安装Redis
（四）修改配置文件
（五）定义systemd服务管理脚本
（六）启动服务
三、实操
（一）Redis 命令工具
（二）redis-cli 命令行工具
（三）redis-benchmark 测试工具
（四）Redis数据库常用命令
1.String（字符串）
2.List（列表）
3.Hash（哈希/散列）
4.Set（无序集合）
5.Zset/Sorted Set（有序集合）
6.通用
一、基本原理 （一）非关系型数据库 不需要预先建库建表定义数据存储表结构，每条记录可以有不同的数据类型和字段个数（比如微信群聊里的文字、图片、视频、音乐等）。
主流的 NoSQL 数据库有 Redis、MongBD、Hbase、Memcached、ElasticSearch、TSDB 等。
（二）关系型数据库与非关系型数据库的区别 关系型数据库（SQL）非关系型数据库（NOSQL）存储结构二维表格结构可以是文档、键值对、索引、时间序列等，不同类型数据库使用不同的存储结构扩展方式纵向扩展（提升硬件性能）横向扩展（增加服务器节点数量）事务支持基于ACID原则基于BASE原则典型代表MySQL、Oracle、SQL-server等Redis、MongBD、Hbase、Memcached、ElasticSearch、TSDB等 （三）Redis简介 1.什么是Redis Redis（远程字典服务器） 是一个开源的、使用 C 语言编写的、基于内存运行的 NoSQL 数据库
2.数据存储结构 键值对（Key/Value KV）
3.默认端口号 TCP的6379
4.数据类型 （1）五大基础类型 String（字符串） List（列表） Hash（哈希/散列）Set（无序集合）Zset/Sorted Set（有序集合） （2）三种特殊类型 HyperLogLogs（基数统计）Bitmaps (位图)geospatial （地理位置) （四）Redis优点 1." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/7e6007aef6eca302e46f32540a0c559b/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-09T01:16:47+08:00" />
<meta property="article:modified_time" content="2024-01-09T01:16:47+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Redis基本原理和基础知识</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p id="main-toc"><strong>目录</strong></p> 
<p id="%E4%B8%80%E3%80%81%E5%9F%BA%E6%9C%AC%E5%8E%9F%E7%90%86-toc" style="margin-left:0px;"><a href="#%E4%B8%80%E3%80%81%E5%9F%BA%E6%9C%AC%E5%8E%9F%E7%90%86" rel="nofollow">一、基本原理</a></p> 
<p id="%EF%BC%88%E4%B8%80%EF%BC%89%E9%9D%9E%E5%85%B3%E7%B3%BB%E5%9E%8B%E6%95%B0%E6%8D%AE%E5%BA%93-toc" style="margin-left:40px;"><a href="#%EF%BC%88%E4%B8%80%EF%BC%89%E9%9D%9E%E5%85%B3%E7%B3%BB%E5%9E%8B%E6%95%B0%E6%8D%AE%E5%BA%93" rel="nofollow">（一）非关系型数据库</a></p> 
<p id="%EF%BC%88%E4%BA%8C%EF%BC%89%E5%85%B3%E7%B3%BB%E5%9E%8B%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%8E%E9%9D%9E%E5%85%B3%E7%B3%BB%E5%9E%8B%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E5%8C%BA%E5%88%AB-toc" style="margin-left:40px;"><a href="#%EF%BC%88%E4%BA%8C%EF%BC%89%E5%85%B3%E7%B3%BB%E5%9E%8B%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%8E%E9%9D%9E%E5%85%B3%E7%B3%BB%E5%9E%8B%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E5%8C%BA%E5%88%AB" rel="nofollow">（二）关系型数据库与非关系型数据库的区别</a></p> 
<p id="%EF%BC%88%E4%B8%89%EF%BC%89Redis%E7%AE%80%E4%BB%8B-toc" style="margin-left:40px;"><a href="#%EF%BC%88%E4%B8%89%EF%BC%89Redis%E7%AE%80%E4%BB%8B" rel="nofollow">（三）Redis简介</a></p> 
<p id="1.%E4%BB%80%E4%B9%88%E6%98%AFRedis-toc" style="margin-left:80px;"><a href="#1.%E4%BB%80%E4%B9%88%E6%98%AFRedis" rel="nofollow">1.什么是Redis</a></p> 
<p id="2.%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8%E7%BB%93%E6%9E%84-toc" style="margin-left:80px;"><a href="#2.%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8%E7%BB%93%E6%9E%84" rel="nofollow">2.数据存储结构</a></p> 
<p id="3.%E9%BB%98%E8%AE%A4%E7%AB%AF%E5%8F%A3%E5%8F%B7-toc" style="margin-left:80px;"><a href="#3.%E9%BB%98%E8%AE%A4%E7%AB%AF%E5%8F%A3%E5%8F%B7" rel="nofollow">3.默认端口号</a></p> 
<p id="4.%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B-toc" style="margin-left:80px;"><a href="#4.%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B" rel="nofollow">4.数据类型</a></p> 
<p id="%EF%BC%881%EF%BC%89%E4%BA%94%E5%A4%A7%E5%9F%BA%E7%A1%80%E7%B1%BB%E5%9E%8B-toc" style="margin-left:120px;"><a href="#%EF%BC%881%EF%BC%89%E4%BA%94%E5%A4%A7%E5%9F%BA%E7%A1%80%E7%B1%BB%E5%9E%8B" rel="nofollow">（1）五大基础类型</a></p> 
<p id="%EF%BC%882%EF%BC%89%E4%B8%89%E7%A7%8D%E7%89%B9%E6%AE%8A%E7%B1%BB%E5%9E%8B-toc" style="margin-left:120px;"><a href="#%EF%BC%882%EF%BC%89%E4%B8%89%E7%A7%8D%E7%89%B9%E6%AE%8A%E7%B1%BB%E5%9E%8B" rel="nofollow">（2）三种特殊类型</a></p> 
<p id="%EF%BC%88%E5%9B%9B%EF%BC%89Redis%E4%BC%98%E7%82%B9-toc" style="margin-left:40px;"><a href="#%EF%BC%88%E5%9B%9B%EF%BC%89Redis%E4%BC%98%E7%82%B9" rel="nofollow">（四）Redis优点</a></p> 
<p id="1.%E6%9E%81%E9%AB%98%E7%9A%84%E6%95%B0%E6%8D%AE%E8%AF%BB%E5%86%99%E9%80%9F%E5%BA%A6-toc" style="margin-left:80px;"><a href="#1.%E6%9E%81%E9%AB%98%E7%9A%84%E6%95%B0%E6%8D%AE%E8%AF%BB%E5%86%99%E9%80%9F%E5%BA%A6" rel="nofollow">1.极高的数据读写速度</a></p> 
<p id="2.%E6%94%AF%E6%8C%81%E4%B8%B0%E5%AF%8C%E7%9A%84%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B-toc" style="margin-left:80px;"><a href="#2.%E6%94%AF%E6%8C%81%E4%B8%B0%E5%AF%8C%E7%9A%84%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B" rel="nofollow">2.支持丰富的数据类型</a></p> 
<p id="3.%E6%94%AF%E6%8C%81%E6%95%B0%E6%8D%AE%E7%9A%84%E6%8C%81%E4%B9%85%E5%8C%96-toc" style="margin-left:80px;"><a href="#3.%E6%94%AF%E6%8C%81%E6%95%B0%E6%8D%AE%E7%9A%84%E6%8C%81%E4%B9%85%E5%8C%96" rel="nofollow">3.支持数据的持久化</a></p> 
<p id="4.%E5%8E%9F%E5%AD%90%E6%80%A7-toc" style="margin-left:80px;"><a href="#4.%E5%8E%9F%E5%AD%90%E6%80%A7" rel="nofollow">4.原子性</a></p> 
<p id="5.%E6%94%AF%E6%8C%81%E6%95%B0%E6%8D%AE%E5%A4%87%E4%BB%BD-toc" style="margin-left:80px;"><a href="#5.%E6%94%AF%E6%8C%81%E6%95%B0%E6%8D%AE%E5%A4%87%E4%BB%BD" rel="nofollow">5.支持数据备份</a></p> 
<p id="%EF%BC%88%E4%BA%94%EF%BC%89redis%E5%BF%AB%E7%9A%84%E5%8E%9F%E5%9B%A0-toc" style="margin-left:40px;"><a href="#%EF%BC%88%E4%BA%94%EF%BC%89redis%E5%BF%AB%E7%9A%84%E5%8E%9F%E5%9B%A0" rel="nofollow">（五）redis快的原因</a></p> 
<p id="%E4%BA%8C%E3%80%81%E9%83%A8%E7%BD%B2Redis-toc" style="margin-left:0px;"><a href="#%E4%BA%8C%E3%80%81%E9%83%A8%E7%BD%B2Redis" rel="nofollow">二、部署Redis</a></p> 
<p id="%EF%BC%88%E4%B8%80%EF%BC%89%E7%8E%AF%E5%A2%83%E5%87%86%E5%A4%87-toc" style="margin-left:40px;"><a href="#%EF%BC%88%E4%B8%80%EF%BC%89%E7%8E%AF%E5%A2%83%E5%87%86%E5%A4%87" rel="nofollow">（一）环境准备</a></p> 
<p id="%EF%BC%88%E4%BA%8C%EF%BC%89%E4%BF%AE%E6%94%B9%E5%86%85%E6%A0%B8%E5%8F%82%E6%95%B0-toc" style="margin-left:40px;"><a href="#%EF%BC%88%E4%BA%8C%EF%BC%89%E4%BF%AE%E6%94%B9%E5%86%85%E6%A0%B8%E5%8F%82%E6%95%B0" rel="nofollow">（二）修改内核参数</a></p> 
<p id="%EF%BC%88%E4%B8%89%EF%BC%89%E5%AE%89%E8%A3%85Redis-toc" style="margin-left:40px;"><a href="#%EF%BC%88%E4%B8%89%EF%BC%89%E5%AE%89%E8%A3%85Redis" rel="nofollow">（三）安装Redis</a></p> 
<p id="%EF%BC%88%E5%9B%9B%EF%BC%89%E4%BF%AE%E6%94%B9%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6-toc" style="margin-left:40px;"><a href="#%EF%BC%88%E5%9B%9B%EF%BC%89%E4%BF%AE%E6%94%B9%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6" rel="nofollow">（四）修改配置文件</a></p> 
<p id="%EF%BC%88%E4%BA%94%EF%BC%89%E5%AE%9A%E4%B9%89systemd%E6%9C%8D%E5%8A%A1%E7%AE%A1%E7%90%86%E8%84%9A%E6%9C%AC-toc" style="margin-left:40px;"><a href="#%EF%BC%88%E4%BA%94%EF%BC%89%E5%AE%9A%E4%B9%89systemd%E6%9C%8D%E5%8A%A1%E7%AE%A1%E7%90%86%E8%84%9A%E6%9C%AC" rel="nofollow">（五）定义systemd服务管理脚本</a></p> 
<p id="%EF%BC%88%E5%85%AD%EF%BC%89%E5%90%AF%E5%8A%A8%E6%9C%8D%E5%8A%A1-toc" style="margin-left:40px;"><a href="#%EF%BC%88%E5%85%AD%EF%BC%89%E5%90%AF%E5%8A%A8%E6%9C%8D%E5%8A%A1" rel="nofollow">（六）启动服务</a></p> 
<p id="%E4%B8%89%E3%80%81%E5%AE%9E%E6%93%8D-toc" style="margin-left:0px;"><a href="#%E4%B8%89%E3%80%81%E5%AE%9E%E6%93%8D" rel="nofollow">三、实操</a></p> 
<p id="%EF%BC%88%E4%B8%80%EF%BC%89Redis%20%E5%91%BD%E4%BB%A4%E5%B7%A5%E5%85%B7-toc" style="margin-left:40px;"><a href="#%EF%BC%88%E4%B8%80%EF%BC%89Redis%20%E5%91%BD%E4%BB%A4%E5%B7%A5%E5%85%B7" rel="nofollow">（一）Redis 命令工具</a></p> 
<p id="%EF%BC%88%E4%BA%8C%EF%BC%89redis-cli%20%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%B7%A5%E5%85%B7-toc" style="margin-left:40px;"><a href="#%EF%BC%88%E4%BA%8C%EF%BC%89redis-cli%20%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%B7%A5%E5%85%B7" rel="nofollow">（二）redis-cli 命令行工具</a></p> 
<p id="%EF%BC%88%E4%B8%89%EF%BC%89redis-benchmark%20%E6%B5%8B%E8%AF%95%E5%B7%A5%E5%85%B7-toc" style="margin-left:40px;"><a href="#%EF%BC%88%E4%B8%89%EF%BC%89redis-benchmark%20%E6%B5%8B%E8%AF%95%E5%B7%A5%E5%85%B7" rel="nofollow">（三）redis-benchmark 测试工具</a></p> 
<p id="%EF%BC%88%E5%9B%9B%EF%BC%89Redis%E6%95%B0%E6%8D%AE%E5%BA%93%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4-toc" style="margin-left:40px;"><a href="#%EF%BC%88%E5%9B%9B%EF%BC%89Redis%E6%95%B0%E6%8D%AE%E5%BA%93%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4" rel="nofollow">（四）Redis数据库常用命令</a></p> 
<p id="1.String%EF%BC%88%E5%AD%97%E7%AC%A6%E4%B8%B2%EF%BC%89-toc" style="margin-left:80px;"><a href="#1.String%EF%BC%88%E5%AD%97%E7%AC%A6%E4%B8%B2%EF%BC%89" rel="nofollow">1.String（字符串）</a></p> 
<p id="2.List%EF%BC%88%E5%88%97%E8%A1%A8%EF%BC%89-toc" style="margin-left:80px;"><a href="#2.List%EF%BC%88%E5%88%97%E8%A1%A8%EF%BC%89" rel="nofollow">2.List（列表）</a></p> 
<p id="3.Hash%EF%BC%88%E5%93%88%E5%B8%8C%2F%E6%95%A3%E5%88%97%EF%BC%89-toc" style="margin-left:80px;"><a href="#3.Hash%EF%BC%88%E5%93%88%E5%B8%8C%2F%E6%95%A3%E5%88%97%EF%BC%89" rel="nofollow">3.Hash（哈希/散列）</a></p> 
<p id="4.Set%EF%BC%88%E6%97%A0%E5%BA%8F%E9%9B%86%E5%90%88%EF%BC%89-toc" style="margin-left:80px;"><a href="#4.Set%EF%BC%88%E6%97%A0%E5%BA%8F%E9%9B%86%E5%90%88%EF%BC%89" rel="nofollow">4.Set（无序集合）</a></p> 
<p id="5.Zset%2FSorted%20Set%EF%BC%88%E6%9C%89%E5%BA%8F%E9%9B%86%E5%90%88%EF%BC%89-toc" style="margin-left:80px;"><a href="#5.Zset%2FSorted%20Set%EF%BC%88%E6%9C%89%E5%BA%8F%E9%9B%86%E5%90%88%EF%BC%89" rel="nofollow">5.Zset/Sorted Set（有序集合）</a></p> 
<p id="6.%E9%80%9A%E7%94%A8-toc" style="margin-left:80px;"><a href="#6.%E9%80%9A%E7%94%A8" rel="nofollow">6.通用</a></p> 
<hr id="hr-toc"> 
<p></p> 
<h2>一、基本原理</h2> 
<h3 id="%EF%BC%88%E4%B8%80%EF%BC%89%E9%9D%9E%E5%85%B3%E7%B3%BB%E5%9E%8B%E6%95%B0%E6%8D%AE%E5%BA%93">（一）非关系型数据库</h3> 
<p>       不需要预先建库建表定义数据存储表结构，每条记录可以有不同的数据类型和字段个数（比如微信群聊里的文字、图片、视频、音乐等）。</p> 
<p>      主流的 NoSQL 数据库有 Redis、MongBD、Hbase、Memcached、ElasticSearch、TSDB 等。</p> 
<h3 id="%EF%BC%88%E4%BA%8C%EF%BC%89%E5%85%B3%E7%B3%BB%E5%9E%8B%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%8E%E9%9D%9E%E5%85%B3%E7%B3%BB%E5%9E%8B%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E5%8C%BA%E5%88%AB">（二）关系型数据库与非关系型数据库的区别</h3> 
<table border="1" cellpadding="1" cellspacing="1" style="width:652px;"><tbody><tr><td style="text-align:center;width:77px;"></td><td style="text-align:center;width:185px;">关系型数据库（SQL）</td><td style="text-align:center;width:388px;">非关系型数据库（NOSQL）</td></tr><tr><td style="text-align:center;width:77px;">存储结构</td><td style="text-align:center;width:185px;">二维表格结构</td><td style="text-align:center;width:388px;">可以是文档、键值对、索引、时间序列等，不同类型数据库使用不同的存储结构</td></tr><tr><td style="text-align:center;width:77px;">扩展方式</td><td style="text-align:center;width:185px;">纵向扩展（提升硬件性能）</td><td style="text-align:center;width:388px;">横向扩展（增加服务器节点数量）</td></tr><tr><td style="text-align:center;width:77px;">事务支持</td><td style="text-align:center;width:185px;">基于ACID原则</td><td style="text-align:center;width:388px;">基于BASE原则</td></tr><tr><td style="text-align:center;width:77px;">典型代表</td><td style="text-align:center;width:185px;">MySQL、Oracle、SQL-server等</td><td style="text-align:center;width:388px;">Redis、MongBD、Hbase、Memcached、ElasticSearch、TSDB等</td></tr></tbody></table> 
<h3 id="%EF%BC%88%E4%B8%89%EF%BC%89Redis%E7%AE%80%E4%BB%8B">（三）Redis简介</h3> 
<h4 id="1.%E4%BB%80%E4%B9%88%E6%98%AFRedis">1.什么是Redis</h4> 
<p>Redis（远程字典服务器） 是一个开源的、使用 C 语言编写的、基于内存运行的 NoSQL 数据库</p> 
<h4 id="2.%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8%E7%BB%93%E6%9E%84">2.数据存储结构</h4> 
<p> 键值对（Key/Value  KV）</p> 
<h4 id="3.%E9%BB%98%E8%AE%A4%E7%AB%AF%E5%8F%A3%E5%8F%B7">3.默认端口号</h4> 
<p>TCP的6379</p> 
<h4 id="4.%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B">4.数据类型</h4> 
<h5 id="%EF%BC%881%EF%BC%89%E4%BA%94%E5%A4%A7%E5%9F%BA%E7%A1%80%E7%B1%BB%E5%9E%8B">（1）五大基础类型</h5> 
<ul><li>String（字符串）</li><li> List（列表）</li><li> Hash（哈希/散列）</li><li>Set（无序集合）</li><li>Zset/Sorted Set（有序集合）</li></ul> 
<h5 id="%EF%BC%882%EF%BC%89%E4%B8%89%E7%A7%8D%E7%89%B9%E6%AE%8A%E7%B1%BB%E5%9E%8B">（2）三种特殊类型</h5> 
<ul><li>HyperLogLogs（基数统计）</li><li>Bitmaps (位图)</li><li>geospatial （地理位置)</li></ul> 
<h3 id="%EF%BC%88%E5%9B%9B%EF%BC%89Redis%E4%BC%98%E7%82%B9">（四）Redis优点</h3> 
<h4 id="1.%E6%9E%81%E9%AB%98%E7%9A%84%E6%95%B0%E6%8D%AE%E8%AF%BB%E5%86%99%E9%80%9F%E5%BA%A6">1.极高的数据读写速度</h4> 
<p>数据读取的速度最高可达到 110000 次/s，数据写入速度最高可达到 81000 次/s</p> 
<h4 id="2.%E6%94%AF%E6%8C%81%E4%B8%B0%E5%AF%8C%E7%9A%84%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B">2.支持丰富的数据类型</h4> 
<p>支持 key-value、Strings、Lists、Hashes、Sets 及 Sorted Sets 等数据类型操作。</p> 
<h4 id="3.%E6%94%AF%E6%8C%81%E6%95%B0%E6%8D%AE%E7%9A%84%E6%8C%81%E4%B9%85%E5%8C%96">3.支持数据的持久化</h4> 
<p>可以将内存中的数据保存在磁盘中，重启的时候可以再次加载进行使用。</p> 
<h4 id="4.%E5%8E%9F%E5%AD%90%E6%80%A7">4.原子性</h4> 
<p>Redis 所有操作都是原子性的。</p> 
<h4 id="5.%E6%94%AF%E6%8C%81%E6%95%B0%E6%8D%AE%E5%A4%87%E4%BB%BD">5.支持数据备份</h4> 
<p>即 master-salve 模式的数据备份。</p> 
<h3 id="%EF%BC%88%E4%BA%94%EF%BC%89redis%E5%BF%AB%E7%9A%84%E5%8E%9F%E5%9B%A0">（五）<strong>redis快的原因</strong></h3> 
<p>1.redis是基于内存运行的，数据读写都是在内存中完成的</p> 
<p>2.数据读写采用单线程模式，避免了多线程切换带来的CPU性能消耗，同时也不要考虑各种锁的问题</p> 
<p>3.采用IO多路复用模型，可以使线程处理更多的网络连接请求，提高并发能力</p> 
<h2 id="%E4%BA%8C%E3%80%81%E9%83%A8%E7%BD%B2Redis">二、部署Redis</h2> 
<h3 id="%EF%BC%88%E4%B8%80%EF%BC%89%E7%8E%AF%E5%A2%83%E5%87%86%E5%A4%87">（一）环境准备</h3> 
<pre><code class="hljs">systemctl stop firewalld
systemctl disable firewalld
setenforce 0
sed -i 's/enforcing/disabled/' /etc/selinux/config</code></pre> 
<h3 id="%EF%BC%88%E4%BA%8C%EF%BC%89%E4%BF%AE%E6%94%B9%E5%86%85%E6%A0%B8%E5%8F%82%E6%95%B0">（二）修改内核参数</h3> 
<pre><code class="language-bash">vim /etc/sysctl.conf
vm.overcommit_memory = 1
##允许给到所有物理内存，无论当前的内存状态如何
net.core.somaxconn = 2048
##表示允许TCP连接等待长度
 
sysctl -p</code></pre> 
<p><img alt="" height="510" src="https://images2.imgbox.com/b0/75/SK9T3Mn0_o.png" width="1192"></p> 
<h3 id="%EF%BC%88%E4%B8%89%EF%BC%89%E5%AE%89%E8%A3%85Redis">（三）安装Redis</h3> 
<pre><code class="language-bash">yum install -y gcc gcc-c++ make
tar -xf redis-7.0.13.tar.gz
cd redis-7.0.13
make
make PREFIX=/usr/local/redis install
#由于Redis源码包中直接提供了 Makefile 文件，所以在解压完软件包后，不用先执行 ./configure 进行配置，可直接执行 make 与 make install 命令进行安装。
 
#创建redis工作目录
mkdir /usr/local/redis/{conf,log,data}
cp /opt/redis-7.0.13/redis.conf /usr/local/redis/conf/
useradd -M -s /sbin/nologin redis
chown -R redis.redis /usr/local/redis/
 
#环境变量
vim /etc/profile 
PATH=$PATH:/usr/local/redis/bin		#增加一行
 
source /etc/profile</code></pre> 
<p><img alt="" height="280" src="https://images2.imgbox.com/45/80/qp34ghkX_o.png" width="1200"></p> 
<p><img alt="" height="183" src="https://images2.imgbox.com/72/78/GSLS6Lis_o.png" width="1200"></p> 
<h3 id="%EF%BC%88%E5%9B%9B%EF%BC%89%E4%BF%AE%E6%94%B9%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6">（四）修改配置文件</h3> 
<pre><code class="language-bash">vim /usr/local/redis/conf/redis.conf
 
bind 127.0.0.1 192.168.88.40					#87行，添加 监听的主机地址
protected-mode no					            #111行，将本机访问保护模式设置no。
port 6379										#138行，Redis默认的监听6379端口
daemonize yes									#309行，设置为守护进程，后台启动   
pidfile /usr/local/redis/log/redis_6379.pid		#341行，指定 PID 文件
logfile "/usr/local/redis/log/redis_6379.log"	#354行，指定日志文件
dir /usr/local/redis/data						#504行，指定持久化文件所在目录
requirepass 123								    #1037行，增加一行，设置redis密码</code></pre> 
<p><img alt="" height="180" src="https://images2.imgbox.com/c8/0b/ABlA4Pd4_o.png" width="915"></p> 
<p><img alt="" height="238" src="https://images2.imgbox.com/b3/35/QzZja1Yl_o.png" width="1200"></p> 
<p><img alt="" height="180" src="https://images2.imgbox.com/e7/bc/QL8X8GhI_o.png" width="1200"></p> 
<p><img alt="" height="225" src="https://images2.imgbox.com/64/b6/yDq3o9f3_o.png" width="1200"></p> 
<p><img alt="" height="599" src="https://images2.imgbox.com/47/22/0SpvVuqU_o.png" width="1200"></p> 
<p><img alt="" height="562" src="https://images2.imgbox.com/8e/33/Nivaqj9G_o.png" width="1200"></p> 
<p><img alt="" height="357" src="https://images2.imgbox.com/e0/c3/1rAZex49_o.png" width="1200"></p> 
<h3 id="%EF%BC%88%E4%BA%94%EF%BC%89%E5%AE%9A%E4%B9%89systemd%E6%9C%8D%E5%8A%A1%E7%AE%A1%E7%90%86%E8%84%9A%E6%9C%AC">（五）定义systemd服务管理脚本</h3> 
<pre><code class="language-bash">vim /usr/lib/systemd/system/redis-server.service
 
[Unit]
Description=Redis Server
After=network.target
 
[Service]
User=redis
Group=redis
Type=forking
TimeoutSec=0
PIDFile=/usr/local/redis/log/redis_6379.pid
ExecStart=/usr/local/redis/bin/redis-server /usr/local/redis/conf/redis.conf
ExecReload=/bin/kill -s HUP $MAINPID
ExecStop=/bin/kill -s QUIT $MAINPID
PrivateTmp=true
 
[Install]
WantedBy=multi-user.target</code></pre> 
<p><img alt="" height="553" src="https://images2.imgbox.com/cd/e8/tlCjFVdf_o.png" width="1200"></p> 
<h3 id="%EF%BC%88%E5%85%AD%EF%BC%89%E5%90%AF%E5%8A%A8%E6%9C%8D%E5%8A%A1">（六）启动服务</h3> 
<pre><code class="language-bash">systemctl start redis-server
systemctl enable redis-server
 
netstat -lntp | grep 6379</code></pre> 
<p><img alt="" height="301" src="https://images2.imgbox.com/65/66/5dXSTMB7_o.png" width="1200"></p> 
<h2 id="%E4%B8%89%E3%80%81%E5%AE%9E%E6%93%8D">三、实操</h2> 
<h3 id="%EF%BC%88%E4%B8%80%EF%BC%89Redis%20%E5%91%BD%E4%BB%A4%E5%B7%A5%E5%85%B7">（一）Redis 命令工具</h3> 
<pre><code class="language-bash">redis-server：Redis 服务器启动命令
redis-benchmark：性能测试工具，用于检测 Redis 在本机的运行效率
redis-check-aof：修复有问题的 AOF 持久化文件
redis-check-rdb：修复有问题的 RDB 持久化文件
redis-cli：Redis 客户端命令行工具
redis-sentinel：Redis 哨兵集群使用</code></pre> 
<p><img alt="" height="321" src="https://images2.imgbox.com/f7/e2/Plkh2qhn_o.png" width="1200"></p> 
<h3 id="%EF%BC%88%E4%BA%8C%EF%BC%89redis-cli%20%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%B7%A5%E5%85%B7">（二）redis-cli 命令行工具</h3> 
<pre><code class="language-bash">语法：redis-cli -h host -p port [-a password]
-h ：指定远程主机
-p ：指定 Redis 服务的端口号
-a ：指定密码，未设置数据库密码可以省略-a 选项
若不添加任何选项表示，则使用 127.0.0.1:6379 连接本机上的 Redis 数据库
 
redis-cli -h 指定远程主机 -p 端口 -a 指定密码</code></pre> 
<p><img alt="" height="250" src="https://images2.imgbox.com/46/8d/NoqLtXsq_o.png" width="1200"></p> 
<h3 id="%EF%BC%88%E4%B8%89%EF%BC%89redis-benchmark%20%E6%B5%8B%E8%AF%95%E5%B7%A5%E5%85%B7">（三）redis-benchmark 测试工具</h3> 
<p><strong>redis-benchmark 是官方自带的 Redis 性能测试工具，可以有效的测试 Redis 服务的性能。</strong></p> 
<pre><code class="language-bash">基本的测试语法：
redis-benchmark [选项] [选项值]。
-h     #指定服务器主机名。
-p     #指定服务器端口。
-s     #指定服务器 socket
-c     #指定并发连接数。 
-n     #指定请求数。
-d     #以字节的形式指定 SET/GET 值的数据大小。
-k     #1=keep alive 0=reconnect 。
-r     #SET/GET/INCR 使用随机 key, SADD 使用随机值。
-P     #通过管道传输&lt;numreq&gt;请求。
-q     #强制退出 redis。仅显示 query/sec 值。
--csv  #以 CSV 格式输出。
-l     #生成循环，永久执行测试。
-t     #仅运行以逗号分隔的测试命令列表。
-I     #Idle 模式。仅打开 N 个 idle 连接并等待。</code></pre> 
<pre><code class="language-bash">向IP地址为 192.168.88.40、端口为 6379 的 Redis 服务器发送100个并发连接与 100000 个请求测试性能
redis-benchmark -c 100 -n 100000 -h 192.168.20.12 -a 123 -p 6379 -t set,rpush -q

redis-benchmark -c 100 -n 100000 -h 192.168.20.12 -a 123 -p 6379 -d 100 -q</code></pre> 
<p><img alt="" height="630" src="https://images2.imgbox.com/c8/bc/yaKfkSxR_o.png" width="1200"></p> 
<h3 id="%EF%BC%88%E5%9B%9B%EF%BC%89Redis%E6%95%B0%E6%8D%AE%E5%BA%93%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4">（四）Redis数据库常用命令</h3> 
<h4 id="1.String%EF%BC%88%E5%AD%97%E7%AC%A6%E4%B8%B2%EF%BC%89">1.String（字符串）</h4> 
<pre><code class="language-bash">set 键 值    #创建键值
get 键       #查看键值
del 键       #删除键</code></pre> 
<p><img alt="" height="651" src="https://images2.imgbox.com/af/37/8nCSAv2y_o.png" width="1065"></p> 
<h4 id="2.List%EF%BC%88%E5%88%97%E8%A1%A8%EF%BC%89">2.List（列表）</h4> 
<pre><code class="language-bash">lpush|rpush 键 值1 值2 值3 ....     #创建yy键
lrange 键  起始下标    终止下标      #查看yy键
           0（第一个） -1（最后一个）
lrem 键  元素个数  元素值            
del 键                             #删除键</code></pre> 
<p><img alt="" height="1200" src="https://images2.imgbox.com/b5/3b/f8V9fsXs_o.png" width="1200"></p> 
<h4 id="3.Hash%EF%BC%88%E5%93%88%E5%B8%8C%2F%E6%95%A3%E5%88%97%EF%BC%89">3.Hash（哈希/散列）</h4> 
<pre><code class="language-bash">hset 键 字段1 值1 字段2 值2 ....         #创建键
hget 键 字段                            #查看单个字段值
hgetall 键                              #查看键的所有字段和字段值
hkeys 键                                #查看键的所有字段
hvals 键                                #查看键的所有值
hdel 键 字段                            #删除单个字段
del 键                                  #删除键</code></pre> 
<p><img alt="" height="1169" src="https://images2.imgbox.com/23/fd/cu3vIsIS_o.png" width="1200"></p> 
<h4 id="4.Set%EF%BC%88%E6%97%A0%E5%BA%8F%E9%9B%86%E5%90%88%EF%BC%89">4.Set（无序集合）</h4> 
<pre><code class="language-bash">sadd 键 值1 值2 值3 ....    #创建键
smembers 键                #查看键值
srem 键 值                 #删除单个键值
del 键                     #删除键</code></pre> 
<p><img alt="" height="516" src="https://images2.imgbox.com/d6/ec/FEq15yhB_o.png" width="1200"></p> 
<h4 id="5.Zset%2FSorted%20Set%EF%BC%88%E6%9C%89%E5%BA%8F%E9%9B%86%E5%90%88%EF%BC%89">5.Zset/Sorted Set（有序集合）</h4> 
<pre><code class="language-bash">zadd 键 序号1 值1  序号2 值2 ....           #创建zadd类型键
zrange 键 起始下标  终止下标 [withscores]   #查看键
          0         -1
zrangebyscore 键 起始序号 结束序号          #用序号查看键
zrem 键 值1 值2 ....                       #删除键值
zrembyscore 键  起始序号 结束序号           #用序号删除键值
del 键                                     #删除键</code></pre> 
<p><img alt="" height="786" src="https://images2.imgbox.com/02/22/dPPTa5iA_o.png" width="1171"></p> 
<h4 id="6.%E9%80%9A%E7%94%A8">6.通用</h4> 
<pre><code class="language-bash">type 键                             #查看键的数据类型
keys 键 * ?                         #查询键名，支持通配符 * ?
exists 键                           #判断键是否存在
expire 键 过期时间                   #为已存在的键设置过期时间
setex 键 过期时间 值                 #创建string类型的键并设置过期时间
ttl 键                              #查看键的生命周期时间，-1 永不过期，-2 已过期
rename 旧键 新键                     #重命名键名，会覆盖已存在的键
renamenx 旧键 新键                   #重命名键名，不会覆盖已存在的键
dbsize                              #统计当前库中键的总数
config set requirepass '密码'       #设置/修改redis密码
config get requirepass              #查看密码
auth '密码'                         #在redis里验证密码
select 库ID                         #切换库，默认库ID为 0~15
move 键 库ID                        #移动键到指定的库
flushdb                             #清空当前库（慎用）
flushall                            #清空所有库（慎用）</code></pre> 
<p><img alt="" height="1111" src="https://images2.imgbox.com/1b/05/aB8fRS1O_o.png" width="1200"><img alt="" height="1032" src="https://images2.imgbox.com/7f/72/8G22lnR5_o.png" width="1200"></p> 
<p><img alt="" height="1052" src="https://images2.imgbox.com/fe/54/b8fXqILU_o.png" width="1200"><img alt="" height="593" src="https://images2.imgbox.com/21/e8/f5SXY0KS_o.png" width="1200"><img alt="" height="1101" src="https://images2.imgbox.com/d9/45/fR6YZR7E_o.png" width="1200"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/02cf3a11de652f6f03818fc13c31a557/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">c&#43;&#43;学习：容器list实战（获取目录返回容器list）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/773049d94694d5ca28f6b969aac36045/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">903. 昂贵的聘礼（最短路，超级原点，Dijkstra）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>