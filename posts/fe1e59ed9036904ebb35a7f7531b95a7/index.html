<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>2021-11-31 防火墙的Web界面配置＋NAT访问外网 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="2021-11-31 防火墙的Web界面配置＋NAT访问外网" />
<meta property="og:description" content="本文章仅供学习和参考！
欢迎交流~
目录
一、实验拓扑图：
二、实验要求：
1. 防火墙基础配置（基于命令行）：
2. 防火墙IP地址和安全区域配置（基于Web界面）：
3. 边界安全设备FW5配置路由可达（基于Web界面）：
4. 外网设备IP地址配置：
5. R6和R7-OSPF配置，RID=255.X.X.X，X为设备编号：
6.配置NAT让内网主机可以访问外网：
三、实验步骤：
1. 配置环回适配器（基于安全性原则）​
2. 配置Cloud1
3.配置客户端
（1）配置PC1
（2）配置PC2
（3）配置Client1
（4）配置Client2
4.配置服务器 （1）配置Server1
（2）配置Server2
5. 配置防火墙
6. 配置路由器
（1） 配置R1
（2）配置R2
（3）配置R3
（4）配置R4
（5）配置R6
（6）配置R7
一、实验拓扑图： 二、实验要求： 1. 防火墙基础配置（基于命令行）： （0）启动防火墙出现###五行左右正常显示登录界面后，如果五行###出现完还没有出现登录界面，请关闭eNSP再重新打开eNSP实验图； （1）设置eNSP的云（udp&#43;GE点增加，本地网卡IP&#43;GE点增加），通道 上1下2点勾双向通道，将防火墙的G0/0/0桥接到本地网卡所在的网络； （2）基于CLI命令行访问设备，第一次访问设备使用用户名=admin和密码=Admin@123进行登录，并需要修改密码=Admin@123456； （3）修改防火墙设备系统名=FW5，并设置登录设备后的超时时间=0分和0秒； （4）FW5-G0/0/0=192.168.100.2xx/24 安全区域属于Trust，其中xx为学号，例如：学号=36，则FW5-G0/0/0=192.168.100.236/24； （5）FW5-G0/0/0允许所有支持服务管理协议进行访问管理； （6）从本地PC的cmd下&gt;ping 192.168.100.2xx，结果应该是可以ping通，如果不通请进行故障排错； （7）从本地PC打开谷歌浏览器或火狐浏览器，输入192.168.100.2xx，在Web中是否有登录界面； （8）请用命令查看并填写Trust安全区域优先级=（ 85 ），untrust安全区域优先级=（ 5 ）,DMZ安全区域优先级=（ 50）,local安全区域优先级=（ 100 ）； 2. 防火墙IP地址和安全区域配置（基于Web界面）： （1）FW5-G1/0/0=192.168.5.1/24 安全区域属于Trust，仅允许服务管理ping/SNMP进行访问管理； （2）FW5-G1/0/1=192.168.45.5/24 安全区域属于Trust，允许除开NETCONF协议外的其他支持协议进行访问管理； （3）FW5-G1/0/2=192." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/fe1e59ed9036904ebb35a7f7531b95a7/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-11-30T19:25:25+08:00" />
<meta property="article:modified_time" content="2021-11-30T19:25:25+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">2021-11-31 防火墙的Web界面配置＋NAT访问外网</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p><span style="color:#fe2c24;">本文章仅供学习和参考！</span></p> 
<p><span style="color:#fe2c24;">欢迎交流~</span></p> 
<p></p> 
<p id="main-toc"><strong>目录</strong></p> 
<p id="%E4%B8%80%E3%80%81%E5%AE%9E%E9%AA%8C%E6%8B%93%E6%89%91%E5%9B%BE%EF%BC%9A-toc" style="margin-left:0px;"><a href="#%E4%B8%80%E3%80%81%E5%AE%9E%E9%AA%8C%E6%8B%93%E6%89%91%E5%9B%BE%EF%BC%9A" rel="nofollow" title="一、实验拓扑图：">一、实验拓扑图：</a></p> 
<p id="%E4%BA%8C%E3%80%81%E5%AE%9E%E9%AA%8C%E8%A6%81%E6%B1%82%EF%BC%9A-toc" style="margin-left:0px;"><a href="#%E4%BA%8C%E3%80%81%E5%AE%9E%E9%AA%8C%E8%A6%81%E6%B1%82%EF%BC%9A" rel="nofollow" title="二、实验要求：">二、实验要求：</a></p> 
<p id="%C2%A01.%C2%A0%E9%98%B2%E7%81%AB%E5%A2%99%E5%9F%BA%E7%A1%80%E9%85%8D%E7%BD%AE%EF%BC%88%E5%9F%BA%E4%BA%8E%E5%91%BD%E4%BB%A4%E8%A1%8C%EF%BC%89%EF%BC%9A-toc" style="margin-left:40px;"><a href="#%C2%A01.%C2%A0%E9%98%B2%E7%81%AB%E5%A2%99%E5%9F%BA%E7%A1%80%E9%85%8D%E7%BD%AE%EF%BC%88%E5%9F%BA%E4%BA%8E%E5%91%BD%E4%BB%A4%E8%A1%8C%EF%BC%89%EF%BC%9A" rel="nofollow" title=" 1. 防火墙基础配置（基于命令行）："> 1. 防火墙基础配置（基于命令行）：</a></p> 
<p id="%C2%A02.%C2%A0%E9%98%B2%E7%81%AB%E5%A2%99IP%E5%9C%B0%E5%9D%80%E5%92%8C%E5%AE%89%E5%85%A8%E5%8C%BA%E5%9F%9F%E9%85%8D%E7%BD%AE%EF%BC%88%E5%9F%BA%E4%BA%8EWeb%E7%95%8C%E9%9D%A2%EF%BC%89%EF%BC%9A-toc" style="margin-left:40px;"><a href="#%C2%A02.%C2%A0%E9%98%B2%E7%81%AB%E5%A2%99IP%E5%9C%B0%E5%9D%80%E5%92%8C%E5%AE%89%E5%85%A8%E5%8C%BA%E5%9F%9F%E9%85%8D%E7%BD%AE%EF%BC%88%E5%9F%BA%E4%BA%8EWeb%E7%95%8C%E9%9D%A2%EF%BC%89%EF%BC%9A" rel="nofollow" title=" 2. 防火墙IP地址和安全区域配置（基于Web界面）："> 2. 防火墙IP地址和安全区域配置（基于Web界面）：</a></p> 
<p id="3.%C2%A0%E8%BE%B9%E7%95%8C%E5%AE%89%E5%85%A8%E8%AE%BE%E5%A4%87FW5%E9%85%8D%E7%BD%AE%E8%B7%AF%E7%94%B1%E5%8F%AF%E8%BE%BE%EF%BC%88%E5%9F%BA%E4%BA%8EWeb%E7%95%8C%E9%9D%A2%EF%BC%89%EF%BC%9A-toc" style="margin-left:40px;"><a href="#3.%C2%A0%E8%BE%B9%E7%95%8C%E5%AE%89%E5%85%A8%E8%AE%BE%E5%A4%87FW5%E9%85%8D%E7%BD%AE%E8%B7%AF%E7%94%B1%E5%8F%AF%E8%BE%BE%EF%BC%88%E5%9F%BA%E4%BA%8EWeb%E7%95%8C%E9%9D%A2%EF%BC%89%EF%BC%9A" rel="nofollow" title="3. 边界安全设备FW5配置路由可达（基于Web界面）：">3. 边界安全设备FW5配置路由可达（基于Web界面）：</a></p> 
<p id="4.%C2%A0%E5%A4%96%E7%BD%91%E8%AE%BE%E5%A4%87IP%E5%9C%B0%E5%9D%80%E9%85%8D%E7%BD%AE%EF%BC%9A-toc" style="margin-left:40px;"><a href="#4.%C2%A0%E5%A4%96%E7%BD%91%E8%AE%BE%E5%A4%87IP%E5%9C%B0%E5%9D%80%E9%85%8D%E7%BD%AE%EF%BC%9A" rel="nofollow" title="4. 外网设备IP地址配置：">4. 外网设备IP地址配置：</a></p> 
<p id="5.%C2%A0R6%E5%92%8CR7-OSPF%E9%85%8D%E7%BD%AE%EF%BC%8CRID%3D255.X.X.X%EF%BC%8CX%E4%B8%BA%E8%AE%BE%E5%A4%87%E7%BC%96%E5%8F%B7%EF%BC%9A-toc" style="margin-left:40px;"><a href="#5.%C2%A0R6%E5%92%8CR7-OSPF%E9%85%8D%E7%BD%AE%EF%BC%8CRID%3D255.X.X.X%EF%BC%8CX%E4%B8%BA%E8%AE%BE%E5%A4%87%E7%BC%96%E5%8F%B7%EF%BC%9A" rel="nofollow" title="5. R6和R7-OSPF配置，RID=255.X.X.X，X为设备编号：">5. R6和R7-OSPF配置，RID=255.X.X.X，X为设备编号：</a></p> 
<p id="6.%E9%85%8D%E7%BD%AENAT%E8%AE%A9%E5%86%85%E7%BD%91%E4%B8%BB%E6%9C%BA%E5%8F%AF%E4%BB%A5%E8%AE%BF%E9%97%AE%E5%A4%96%E7%BD%91%EF%BC%9A-toc" style="margin-left:40px;"><a href="#6.%E9%85%8D%E7%BD%AENAT%E8%AE%A9%E5%86%85%E7%BD%91%E4%B8%BB%E6%9C%BA%E5%8F%AF%E4%BB%A5%E8%AE%BF%E9%97%AE%E5%A4%96%E7%BD%91%EF%BC%9A" rel="nofollow" title="6.配置NAT让内网主机可以访问外网：">6.配置NAT让内网主机可以访问外网：</a></p> 
<p id="%E4%B8%89%E3%80%81%E5%AE%9E%E9%AA%8C%E6%AD%A5%E9%AA%A4%EF%BC%9A-toc" style="margin-left:0px;"><a href="#%E4%B8%89%E3%80%81%E5%AE%9E%E9%AA%8C%E6%AD%A5%E9%AA%A4%EF%BC%9A" rel="nofollow" title="三、实验步骤：">三、实验步骤：</a></p> 
<p id="1.%20%E9%85%8D%E7%BD%AE%E7%8E%AF%E5%9B%9E%E9%80%82%E9%85%8D%E5%99%A8%EF%BC%88%E5%9F%BA%E4%BA%8E%E5%AE%89%E5%85%A8%E6%80%A7%E5%8E%9F%E5%88%99%EF%BC%89%E2%80%8B-toc" style="margin-left:40px;"><a href="#1.%20%E9%85%8D%E7%BD%AE%E7%8E%AF%E5%9B%9E%E9%80%82%E9%85%8D%E5%99%A8%EF%BC%88%E5%9F%BA%E4%BA%8E%E5%AE%89%E5%85%A8%E6%80%A7%E5%8E%9F%E5%88%99%EF%BC%89%E2%80%8B" rel="nofollow" title="1. 配置环回适配器（基于安全性原则）​">1. 配置环回适配器（基于安全性原则）​</a></p> 
<p id="%C2%A02.%20%E9%85%8D%E7%BD%AECloud1-toc" style="margin-left:40px;"><a href="#%C2%A02.%20%E9%85%8D%E7%BD%AECloud1" rel="nofollow" title=" 2. 配置Cloud1"> 2. 配置Cloud1</a></p> 
<p id="%C2%A03.%E9%85%8D%E7%BD%AE%E5%AE%A2%E6%88%B7%E7%AB%AF-toc" style="margin-left:40px;"><a href="#%C2%A03.%E9%85%8D%E7%BD%AE%E5%AE%A2%E6%88%B7%E7%AB%AF" rel="nofollow" title=" 3.配置客户端"> 3.配置客户端</a></p> 
<p id="%EF%BC%881%EF%BC%89%E9%85%8D%E7%BD%AEPC1-toc" style="margin-left:80px;"><a href="#%EF%BC%881%EF%BC%89%E9%85%8D%E7%BD%AEPC1" rel="nofollow" title="（1）配置PC1">（1）配置PC1</a></p> 
<p id="%EF%BC%882%EF%BC%89%E9%85%8D%E7%BD%AEPC2-toc" style="margin-left:80px;"><a href="#%EF%BC%882%EF%BC%89%E9%85%8D%E7%BD%AEPC2" rel="nofollow" title="（2）配置PC2">（2）配置PC2</a></p> 
<p id="%EF%BC%883%EF%BC%89%E9%85%8D%E7%BD%AEClient1-toc" style="margin-left:80px;"><a href="#%EF%BC%883%EF%BC%89%E9%85%8D%E7%BD%AEClient1" rel="nofollow" title="（3）配置Client1">（3）配置Client1</a></p> 
<p id="%EF%BC%884%EF%BC%89%E9%85%8D%E7%BD%AEClient2-toc" style="margin-left:80px;"><a href="#%EF%BC%884%EF%BC%89%E9%85%8D%E7%BD%AEClient2" rel="nofollow" title="（4）配置Client2">（4）配置Client2</a></p> 
<p id="4.%E9%85%8D%E7%BD%AE%E6%9C%8D%E5%8A%A1%E5%99%A8%C2%A0-toc" style="margin-left:40px;"><a href="#4.%E9%85%8D%E7%BD%AE%E6%9C%8D%E5%8A%A1%E5%99%A8%C2%A0" rel="nofollow" title="4.配置服务器 ">4.配置服务器 </a></p> 
<p id="%EF%BC%881%EF%BC%89%E9%85%8D%E7%BD%AEServer1-toc" style="margin-left:80px;"><a href="#%EF%BC%881%EF%BC%89%E9%85%8D%E7%BD%AEServer1" rel="nofollow" title="（1）配置Server1">（1）配置Server1</a></p> 
<p id="%EF%BC%882%EF%BC%89%E9%85%8D%E7%BD%AEServer2-toc" style="margin-left:80px;"><a href="#%EF%BC%882%EF%BC%89%E9%85%8D%E7%BD%AEServer2" rel="nofollow" title="（2）配置Server2">（2）配置Server2</a></p> 
<p id="5.%20%E9%85%8D%E7%BD%AE%E9%98%B2%E7%81%AB%E5%A2%99-toc" style="margin-left:40px;"><a href="#5.%20%E9%85%8D%E7%BD%AE%E9%98%B2%E7%81%AB%E5%A2%99" rel="nofollow" title="5. 配置防火墙">5. 配置防火墙</a></p> 
<p id="6.%20%E9%85%8D%E7%BD%AE%E8%B7%AF%E7%94%B1%E5%99%A8-toc" style="margin-left:40px;"><a href="#6.%20%E9%85%8D%E7%BD%AE%E8%B7%AF%E7%94%B1%E5%99%A8" rel="nofollow" title="6. 配置路由器">6. 配置路由器</a></p> 
<p id="%EF%BC%881%EF%BC%89%20%E9%85%8D%E7%BD%AER1-toc" style="margin-left:80px;"><a href="#%EF%BC%881%EF%BC%89%20%E9%85%8D%E7%BD%AER1" rel="nofollow" title="（1） 配置R1">（1） 配置R1</a></p> 
<p id="%EF%BC%882%EF%BC%89%E9%85%8D%E7%BD%AER2-toc" style="margin-left:80px;"><a href="#%EF%BC%882%EF%BC%89%E9%85%8D%E7%BD%AER2" rel="nofollow" title="（2）配置R2">（2）配置R2</a></p> 
<p id="%EF%BC%883%EF%BC%89%E9%85%8D%E7%BD%AER3-toc" style="margin-left:80px;"><a href="#%EF%BC%883%EF%BC%89%E9%85%8D%E7%BD%AER3" rel="nofollow" title="（3）配置R3">（3）配置R3</a></p> 
<p id="%EF%BC%884%EF%BC%89%E9%85%8D%E7%BD%AER4-toc" style="margin-left:80px;"><a href="#%EF%BC%884%EF%BC%89%E9%85%8D%E7%BD%AER4" rel="nofollow" title="（4）配置R4">（4）配置R4</a></p> 
<p id="%EF%BC%885%EF%BC%89%E9%85%8D%E7%BD%AER6-toc" style="margin-left:80px;"><a href="#%EF%BC%885%EF%BC%89%E9%85%8D%E7%BD%AER6" rel="nofollow" title="（5）配置R6">（5）配置R6</a></p> 
<p id="%EF%BC%886%EF%BC%89%E9%85%8D%E7%BD%AER7-toc" style="margin-left:80px;"><a href="#%EF%BC%886%EF%BC%89%E9%85%8D%E7%BD%AER7" rel="nofollow" title="（6）配置R7">（6）配置R7</a></p> 
<hr id="hr-toc"> 
<p></p> 
<h2 id="%E4%B8%80%E3%80%81%E5%AE%9E%E9%AA%8C%E6%8B%93%E6%89%91%E5%9B%BE%EF%BC%9A">一、实验拓扑图：</h2> 
<p><img alt="" height="896" src="https://images2.imgbox.com/dd/ad/xGSP0N4b_o.png" width="1200"></p> 
<p></p> 
<h2 id="%E4%BA%8C%E3%80%81%E5%AE%9E%E9%AA%8C%E8%A6%81%E6%B1%82%EF%BC%9A">二、实验要求：</h2> 
<h3 id="%C2%A01.%C2%A0%E9%98%B2%E7%81%AB%E5%A2%99%E5%9F%BA%E7%A1%80%E9%85%8D%E7%BD%AE%EF%BC%88%E5%9F%BA%E4%BA%8E%E5%91%BD%E4%BB%A4%E8%A1%8C%EF%BC%89%EF%BC%9A"> 1. 防火墙基础配置（基于命令行）：</h3> 
<pre><code>（0）启动防火墙出现###五行左右正常显示登录界面后，如果五行###出现完还没有出现登录界面，请关闭eNSP再重新打开eNSP实验图；
（1）设置eNSP的云（udp+GE点增加，本地网卡IP+GE点增加），通道 上1下2点勾双向通道，将防火墙的G0/0/0桥接到本地网卡所在的网络；
（2）基于CLI命令行访问设备，第一次访问设备使用用户名=admin和密码=Admin@123进行登录，并需要修改密码=Admin@123456；
（3）修改防火墙设备系统名=FW5，并设置登录设备后的超时时间=0分和0秒；
（4）FW5-G0/0/0=192.168.100.2xx/24    安全区域属于Trust，其中xx为学号，例如：学号=36，则FW5-G0/0/0=192.168.100.236/24；
（5）FW5-G0/0/0允许所有支持服务管理协议进行访问管理；
（6）从本地PC的cmd下&gt;ping 192.168.100.2xx，结果应该是可以ping通，如果不通请进行故障排错；
（7）从本地PC打开谷歌浏览器或火狐浏览器，输入192.168.100.2xx，在Web中是否有登录界面；
（8）请用命令查看并填写Trust安全区域优先级=（ 85  ），untrust安全区域优先级=（ 5  ）,DMZ安全区域优先级=（   50）,local安全区域优先级=（  100 ）；</code></pre> 
<h3 id="%C2%A02.%C2%A0%E9%98%B2%E7%81%AB%E5%A2%99IP%E5%9C%B0%E5%9D%80%E5%92%8C%E5%AE%89%E5%85%A8%E5%8C%BA%E5%9F%9F%E9%85%8D%E7%BD%AE%EF%BC%88%E5%9F%BA%E4%BA%8EWeb%E7%95%8C%E9%9D%A2%EF%BC%89%EF%BC%9A"> 2. 防火墙IP地址和安全区域配置（基于Web界面）：</h3> 
<pre><code>（1）FW5-G1/0/0=192.168.5.1/24          安全区域属于Trust，仅允许服务管理ping/SNMP进行访问管理；
（2）FW5-G1/0/1=192.168.45.5/24         安全区域属于Trust，允许除开NETCONF协议外的其他支持协议进行访问管理；
（3）FW5-G1/0/2=192.168.35.5/24         安全区域属于Trust，仅允许服务管理SSH/Telnet/ping进行访问管理；
（4）测试：在Server1上ping 192.168.5.1能通，R3上ping 192.168.35.5能通，R4上ping 192.168.45.5能通；</code></pre> 
<h3 id="3.%C2%A0%E8%BE%B9%E7%95%8C%E5%AE%89%E5%85%A8%E8%AE%BE%E5%A4%87FW5%E9%85%8D%E7%BD%AE%E8%B7%AF%E7%94%B1%E5%8F%AF%E8%BE%BE%EF%BC%88%E5%9F%BA%E4%BA%8EWeb%E7%95%8C%E9%9D%A2%EF%BC%89%EF%BC%9A">3. 边界安全设备FW5配置路由可达（基于Web界面）：</h3> 
<pre><code>(1)FW5上配置OSPF进程号=1，Router-ID=123.5.5.5，区域ID=0，把G1/0/0、G1/0/1、G1/0/2三个接口精确通告进OSPF；
(2)R5上配置静态缺省路由通往外部网络，下一跳IP地址=202.103.56.6；
(3)R5上配置OSPF 缺省路由，就算本地路由表没有0.0.0.0/0也能总是下放OSPF默认路由给OSPF邻居设备；
(4)测试：PC1和PC2通过ping 192.168.5.100能通，PC1和PC2通过Tracert 192.168.5.100分别走左边和右边；
(5)测试：R1/R2/R3/R4上通过display ip routing-table 查看R1/R2/R3/R4路由表应存在0.0.0.0/0 的O_ASE路由；
(6)测试：R1/R2/R3/R4上测试ping 200.1.1.200或ping 100.1.1.100结果不通（因为还没有做NAT）；</code></pre> 
<h3 id="4.%C2%A0%E5%A4%96%E7%BD%91%E8%AE%BE%E5%A4%87IP%E5%9C%B0%E5%9D%80%E9%85%8D%E7%BD%AE%EF%BC%9A">4. 外网设备IP地址配置：</h3> 
<pre><code>(1)FW5-G0/0/0=192.168.100.2xx/24    安全区域属于Trust，R6-G2/0/0=202.103.56.6/24，其他IP按照图示配置；
(2)测试：在R6上测试ping 202.103.56.5结果是能通；
(3)Client2=100.1.1.100/24，网关=100.1.1.1/24；</code></pre> 
<h3 id="5.%C2%A0R6%E5%92%8CR7-OSPF%E9%85%8D%E7%BD%AE%EF%BC%8CRID%3D255.X.X.X%EF%BC%8CX%E4%B8%BA%E8%AE%BE%E5%A4%87%E7%BC%96%E5%8F%B7%EF%BC%9A">5. R6和R7-OSPF配置，RID=255.X.X.X，X为设备编号：</h3> 
<pre><code>(1)R7上配置OSPF 1 Area 0，把G0/0/0、G0/0/1、G0/0/2精确通告进OSPF；
(2)R6上配置OSPF 1 Area 0，把G0/0/1精确通告进OSPF；
(3)R6上配置OSPF 缺省路由，就算本地路由表没有0.0.0.0/0也能总是下放OSPF默认路由给OSPF邻居设备；
(4)测试：R7上通过display ip routing-table 查看R7路由表应存在0.0.0.0/0 的O_ASE路由；
(5)测试：Server2和Client2测试ping 202.103.56.6能通，Server2和Client2测试ping 202.103.56.5不能通；</code></pre> 
<h3 id="6.%E9%85%8D%E7%BD%AENAT%E8%AE%A9%E5%86%85%E7%BD%91%E4%B8%BB%E6%9C%BA%E5%8F%AF%E4%BB%A5%E8%AE%BF%E9%97%AE%E5%A4%96%E7%BD%91%EF%BC%9A">6.配置NAT让内网主机可以访问外网：</h3> 
<p></p> 
<h2 id="%E4%B8%89%E3%80%81%E5%AE%9E%E9%AA%8C%E6%AD%A5%E9%AA%A4%EF%BC%9A">三、实验步骤：</h2> 
<h3 id="1.%20%E9%85%8D%E7%BD%AE%E7%8E%AF%E5%9B%9E%E9%80%82%E9%85%8D%E5%99%A8%EF%BC%88%E5%9F%BA%E4%BA%8E%E5%AE%89%E5%85%A8%E6%80%A7%E5%8E%9F%E5%88%99%EF%BC%89%E2%80%8B">1. 配置环回适配器（基于安全性原则）<img alt="" height="641" src="https://images2.imgbox.com/d0/bc/R43jq8mv_o.png" width="1139"></h3> 
<h3 id="%C2%A02.%20%E9%85%8D%E7%BD%AECloud1"> 2. 配置Cloud1</h3> 
<p><img alt="" height="533" src="https://images2.imgbox.com/d0/24/Ea01AY4c_o.png" width="781"></p> 
<h3 id="%C2%A03.%E9%85%8D%E7%BD%AE%E5%AE%A2%E6%88%B7%E7%AB%AF"> 3.配置客户端</h3> 
<h4 id="%EF%BC%881%EF%BC%89%E9%85%8D%E7%BD%AEPC1">（1）配置PC1</h4> 
<p><img alt="" height="533" src="https://images2.imgbox.com/3d/29/1OYoBx14_o.png" width="781"></p> 
<h4 id="%EF%BC%882%EF%BC%89%E9%85%8D%E7%BD%AEPC2">（2）配置PC2</h4> 
<p><img alt="" height="533" src="https://images2.imgbox.com/ec/df/PlkhlZ5p_o.png" width="781"></p> 
<h4 id="%EF%BC%883%EF%BC%89%E9%85%8D%E7%BD%AEClient1">（3）配置Client1</h4> 
<p><img alt="" height="509" src="https://images2.imgbox.com/35/f0/ZNndg4k0_o.png" width="734"></p> 
<h4 id="%EF%BC%884%EF%BC%89%E9%85%8D%E7%BD%AEClient2">（4）配置Client2</h4> 
<p><img alt="" height="509" src="https://images2.imgbox.com/b9/bc/sgEI04SK_o.png" width="734"></p> 
<h3 id="4.%E9%85%8D%E7%BD%AE%E6%9C%8D%E5%8A%A1%E5%99%A8%C2%A0">4.配置服务器 </h3> 
<h4 id="%EF%BC%881%EF%BC%89%E9%85%8D%E7%BD%AEServer1">（1）配置Server1</h4> 
<p><img alt="" height="509" src="https://images2.imgbox.com/64/56/KcDYN4kg_o.png" width="734"></p> 
<h4 id="%EF%BC%882%EF%BC%89%E9%85%8D%E7%BD%AEServer2">（2）配置Server2</h4> 
<p><img alt="" height="509" src="https://images2.imgbox.com/7b/07/go6LemRk_o.png" width="734"></p> 
<h3 id="5.%20%E9%85%8D%E7%BD%AE%E9%98%B2%E7%81%AB%E5%A2%99">5. 配置防火墙</h3> 
<pre><code>
修改设备名称
sysname FW5


配置IP
interface GigabitEthernet0/0/0
 ip address 192.168.100.242 255.255.255.0
interface GigabitEthernet1/0/0
 ip address 192.168.5.1 255.255.255.0
interface GigabitEthernet1/0/1
 ip address 192.168.45.5 255.255.255.0
interface GigabitEthernet1/0/2
 ip address 192.168.35.5 255.255.255.0
interface GigabitEthernet1/0/6
 ip address 202.103.56.5 255.255.255.0


添加防火墙接口权限
interface GigabitEthernet0/0/0
 service-manage http permit
 service-manage https permit
 service-manage ping permit
 service-manage ssh permit
 service-manage snmp permit
 service-manage telnet permit
interface GigabitEthernet1/0/0
 service-manage ping permit
 service-manage snmp permit
interface GigabitEthernet1/0/1
 service-manage http permit
 service-manage https permit
 service-manage ping permit
 service-manage ssh permit
 service-manage snmp permit
 service-manage telnet permit
interface GigabitEthernet1/0/2
 service-manage ping permit
 service-manage ssh permit
 service-manage telnet permit
interface GigabitEthernet1/0/6
 service-manage ping permit


添加信任区域
firewall zone trust
 add interface GigabitEthernet0/0/0
 add interface GigabitEthernet1/0/0
 add interface GigabitEthernet1/0/1
 add interface GigabitEthernet1/0/2


添加不信任区域
firewall zone untrust
 add interface GigabitEthernet1/0/6


配置OSPF
ospf 1 router-id 123.5.5.5
 default-route-advertise always
 area 0.0.0.0
  network 192.168.5.1 0.0.0.0
  network 192.168.35.5 0.0.0.0
  network 192.168.45.5 0.0.0.0
  network 192.168.100.250 0.0.0.0


在G1/0/6接口配置默认路由（内网出口一定要配置默认路由）
ip route-static 0.0.0.0 0.0.0.0 GigabitEthernet1/0/6 202.103.56.6


配置NAT源转换地址池
nat address-group add1 0
 mode pat
 section 0 202.103.56.1 202.103.56.50


配置安全策略
security-policy
 rule name policy1
  source-zone trust
  destination-zone untrust
  action permit


配置NAT策略
nat-policy
 rule name nat1
  source-zone trust
  destination-zone untrust
  action source-nat address-group add1

</code></pre> 
<p>补充：防火墙在Web界面配置NAT（上面是用命令配置NAT，下面用Web配置，两种方法都可以）</p> 
<p><img alt="" height="841" src="https://images2.imgbox.com/1f/d6/5wP7CcyS_o.png" width="1098"></p> 
<p>        配置NAT源转换地址池</p> 
<p><img alt="" height="860" src="https://images2.imgbox.com/d4/de/8ujnQQpk_o.png" width="1200"></p> 
<p>        配置NAT</p> 
<p><img alt="" height="947" src="https://images2.imgbox.com/cf/7f/TVlVBuiU_o.png" width="1200"></p> 
<h3 id="6.%20%E9%85%8D%E7%BD%AE%E8%B7%AF%E7%94%B1%E5%99%A8">6. 配置路由器</h3> 
<h4 id="%EF%BC%881%EF%BC%89%20%E9%85%8D%E7%BD%AER1">（1） 配置R1</h4> 
<pre><code>修改设备名称
sysname AR1


配置IP
interface GigabitEthernet0/0/0
 ip address 192.168.10.1 255.255.255.0
interface GigabitEthernet0/0/1
 ip address 192.168.13.1 255.255.255.0 


配置ospf
ospf 1 router-id 123.1.1.1 
 area 0.0.0.0 
  network 192.168.10.1 0.0.0.0 
  network 192.168.13.1 0.0.0.0


配置VRRP
interface GigabitEthernet0/0/0
 vrrp vrid 10 virtual-ip 192.168.10.254
 vrrp vrid 10 priority 105
 vrrp vrid 10 preempt-mode timer delay 120
 vrrp vrid 10 track interface GigabitEthernet0/0/1
 vrrp vrid 10 track ip route 0.0.0.0 0.0.0.0 
 vrrp vrid 10 track ip route 192.168.5.0 255.255.255.0 reduced 20
 vrrp vrid 20 virtual-ip 192.168.10.253

</code></pre> 
<h4 id="%EF%BC%882%EF%BC%89%E9%85%8D%E7%BD%AER2">（2）配置R2</h4> 
<pre><code>修改设备名称
 sysname AR2


配置IP
interface GigabitEthernet0/0/0
 ip address 192.168.10.2 255.255.255.0
interface GigabitEthernet0/0/1
 ip address 192.168.24.2 255.255.255.0 


配置VRRP
interface GigabitEthernet0/0/0
 vrrp vrid 10 virtual-ip 192.168.10.254
 vrrp vrid 20 virtual-ip 192.168.10.253
 vrrp vrid 20 priority 105
 vrrp vrid 20 preempt-mode timer delay 120
 vrrp vrid 20 track interface GigabitEthernet0/0/1


配置OSPF
ospf 1 router-id 123.2.2.2 
 area 0.0.0.0 
  network 192.168.10.2 0.0.0.0 
  network 192.168.24.2 0.0.0.0 

</code></pre> 
<h4 id="%EF%BC%883%EF%BC%89%E9%85%8D%E7%BD%AER3">（3）配置R3</h4> 
<pre><code>
修改设备名称
 sysname AR3


配置IP
interface GigabitEthernet0/0/1
 ip address 192.168.13.3 255.255.255.0 
interface GigabitEthernet0/0/2
 ip address 192.168.35.3 255.255.255.0 


配置OSPF
ospf 1 router-id 123.3.3.3 
 area 0.0.0.0 
  network 192.168.13.3 0.0.0.0 
  network 192.168.35.3 0.0.0.0 

</code></pre> 
<h4 id="%EF%BC%884%EF%BC%89%E9%85%8D%E7%BD%AER4">（4）配置R4</h4> 
<pre><code>
修改设备名称
 sysname AR4


配置IP
interface GigabitEthernet0/0/1
 ip address 192.168.24.4 255.255.255.0 
interface GigabitEthernet0/0/2
 ip address 192.168.45.4 255.255.255.0 


配置OSPF
ospf 1 router-id 123.4.4.4 
 area 0.0.0.0 
  network 192.168.24.4 0.0.0.0 
  network 192.168.45.4 0.0.0.0 

</code></pre> 
<h4 id="%EF%BC%885%EF%BC%89%E9%85%8D%E7%BD%AER6">（5）配置R6</h4> 
<pre><code>
修改设备名称
 sysname AR6


配置IP
interface GigabitEthernet0/0/1
 ip address 202.103.67.6 255.255.255.0 
interface GigabitEthernet2/0/0
 ip address 202.103.56.6 255.255.255.0 


配置OSPF
ospf 1 router-id 255.6.6.6 
 default-route-advertise always
 area 0.0.0.0 
  network 202.103.67.6 0.0.0.0 

</code></pre> 
<h4 id="%EF%BC%886%EF%BC%89%E9%85%8D%E7%BD%AER7">（6）配置R7</h4> 
<pre><code>
修改设备名称
 sysname AR7


配置IP
interface GigabitEthernet0/0/0
 ip address 200.1.1.1 255.255.255.0 
interface GigabitEthernet0/0/1
 ip address 202.103.67.7 255.255.255.0 
interface GigabitEthernet0/0/2
 ip address 100.1.1.1 255.255.255.0


配置OSPF
ospf 1 router-id 255.7.7.7 
 area 0.0.0.0 
  network 100.1.1.1 0.0.0.0
  network 200.1.1.1 0.0.0.0 
  network 202.103.67.7 0.0.0.0 

</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/a762c5f7ade1934504a8f3e91987b8c2/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Kinetics数据集下载</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/71bfb65bd037720bfc9cc6f377e2cbe4/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Windows10关闭指定端口号命令</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>