<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Linux文件和文件夹复制 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Linux文件和文件夹复制" />
<meta property="og:description" content="Linux文件和文件夹复制
1、本地复制：
命令：cp
说明：将一个档案拷贝至另一档案，或将数个档案拷贝至另一目录。
参数：
-a 尽可能将档案状态、权限等资料都照原状予以复制。
-r 若 source 中含有目录名，则将目录下之档案亦皆依序拷贝至目的地。
-f 若目的地已经有相同档名的档案存在，则在复制前先予以删除再行复制。
2、远程传输文件或文件夹
命令：scp
scp是在安全协议下复制和传输文件，基于ssh登录。操作起来比较方便，比如要把当前一个文件copy到远程另外一台主机上，可以如下命令。
scp /home/data root@ip:/home/root
然后会提示你输入另外那台ip主机的root用户的登录密码，接着就开始copy了。
如果想反过来操作，把文件从远程主机copy到当前系统，也很简单。
scp root@ip:/home/root/data /home
文件夹复制是注意递归复制，参数 –r
存在端口情况，命令格式如下：
scp -P 4588 user@IP:/usr/local/sin.sh /home/administrator
3、远程传输大文件
当远程传输的文件或文件夹较大时，中间可能需要断开网络或是终端，这样会导致传输停止。解决由于终端关闭导致的终止情况，通常采用nohup命令后台运行，但是文件远程传输或复制需要输入对方服务器的秘钥，因此需要建立服务器之间的安全信任关系证书。主要使用SSH，一种安全通道协议，主要用于远程登录。
假设需要使用A服务器在不使用密码的情形下从服务器B拷贝文件，步骤如下：
（1）在A服务器生成一对秘钥文件（公钥和私钥）
ssh-keygen
上述命令等价于：
ssh-keygen -rsa
其中，-t指定密钥的类型,默认为SSH-2的rsa类型。生成的秘钥会保存在~/.ssh文件夹下。
运行上面的命令后，系统会出现一系列提示，可以一路回车。特别说明，其中有一个问题是，要不要对私钥设置口令（passphrase），如果担心私钥的安全，可以设置一个。运行结束以后，会在 ~/.ssh/ 目录下新生成两个文件：id_rsa.pub和id_rsa。前者公钥，后者是私钥。
（2）将公钥传送到远程主机B上面
ssh-copy-id -i ~/.ssh/id_rsa.pub -p PORT_B user_B@IP_B
（3）在A上可以使用
nohup scp
从B上进行远程复制" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/ecfc9162d05374960eec93385fc529cd/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2015-10-23T22:09:55+08:00" />
<meta property="article:modified_time" content="2015-10-23T22:09:55+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Linux文件和文件夹复制</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p align="center"><strong><span style="font-size:18px">Linux文件和文件夹复制</span></strong></p> 
<p><span style="font-size:18px"><strong>1、本地复制：</strong></span></p> 
<p><span style="font-size:18px">命令：cp</span></p> 
<p align="left" style="background:rgb(254,254,242)"><span style="font-size:18px">说明：将一个档案拷贝至另一档案，或将数个档案拷贝至另一目录。</span></p> 
<p style="background:#FEFEF2"><span style="font-size:18px">参数：</span></p> 
<blockquote style="margin:0 0 0 40px; border:none; padding:0px"> 
 <p style="background:#FEFEF2"><span style="font-size:18px">-a 尽可能将档案状态、权限等资料都照原状予以复制。</span></p> 
</blockquote> 
<blockquote style="margin:0 0 0 40px; border:none; padding:0px"> 
 <p align="left" style="background:rgb(254,254,242)"><span style="font-size:18px">-r 若 source 中含有目录名，则将目录下之档案亦皆依序拷贝至目的地。</span></p> 
</blockquote> 
<blockquote style="margin:0 0 0 40px; border:none; padding:0px"> 
 <p align="left" style="background:rgb(254,254,242)"><span style="font-size:18px">-f 若目的地已经有相同档名的档案存在，则在复制前先予以删除再行复制。</span></p> 
</blockquote> 
<p><span style="font-size:18px"><strong>2、远程传输文件或文件夹</strong></span></p> 
<p align="left" style="background:rgb(254,254,242)"><span style="font-size:18px">命令：scp</span></p> 
<p align="left" style="background:rgb(254,254,242)"><span style="font-size:18px">    scp是在安全协议下复制和传输文件，基于ssh登录。操作起来比较方便，比如要把当前一个文件copy到远程另外一台主机上，可以如下命令。</span></p> 
<p align="center" style="background:#FEFEF2"><span style="font-size:18px">scp /home/data root@ip:/home/root</span></p> 
<p align="left" style="background:rgb(254,254,242)"><span style="font-size:18px">然后会提示你输入另外那台ip主机的root用户的登录密码，接着就开始copy了。</span></p> 
<p align="left" style="background:rgb(254,254,242)"><span style="font-size:18px">如果想反过来操作，把文件从远程主机copy到当前系统，也很简单。</span></p> 
<p align="center" style="background:#FEFEF2"><span style="font-size:18px">scp <a target="_blank" href="http://linmaogan.blog.163.com/blog/static/382639372009101062147913/root@172.19.2.75/home/root" rel="nofollow noopener noreferrer"><span style="color:windowtext">root@</span></a>ip:/home/root/data  /home</span></p> 
<p align="left" style="background:rgb(254,254,242)"><span style="font-size:18px">文件夹复制是注意递归复制，参数 –r</span></p> 
<p style="background:#FEFEF2"><span style="font-size:18px">存在端口情况，命令格式如下：</span></p> 
<p align="center" style="background:#FEFEF2"><span style="font-size:18px">scp -P 4588 user@IP:/usr/local/sin.sh /home/administrator<br> <br> </span></p> 
<p><strong><span style="font-size:18px">3、远程传输大文件</span></strong></p> 
<p><span style="font-size:18px">当远程传输的文件或文件夹较大时，中间可能需要断开网络或是终端，这样会导致传输停止。解决由于终端关闭导致的终止情况，通常采用nohup命令后台运行，但是文件远程传输或复制需要输入对方服务器的秘钥，因此需要<strong>建立服务器之间的安全信任关系证书</strong>。主要使用SSH，一种安全通道协议，主要用于远程登录。</span></p> 
<p><span style="font-size:18px">假设需要使用A服务器在不使用密码的情形下从服务器B拷贝文件，步骤如下：</span></p> 
<p><span style="font-size:18px">（1）在A服务器生成一对秘钥文件（公钥和私钥）</span></p> 
<p align="center"><span style="font-size:18px">ssh-keygen</span></p> 
<p><span style="font-size:18px">上述命令等价于：</span></p> 
<p align="center"><span style="font-size:18px">ssh-keygen -rsa</span></p> 
<p><span style="font-size:18px">其中，-t指定密钥的类型,默认为SSH-2的rsa类型。生成的秘钥会保存在~/.ssh文件夹下。</span></p> 
<p><span style="font-size:18px">运行上面的命令后，系统会出现一系列提示，可以一路回车。特别说明，其中有一个问题是，要不要对私钥设置口令（passphrase），如果担心私钥的安全，可以设置一个。运行结束以后，会在 ~/.ssh/ 目录下新生成两个文件：id_rsa.pub和id_rsa。前者公钥，后者是私钥。</span></p> 
<p><span style="font-size:18px">（2）<strong>将公钥传送到远程主机B上面</strong></span></p> 
<p align="center"><span style="font-size:18px">ssh-copy-id -i ~/.ssh/id_rsa.pub <strong>-p PORT_B user_B@IP_B</strong></span></p> 
<p><span style="font-size:18px">（3）在A上可以使用</span></p> 
<p align="center"><span style="font-size:18px">nohup scp</span></p> 
<p><span style="font-size:18px">从B上进行远程复制</span></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/53658d32eef1d3cf5728dfbc28cf793e/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">iOS中UITableView性能优化</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/4592144f97bb889a8e322d777b15be28/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">ROS中的depth image转换到laser scan的包</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>