<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【深度学习】Python爬取豆瓣实现影评分析 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="【深度学习】Python爬取豆瓣实现影评分析" />
<meta property="og:description" content="提示：文章写完后，目录可以自动生成，如何生成可参考右边的帮助文档
文章目录 前言一、任务描述二、使用步骤1.数据爬取1.2.对爬取的页面数据进行解析，并保存为JSON文件2、数据分析2.1数据分析之评论时间分布图2.2角色评分 前言 爬虫的过程，就是模仿浏览器的行为，往目标站点发送请求，接收服务器的响应数据，提取需要的信息，并进行保存的过程。
Python为爬虫的实现提供了工具:requests模块、BeautifulSoup库
一、任务描述 本次实践使用Python来爬取豆瓣网中《安家》下所有的评论，进行了一波分析，从观众的角度来了解这部电视剧。
数据获取：https://movie.douban.com/subject/30482003/reviews?sort=time&amp;start=0
普通用户: 打开浏览器 --&gt; 往目标站点发送请求 --&gt; 接收响应数据 --&gt; 渲染到页面上。 爬虫程序: 模拟浏览器 --&gt; 往目标站点发送请求 --&gt; 接收响应数据 --&gt; 提取有用的数据 --&gt; 保存到本地/数据库。 爬虫的过程： 1.发送请求（requests模块） 2.获取响应数据（服务器返回） 3.解析并提取数据（BeautifulSoup查找或者re正则） 4.保存数据 request模块： requests是python实现的简单易用的HTTP库，官网地址：http://cn.python-requests.org/zh_CN/latest/ requests.get(url)可以发送一个http get请求，返回服务器响应内容。 BeautifulSoup库： BeautifulSoup 是一个可以从HTML或XML文件中提取数据的Python库。网址：https://beautifulsoup.readthedocs.io/zh_CN/v4.4.0/ BeautifulSoup支持Python标准库中的HTML解析器,还支持一些第三方的解析器,其中一个是 lxml。 BeautifulSoup(markup, &#34;html.parser&#34;)或者BeautifulSoup(markup, &#34;lxml&#34;)，推荐使用lxml作为解析器,因为效率更高。 二、使用步骤 # 如果需要进行持久化安装, 需要使用持久化路径, 如下方代码示例: !mkdir /home/aistudio/external-libraries !pip install beautifulsoup4 -t /home/aistudio/external-libraries !pip install lxml -t /home/aistudio/external-libraries !pip install xgboost==1.1.0 -t /home/aistudio/external-libraries !pip install wordcloud -t /home/aistudio/external-libraries # 同时添加如下代码, 这样每次环境(kernel)启动的时候只要运行下方代码即可: import sys sys." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/8dd920f7668492f48f84ca2966b6f6c0/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-11-07T10:59:17+08:00" />
<meta property="article:modified_time" content="2023-11-07T10:59:17+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【深度学习】Python爬取豆瓣实现影评分析</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <blockquote> 
 <p>提示：文章写完后，目录可以自动生成，如何生成可参考右边的帮助文档</p> 
</blockquote> 
<p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><a href="#_7" rel="nofollow">前言</a></li><li><a href="#_16" rel="nofollow">一、任务描述</a></li><li><a href="#_57" rel="nofollow">二、使用步骤</a></li><li><ul><li><a href="#1_72" rel="nofollow">1.数据爬取</a></li><li><a href="#12JSON_99" rel="nofollow">1.2.对爬取的页面数据进行解析，并保存为JSON文件</a></li><li><a href="#2_206" rel="nofollow">2、数据分析</a></li><li><a href="#21_320" rel="nofollow">2.1数据分析之评论时间分布图</a></li><li><a href="#22_348" rel="nofollow">2.2角色评分</a></li></ul> 
 </li></ul> 
</div> 
<p></p> 
<hr> 
<h2><a id="_7"></a>前言</h2> 
<p>爬虫的过程，就是模仿浏览器的行为，往目标站点发送请求，接收服务器的响应数据，提取需要的信息，并进行保存的过程。</p> 
<p>Python为爬虫的实现提供了工具:requests模块、BeautifulSoup库</p> 
<hr> 
<h2><a id="_16"></a>一、任务描述</h2> 
<p>本次实践使用Python来爬取豆瓣网中《安家》下所有的评论，进行了一波分析，从观众的角度来了解这部电视剧。</p> 
<p>数据获取：https://movie.douban.com/subject/30482003/reviews?sort=time&amp;start=0</p> 
<pre><code>普通用户:

打开浏览器 --&gt; 往目标站点发送请求 --&gt; 接收响应数据 --&gt; 渲染到页面上。

爬虫程序:

模拟浏览器 --&gt; 往目标站点发送请求 --&gt; 接收响应数据 --&gt; 提取有用的数据 --&gt; 保存到本地/数据库。
</code></pre> 
<pre><code>爬虫的过程：

1.发送请求（requests模块）

2.获取响应数据（服务器返回）

3.解析并提取数据（BeautifulSoup查找或者re正则）

4.保存数据
</code></pre> 
<pre><code>request模块：

requests是python实现的简单易用的HTTP库，官网地址：http://cn.python-requests.org/zh_CN/latest/

requests.get(url)可以发送一个http get请求，返回服务器响应内容。

</code></pre> 
<pre><code>BeautifulSoup库：

BeautifulSoup 是一个可以从HTML或XML文件中提取数据的Python库。网址：https://beautifulsoup.readthedocs.io/zh_CN/v4.4.0/

BeautifulSoup支持Python标准库中的HTML解析器,还支持一些第三方的解析器,其中一个是 lxml。

BeautifulSoup(markup, "html.parser")或者BeautifulSoup(markup, "lxml")，推荐使用lxml作为解析器,因为效率更高。
</code></pre> 
<h2><a id="_57"></a>二、使用步骤</h2> 
<pre><code class="prism language-py"><span class="token comment"># 如果需要进行持久化安装, 需要使用持久化路径, 如下方代码示例:</span>
!mkdir <span class="token operator">/</span>home<span class="token operator">/</span>aistudio<span class="token operator">/</span>external<span class="token operator">-</span>libraries
!pip install beautifulsoup4 <span class="token operator">-</span>t <span class="token operator">/</span>home<span class="token operator">/</span>aistudio<span class="token operator">/</span>external<span class="token operator">-</span>libraries
!pip install lxml <span class="token operator">-</span>t <span class="token operator">/</span>home<span class="token operator">/</span>aistudio<span class="token operator">/</span>external<span class="token operator">-</span>libraries
!pip install xgboost<span class="token operator">==</span><span class="token number">1.1</span><span class="token number">.0</span> <span class="token operator">-</span>t <span class="token operator">/</span>home<span class="token operator">/</span>aistudio<span class="token operator">/</span>external<span class="token operator">-</span>libraries
!pip install wordcloud <span class="token operator">-</span>t <span class="token operator">/</span>home<span class="token operator">/</span>aistudio<span class="token operator">/</span>external<span class="token operator">-</span>libraries
</code></pre> 
<pre><code class="prism language-py"><span class="token comment"># 同时添加如下代码, 这样每次环境(kernel)启动的时候只要运行下方代码即可:</span>
<span class="token keyword">import</span> sys
sys<span class="token punctuation">.</span>path<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string">'/home/aistudio/external-libraries'</span><span class="token punctuation">)</span>
</code></pre> 
<h3><a id="1_72"></a>1.数据爬取</h3> 
<p>代码如下（示例）：</p> 
<pre><code class="prism language-py"><span class="token keyword">import</span> json
<span class="token keyword">import</span> re
<span class="token keyword">import</span> requests
<span class="token keyword">from</span> bs4 <span class="token keyword">import</span> BeautifulSoup


<span class="token keyword">def</span> <span class="token function">crawl_data</span><span class="token punctuation">(</span>crawl_url<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">'''
    爬取豆瓣《安家》影评信息，返回response,并进行解析
    '''</span>
    headers <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
        <span class="token string">'User-Agent'</span><span class="token punctuation">:</span> <span class="token string">'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/80.0.3987.132 Safari/537.36'</span>
    <span class="token punctuation">}</span>
    
    url <span class="token operator">=</span> <span class="token string">'https://movie.douban.com/subject/30482003/reviews'</span><span class="token operator">+</span>crawl_url
    <span class="token keyword">try</span><span class="token punctuation">:</span>
        response <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>url<span class="token punctuation">,</span> headers<span class="token operator">=</span>headers<span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span>status_code<span class="token punctuation">)</span>     
        parse<span class="token punctuation">(</span>response<span class="token punctuation">)</span>
    <span class="token keyword">except</span> Exception <span class="token keyword">as</span> e<span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span>
</code></pre> 
<h3><a id="12JSON_99"></a>1.2.对爬取的页面数据进行解析，并保存为JSON文件</h3> 
<p>代码如下（示例）：</p> 
<pre><code class="prism language-py">item_list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token keyword">def</span> <span class="token function">parse</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">'''
    解析爬取的网页内容
    '''</span>
    soup <span class="token operator">=</span> BeautifulSoup<span class="token punctuation">(</span>response<span class="token punctuation">.</span>text<span class="token punctuation">,</span> <span class="token string">'html.parser'</span><span class="token punctuation">)</span>
    review_list <span class="token operator">=</span> soup<span class="token punctuation">.</span>find_all<span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">,</span> class_<span class="token operator">=</span><span class="token string">'main review-item'</span><span class="token punctuation">)</span>

    <span class="token keyword">for</span> review_div <span class="token keyword">in</span> review_list<span class="token punctuation">:</span>
        author <span class="token operator">=</span> review_div<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">,</span> class_<span class="token operator">=</span><span class="token string">'name'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>text<span class="token punctuation">.</span>strip<span class="token punctuation">(</span><span class="token punctuation">)</span>
        author <span class="token operator">=</span> str_format<span class="token punctuation">(</span>author<span class="token punctuation">)</span>

        pub_time <span class="token operator">=</span> review_div<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">'span'</span><span class="token punctuation">,</span> class_<span class="token operator">=</span><span class="token string">'main-meta'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>text<span class="token punctuation">.</span>strip<span class="token punctuation">(</span><span class="token punctuation">)</span>

        rating <span class="token operator">=</span> review_div<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">'span'</span><span class="token punctuation">,</span> class_<span class="token operator">=</span><span class="token string">'main-title-rating'</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span> rating<span class="token punctuation">:</span>
            rating <span class="token operator">=</span> rating<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'title'</span><span class="token punctuation">)</span>
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            rating <span class="token operator">=</span> <span class="token string">""</span>

        title <span class="token operator">=</span> review_div<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">,</span> class_<span class="token operator">=</span><span class="token string">'main-bd'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>text<span class="token punctuation">.</span>strip<span class="token punctuation">(</span><span class="token punctuation">)</span>

        is_unfold <span class="token operator">=</span> review_div<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">,</span> class_<span class="token operator">=</span><span class="token string">'unfold'</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span> is_unfold<span class="token punctuation">:</span>
            review_id <span class="token operator">=</span> review_div<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">,</span> class_<span class="token operator">=</span><span class="token string">'review-short'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'data-rid'</span><span class="token punctuation">)</span>
            content <span class="token operator">=</span> get_fold_content<span class="token punctuation">(</span>review_id<span class="token punctuation">)</span>
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            content <span class="token operator">=</span> review_div<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">,</span> class_<span class="token operator">=</span><span class="token string">'short-content'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>text<span class="token punctuation">.</span>strip<span class="token punctuation">(</span><span class="token punctuation">)</span>

        <span class="token keyword">if</span> content<span class="token punctuation">:</span>
            content <span class="token operator">=</span> re<span class="token punctuation">.</span>sub<span class="token punctuation">(</span><span class="token string">r"\s"</span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">,</span> content<span class="token punctuation">)</span>

        item <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
            <span class="token string">"author"</span><span class="token punctuation">:</span> author<span class="token punctuation">,</span>
            <span class="token string">"pub_time"</span><span class="token punctuation">:</span> pub_time<span class="token punctuation">,</span>
            <span class="token string">"rating"</span><span class="token punctuation">:</span> rating<span class="token punctuation">,</span>
            <span class="token string">"title"</span><span class="token punctuation">:</span> title<span class="token punctuation">,</span>
            <span class="token string">"content"</span><span class="token punctuation">:</span> content
        <span class="token punctuation">}</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span>item<span class="token punctuation">[</span><span class="token string">"title"</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
        item_list<span class="token punctuation">.</span>append<span class="token punctuation">(</span>item<span class="token punctuation">)</span>

    next_url <span class="token operator">=</span> soup<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">'span'</span><span class="token punctuation">,</span> class_<span class="token operator">=</span><span class="token string">'next'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span>

    <span class="token keyword">if</span> next_url<span class="token punctuation">:</span>
        crawl_data<span class="token punctuation">(</span>next_url<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'href'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        save_json<span class="token punctuation">(</span><span class="token punctuation">)</span>


<span class="token keyword">def</span> <span class="token function">get_fold_content</span><span class="token punctuation">(</span>review_id<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">'''
    根据评论id，获取被折叠的评论内容
    '''</span>
    headers <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span>
        <span class="token string">'User-Agent'</span><span class="token punctuation">:</span> <span class="token string">'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/80.0.3987.132 Safari/537.36'</span>
    <span class="token punctuation">}</span>
    url <span class="token operator">=</span> <span class="token string">"https://movie.douban.com/j/review/{}/full"</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>review_id<span class="token punctuation">)</span>

    resp <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>url<span class="token punctuation">,</span> headers<span class="token operator">=</span>headers<span class="token punctuation">)</span>
    data <span class="token operator">=</span> resp<span class="token punctuation">.</span>json<span class="token punctuation">(</span><span class="token punctuation">)</span>

    content <span class="token operator">=</span> data<span class="token punctuation">[</span><span class="token string">'html'</span><span class="token punctuation">]</span>
    content <span class="token operator">=</span> re<span class="token punctuation">.</span>sub<span class="token punctuation">(</span><span class="token string">r"(&lt;.+?&gt;)"</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">,</span> content<span class="token punctuation">)</span>

    content <span class="token operator">=</span> str_format<span class="token punctuation">(</span>content<span class="token punctuation">)</span>
    <span class="token keyword">return</span> content


<span class="token keyword">def</span> <span class="token function">str_format</span><span class="token punctuation">(</span>line<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">'''
    去除content中特殊字符，单引号、双引号、反斜杠
    '''</span>
    error_list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'\''</span><span class="token punctuation">,</span> <span class="token string">'\"'</span><span class="token punctuation">,</span> <span class="token string">'\\'</span><span class="token punctuation">,</span> <span class="token string">','</span><span class="token punctuation">]</span>
    <span class="token keyword">for</span> c <span class="token keyword">in</span> line<span class="token punctuation">:</span>
        <span class="token keyword">if</span> c <span class="token keyword">in</span> error_list<span class="token punctuation">:</span>
            line <span class="token operator">=</span> line<span class="token punctuation">.</span>replace<span class="token punctuation">(</span>c<span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> line


<span class="token keyword">def</span> <span class="token function">save_json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">'''
    将爬取的数据保存为JSON文件
    '''</span>
    <span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'work/review.json'</span><span class="token punctuation">,</span> <span class="token string">'w'</span><span class="token punctuation">,</span> encoding<span class="token operator">=</span><span class="token string">'UTF-8'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>
        json<span class="token punctuation">.</span>dump<span class="token punctuation">(</span>item_list<span class="token punctuation">,</span> f<span class="token punctuation">,</span> ensure_ascii<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>

    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"爬取完成，共爬取%d条数据"</span> <span class="token operator">%</span> <span class="token builtin">len</span><span class="token punctuation">(</span>item_list<span class="token punctuation">)</span><span class="token punctuation">)</span>


<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">'__main__'</span><span class="token punctuation">:</span>
    start_url <span class="token operator">=</span> <span class="token string">'?sort=time&amp;start=0'</span>

    crawl_data<span class="token punctuation">(</span>start_url<span class="token punctuation">)</span>

    <span class="token comment">#将所爬取的数据，保存为JSON文件</span>
    json_data <span class="token operator">=</span> json<span class="token punctuation">.</span>loads<span class="token punctuation">(</span><span class="token builtin">str</span><span class="token punctuation">(</span>item_list<span class="token punctuation">)</span><span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token string">"'"</span><span class="token punctuation">,</span><span class="token string">'"'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token string">"\\"</span><span class="token punctuation">,</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'work/reviews.json'</span><span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token punctuation">,</span> encoding<span class="token operator">=</span><span class="token string">'UTF-8'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>        
        json<span class="token punctuation">.</span>dump<span class="token punctuation">(</span>item_list<span class="token punctuation">,</span> f<span class="token punctuation">,</span> ensure_ascii<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>

    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"爬取完成，共爬取%d条数据"</span><span class="token operator">%</span> <span class="token builtin">len</span><span class="token punctuation">(</span>item_list<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/2a/71/fKTu1Q1J_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="2_206"></a>2、数据分析</h3> 
<p>代码如下（示例）：</p> 
<pre><code class="prism language-py"><span class="token comment"># 下载中文字体</span>
!wget http<span class="token punctuation">:</span><span class="token operator">//</span>d<span class="token punctuation">.</span>xiazaiziti<span class="token punctuation">.</span>com<span class="token operator">/</span>en_fonts<span class="token operator">/</span>fonts<span class="token operator">/</span>s<span class="token operator">/</span>SimHei<span class="token punctuation">.</span>ttf

<span class="token comment"># 将字体文件复制到matplotlib字体路径</span>
!cp SimHei<span class="token punctuation">.</span>ttf <span class="token operator">/</span>opt<span class="token operator">/</span>conda<span class="token operator">/</span>envs<span class="token operator">/</span>python35<span class="token operator">-</span>paddle120<span class="token operator">-</span>env<span class="token operator">/</span>lib<span class="token operator">/</span>python3<span class="token punctuation">.</span><span class="token number">7</span><span class="token operator">/</span>site<span class="token operator">-</span>packages<span class="token operator">/</span>matplotlib<span class="token operator">/</span>mpl<span class="token operator">-</span>data<span class="token operator">/</span>fonts<span class="token operator">/</span>ttf<span class="token operator">/</span>
<span class="token comment"># 创建系统字体文件路径</span>
!mkdir <span class="token punctuation">.</span>fonts
<span class="token comment"># 复制文件到该路径</span>
!cp SimHei<span class="token punctuation">.</span>ttf <span class="token punctuation">.</span>fonts<span class="token operator">/</span>
!rm <span class="token operator">-</span>rf <span class="token punctuation">.</span>cache<span class="token operator">/</span>matplotlib
</code></pre> 
<pre><code>!pip install wordcloud
</code></pre> 
<p><img src="https://images2.imgbox.com/9c/81/scqiy3aJ_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-py"><span class="token keyword">import</span> json
<span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np
<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt
<span class="token keyword">from</span> matplotlib<span class="token punctuation">.</span>font_manager <span class="token keyword">import</span> FontProperties
<span class="token keyword">from</span> matplotlib <span class="token keyword">import</span> cm
<span class="token keyword">import</span> seaborn <span class="token keyword">as</span> sns
<span class="token keyword">import</span> jieba
<span class="token keyword">import</span> collections
<span class="token keyword">import</span> wordcloud
</code></pre> 
<pre><code class="prism language-py"><span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'work/review.json'</span><span class="token punctuation">,</span> <span class="token string">'r'</span><span class="token punctuation">,</span> encoding<span class="token operator">=</span><span class="token string">'UTF-8'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token builtin">file</span><span class="token punctuation">:</span>
    item_list <span class="token operator">=</span> json<span class="token punctuation">.</span>loads<span class="token punctuation">(</span><span class="token builtin">file</span><span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>replace<span class="token punctuation">(</span><span class="token string">"}][{"</span><span class="token punctuation">,</span><span class="token string">"},{"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

review_df <span class="token operator">=</span> pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span>item_list<span class="token punctuation">,</span>columns<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'author'</span><span class="token punctuation">,</span><span class="token string">'pub_time'</span><span class="token punctuation">,</span><span class="token string">'rating'</span><span class="token punctuation">,</span><span class="token string">'title'</span><span class="token punctuation">,</span><span class="token string">'content'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>review_df<span class="token punctuation">)</span>

<span class="token comment"># # 删除缺失数值</span>
review_df<span class="token punctuation">.</span>dropna<span class="token punctuation">(</span>inplace<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>

<span class="token comment"># 将缺失的评论情况设置为"放弃"</span>
review_df<span class="token punctuation">.</span>loc<span class="token punctuation">[</span>review_df<span class="token punctuation">[</span><span class="token string">'rating'</span><span class="token punctuation">]</span><span class="token operator">==</span><span class="token string">''</span><span class="token punctuation">,</span><span class="token string">'rating'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'放弃'</span> 

<span class="token comment"># # 将字符串格式的时间转换为datatime类型</span>
review_df<span class="token punctuation">[</span><span class="token string">'pub_time'</span><span class="token punctuation">]</span> <span class="token operator">=</span> pd<span class="token punctuation">.</span>to_datetime<span class="token punctuation">(</span>review_df<span class="token punctuation">[</span><span class="token string">'pub_time'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>review_df<span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/f6/1c/0Z3TpnGz_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-py"><span class="token comment">#按照评分进行聚合</span>
grouped<span class="token operator">=</span>review_df<span class="token punctuation">[</span><span class="token string">'author'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>groupby<span class="token punctuation">(</span>review_df<span class="token punctuation">[</span><span class="token string">'rating'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
grouped_count <span class="token operator">=</span> grouped<span class="token punctuation">.</span>count<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>grouped_count<span class="token punctuation">)</span>

plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span>figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>bar<span class="token punctuation">(</span><span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>grouped_count<span class="token punctuation">.</span>index<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> grouped_count<span class="token punctuation">.</span>values<span class="token punctuation">,</span>color<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'b'</span><span class="token punctuation">,</span><span class="token string">'r'</span><span class="token punctuation">,</span><span class="token string">'g'</span><span class="token punctuation">,</span><span class="token string">'y'</span><span class="token punctuation">,</span><span class="token string">'c'</span><span class="token punctuation">,</span><span class="token string">'m'</span><span class="token punctuation">,</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>xticks<span class="token punctuation">(</span><span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>grouped_count<span class="token punctuation">.</span>index<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>grouped_count<span class="token punctuation">.</span>index<span class="token punctuation">,</span>fontsize<span class="token operator">=</span><span class="token number">15</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>yticks<span class="token punctuation">(</span>fontsize<span class="token operator">=</span><span class="token number">15</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>savefig<span class="token punctuation">(</span><span class="token string">'/home/aistudio/work/05.jpg'</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/4d/1d/EvOcmFsL_o.png" alt="在这里插入图片描述"></p> 
<pre><code class="prism language-py"><span class="token comment"># 分析评论日期 </span>
<span class="token keyword">import</span> re
<span class="token keyword">from</span> matplotlib <span class="token keyword">import</span> dates
<span class="token comment">#显示matplotlib生成的图形</span>
<span class="token operator">%</span>matplotlib inline

<span class="token comment">#添加一个索引“pub_date”，存储评论日期（2020年2月到3月期间）</span>
review_df<span class="token punctuation">[</span><span class="token string">'pub_date'</span><span class="token punctuation">]</span> <span class="token operator">=</span> review_df<span class="token punctuation">[</span><span class="token string">'pub_time'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>dt<span class="token punctuation">.</span>date

review_df <span class="token operator">=</span> review_df<span class="token punctuation">[</span>pd<span class="token punctuation">.</span>to_datetime<span class="token punctuation">(</span>review_df<span class="token punctuation">[</span><span class="token string">'pub_date'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span>dt<span class="token punctuation">.</span>year<span class="token operator">==</span><span class="token number">2020</span><span class="token punctuation">]</span>
review_df <span class="token operator">=</span> review_df<span class="token punctuation">[</span>pd<span class="token punctuation">.</span>to_datetime<span class="token punctuation">(</span>review_df<span class="token punctuation">[</span><span class="token string">'pub_date'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span>dt<span class="token punctuation">.</span>month<span class="token operator">&gt;</span><span class="token number">1</span><span class="token punctuation">]</span>
review_df <span class="token operator">=</span> review_df<span class="token punctuation">[</span>pd<span class="token punctuation">.</span>to_datetime<span class="token punctuation">(</span>review_df<span class="token punctuation">[</span><span class="token string">'pub_date'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span>dt<span class="token punctuation">.</span>month<span class="token operator">&lt;</span><span class="token number">4</span><span class="token punctuation">]</span>

<span class="token comment"># 根据评论日期进行聚合</span>
review_date_df <span class="token operator">=</span> review_df<span class="token punctuation">[</span><span class="token string">'author'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>groupby<span class="token punctuation">(</span>review_df<span class="token punctuation">[</span><span class="token string">'pub_date'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
review_date_df <span class="token operator">=</span> review_date_df<span class="token punctuation">.</span>count<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment"># print(review_date_df.index)</span>
<span class="token comment"># print(review_date_df.values)</span>

<span class="token comment">#创建一个画布，指定宽、高</span>
plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span>figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment">#设置显示中文</span>
plt<span class="token punctuation">.</span>rcParams<span class="token punctuation">[</span><span class="token string">'font.sans-serif'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'FZSongYi-Z13S'</span><span class="token punctuation">]</span> <span class="token comment"># 指定默认字体</span>

<span class="token comment">#绘制折线图</span>
plt<span class="token punctuation">.</span>plot<span class="token punctuation">(</span>review_date_df<span class="token punctuation">.</span>index<span class="token punctuation">.</span>to_numpy<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> review_date_df<span class="token punctuation">.</span>values<span class="token punctuation">,</span> marker<span class="token operator">=</span><span class="token string">'o'</span><span class="token punctuation">)</span>

<span class="token comment">#配置横坐标</span>
plt<span class="token punctuation">.</span>gca<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>xaxis<span class="token punctuation">.</span>set_major_formatter<span class="token punctuation">(</span>dates<span class="token punctuation">.</span>DateFormatter<span class="token punctuation">(</span><span class="token string">"%m-%d"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment">#这里是调节坐标的倾斜度，rotation是度数，以及设置刻度字体大小</span>
plt<span class="token punctuation">.</span>xticks<span class="token punctuation">(</span>review_date_df<span class="token punctuation">.</span>index<span class="token punctuation">.</span>to_numpy<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>rotation<span class="token operator">=</span><span class="token number">45</span><span class="token punctuation">,</span>fontsize<span class="token operator">=</span><span class="token number">15</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>yticks<span class="token punctuation">(</span>fontsize<span class="token operator">=</span><span class="token number">15</span><span class="token punctuation">)</span>

<span class="token comment">#配置坐标标题</span>
plt<span class="token punctuation">.</span>xlabel<span class="token punctuation">(</span><span class="token string">"发布日期"</span><span class="token punctuation">,</span>fontsize<span class="token operator">=</span><span class="token number">15</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>ylabel<span class="token punctuation">(</span><span class="token string">"评论数量"</span><span class="token punctuation">,</span>fontsize<span class="token operator">=</span><span class="token number">15</span><span class="token punctuation">)</span>
<span class="token comment">#网格化</span>
plt<span class="token punctuation">.</span>grid<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">#保存图形</span>
plt<span class="token punctuation">.</span>savefig<span class="token punctuation">(</span><span class="token string">'/home/aistudio/work/01.jpg'</span><span class="token punctuation">)</span>
<span class="token comment">#显示图形</span>
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/56/8c/ohBnq1v6_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="21_320"></a>2.1数据分析之评论时间分布图</h3> 
<pre><code class="prism language-py"><span class="token keyword">import</span> datetime
<span class="token comment"># 指定多个时间区间</span>
time_range <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">14</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">22</span><span class="token punctuation">,</span> <span class="token number">24</span><span class="token punctuation">]</span>
<span class="token comment"># 提取评论的小时信息</span>
review_df<span class="token punctuation">[</span><span class="token string">'pub_hour'</span><span class="token punctuation">]</span> <span class="token operator">=</span> review_df<span class="token punctuation">[</span><span class="token string">'pub_time'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>dt<span class="token punctuation">.</span>hour
<span class="token comment"># 根据时间区间进行分组并统计数量</span>
review_hour_range_df <span class="token operator">=</span> review_df<span class="token punctuation">.</span>groupby<span class="token punctuation">(</span>pd<span class="token punctuation">.</span>cut<span class="token punctuation">(</span>review_df<span class="token punctuation">[</span><span class="token string">'pub_hour'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> time_range<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>size<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment"># 创建一个画布，指定宽、高</span>
plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span>figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment"># 绘制柱状图</span>
plt<span class="token punctuation">.</span>bar<span class="token punctuation">(</span><span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>review_hour_range_df<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> review_hour_range_df<span class="token punctuation">.</span>values<span class="token punctuation">)</span>
<span class="token comment"># 配置横坐标刻度</span>
plt<span class="token punctuation">.</span>xticks<span class="token punctuation">(</span><span class="token builtin">range</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>review_hour_range_df<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> review_hour_range_df<span class="token punctuation">.</span>index<span class="token punctuation">,</span> fontsize<span class="token operator">=</span><span class="token number">12</span><span class="token punctuation">,</span> rotation<span class="token operator">=</span><span class="token number">45</span><span class="token punctuation">)</span>
<span class="token comment"># 配置坐标标题和刻度</span>
plt<span class="token punctuation">.</span>xlabel<span class="token punctuation">(</span><span class="token string">"评论时间区间"</span><span class="token punctuation">,</span> fontsize<span class="token operator">=</span><span class="token number">15</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>ylabel<span class="token punctuation">(</span><span class="token string">"评论数量"</span><span class="token punctuation">,</span> fontsize<span class="token operator">=</span><span class="token number">15</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>yticks<span class="token punctuation">(</span>fontsize<span class="token operator">=</span><span class="token number">12</span><span class="token punctuation">)</span>
<span class="token comment"># 网格化</span>
<span class="token comment"># plt.grid()</span>
<span class="token comment"># 保存图形</span>
plt<span class="token punctuation">.</span>savefig<span class="token punctuation">(</span><span class="token string">'work/03.jpg'</span><span class="token punctuation">)</span>
<span class="token comment"># 显示图形</span>
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/15/ce/EGaJu6GV_o.png" alt="在这里插入图片描述"></p> 
<h3><a id="22_348"></a>2.2角色评分</h3> 
<pre><code class="prism language-py"><span class="token comment"># # 电视剧人物的评分</span>
<span class="token comment"># # 力荐：+5，推荐：+4，还行：3，较差：2，很差：1</span>
<span class="token comment"># roles = {'房似锦':0,'徐文昌':0,'张乘乘':0,'王子健':0,'楼山关':0,'朱闪闪':0,</span>
<span class="token comment"># '谢亭丰':0,'鱼化龙':0,'宫蓓蓓':0,'阚文涛':0}</span>
<span class="token comment"># 定义角色评分字典</span>
roles <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token string">'房似锦'</span><span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">'徐文昌'</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">'张乘乘'</span><span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">'王子健'</span><span class="token punctuation">:</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token string">'楼山关'</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'朱闪闪'</span><span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
        <span class="token string">'谢亭丰'</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">'鱼化龙'</span><span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">'宫蓓蓓'</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">'阚文涛'</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">}</span>
<span class="token comment"># 遍历每条评论</span>
<span class="token keyword">for</span> index<span class="token punctuation">,</span> row <span class="token keyword">in</span> review_df<span class="token punctuation">.</span>iterrows<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    rating <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span>row<span class="token punctuation">[</span><span class="token string">'rating'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">if</span> row<span class="token punctuation">[</span><span class="token string">'rating'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>isdigit<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">else</span> <span class="token number">0</span> <span class="token comment"># 将评分转换为整型，非数字的评分设为0</span>
    content <span class="token operator">=</span> row<span class="token punctuation">[</span><span class="token string">'content'</span><span class="token punctuation">]</span>
    <span class="token comment"># 统计每个角色在评论中出现的次数</span>
    <span class="token keyword">for</span> role <span class="token keyword">in</span> roles<span class="token punctuation">.</span>keys<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        count <span class="token operator">=</span> content<span class="token punctuation">.</span>count<span class="token punctuation">(</span>role<span class="token punctuation">)</span>
        roles<span class="token punctuation">[</span>role<span class="token punctuation">]</span> <span class="token operator">+=</span> count <span class="token operator">*</span> rating
<span class="token comment"># 打印角色评分结果</span>
<span class="token keyword">for</span> role<span class="token punctuation">,</span> score <span class="token keyword">in</span> roles<span class="token punctuation">.</span>items<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>role<span class="token punctuation">}</span></span><span class="token string">的评分：</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span>score<span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
<span class="token comment"># 绘制角色评分柱状图</span>
plt<span class="token punctuation">.</span>figure<span class="token punctuation">(</span>figsize<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>bar<span class="token punctuation">(</span>roles<span class="token punctuation">.</span>keys<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> roles<span class="token punctuation">.</span>values<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>xlabel<span class="token punctuation">(</span><span class="token string">"角色"</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>ylabel<span class="token punctuation">(</span><span class="token string">"评分"</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>xticks<span class="token punctuation">(</span>rotation<span class="token operator">=</span><span class="token number">45</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>savefig<span class="token punctuation">(</span><span class="token string">'work/04.jpg'</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<p><img src="https://images2.imgbox.com/63/6e/c8sOfj04_o.png" alt="在这里插入图片描述"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/095f1b9a9e8af0ddc54d33935ad97f3c/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【深度学习】手写数字识别</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/d4b7c74354a6454dd0ff08973d917b9a/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">ContentProvider call实现跨进程通信</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>