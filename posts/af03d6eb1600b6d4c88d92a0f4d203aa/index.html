<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>SQL语句编写规范 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="SQL语句编写规范" />
<meta property="og:description" content="书写风格
1. 语句关键字应全部使用小写。
2. 引用字符时应使用单引号。如：update testable set idcol=’abcd’。
3. 连接符或运算符or、in、and、＝、&lt;=、&gt;=， &#43;，- 等前后宜加上一个空格。否则容易导致以下类似问题。例如在语句select a–b from table中，a，b均为变量，拼写该语句时，如果a = 6，b = -3，则语句变为select 6--3 from table。--被视为SQL的注释，结果语句报错。
4. 不得使用“select * from …”语法，必须标明字段名。即select col1, col2,… from tablea where …
5. 严禁使用“insert into table_name values (?,?,……)”语法，统一使用“insert into table_name (col1,col2,……) values (?,?,…...)”。
6. SQL语句包含多表连接时，必须加上表的别名，对每个字段的使用都要带上表别名。即 select a.col1, a.col2, b.col3 from tablea a, tableb b where a.col4=b.col5
7. 应避免显式或隐含的类型转换。例如在where子句中numeric型和int型的列的比较。
8. 在子查询中前后必须加上括号。select col1, col2 from tablea where col3 in ( select col4 from tableb where col4&gt;0)" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/af03d6eb1600b6d4c88d92a0f4d203aa/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-04-04T10:26:11+08:00" />
<meta property="article:modified_time" content="2022-04-04T10:26:11+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">SQL语句编写规范</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p><strong>书写风格</strong></p> 
<p>1. 语句关键字应全部使用小写。</p> 
<p>2. 引用字符时应使用单引号。如：update testable set idcol=’abcd’。</p> 
<p>3. 连接符或运算符or、in、and、＝、&lt;=、&gt;=， +，- 等前后宜加上一个空格。否则容易导致以下类似问题。例如在语句select a–b from table中，a，b均为变量，拼写该语句时，如果a = 6，b = -3，则语句变为select 6--3 from table。--被视为SQL的注释，结果语句报错。</p> 
<p>4. 不得使用“select * from …”语法，必须标明字段名。即select col1, col2,… from tablea where …</p> 
<p>5. 严禁使用“insert into table_name values (?,?,……)”语法，统一使用“insert into table_name (col1,col2,……) values (?,?,…...)”。</p> 
<p>6. SQL语句包含多表连接时，必须加上表的别名，对每个字段的使用都要带上表别名。即 select a.col1, a.col2, b.col3 from tablea a, tableb b where a.col4=b.col5</p> 
<p>7. 应避免显式或隐含的类型转换。例如在where子句中numeric型和int型的列的比较。</p> 
<p>8. 在子查询中前后必须加上括号。select col1, col2 from tablea where col3 in ( select col4 from tableb where col4&gt;0)</p> 
<p>9. 执行SQL时一次应只执行一条，如果多条语句则应分开执行，但必须保持在一个事务中。不得一次执行通过分号等分开的多条语句，这样处理不清晰。</p> 
<p>10. 如果能采用or代替，则不宜使用in 语句。in语句中的元素不得超过500个，如果超过，则应拆分为多条SQL语句。严禁使用xx in(‘’,’’….) or xx in(‘’,’’,’’)。</p> 
<p>11. or连接条件不得超过 500，超过时应拆分为多条语句。</p> 
<p><strong>性能优化</strong></p> 
<p>1. 查询时应尽量减少多余数据的读取，通过使用where子句来减少返回的记录数。</p> 
<p>2. 如果在语句中有not in（in）操作，应尽量用not exists（exists）来代替。特别对大数据量的两者检索速度有很明显的区别。</p> 
<p>3. 不宜使用外连接。外连接效率低。</p> 
<p>4. 一条SQL语句中不宜使用3层以上的嵌套查询。如果超过，则应在Java等应用服务器程序中处理。</p> 
<p>5. 一条SQL语句中不得从4个及以上表中同时取数。仅作关联或过滤条件而不涉及取数的表不参与表个数计算；如果必须关联4个或4个以上表，应在Java等应用服务器程序中处理。</p> 
<p>6. 应尽量避免使用order by和group by排序操作，如必须使用排序操作，尽量建立在有索引的列上。因为大量的排序操作影响系统性能。</p> 
<p>7. 对索引列的比较，应尽量避免使用not 或 !=，可拆分为几个条件。因为“not”和“!=”不会使用索引。如col1 是索引列，条件col1 !=0 可以拆分为col1 &gt;0 or col2 &lt;0。</p> 
<p>8. 应尽量将数据库函数、计算表达式写在逻辑操作符右边。因为这些对列的操作会将导致表扫描，影响性能。</p> 
<p>9. 在where子句中，如果有多个过滤条件，应将索引列或过滤记录数最多的条件放在前面。</p> 
<p>10. 能用连接方式实现的功能，不得用子查询。例如：select name from customer where customerId in ( select customerId from order where money &gt; 1000)。 应该用如下语句代替：select name from customer inner join order on customer.customerId = order.customerId where order.money &gt; 100。或 select name from customer where exists ( select 1 from order where money &gt; 1000 and customer.customerId = order.customerId) &lt;这里需要注意：使用exists的效率依赖于匹配度，inner join效率比较稳定&gt;</p> 
<p>11. 多表关联查询时，写法可遵循以下原则，这样做有利于建立索引，提高查询效率。格式如下：select sum (t1.je) from table1 t1, table2 t2, table3 t3 where (t1的等值条件（=）) and (t1的非等值条件) and (t2与t1的关联条件) and (t2的等值条件) and (t2的非等值条件) and (t3与t2的关联条件) and (t3的等值条件) and (t3的非等值条件)。</p> 
<p><strong>跨数据库支持</strong></p> 
<p>1. 对于跨数据库Java应用程序的VO映射数据库的数据格式建议：</p> 
<p>1) 整型字段：字段设置保存为Integer或者Long</p> 
<p>2) 数字型字段：若需要使用小数2位以上的精确计算，读取、插入、更新使用BigDecimal类型</p> 
<p>3) 字符型字段：读取为String，并保存为String，插入或者更新为String</p> 
<p>4) 时间字段：读取为String，插入或者更新时的时间格式使用中间件统一处理。</p> 
<p>2. 字符串连接应使用“||”符号，而不应使用“+”。“+”是SQLServer语法，Oracle和DB2支持“||”，Hibernate转化为SQLServer时，会自动将“||”转为“+”。</p> 
<p>3. 通配符不能使用‘[a-c]%’这种形式。应写成如：select col1, col2 from table_name where col1 like ‘[a]%’ OR col1 like ‘[b]%’ OR col1 like ‘[c]%’</p> 
<p>4. 截取字符串长度函数应使用substr，起始位置为1表示从头开始。因为db2中substr起点为1，0会报错；在SqlServer数据库中使用的是substring需要进行转换。</p> 
<p>5. 不得通过select percent n和select top n限制查询结果集的记录数。</p> 
<p>6. join 与on 必须严格匹配，严禁出现没有on的join。</p> 
<p>7. join…on 后面不宜使用or，如果使用则需将or的范围用( )括起来。</p> 
<p>8. 不得使用select into 的格式。Select into是SQL Server特有语法，因为Oracle和DB2不支持。</p> 
<p>9. 应将Null值与空字符串(长度为零的字符串)视为不同。虽然Oracle视Null与空字符串为相同，但DB2和SQL Server却视为不同。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/79580d894cbede74d8c38055631ac91a/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">MYSOL数据库-创建、修改表</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/6b64267a4358bf71f2f9cdbb16a9eb18/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">对于数据库能查询到的数据但是java里却显示null的问题</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>