<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>行为型设计模式——模板方法模式 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="行为型设计模式——模板方法模式" />
<meta property="og:description" content="学习难度：⭐ ，比较常用
模板方法模式 在面向对象程序设计过程中，程序员常常会遇到这种情况：设计一个系统时知道了算法所需的关键步骤，而且确定了这些步骤的执行顺序，但某些步骤的具体实现还未知，或者说某些步骤的实现与具体的环境相关。例如拿泡茶这件事来说，可以分为4个步骤，第一步洗茶具，第二步烧开水，第三步放入茶叶并根据不同的茶叶泡不同的时间，第四步品茶。以上的一二四步都是一样的，只有第三步不一样，因此可以将一二四步具体实现好，即模板方法。第三步则是用户自己需要实现的方法，即抽象方法。模板方法的定义： 定义一个操作中的算法骨架，而将算法的一些步骤延迟到子类中，使得子类可以不改变该算法结构的情况下重定义该算法的某些特定步骤。
模板方法（Template Method）模式包含以下主要角色：
抽象类（Abstract Class）：负责给出一个算法的轮廓和骨架。它由一个模板方法和若干个基本方法构成。
模板方法：定义了算法的骨架，按某种顺序调用其包含的基本方法。
基本方法：是实现算法各个步骤的方法，是模板方法的组成部分。基本方法又可以分为三种：
抽象方法(Abstract Method) ：一个抽象方法由抽象类声明、由其具体子类实现。
具体方法(Concrete Method) ：一个具体方法由一个抽象类或具体类声明并实现，其子类可以进行覆盖也可以直接继承。
钩子方法(Hook Method) ：在抽象类中已经实现，包括用于判断的逻辑方法和需要子类重写的空方法两种。
一般钩子方法是用于判断的逻辑方法，这类方法名一般为isXxx，返回值类型为boolean类型。
具体子类（Concrete Class）：实现抽象类中所定义的抽象方法和钩子方法，它们是一个顶级逻辑的组成步骤。
案例 【例】炒菜
炒菜的某些步骤是固定的，分为开启灶台、倒油、炒菜、倒调料品、起锅共五个步骤。假设炒菜和倒调料品两个步骤不一样，其他都一样，现通过模板方法模式来用代码模拟。类图如下：
代码 编写抽象模板类，其中开炉灶、倒油、起锅都是固定的方法，而炒菜和放调味品则是根据不同的菜品而不同的，而cook()方法则是一个将上述步骤组合调用的一个方法，使用final修饰不可被重写，如下：
// 烹饪抽象类 public abstract class AbstractCook { // 做菜很多步骤都一样的，只是关键步骤不一样， // 因此，相同步骤作为模板实现好，不同的自己实现 private String food; public AbstractCook(String food){ this.food = food; } public void openStove(){ //1. 开启灶台是相同步骤 System.out.println(&#34;打开灶台，将锅烧热&#34;); } public void pourOil(){ //2. 倒油是相同步骤 System.out.println(&#34;油倒入锅中，并烧热&#34;); } //3. 翻炒时间和手法不一样 public abstract void fry(); //4." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/a750518bf63af46660e4ac7080d82f33/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-10T13:15:11+08:00" />
<meta property="article:modified_time" content="2024-01-10T13:15:11+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">行为型设计模式——模板方法模式</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-dracula">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <blockquote> 
 <p>学习难度：⭐ ，比较常用</p> 
</blockquote> 
<h3><a id="_1"></a>模板方法模式</h3> 
<p>在面向对象程序设计过程中，程序员常常会遇到这种情况：设计一个系统时知道了算法所需的关键步骤，而且确定了这些步骤的执行顺序，但某些步骤的具体实现还未知，或者说某些步骤的实现与具体的环境相关。例如拿泡茶这件事来说，可以分为4个步骤，第一步洗茶具，第二步烧开水，第三步放入茶叶并根据不同的茶叶泡不同的时间，第四步品茶。以上的一二四步都是一样的，只有第三步不一样，因此可以将一二四步具体实现好，即模板方法。第三步则是用户自己需要实现的方法，即抽象方法。<strong>模板方法的定义：</strong> 定义一个操作中的算法骨架，而将算法的一些步骤延迟到子类中，使得子类可以不改变该算法结构的情况下重定义该算法的某些特定步骤。</p> 
<p>模板方法（Template Method）模式包含以下主要角色：</p> 
<ul><li> <p>抽象类（Abstract Class）：负责给出一个算法的轮廓和骨架。它由一个模板方法和若干个基本方法构成。</p> 
  <ul><li> <p>模板方法：定义了算法的骨架，按某种顺序调用其包含的基本方法。</p> </li><li> <p>基本方法：是实现算法各个步骤的方法，是模板方法的组成部分。基本方法又可以分为三种：</p> 
    <ul><li> <p>抽象方法(Abstract Method) ：一个抽象方法由抽象类声明、由其具体子类实现。</p> </li><li> <p>具体方法(Concrete Method) ：一个具体方法由一个抽象类或具体类声明并实现，其子类可以进行覆盖也可以直接继承。</p> </li><li> <p>钩子方法(Hook Method) ：在抽象类中已经实现，包括用于判断的逻辑方法和需要子类重写的空方法两种。</p> <p>一般钩子方法是用于判断的逻辑方法，这类方法名一般为isXxx，返回值类型为boolean类型。</p> </li></ul> </li></ul> </li><li> <p>具体子类（Concrete Class）：实现抽象类中所定义的抽象方法和钩子方法，它们是一个顶级逻辑的组成步骤。</p> </li></ul> 
<h3><a id="_24"></a>案例</h3> 
<p>【例】炒菜</p> 
<p>炒菜的某些步骤是固定的，分为开启灶台、倒油、炒菜、倒调料品、起锅共五个步骤。假设炒菜和倒调料品两个步骤不一样，其他都一样，现通过模板方法模式来用代码模拟。类图如下：</p> 
<p><img src="https://images2.imgbox.com/87/8e/wmQmWOfk_o.png" alt="在这里插入图片描述" width="750"></p> 
<h4><a id="_32"></a>代码</h4> 
<p>编写抽象模板类，其中开炉灶、倒油、起锅都是固定的方法，而炒菜和放调味品则是根据不同的菜品而不同的，而cook()方法则是一个将上述步骤组合调用的一个方法，使用final修饰不可被重写，如下：</p> 
<pre><code class="prism language-java"><span class="token comment">// 烹饪抽象类</span>
<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">AbstractCook</span> <span class="token punctuation">{<!-- --></span>
    <span class="token comment">// 做菜很多步骤都一样的，只是关键步骤不一样，</span>
    <span class="token comment">// 因此，相同步骤作为模板实现好，不同的自己实现</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> food<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token class-name">AbstractCook</span><span class="token punctuation">(</span><span class="token class-name">String</span> food<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>food <span class="token operator">=</span> food<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">openStove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token comment">//1. 开启灶台是相同步骤</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"打开灶台，将锅烧热"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">pourOil</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token comment">//2. 倒油是相同步骤</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"油倒入锅中，并烧热"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">//3. 翻炒时间和手法不一样</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">fry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//4. 不同菜的调味品不一样</span>
    <span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">pourSauce</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//5. 出锅是一样的</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">takeFood</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"将炒好的"</span><span class="token operator">+</span>food<span class="token operator">+</span><span class="token string">"盛入餐盘中"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// final 修饰不被继承</span>
    <span class="token keyword">public</span> <span class="token keyword">final</span> <span class="token keyword">void</span> <span class="token function">cook</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
        <span class="token function">openStove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">pourOil</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">fry</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">pourSauce</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">takeFood</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> 
<p>然后具体的菜品的制作继承上述模板类，其中共同的步骤就不用重新写了，只需要重写自己的炒菜和放调味品的具体方法</p> 
<pre><code class="prism language-java"><span class="token comment">// 炒贵州黄牛肉类</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CookBeef</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractCook</span><span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token class-name">CookBeef</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token string">"贵州黄牛肉"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">fry</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"牛肉下锅，总共炒10分钟，每个30秒翻一下"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">pourSauce</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"放盐和味精，其他放酱油、蒜末、辣椒、葱花去腥提鲜"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>


<span class="token comment">// 炒青菜类</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CookVegetable</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractCook</span><span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token class-name">CookVegetable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token string">"青菜"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">fry</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"蔬菜下锅，总共炒2分钟，每个5秒翻一下"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">pourSauce</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"放盐和味精，其他放耗油即可"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> 
<p>客户端测试类：</p> 
<pre><code class="prism language-java"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 炒牛肉</span>
        <span class="token class-name">CookBeef</span> cookBeef <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CookBeef</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        cookBeef<span class="token punctuation">.</span><span class="token function">cook</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">"-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-="</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 炒青菜</span>
        <span class="token class-name">CookVegetable</span> cookVegetable <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CookVegetable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        cookVegetable<span class="token punctuation">.</span><span class="token function">cook</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>输出结果：</p> 
<blockquote> 
 <p>打开灶台，将锅烧热<br> 油倒入锅中，并烧热<br> 牛肉下锅，总共炒10分钟，每个30秒翻一下<br> 放盐和味精，其他放酱油、蒜末、辣椒、葱花去腥提鲜<br> 将炒好的贵州黄牛肉盛入餐盘中<br> -=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=<br> 打开灶台，将锅烧热<br> 油倒入锅中，并烧热<br> 蔬菜下锅，总共炒2分钟，每个5秒翻一下<br> 放盐和味精，其他放耗油即可<br> 将炒好的青菜盛入餐盘中</p> 
</blockquote> 
<h3><a id="_144"></a>优点</h3> 
<ul><li> <p>提高代码复用性</p> <p>将相同部分的代码放在抽象的父类中，而将不同的代码放入不同的子类中。</p> </li><li> <p>实现了反向控制</p> <p>通过一个父类调用其子类的操作，通过对子类的具体实现扩展不同的行为，实现了反向控制 ，并符合“开闭原则”。</p> </li></ul> 
<h3><a id="_154"></a>缺点</h3> 
<ul><li>对每个不同的实现都需要定义一个子类，这会导致类的个数增加，系统更加庞大，设计也更加抽象。</li><li>父类中的抽象方法由子类实现，子类执行的结果会影响父类的结果，这导致一种反向的控制结构，它提高了代码阅读的难度。</li></ul> 
<h3><a id="_159"></a>适用场景</h3> 
<ul><li>算法的整体步骤很固定，但其中个别部分易变时，这时候可以使用模板方法模式，将容易变的部分抽象出来，供子类实现。</li><li>需要通过子类来决定父类算法中某个步骤是否执行，实现子类对父类的反向控制。</li></ul>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/8b39327255df3088fdbd605ffc376065/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">​机房动环监控和IT软硬件一体化运维解决方案</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/5d0600a33c34f9ff308332ffacc65f49/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">某汽车塑料制品有限公司：采用监控易管理平台提升IT运营效率</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>