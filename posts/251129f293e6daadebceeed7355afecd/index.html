<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>RK1808固件升级说明 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="RK1808固件升级说明" />
<meta property="og:description" content="升级固件 前言 本文介绍了如何将主机上的固件文件，通过公对公USB线，烧录到开发板的闪存中。升级时，需要根据主机操作系统和固件类型来选择合适的升级方式。
准备工作 Core-1808-JD4 开发板
固件
主机
公对公USB线
固件文件一般有两种：
单个统一固件 update.img, 将启动加载器、参数和所有分区镜像都打包到一起，用于固件发布。
多个分区镜像,如 boot.img, rootfs.img, recovery.img 等，在开发阶段生成。
可以在这里找到已编译好的固件Core-1808-JD4固件下载页，选择你所需要的固件，下载后解压。也可以参考编译固件的说明自行编译。
主机操作系统支持：
Windows XP （32/64位）
Windows 7 (32/64位)
Windows 8 (32/64位)
Linux (32/64位)
主机连接开发板:
公对公USB线一头连接开发板的USB 3.0接口，另外一头连接主机，如图所示。
Windows 工具: Androidtool_xxx(版本号)
安装 RK USB 驱动 下载 DriverAssitant_v4.8.zip ，解压，然后运行里面的 DriverInstall.exe 。为了所有设备都使用更新的驱动，请先选择”驱动卸载”，然后再选择”驱动安装”。
连接设备 按照以下方式可以使设备进入升级模式
先断开电源适配器连接：
公对公USB线一端连接主机，一端连接开发板
按住设备上的 RECOVERY （恢复）键并保持。
接上电源
大约两秒钟后，松开 RECOVERY 键。
主机应该会提示发现新硬件并配置驱动。打开设备管理器，会见到新设备”Rockusb Device” 出现，如下图。如果没有，则需要返回上一步重新安装驱动。
烧写固件 下载 AndroidTool，解压，运行 AndroidTool_Release_xx 目录里面的 AndroidTool.exe（注意，如果是 Windows 7/8,需要按鼠标右键，选择以管理员身份运行），如下图：
烧写统一固件 update." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/251129f293e6daadebceeed7355afecd/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-08-10T11:17:27+08:00" />
<meta property="article:modified_time" content="2020-08-10T11:17:27+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">RK1808固件升级说明</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2>升级固件</h2> 
<h3>前言</h3> 
<p>本文介绍了如何将主机上的固件文件，通过公对公USB线，烧录到开发板的闪存中。升级时，需要根据主机操作系统和固件类型来选择合适的升级方式。</p> 
<h3>准备工作</h3> 
<ul><li> <p>Core-1808-JD4 开发板</p> </li><li> <p>固件</p> </li><li> <p>主机</p> </li><li> <p>公对公USB线</p> </li></ul> 
<p>固件文件一般有两种：</p> 
<ul><li> <p>单个统一固件 update.img, 将启动加载器、参数和所有分区镜像都打包到一起，用于固件发布。</p> </li><li> <p>多个分区镜像,如 boot.img, rootfs.img, recovery.img 等，在开发阶段生成。</p> </li><li> <p>可以在这里找到已编译好的固件<a href="http://www.t-firefly.com/doc/download/page/id/83.html" rel="nofollow">Core-1808-JD4固件下载页</a>，选择你所需要的固件，下载后解压。也可以参考编译固件的说明自行编译。</p> </li></ul> 
<p>主机操作系统支持：</p> 
<blockquote> 
 <ul><li> <p>Windows XP （32/64位）</p> </li><li> <p>Windows 7 (32/64位)</p> </li><li> <p>Windows 8 (32/64位)</p> </li><li> <p>Linux (32/64位)</p> </li></ul> 
</blockquote> 
<p>主机连接开发板:</p> 
<ul><li> <p>公对公USB线一头连接开发板的USB 3.0接口，另外一头连接主机，如图所示。</p> </li></ul> 
<p><img alt="" height="411" src="https://images2.imgbox.com/dd/b2/MBOaCBnJ_o.png" width="469"></p> 
<h3>Windows</h3> 
<ul><li> <p>工具: <a href="http://download.t-firefly.com/product/RK1808/Tools/AndroidTool/AndroidTool_Release_v2.69.zip" rel="nofollow">Androidtool_xxx(版本号)</a></p> </li></ul> 
<h4>安装 RK USB 驱动</h4> 
<p>下载 <a href="http://download.t-firefly.com/product/RK1808/Tools/DriverAssitant/DriverAssitant_v4.8.zip" rel="nofollow">DriverAssitant_v4.8.zip</a> ，解压，然后运行里面的 DriverInstall.exe 。为了所有设备都使用更新的驱动，请先选择”驱动卸载”，然后再选择”驱动安装”。</p> 
<p><img alt="" height="209" src="https://images2.imgbox.com/3c/61/iaJ4EzIO_o.png" width="411"></p> 
<h4>连接设备</h4> 
<p>按照以下方式可以使设备进入升级模式</p> 
<ul><li> <p>先断开电源适配器连接：</p> 
  <ul><li> <p>公对公USB线一端连接主机，一端连接开发板</p> </li><li> <p>按住设备上的 RECOVERY （恢复）键并保持。</p> </li><li> <p>接上电源</p> </li><li> <p>大约两秒钟后，松开 RECOVERY 键。</p> </li></ul></li></ul> 
<p>主机应该会提示发现新硬件并配置驱动。打开设备管理器，会见到新设备”Rockusb Device” 出现，如下图。如果没有，则需要返回上一步重新安装驱动。</p> 
<p><img alt="" height="584" src="https://images2.imgbox.com/84/1f/6E6GigFw_o.png" width="801"></p> 
<h3>烧写固件</h3> 
<p>下载 <a href="http://download.t-firefly.com/product/RK1808/Tools/AndroidTool/AndroidTool_Release_v2.69.zip" rel="nofollow">AndroidTool</a>，解压，运行 AndroidTool_Release_xx 目录里面的 AndroidTool.exe（注意，如果是 Windows 7/8,需要按鼠标右键，选择以管理员身份运行），如下图：</p> 
<p><img alt="" height="341" src="https://images2.imgbox.com/0a/98/5fg0AeGi_o.png" width="676"></p> 
<h4>烧写统一固件 update.img</h4> 
<p>烧写统一固件 update.img 的步骤如下:</p> 
<ol><li> <p>切换至”升级固件”页。</p> </li><li> <p>按”固件”按钮，打开要升级的固件文件。升级工具会显示详细的固件信息。</p> </li><li> <p>按”升级”按钮开始升级。</p> </li></ol> 
<p><strong>注意：如果你烧写的固件laoder版本与原来的机器的不一致，请在升级固件前先执行”擦除Flash”。</strong></p> 
<p><img alt="" height="409" src="https://images2.imgbox.com/d5/6f/qpbXbRzx_o.png" width="803"></p> 
<h4>烧写分区映像</h4> 
<p>不同系统的分区可能不相同,请注意以下两点:</p> 
<ol><li> <p>buildroot系统：在下载镜像页内的任何分区点击右键，选择导入配置，然后在<code>AndroidTool_Release_xx/</code>目录选择<code>rk1808-config.cfg</code>文件配置。</p> </li></ol> 
<p>烧写分区映像的步骤如下：</p> 
<ol><li> <p>切换至”下载镜像”页。</p> </li><li> <p>勾选需要烧录的分区，可以多选。</p> </li><li> <p>确保映像文件的路径正确，需要的话，点路径右边的空白表格单元格来重新选择。</p> </li><li> <p>点击”执行”按钮开始升级，升级结束后设备会自动重启。</p> </li></ol> 
<p><img alt="" height="409" src="https://images2.imgbox.com/bd/06/rGkYjohN_o.png" width="802"></p> 
<h3>Linux</h3> 
<p>Linux 下无须安装设备驱动，参照 Windows 章节连接设备则可。</p> 
<h4>upgrade_tool</h4> 
<p>下载 <a href="http://download.t-firefly.com/product/RK1808/Tools/Linux_Upgrade_Tool/Linux_Upgrade_Tool_v1.38.zip" rel="nofollow">Linux_Upgrade_Tool</a>, 并按以下方法安装到系统中，方便调用：</p> 
<pre><code class="language-html">unzip Linux_Upgrade_Tool_xxxx.zip
cd Linux_UpgradeTool_xxxx
sudo mv upgrade_tool /usr/local/bin
sudo chown root:root /usr/local/bin/upgrade_tool
sudo chmod a+x /usr/local/bin/upgrade_tool
</code></pre> 
<p>烧写统一固件 update.img：</p> 
<pre><code class="language-html">sudo upgrade_tool uf update.img
</code></pre> 
<p>如果升级失败，可以尝试先擦除后再升级。</p> 
<pre><code class="language-html"># 擦除flash 使用ef参数需要指定loader文件或者对应的update.img
sudo upgrade_tool ef update.img #update.img :你需要烧写的ubuntu固件
# 重新烧写
sudo upgrade_tool uf update.img 
</code></pre> 
<p>烧写分区镜像：</p> 
<p>Linux系统使用以下方式</p> 
<pre><code class="language-html">sudo upgrade_tool ul $LOADER
sudo upgrade_tool di -p $PARAMETER
sudo upgrade_tool di -uboot $UBOOT
sudo upgrade_tool di -trust $TRUST
sudo upgrade_tool di -b $BOOT
sudo upgrade_tool di -r $RECOVERY
sudo upgrade_tool di -m $MISC
sudo upgrade_tool di -oem $OEM
sudo upgrade_tool di -userdata $USERDATA
sudo upgrade_tool di -rootfs $ROOTFS
</code></pre> 
<p>如果因 flash 问题导致升级时出错，可以尝试低级格式化、擦除 nand flash：</p> 
<pre><code class="language-html">sudo upgrade_tool lf update.img	# 低级格式化
sudo upgrade_tool ef update.img	# 擦除
</code></pre> 
<h3>常见问题</h3> 
<h4>如何强行进入 MaskRom 模式</h4> 
<p>如果板子进入不了 Loader 模式，此时可以尝试强行进入 MaskRom 模式。操作方法见<a href="http://wiki.t-firefly.com/zh_CN/Core-1808-JD4/maskrom_mode.html" rel="nofollow">《如何进入 MaskRom 模式》</a>。</p> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/2b0cccaacaa878ceab968d3de706558a/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">python操作Oracle数据库</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/3a1b8fc4d22831b3d3468da4c154b227/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">单片机  DAC0832数模转换实验</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>