<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Skywalking web页面空白问题解决 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Skywalking web页面空白问题解决" />
<meta property="og:description" content="问题描述:今天微服务报错想用链路id追踪这个服务的流向，发现skywalking页面空白，查看后台进程发现skywalking-oap-server服务掉了，重启还是不行
tail -n500 skywalking-oap-server.log 查看这个服务的日志，发现是es分区满了导致的
于是去es服务器上查看，分区情况，发现已经到3000临界值
curl --insecure --anyauth -u elastic:Es@2022 -XGET &#39;http://10.121.65.106:19200/_cluster/health?pretty=true&#39; { &#34;cluster_name&#34; : &#34;es-cluster&#34;, &#34;status&#34; : &#34;green&#34;, &#34;timed_out&#34; : false, &#34;number_of_nodes&#34; : 3, &#34;number_of_data_nodes&#34; : 3, &#34;active_primary_shards&#34; : 1545, &#34;active_shards&#34; : 3000, &#34;relocating_shards&#34; : 0, &#34;initializing_shards&#34; : 0, &#34;unassigned_shards&#34; : 0, &#34;delayed_unassigned_shards&#34; : 0, &#34;number_of_pending_tasks&#34; : 0, &#34;number_of_in_flight_fetch&#34; : 0, &#34;task_max_waiting_in_queue_millis&#34; : 0, &#34;active_shards_percent_as_number&#34; : 100.0 } 使用kibana的Dev Tools执行命令（临时 因为transient是临时生效重启es就会失效）
再次重启skywalking，此时skywalking-oap-server服务正常
清除缓存，此时skywalking页面正常，继续排查微服务的错....." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/48727b1a738e66c2f86a4c89e099fdfa/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-04-12T20:33:30+08:00" />
<meta property="article:modified_time" content="2023-04-12T20:33:30+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Skywalking web页面空白问题解决</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>问题描述:今天微服务报错想用链路id追踪这个服务的流向，发现skywalking页面空白，查看后台进程发现skywalking-oap-server服务掉了，重启还是不行</p> 
<pre><code class="hljs">tail -n500 skywalking-oap-server.log</code></pre> 
<p><img alt="" height="734" src="https://images2.imgbox.com/77/77/NJipvXXV_o.png" width="1200"></p> 
<p> 查看这个服务的日志，发现是es分区满了导致的</p> 
<p>于是去es服务器上查看，分区情况，发现已经到3000临界值</p> 
<p><img alt="" height="282" src="https://images2.imgbox.com/fa/40/NH6fbzXV_o.png" width="1135"></p> 
<p> </p> 
<pre><code class="language-bash">curl --insecure --anyauth -u elastic:Es@2022 -XGET  'http://10.121.65.106:19200/_cluster/health?pretty=true'
{
  "cluster_name" : "es-cluster",
  "status" : "green",
  "timed_out" : false,
  "number_of_nodes" : 3,
  "number_of_data_nodes" : 3,
  "active_primary_shards" : 1545,
  "active_shards" : 3000,
  "relocating_shards" : 0,
  "initializing_shards" : 0,
  "unassigned_shards" : 0,
  "delayed_unassigned_shards" : 0,
  "number_of_pending_tasks" : 0,
  "number_of_in_flight_fetch" : 0,
  "task_max_waiting_in_queue_millis" : 0,
  "active_shards_percent_as_number" : 100.0
}
</code></pre> 
<p style="margin-left:0;text-align:justify;">使用kibana的Dev Tools执行命令（临时 因为transient是临时生效重启es就会失效）</p> 
<p style="margin-left:0;text-align:justify;"><img alt="" height="961" src="https://images2.imgbox.com/cf/cb/pqi7SU0D_o.png" width="1200"></p> 
<p> 再次重启skywalking，此时skywalking-oap-server服务正常</p> 
<p><img alt="" height="170" src="https://images2.imgbox.com/eb/d9/NtNZb6Uf_o.png" width="541"></p> 
<p> </p> 
<p>清除缓存，此时skywalking页面正常，继续排查微服务的错.....</p> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/dcc06724923fbb211b6dc73e96458847/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">软件测试面试题常见一百道【含答案】</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/01f917d45f1769548a464da8039ef4c2/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">编写一个函数sum求s=x&#43;xx&#43;xxx&#43;xxxx&#43;......的值，其中x是一个数字，将求得的和返回，要求使用while循环进行累加求和。例如1&#43;11&#43;111&#43;111&#43;11111(此时共有5个数字)</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>