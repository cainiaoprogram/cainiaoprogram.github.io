<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>DVWA之SQL注入 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="DVWA之SQL注入" />
<meta property="og:description" content="一.DVWA介绍 1.1 DVWA简介 DVWA是一款基于PHP和MYSQL开发的web靶场练习平台，集成了常见的web漏洞如sql注入,XSS，密码破解等常见漏洞。旨在为安全专业人员测试自己的专业技能和工具提供合法的环境，帮助web开发者更好的理解web应用安全防范的过程。
1.2 DVWA模块 DVWA共有十个模块：
Brute Force（暴力（破解））
Command Injection（命令行注入）
CSRF（跨站请求伪造）
File Inclusion（文件包含）
File Upload（文件上传）
Insecure CAPTCHA （不安全的验证码）
SQL Injection（SQL注入）
SQL Injection（Blind）（SQL盲注）
XSS（Reflected）（反射型跨站脚本）
XSS（Stored）（存储型跨站脚本）
1.3 DVWA 安全级别 一般情况下，DVWA一共有四种安全级别，分别为：
Low、Medium、High、Impossible
二.DVWA的搭建 2.1 phpstudy的搭建 phpstudy下载地址小皮面板(phpstudy) - 让天下没有难配的服务器环境！ (xp.cn)
下载完后双击压缩包中的应用程序
选择路径，这里我存储在D盘中
然后就安装成功了
2.2DVWA的搭建 DVWA的官网DVWA - 该死的易受攻击的Web应用程序
将其解压到PHPstudy路径下的PHPTutorial下的WWW目录下
解压后进入DVWA下的config文件打开config.inc.php文件
将p@ssw0rd 修改为 root
然后在浏览器中访问http://127.0.0.1/DVWA-master/setup.php,然后点击网站下方的Create/Reset Database按钮
接着会跳转到DVWA的登录页面默认用户名：admin 默认密码：password 成功登录
三.SQL注入漏洞 3.1 SQL注入原理 就是通过把恶意的sql命令插入web表单递交给服务器，或者输入域名或页面请求的查询字符串递交到服务器，达到欺骗服务器，让服务器执行这些恶意的sql命令，从而让攻击者，可以绕过一些机制，达到直接访问数据库的一种攻击手段。
3.2 SQL注入分类 (1)数字型 （2）字符型 （3）报错注入 （4）Boollean注入 （5）时间注入
3.3 SQL注入思路 (1).判断是否存在注入，注入是字符型还是数字型
(2).猜解SQL查询语句中的字段数" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/2a090ea71a65121f506c6c1a3fc79674/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-09-11T02:13:36+08:00" />
<meta property="article:modified_time" content="2022-09-11T02:13:36+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">DVWA之SQL注入</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="DVWA_2"></a>一.DVWA介绍</h2> 
<h3><a id="11_DVWA_5"></a><strong><strong><strong>1.1 DVWA简介</strong></strong></strong></h3> 
<p>DVWA是一款基于PHP和MYSQL开发的web靶场练习平台，集成了常见的web漏洞如<a href="https://so.csdn.net/so/searchq=sql%E6%B3%A8%E5%85%A5&amp;spm=1001.2101.3001.7020" title="sql注入">sql注入</a>,XSS，密码破解等常见漏洞。旨在为安全专业人员测试自己的专业技能和工具提供合法的环境，帮助web开发者更好的理解web应用安全防范的过程。</p> 
<h3><a id="12_DVWA_10"></a><strong><strong><strong>1.2 DVWA模块</strong></strong></strong></h3> 
<p>DVWA共有十个模块：</p> 
<p>Brute Force（暴力（破解））</p> 
<p>Command Injection（命令行注入）</p> 
<p>CSRF（跨站请求伪造）</p> 
<p>File Inclusion（文件包含）</p> 
<p>File Upload（文件上传）</p> 
<p>Insecure CAPTCHA （不安全的验证码）</p> 
<p>SQL Injection（SQL注入）</p> 
<p>SQL Injection（Blind）（SQL盲注）</p> 
<p>XSS（Reflected）（反射型跨站脚本）</p> 
<p>XSS（Stored）（存储型跨站脚本）</p> 
<h3><a id="13_DVWA__35"></a><strong><strong><strong>1.3 DVWA 安全级别</strong></strong></strong></h3> 
<p>一般情况下，DVWA一共有四种安全级别，分别为：</p> 
<p>Low、Medium、High、Impossible</p> 
<h2><a id="DVWA_42"></a><strong>二.DVWA的搭建</strong></h2> 
<h3><a id="21_phpstudy_45"></a><strong><strong><strong>2.1 phpstudy的搭建</strong></strong></strong></h3> 
<p>phpstudy下载地址<a href="https://www.xp.cn/" rel="nofollow" title="小皮面板(phpstudy) - 让天下没有难配的服务器环境！ (xp.cn)">小皮面板(phpstudy) - 让天下没有难配的服务器环境！ (xp.cn)</a></p> 
<h2><a id="httpsimgblogcsdnimgcn988a7625c34e498a836ef1b1aeba3969png_50"></a><img src="https://images2.imgbox.com/ee/91/n7Bv3wNj_o.png" alt=""></h2> 
<p>下载完后双击压缩包中的应用程序</p> 
<p><img src="https://images2.imgbox.com/7b/ac/wcYuITM9_o.png" alt=""></p> 
<p>选择路径，这里我存储在D盘中</p> 
<p><img src="https://images2.imgbox.com/c4/ae/4p6sFcfK_o.png" alt=""></p> 
<p>然后就安装成功了</p> 
<p><img src="https://images2.imgbox.com/25/b3/2WLrK1m8_o.png" alt=""></p> 
<h3><a id="22DVWA_65"></a><strong><strong><strong>2.2DVWA的搭建</strong></strong></strong></h3> 
<p>DVWA的官网<a href="https://dvwa.co.uk/" rel="nofollow" title="DVWA - 该死的易受攻击的Web应用程序">DVWA - 该死的易受攻击的Web应用程序</a></p> 
<p><img src="https://images2.imgbox.com/8e/f5/vJJCJDNA_o.png" alt=""></p> 
<p>将其解压到PHPstudy路径下的PHPTutorial下的WWW目录下</p> 
<h2><a id="httpsimgblogcsdnimgcn6191b7d0009642afb4f30bdd9225b4c1png_74"></a><img src="https://images2.imgbox.com/f9/95/gpfAh14m_o.png" alt=""></h2> 
<p>解压后进入DVWA下的config文件打开config.inc.php文件</p> 
<p><img src="https://images2.imgbox.com/92/f8/mJvA14gt_o.png" alt=""></p> 
<p>将p@ssw0rd 修改为 root</p> 
<p><img src="https://images2.imgbox.com/39/4d/0j84ePAZ_o.png" alt=""></p> 
<p>然后在浏览器中访问http://127.0.0.1/DVWA-master/setup.php,然后点击网站下方的Create/Reset Database按钮</p> 
<p><img src="https://images2.imgbox.com/39/a2/aW65bKMv_o.png" alt=""></p> 
<p>接着会跳转到DVWA的登录页面默认用户名：admin 默认密码：password 成功登录</p> 
<p><img src="https://images2.imgbox.com/d0/a3/EhvydVIn_o.png" alt=""></p> 
<h2><a id="SQL_93"></a>三.SQL注入漏洞</h2> 
<h3><a id="31_SQL_96"></a><strong><strong><strong>3.1 SQL注入原理</strong></strong></strong></h3> 
<p>就是通过把恶意的sql命令插入web表单递交给服务器，或者输入域名或页面请求的查询字符串递交到服务器，达到欺骗服务器，让服务器执行这些恶意的sql命令，从而让攻击者，可以绕过一些机制，达到直接访问数据库的一种攻击手段。</p> 
<h3><a id="32_SQL_101"></a><strong><strong><strong>3.2 SQL注入分类</strong></strong></strong></h3> 
<p>(1)数字型 （2）字符型 （3）报错注入 （4）Boollean注入 （5）时间注入</p> 
<h3><a id="33_SQL_106"></a><strong><strong><strong>3.3 SQL注入思路</strong></strong></strong></h3> 
<p>(1).判断是否存在注入，注入是字符型还是数字型</p> 
<p>(2).猜解SQL查询语句中的字段数</p> 
<p>(3).确定回显位置</p> 
<p>(4).获取当前数据库</p> 
<p>(5).获取数据库中的表</p> 
<p>(6).获取表中的字段名</p> 
<p>(7).得到数据</p> 
<h3><a id="34_SQL_123"></a><strong><strong><strong>3.4 SQL注入绕过方法</strong></strong></strong></h3> 
<p>(1)注释符号绕过 (2)大小写绕过 (3)内联注释绕过</p> 
<p>(4)特殊编码绕过 (5)空格过滤绕过 (6)过滤or and xor not 绕过</p> 
<h2><a id="SQL_130"></a>四.SQL注入漏洞的分析</h2> 
<h3><a id="41__133"></a><strong><strong><strong>4.1 定义</strong></strong></strong></h3> 
<p>SQL注入（SQLi）是一种注入攻击，可以执行恶意SQL语句。它通过将任意SQL代码插入数据库查询，使攻击者能够完全控制Web应用程序后面的数据库服务器。攻击者可以使用SQL注入漏洞绕过应用程序安全措施；可以绕过网页或Web应用程序的身份验证和授权，并检索整个SQL数据库的内容；还可以使用SQL注入来添加，修改和删除数据库中的记录。</p> 
<h3><a id="42__138"></a><strong><strong><strong>4.2 原因</strong></strong></strong></h3> 
<p>SQL 注入漏洞存在的原因，就是拼接SQL参数。也就是将用于输入的查询参数，直接拼接在SQL语句中，导致了SQL注入漏洞。</p> 
<p>web 开发人员无法保证所有的输入都已经过滤</p> 
<p>攻击者利用发送给服务器的输入参数构造可执行的 SQL 代码（可加入到 get 请求、 post 谓求、 http 头信思、 cookie 中）</p> 
<p>数据库未做相应的安全配置</p> 
<h2><a id="SQL_Injection_149"></a>五.SQL Injection</h2> 
<h3><a id="1low_152"></a>1.low级别</h3> 
<p>(1)判断注入类型，是数字型注入，还是字符型注入</p> 
<p>我们输入1，看到正确返回值</p> 
<p><img src="https://images2.imgbox.com/5a/a3/XGAIR6vZ_o.png" alt=""></p> 
<p>我们输入1’，看到报错了</p> 
<p><img src="https://images2.imgbox.com/6a/01/Y8jlGZnX_o.png" alt=""></p> 
<p>我们可以猜出到是字符型注入，我们继续输入1’ and ‘1’ =‘1和1’ and ‘1’='2。</p> 
<p><img src="https://images2.imgbox.com/db/ec/Mm4PnAHJ_o.png" alt=""></p> 
<p><img src="https://images2.imgbox.com/d9/db/EpcC1NXt_o.png" alt=""></p> 
<p>我们根据id=1’报错和id=1’ and ‘1’=’1正确，我们可以知道是字符型注入，查看源代码知道就是字符型注入。</p> 
<p>(2)判断字段数 order by</p> 
<p>我们使用order by 进行判断字段数， 至到order by 进行报错时候就是字段数</p> 
<p>id=1’ order by 1#没有报错</p> 
<p><img src="https://images2.imgbox.com/6b/cc/Z86mOZdm_o.png" alt=""></p> 
<p>id=1’ order by 2# 没有报错</p> 
<p><img src="https://images2.imgbox.com/06/3f/loDZsT4Z_o.png" alt=""></p> 
<p>id=1’ order by 3#时报错了，说明字段只有2列</p> 
<p><img src="https://images2.imgbox.com/d4/88/MR3J0Uzx_o.png" alt="">(3)判断回显位置 union select 1,2#</p> 
<p><img src="https://images2.imgbox.com/d8/7a/Puq8fT4n_o.png" alt=""></p> 
<p>可以知道回显位置 在这二个地方</p> 
<p>(4)判断数据库 union select 1,database()#</p> 
<p><img src="https://images2.imgbox.com/62/8e/BoBb2mUW_o.png" alt=""></p> 
<p>(5)获取表名 1’ union select 1,group_concat(table_name) from information_schema.tables where获取字段名 tables_schema=database()#</p> 
<p><img src="https://images2.imgbox.com/88/1b/pSHSneg7_o.png" alt=""></p> 
<p>(6)获取字段名 1’ union select 1,group_concat(column_name) from information_schema.columns where table_name=‘users’#</p> 
<p><img src="https://images2.imgbox.com/0e/4f/UogkbHsg_o.png" alt=""></p> 
<p>(7)获取数据 1’ union select user,password from users #</p> 
<p><img src="https://images2.imgbox.com/f3/11/HqmYj8XS_o.png" alt=""></p> 
<h3><a id="2medium_209"></a>2.medium级别</h3> 
<p>(1)判断注入类型 我们可以看到无法输入数字，所以我们进行抓包在bp中进行SQL注入</p> 
<p><img src="https://images2.imgbox.com/9f/7a/97SreeRi_o.png" alt=""></p> 
<p><img src="https://images2.imgbox.com/db/04/IAAq4zUh_o.png" alt=""></p> 
<p><img src="https://images2.imgbox.com/83/a3/MsRGwC1i_o.png" alt=""></p> 
<p>我们输入id=1’ and ‘1’='1看见报错了，输入id=1and 1=1没有报错。</p> 
<p><img src="https://images2.imgbox.com/1c/f3/arNQxSxv_o.png" alt=""></p> 
<p><img src="https://images2.imgbox.com/db/ca/luSHxE1f_o.png" alt="">所以注入类型为数字类型</p> 
<p>(2)判断列数</p> 
<p><img src="https://images2.imgbox.com/e8/65/STsXUoyE_o.png" alt=""></p> 
<p><img src="https://images2.imgbox.com/c7/50/xQwrAU2O_o.png" alt=""></p> 
<p>我们知道列数为2列</p> 
<p>（3）判断回显位置</p> 
<p><img src="https://images2.imgbox.com/eb/87/w6i05lQT_o.png" alt="">我们可以知道回显位置是2</p> 
<p>(4)判断数据库</p> 
<p><img src="https://images2.imgbox.com/ec/29/lHvfcC4N_o.png" alt=""></p> 
<p>（5）判断表名</p> 
<p><img src="https://images2.imgbox.com/b3/1f/mXlLcywT_o.png" alt=""></p> 
<p>(6)判断列名</p> 
<p><img src="https://images2.imgbox.com/89/c8/15ETAydd_o.png" alt=""></p> 
<p>我们输入users之后，发现没有如何反应</p> 
<p>通过源代码我们可以知道，发现它对单引号进行了转义，我们采用16进制绕过，得知users的十六进制为 0x75736572</p> 
<p><img src="https://images2.imgbox.com/bf/b2/kELDLA9C_o.png" alt=""></p> 
<p><img src="https://images2.imgbox.com/40/85/eku5Wbuk_o.png" alt=""></p> 
<p>(7)获取数据</p> 
<p><img src="https://images2.imgbox.com/eb/f5/6VbcwGNX_o.png" alt=""></p> 
<h3><a id="3high_262"></a>3.high级别</h3> 
<p>（1）判断注入类型</p> 
<p><img src="https://images2.imgbox.com/dd/b9/YmrrxtbG_o.png" alt=""></p> 
<p><img src="https://images2.imgbox.com/cc/68/j6kXCEzD_o.png" alt=""></p> 
<p><img src="https://images2.imgbox.com/2c/87/XAHgndMM_o.png" alt=""></p> 
<p>我们可以知道是字符型注入</p> 
<p>(2)判断列数</p> 
<p><img src="https://images2.imgbox.com/c3/b4/gOW58yqT_o.png" alt=""></p> 
<p><img src="https://images2.imgbox.com/b7/25/8tdxwcOH_o.png" alt=""></p> 
<p>列数为2列，我们可以发现high级别和low级别的步骤是一样的，所以我在这里就不写了，可以参考low级别的步骤就行了</p> 
<h2><a id="SQL_Injection_Blind_283"></a>六.SQL Injection (Blind)</h2> 
<p>我们在讲SQL Injection (Blind)之前，先讲一下什么是sqlmap注入。</p> 
<p><strong>sqlmap</strong>是一个自动化的<a href="https://so.csdn.net/so/searchq=SQL%E6%B3%A8%E5%85%A5&amp;spm=1001.2101.3001.7020" title="SQL注入">SQL注入</a>工具，其主要功能是扫描，发现并利用给定的URL进行SQL注入。目前支持的数据库有MySql、Oracle、Access、PostageSQL、SQLServer、IBM DB2、SQLite、Firebird、Sybase和SAP MaxDB等。</p> 
<p>Sqlmap采用了以下5种独特的SQL注入技术</p> 
<ul><li>基于布尔类型的盲注，即可以根据返回页面判断条件真假的注入</li><li>基于时间的盲注，即不能根据页面返回的内容判断任何信息，要用条件语句查看时间延迟语句是否已经执行(即页面返回时间是否增加)来判断</li><li>基于报错注入，即页面会返回错误信息，或者把注入的语句的结果直接返回到页面中</li><li>联合查询注入，在可以使用Union的情况下注入</li><li>堆查询注入，可以同时执行多条语句时的注入</li></ul> 
<p>Sqlmap的强大的功能包括 数据库指纹识别、数据库枚举、数据提取、访问目标文件系统，并在获取完全的操作权限时执行任意命令。</p> 
<p>sqlmap是一个跨平台的工具，很好用，是SQL注入方面一个强大的工具！</p> 
<p>我们可以使用 -h 参数查看sqlmap的参数以及用法，<strong>sqlmap -h</strong></p> 
<p><img src="https://images2.imgbox.com/7a/4b/YPozhBQp_o.png" alt=""></p> 
<p>sqlmap的使用方法:sqlmap -u url 是对网站进行注入</p> 
<p>sqlmap -r 是对文件进行注入</p> 
<p>这里我们对SQL Injection的low级别进行sqlmap，具体过程我写在了图片上面</p> 
<p><img src="https://images2.imgbox.com/ea/03/GoxgkNFC_o.png" alt=""><img src="https://images2.imgbox.com/fe/ee/5tUqZp62_o.png" alt=""><img src="https://images2.imgbox.com/e3/eb/2P0hasLk_o.png" alt=""><img src="https://images2.imgbox.com/80/45/dYBnF22W_o.png" alt=""><img src="https://images2.imgbox.com/bb/62/bE1Kht0e_o.png" alt=""><img src="https://images2.imgbox.com/75/a9/eP4QhlG2_o.png" alt=""><img src="https://images2.imgbox.com/72/2c/z4vUhwWs_o.png" alt=""></p> 
<p><img src="https://images2.imgbox.com/af/7d/d0UNZ4me_o.png" alt=""><img src="https://images2.imgbox.com/95/0a/BW02b5XM_o.png" alt="">1.low级别</p> 
<p>(1)我们先进行抓包</p> 
<p><img src="https://images2.imgbox.com/89/7e/el9zsgmN_o.png" alt=""></p> 
<p>(2)然后使用sqlmap</p> 
<p><img src="https://images2.imgbox.com/93/e5/gMEkAlZ6_o.png" alt=""></p> 
<p>(3)爆破数据库 --dbs</p> 
<p><img src="https://images2.imgbox.com/d8/32/hh31ioib_o.png" alt=""></p> 
<p>(3)爆破表名 -D ‘dvwa’ --tables</p> 
<p><img src="https://images2.imgbox.com/ae/56/yAdm4ajg_o.png" alt=""></p> 
<p><img src="https://images2.imgbox.com/6e/cb/f4SaBQkF_o.png" alt=""></p> 
<p>(4)爆破字段名 -D ‘dvwa’ -T ’ guestbook’ --columns</p> 
<p><img src="https://images2.imgbox.com/ed/29/QHy0GfqX_o.png" alt=""></p> 
<p><img src="https://images2.imgbox.com/18/15/jwOWQwYC_o.png" alt=""></p> 
<p>(5)爆破数据</p> 
<p><img src="https://images2.imgbox.com/5f/25/3b7TtNN2_o.png" alt=""></p> 
<p><img src="https://images2.imgbox.com/26/47/s8GOAfdG_o.png" alt=""></p> 
<p>后面的我们都可以使用sqlmap进行注入,所以后面的就在这里不讲解了。</p> 
<h3><a id="_348"></a>最后</h3> 
<p>深知大多数初中级Java工程师，想要提升技能，往往是自己摸索成长或者是报班学习，但对于培训机构动则近万的学费，着实压力不小。自己不成体系的自学效果低效又漫长，而且极易碰到天花板技术停滞不前！</p> 
<p>因此收集整理了一份《<strong>Java开发全套学习资料</strong>》送给大家，初衷也很简单，就是希望能够帮助到想自学提升又不知道该从何学起的朋友，同时减轻大家的负担。</p> 
<p>小编已加密：aHR0cHM6Ly9kb2NzLnFxLmNvbS9kb2MvRFVrVm9aSGxQZUVsTlkwUnc==出于安全原因，我们把网站通过base64编码了，大家可以通过base64解码把网址获取下来。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/81006a2554abe4b16e3a98954ced4451/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">MAC安装brew保姆级教程</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/3cc4d80609a7597a977fd8ca00f4aa4c/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">java.lang.reflect.InvocationTargetException null，依赖版本，配置文件的地址都对了。但还是出现这个错误。</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>