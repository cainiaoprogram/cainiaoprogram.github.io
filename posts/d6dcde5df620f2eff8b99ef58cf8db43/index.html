<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>vc下动态改变鼠标光标 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="vc下动态改变鼠标光标" />
<meta property="og:description" content="消息下：
SetCursor(AfxGetApp()-&gt;LoadStandardCursor(IDC_CROSS));
或是：
HCURSOR hc;
hc=LoadCursor(NULL,IDC_CROSS);
SetCursor(hc);
IDC_APPSTARTING 带小沙漏的标准箭头 IDC_ARROW 标准箭头 IDC_CROSS 十字光标 IDC_HAND windows 2000：手型 IDC_HELP 带问号的箭头 IDC_IBEAM i型标 IDC_ICON obsolete for applications marked version 4.0 or later. IDC_NO 禁止符号 IDC_SIZE obsolete for applications marked version 4.0 or later. use idc_sizeall. IDC_SIZEALL 十字箭头 IDC_SIZENESW 指向东北和西南的双向箭头 IDC_SIZENS 指向南和北的双向箭头 IDC_SIZENWSE 指向西北和东南的双向箭头 IDC_SIZEWE 指向东西的双向箭头 IDC_UPARROW 上箭头 IDC_WAIT 沙漏
当我们要自己选择一个图标的时候按照以下几个步骤:
1、定义一个成员变量： HCURSOR m_cursor;
m_cursor = AfxGetApp()-&gt;LoadCursor(IDC_CURSOR1);
也可以
m_cursor = LoadCursorFromFile(&#34;.//res//123.cur&#34;);
2、重载 OnSetCursor(CWnd* pWnd, UINT nHitTest, UINT message)函数，" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/d6dcde5df620f2eff8b99ef58cf8db43/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2009-07-30T18:02:00+08:00" />
<meta property="article:modified_time" content="2009-07-30T18:02:00+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">vc下动态改变鼠标光标</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div> 
 <p>消息下：</p> 
 <p>SetCursor(AfxGetApp()-&gt;LoadStandardCursor(IDC_CROSS));</p> 
 <p>或是：</p> 
 <p>HCURSOR   hc;</p> 
 <p style="text-indent: 2em;">hc=LoadCursor(NULL,IDC_CROSS);</p> 
 <p style="text-indent: 2em;">             SetCursor(hc);</p> 
 <p>IDC_APPSTARTING     带小沙漏的标准箭头   <br>IDC_ARROW           标准箭头   <br>IDC_CROSS           十字光标   <br>IDC_HAND            windows   2000：手型   <br>IDC_HELP            带问号的箭头   <br>IDC_IBEAM           i型标   <br>IDC_ICON            obsolete   for   applications   marked   version   4.0   or   later.     <br>IDC_NO              禁止符号   <br>IDC_SIZE            obsolete   for   applications   marked   version   4.0   or   later.   use   idc_sizeall.     <br>IDC_SIZEALL         十字箭头   <br>IDC_SIZENESW        指向东北和西南的双向箭头   <br>IDC_SIZENS          指向南和北的双向箭头   <br>IDC_SIZENWSE        指向西北和东南的双向箭头   <br>IDC_SIZEWE          指向东西的双向箭头   <br>IDC_UPARROW         上箭头   <br>IDC_WAIT            沙漏</p> 
 <p> </p> 
 <p>当我们要自己选择一个图标的时候按照以下几个步骤:</p> 
 <p>1、定义一个成员变量： HCURSOR m_cursor;</p> 
 <p>          m_cursor = AfxGetApp()-&gt;LoadCursor(IDC_CURSOR1);</p> 
 <p>也可以</p> 
 <p>        m_cursor = LoadCursorFromFile(".//res//123.cur");</p> 
 <p>2、重载 OnSetCursor(CWnd* pWnd, UINT nHitTest, UINT message)函数，</p> 
 <p>3、在函数里面写入：</p> 
 <p>     ::SetCursor(m_cursor);</p> 
 <p>OK,我们自定义的鼠标完成；</p> 
 <p>当然我们也可以用ani格式的动态鼠标形状，可以使程序更帅；</p> 
 <p>   和载入.cur一样：例如；</p> 
 <p>m_cursor = LoadCursorFromFile(".//res//123.ani");</p> 
 <p>-----------------------------------------------------------------------------------------------------------</p> 
 <p>当然也可以先把文件加载进来直接导入：按照以下步骤：</p> 
 <p>1、先把ani文件导入；</p> 
 <p>2、随便保存成什么名字；然后在程序的.rc文件下，把对应的代码 修改成以下代码：</p> 
 <p>IDR_FLY                 ANICURSOR DISCARDABLE   "fly.ani"</p> 
 <p>或者</p> 
 <p>IDR_FLY                 CURSOR DISCARDABLE   "fly.ani"</p> 
 <p>不然有的时候可能出现错误，我现在也没有搞清楚是什么问题；</p> 
 <p>或者直接在.rc文件下添加代码：</p> 
 <p>IDR_FLY                 ANICURSOR DISCARDABLE   "fly.ani"</p> 
 <p>或者</p> 
 <p>IDR_FLY                 CURSOR DISCARDABLE   "fly.ani"</p> 
 <p>就不用第一步骤了；然后</p> 
 <p>m_cursor = AfxGetApp()-&gt;LoadCursor("IDR_FLY");</p> 
 <p>这样就可以实现了；</p> 
 <p>ani格式我们可以通过一些动画或gif格式转换过来；</p> 
 <p>下面一些理论的东西可能对我们也有用，是转自其他人的博客的内容：</p> 
 <p>转粘(vckbase)：   </p> 
 <p><br>windows编程中有两种方法改变指针：一种是当应用的主窗口类注册时，为wndclass结构提供一个全程光标指针，另外一种方法是在程序中处理 wm_setcursor消息来设置鼠标光标。标准的mfc应用程序使用第一种方法自动在主窗口注册时将光标指针设置为一个箭头。如果要改变光标指针，则可以通过在主窗口或子窗口中重载消息wm_setcursor的处理函数来重新设置鼠标指针。 <br><br>// handle wm_setcursor in button class <br>bool cmybutton::onsetcursor(cwnd* pwnd, uint nhittest, uint msg) <br>{ <br>::setcursor(m_hmycursor); <br>return true; <br>} <br><br><br>当用户将鼠标指针移到按钮上时，鼠标不被捕获，windows发送一个wm_setcursor消息到按钮。从上面onsetcursor的代码中可以看到，它传递一个参数是窗口句柄- 即鼠标指针所指的窗口，这里指的是按钮本身；onsetcursor传递的第二个参数是nhittest，这是一个鼠标点击测试代码，它以htxxx开头，用于wm_nchittest消息；onsetcursor传递的第三个参数是触发事件的鼠标消息的消息id-例如，wm_mousemove。 wm_setcursor是专门用来设置鼠标指针的消息，当设置了鼠标指针以后，应该让它返回true以防止windows再作缺省处理。 <br><br>wm_setcursor的处理机制是这样的，如果有父窗口的话，缺省的窗口过程首先发送wm_setcursor消息到父窗口，如果父窗口处理 wm_setcursor消息，则windows不再作任何多余的事情，处理完消息便结束。如果父窗口不处理wm_setcursor消息， windows让子窗口来处理wm_setcursor，如果子窗口也不做任何处理，windows使用全程光标指针，如果没有全程光标指针，则使用箭头指针。 <br><br><br>如果你在程序中要是使用动态光标指针，你必须决定是在子窗口处理wm_setcursor消息还是在父窗口中处理wm_setcursor消息。两种方法各有利弊，根据具体情况而定。一般总是让对象决定它们自己的行为属性-也就是说最好在子窗口中做处理。本文中的子窗口即按钮。这就要派生一个新的按钮类，新的按钮类有自己的消息映射及其消息处理过程。可以使用类向导来产生新的按钮类，但那样要做的事情太多。如果你已经有自己的按钮类，那当然是在自己的按钮类中处理wm_setcursor消息。如果没有自己的按钮类而又想偷懒的话，那就在对话框中处理wm_setcursor消息得啦，只是不要向面向对象专家说是我告诉你这么做的。 <br><br><br>本文附带一个简单的基于对话框的程序，mycursor，这个例子程序示范了两种方法来改变光标指针。如果将鼠标移到按钮上，光标指针变为蓝色手指，它是通过在对话框中处理onsetcursor实现的，另外，如果将鼠标指针移到带下划线的超链接上，光标指针又变为另外一个windows中常常使用的手指。它是通过在窗口子类中实现的。cstaticlink是一个通用的可重用类，在vc知识库的范例程序中经常用到，其中cstaticlink:: onsetcursor的大多数代码处理是从win32hlp.exe可执行程序中吸取手型指针，它们与本文有关光标设置的内容关系不大.</p> 
 <p> </p> 
 <p>转来地址：<a href="http://shwang112.blog.163.com/blog/static/44712101200811912522195/" rel="nofollow">http://shwang112.blog.163.com/blog/static/44712101200811912522195/</a></p> 
</div>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/7cb4bb0ad4bd23a14534ab12dae6a223/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">IObjectSafety (Interfaces)</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/56bff27147fc50c4e93f49127fac5f30/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">遍历文件及繁简体字转换</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>