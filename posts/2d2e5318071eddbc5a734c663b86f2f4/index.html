<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>STM32读取GXHT30A模拟温湿度传感器 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="STM32读取GXHT30A模拟温湿度传感器" />
<meta property="og:description" content="STM32读取GXHT30A模拟温湿度传感器 文章目录 STM32读取GXHT30A模拟温湿度传感器 前言一、GXHT30A的特点二、简介1.实物图2.电气参数 三、程序配置1.ADC配置2.读入数据并计算 总结 前言 `数字传感器现在应用越来越广泛，但在许多领域，模拟输出的传感器因为其简单，易用的特点还是广泛应用在很多行业中，例如家电等行业，中科银河芯的GXHT30A就是一款电压输出的模拟温湿度传感器。
提示：以下是本篇文章正文内容，下面案例可供参考
一、GXHT30A的特点 GXHT30A的封装和管脚兼容SHT30A传感器，并且其温度和湿度的输出电压都能根据需求进行调整，因此输出量也能做到和SHT30A兼容。
二、简介 1.实物图 2.电气参数 芯片支持的工作电压范围为2.2V到5.5V，温湿度的输出电压会根据工作电压不同而变化，只需将读取的电压值带入公式进行计算即可得出最终温湿度值。
而传感器的管脚顺序和另外一款数字输出的温湿度传感器GXHT30匹配，在某些情况下两颗芯片的PCB能通用。
三、程序配置 1.ADC配置 配置DMA方式读取传感器ADC值：
/*配置采样通道端口 使能GPIO时钟	设置ADC采样PA0端口信号*/ void ADC1_GPIO_Config(void) { GPIO_InitTypeDef GPIO_InitStructure; RCC_APB2PeriphClockCmd(RCC_APB2Periph_GPIOA, ENABLE);	GPIO_InitStructure.GPIO_Pin = GPIO_Pin_0 ; GPIO_InitStructure.GPIO_Mode = GPIO_Mode_AIN;	//GPIO设置为模拟输入 GPIO_Init(GPIOA, &amp;GPIO_InitStructure); RCC_APB2PeriphClockCmd(RCC_APB2Periph_GPIOA, ENABLE);	GPIO_InitStructure.GPIO_Pin = GPIO_Pin_1 ; GPIO_InitStructure.GPIO_Mode = GPIO_Mode_AIN;	//GPIO设置为模拟输入 GPIO_Init(GPIOA, &amp;GPIO_InitStructure); } /*配置ADC1的工作模式为MDA模式 */ void ADC1_Mode_Config(void) { DMA_InitTypeDef DMA_InitStructure; ADC_InitTypeDef ADC_InitStructure;	RCC_AHBPeriphClockCmd(RCC_AHBPeriph_DMA1, ENABLE); //使能MDA1时钟 /* DMA channel1 configuration */ DMA_DeInit(DMA1_Channel1); //指定DMA通道 DMA_InitStructure." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/2d2e5318071eddbc5a734c663b86f2f4/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-09-02T14:38:49+08:00" />
<meta property="article:modified_time" content="2023-09-02T14:38:49+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">STM32读取GXHT30A模拟温湿度传感器</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h3><a id="STM32GXHT30A_0"></a>STM32读取GXHT30A模拟温湿度传感器</h3> 
<p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><ul><li><a href="#STM32GXHT30A_0" rel="nofollow">STM32读取GXHT30A模拟温湿度传感器</a></li></ul> 
  </li><li><a href="#_8" rel="nofollow">前言</a></li><li><a href="#GXHT30A_17" rel="nofollow">一、GXHT30A的特点</a></li><li><a href="#_21" rel="nofollow">二、简介</a></li><li><ul><li><a href="#1_22" rel="nofollow">1.实物图</a></li><li><a href="#2_25" rel="nofollow">2.电气参数</a></li></ul> 
  </li><li><a href="#_33" rel="nofollow">三、程序配置</a></li><li><ul><li><a href="#1ADC_34" rel="nofollow">1.ADC配置</a></li><li><a href="#2_126" rel="nofollow">2.读入数据并计算</a></li></ul> 
  </li><li><a href="#_179" rel="nofollow">总结</a></li></ul> 
</div> 
<p></p> 
<hr> 
<h2><a id="_8"></a>前言</h2> 
<p>`数字传感器现在应用越来越广泛，但在许多领域，模拟输出的传感器因为其简单，易用的特点还是广泛应用在很多行业中，例如家电等行业，中科银河芯的GXHT30A就是一款电压输出的模拟温湿度传感器。</p> 
<p><code>提示：以下是本篇文章正文内容，下面案例可供参考</code></p> 
<h2><a id="GXHT30A_17"></a>一、GXHT30A的特点</h2> 
<p>GXHT30A的封装和管脚兼容SHT30A传感器，并且其温度和湿度的输出电压都能根据需求进行调整，因此输出量也能做到和SHT30A兼容。</p> 
<h2><a id="_21"></a>二、简介</h2> 
<h3><a id="1_22"></a>1.实物图</h3> 
<p><img src="https://images2.imgbox.com/6b/1b/CBeniMyq_o.png" alt="DFN 2.5*2.5封装"></p> 
<h3><a id="2_25"></a>2.电气参数</h3> 
<p><img src="https://images2.imgbox.com/19/4f/PPcvaEcw_o.png" alt="在这里插入图片描述"><br> 芯片支持的工作电压范围为2.2V到5.5V，温湿度的输出电压会根据工作电压不同而变化，只需将读取的电压值带入公式进行计算即可得出最终温湿度值。</p> 
<p><img src="https://images2.imgbox.com/b0/65/02xVHOo2_o.png" alt="在这里插入图片描述"><br> 而传感器的管脚顺序和另外一款数字输出的温湿度传感器GXHT30匹配，在某些情况下两颗芯片的PCB能通用。</p> 
<h2><a id="_33"></a>三、程序配置</h2> 
<h3><a id="1ADC_34"></a>1.ADC配置</h3> 
<blockquote> 
 <p>配置DMA方式读取传感器ADC值：</p> 
</blockquote> 
<pre><code class="prism language-c"><span class="token comment">/*配置采样通道端口 使能GPIO时钟	  设置ADC采样PA0端口信号*/</span>
 <span class="token keyword">void</span> <span class="token function">ADC1_GPIO_Config</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span> GPIO_InitTypeDef GPIO_InitStructure<span class="token punctuation">;</span>    
  <span class="token function">RCC_APB2PeriphClockCmd</span><span class="token punctuation">(</span>RCC_APB2Periph_GPIOA<span class="token punctuation">,</span> ENABLE<span class="token punctuation">)</span><span class="token punctuation">;</span>	  
  GPIO_InitStructure<span class="token punctuation">.</span>GPIO_Pin <span class="token operator">=</span> GPIO_Pin_0 <span class="token punctuation">;</span>
  GPIO_InitStructure<span class="token punctuation">.</span>GPIO_Mode <span class="token operator">=</span> GPIO_Mode_AIN<span class="token punctuation">;</span>		    <span class="token comment">//GPIO设置为模拟输入</span>
  <span class="token function">GPIO_Init</span><span class="token punctuation">(</span>GPIOA<span class="token punctuation">,</span> <span class="token operator">&amp;</span>GPIO_InitStructure<span class="token punctuation">)</span><span class="token punctuation">;</span> 
    
  <span class="token function">RCC_APB2PeriphClockCmd</span><span class="token punctuation">(</span>RCC_APB2Periph_GPIOA<span class="token punctuation">,</span> ENABLE<span class="token punctuation">)</span><span class="token punctuation">;</span>	  
  GPIO_InitStructure<span class="token punctuation">.</span>GPIO_Pin <span class="token operator">=</span> GPIO_Pin_1 <span class="token punctuation">;</span>
  GPIO_InitStructure<span class="token punctuation">.</span>GPIO_Mode <span class="token operator">=</span> GPIO_Mode_AIN<span class="token punctuation">;</span>		    <span class="token comment">//GPIO设置为模拟输入</span>
  <span class="token function">GPIO_Init</span><span class="token punctuation">(</span>GPIOA<span class="token punctuation">,</span> <span class="token operator">&amp;</span>GPIO_InitStructure<span class="token punctuation">)</span><span class="token punctuation">;</span>   
<span class="token punctuation">}</span>


<span class="token comment">/*配置ADC1的工作模式为MDA模式  */</span>
 <span class="token keyword">void</span> <span class="token function">ADC1_Mode_Config</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
  DMA_InitTypeDef DMA_InitStructure<span class="token punctuation">;</span>
  ADC_InitTypeDef ADC_InitStructure<span class="token punctuation">;</span>	
  <span class="token function">RCC_AHBPeriphClockCmd</span><span class="token punctuation">(</span>RCC_AHBPeriph_DMA1<span class="token punctuation">,</span> ENABLE<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//使能MDA1时钟</span>
	<span class="token comment">/* DMA channel1 configuration */</span>
  <span class="token function">DMA_DeInit</span><span class="token punctuation">(</span>DMA1_Channel1<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//指定DMA通道</span>
  DMA_InitStructure<span class="token punctuation">.</span>DMA_PeripheralBaseAddr <span class="token operator">=</span> ADC1_DR_Address<span class="token punctuation">;</span><span class="token comment">//设置DMA外设地址</span>
  DMA_InitStructure<span class="token punctuation">.</span>DMA_MemoryBaseAddr <span class="token operator">=</span> <span class="token punctuation">(</span>u32<span class="token punctuation">)</span><span class="token operator">&amp;</span>ADC_ConvertedValue<span class="token punctuation">;</span>	<span class="token comment">//设置DMA内存地址，ADC转换结果直接放入该地址</span>
  DMA_InitStructure<span class="token punctuation">.</span>DMA_DIR <span class="token operator">=</span> DMA_DIR_PeripheralSRC<span class="token punctuation">;</span> <span class="token comment">//外设为设置为数据传输的来源</span>
  DMA_InitStructure<span class="token punctuation">.</span>DMA_BufferSize <span class="token operator">=</span> ADC1_ChannelCnt <span class="token operator">*</span> ADC1_SampleTimes<span class="token punctuation">;</span>	<span class="token comment">//DMA缓冲区设置为1；</span>
  DMA_InitStructure<span class="token punctuation">.</span>DMA_PeripheralInc <span class="token operator">=</span> DMA_PeripheralInc_Disable<span class="token punctuation">;</span>
  DMA_InitStructure<span class="token punctuation">.</span>DMA_MemoryInc <span class="token operator">=</span> DMA_MemoryInc_Enable<span class="token punctuation">;</span><span class="token comment"></span>
  DMA_InitStructure<span class="token punctuation">.</span>DMA_PeripheralDataSize <span class="token operator">=</span> DMA_PeripheralDataSize_HalfWord<span class="token punctuation">;</span>
  DMA_InitStructure<span class="token punctuation">.</span>DMA_MemoryDataSize <span class="token operator">=</span> DMA_MemoryDataSize_HalfWord<span class="token punctuation">;</span>
  DMA_InitStructure<span class="token punctuation">.</span>DMA_Mode <span class="token operator">=</span> DMA_Mode_Circular<span class="token punctuation">;</span>
  DMA_InitStructure<span class="token punctuation">.</span>DMA_Priority <span class="token operator">=</span> DMA_Priority_High<span class="token punctuation">;</span>
  DMA_InitStructure<span class="token punctuation">.</span>DMA_M2M <span class="token operator">=</span> DMA_M2M_Disable<span class="token punctuation">;</span>
  <span class="token function">DMA_Init</span><span class="token punctuation">(</span>DMA1_Channel1<span class="token punctuation">,</span> <span class="token operator">&amp;</span>DMA_InitStructure<span class="token punctuation">)</span><span class="token punctuation">;</span>
  
  <span class="token comment">/* Enable DMA channel1 */</span>
  <span class="token function">DMA_Cmd</span><span class="token punctuation">(</span>DMA1_Channel1<span class="token punctuation">,</span> ENABLE<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//使能DMA通道</span>

  <span class="token function">RCC_APB2PeriphClockCmd</span><span class="token punctuation">(</span>RCC_APB2Periph_ADC1<span class="token punctuation">,</span> ENABLE<span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">//使能ADC1时钟</span>
     
  <span class="token comment">/* ADC1 configuration */</span>
  ADC_InitStructure<span class="token punctuation">.</span>ADC_Mode <span class="token operator">=</span> ADC_Mode_Independent<span class="token punctuation">;</span> <span class="token comment">//使用独立模式，扫描模式</span>
  ADC_InitStructure<span class="token punctuation">.</span>ADC_ScanConvMode <span class="token operator">=</span> ENABLE<span class="token punctuation">;</span>
  ADC_InitStructure<span class="token punctuation">.</span>ADC_ContinuousConvMode <span class="token operator">=</span> ENABLE<span class="token punctuation">;</span> <span class="token comment">//无需外接触发器</span>
  ADC_InitStructure<span class="token punctuation">.</span>ADC_ExternalTrigConv <span class="token operator">=</span> ADC_ExternalTrigConv_None<span class="token punctuation">;</span> <span class="token comment">//使用数据右对齐</span>
  ADC_InitStructure<span class="token punctuation">.</span>ADC_DataAlign <span class="token operator">=</span> ADC_DataAlign_Right<span class="token punctuation">;</span>
  <span class="token comment">//ADC_InitStructure.ADC_NbrOfChannel = 1;  // 只有1个转换通道</span>
	ADC_InitStructure<span class="token punctuation">.</span>ADC_NbrOfChannel <span class="token operator">=</span> ADC1_ChannelCnt<span class="token punctuation">;</span>  <span class="token comment">// 2个转换通道</span>
  <span class="token function">ADC_Init</span><span class="token punctuation">(</span>ADC1<span class="token punctuation">,</span> <span class="token operator">&amp;</span>ADC_InitStructure<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">/* ADC1 regular channel11 configuration */</span> 
  <span class="token function">ADC_RegularChannelConfig</span><span class="token punctuation">(</span>ADC1<span class="token punctuation">,</span> ADC_Channel_0<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> ADC_SampleTime_55Cycles5<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//通道1采样周期55.5个时钟周期</span>
  <span class="token function">ADC_RegularChannelConfig</span><span class="token punctuation">(</span>ADC1<span class="token punctuation">,</span> ADC_Channel_1<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> ADC_SampleTime_55Cycles5<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//通道2采样周期55.5个时钟周期</span>
  <span class="token comment">/* Enable ADC1 DMA */</span>
  <span class="token function">ADC_DMACmd</span><span class="token punctuation">(</span>ADC1<span class="token punctuation">,</span> ENABLE<span class="token punctuation">)</span><span class="token punctuation">;</span>	 <span class="token comment">//使能ADC的DMA</span>
  
  <span class="token comment">/* Enable ADC1 */</span>
  <span class="token function">ADC_Cmd</span><span class="token punctuation">(</span>ADC1<span class="token punctuation">,</span> ENABLE<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//使能ADC1</span>

  <span class="token comment">/* Enable ADC1 reset calibaration register */</span>   
  <span class="token function">ADC_ResetCalibration</span><span class="token punctuation">(</span>ADC1<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">/* Check the end of ADC1 reset calibration register */</span>
  <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token function">ADC_GetResetCalibrationStatus</span><span class="token punctuation">(</span>ADC1<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">/* Start ADC1 calibaration */</span>
  <span class="token function">ADC_StartCalibration</span><span class="token punctuation">(</span>ADC1<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">/* Check the end of ADC1 calibration */</span>
  <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token function">ADC_GetCalibrationStatus</span><span class="token punctuation">(</span>ADC1<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     
  <span class="token comment">/* Start ADC1 Software Conversion */</span> 
  <span class="token function">ADC_SoftwareStartConvCmd</span><span class="token punctuation">(</span>ADC1<span class="token punctuation">,</span> ENABLE<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//开始转换</span>
<span class="token punctuation">}</span>

<span class="token comment">/*初始化ADC1 */</span>
<span class="token keyword">void</span> <span class="token function">ADC1_Init</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token function">ADC1_GPIO_Config</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">ADC1_Mode_Config</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<blockquote> 
 <p>获取ADC值的函数：</p> 
</blockquote> 
<pre><code class="prism language-c"><span class="token class-name">uint16_t</span>   <span class="token function">GetADCVal</span><span class="token punctuation">(</span><span class="token class-name">uint8_t</span> pinIndex<span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">return</span>  <span class="token punctuation">(</span>ADC_ConvertedValue<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span>pinIndex<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<h3><a id="2_126"></a>2.读入数据并计算</h3> 
<p>代码如下（示例）：</p> 
<pre><code class="prism language-c">    <span class="token keyword">for</span><span class="token punctuation">(</span>t <span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">;</span> t<span class="token operator">&lt;</span><span class="token number">10</span> <span class="token punctuation">;</span>t<span class="token operator">++</span><span class="token punctuation">)</span>
	 <span class="token punctuation">{<!-- --></span>
	  AD_ten_h<span class="token punctuation">[</span>t<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">3300000</span><span class="token operator">/</span><span class="token number">4096</span><span class="token operator">*</span><span class="token function">GetADCVal</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">1000</span><span class="token punctuation">;</span> 	<span class="token function">delay_us</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	  AD_value <span class="token operator">+=</span> <span class="token punctuation">(</span><span class="token keyword">float</span><span class="token punctuation">)</span>AD_ten_h<span class="token punctuation">[</span>t<span class="token punctuation">]</span> <span class="token punctuation">;</span>
	 <span class="token punctuation">}</span>
	  AD_value <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">float</span><span class="token punctuation">)</span>AD_value <span class="token operator">/</span> <span class="token number">10</span> <span class="token punctuation">;</span>
	  HUMI <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">float</span><span class="token punctuation">)</span>AD_value <span class="token operator">/</span> <span class="token number">3300</span> <span class="token operator">*</span> <span class="token number">125</span> <span class="token operator">-</span> <span class="token number">12.5</span><span class="token punctuation">;</span> 
<span class="token comment">	 </span>
    <span class="token keyword">for</span><span class="token punctuation">(</span>t <span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">;</span> t<span class="token operator">&lt;</span><span class="token number">10</span> <span class="token punctuation">;</span>t<span class="token operator">++</span><span class="token punctuation">)</span>
	 <span class="token punctuation">{<!-- --></span>
		AD_ten_t<span class="token punctuation">[</span>t<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">3300000</span><span class="token operator">/</span><span class="token number">4096</span><span class="token operator">*</span><span class="token function">GetADCVal</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">1000</span><span class="token punctuation">;</span> 	<span class="token function">delay_us</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		AD_value_t <span class="token operator">+=</span> AD_ten_t<span class="token punctuation">[</span>t<span class="token punctuation">]</span> <span class="token punctuation">;</span>
	 <span class="token punctuation">}</span>
	 
	  AD_value2 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">float</span><span class="token punctuation">)</span>AD_value_t <span class="token operator">/</span> <span class="token number">10</span> <span class="token punctuation">;</span>
	  TEMP <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">float</span><span class="token punctuation">)</span>AD_value2 <span class="token operator">/</span> <span class="token number">3300</span> <span class="token operator">*</span> <span class="token number">218.75</span> <span class="token operator">-</span> <span class="token number">66.875</span><span class="token punctuation">;</span>
	
	  <span class="token function">sprintf</span><span class="token punctuation">(</span>Humiture_buff<span class="token punctuation">,</span><span class="token string">"RH(mV): %d"</span><span class="token punctuation">,</span>AD_value <span class="token punctuation">)</span><span class="token punctuation">;</span>  
	  <span class="token function">sprintf</span><span class="token punctuation">(</span>Humiture_buff<span class="token punctuation">,</span><span class="token string">"T (mV): %d"</span><span class="token punctuation">,</span>AD_value2 <span class="token punctuation">)</span><span class="token punctuation">;</span>  
	 
	 
	  <span class="token function">sprintf</span><span class="token punctuation">(</span>Humiture_buff<span class="token punctuation">,</span><span class="token string">"RH:%.2F"</span><span class="token punctuation">,</span>HUMI <span class="token punctuation">)</span><span class="token punctuation">;</span>  
	  <span class="token function">sprintf</span><span class="token punctuation">(</span>Humiture_buff<span class="token punctuation">,</span><span class="token string">"T:%.2F"</span><span class="token punctuation">,</span>TEMP <span class="token punctuation">)</span><span class="token punctuation">;</span>  
	 
	 
	  <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"AD value RH= %d mV \r\n"</span><span class="token punctuation">,</span> AD_value<span class="token punctuation">)</span><span class="token punctuation">;</span>	
	  <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"AD  RH = %.3f %%  \r\n"</span><span class="token punctuation">,</span> HUMI<span class="token punctuation">)</span><span class="token punctuation">;</span>
	  <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"AD value T= %d mV  \r\n"</span><span class="token punctuation">,</span>AD_value2<span class="token punctuation">)</span><span class="token punctuation">;</span>	
	  <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"AD T = %.3f ℃  \r\n"</span><span class="token punctuation">,</span> TEMP<span class="token punctuation">)</span><span class="token punctuation">;</span>	
	 
	 
	  <span class="token function">delay_ms</span><span class="token punctuation">(</span><span class="token number">800</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	  AD_value <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	  AD_value2 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	  HUMI <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	  TEMP <span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
	  AD_value_t <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
</code></pre> 
<p>由于该传感器的温湿度输出曲线可以根据用户的需要由厂家在出厂的时候进行调整，因此如果我们使用的传感器转换公式有变化时，需要修改此处的转换公式。</p> 
<pre><code class="prism language-c">	  HUMI <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">float</span><span class="token punctuation">)</span>AD_value <span class="token operator">/</span> <span class="token number">3300</span> <span class="token operator">*</span> <span class="token number">125</span> <span class="token operator">-</span> <span class="token number">12.5</span><span class="token punctuation">;</span> 
<span class="token comment">	 </span>
	  TEMP <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">float</span><span class="token punctuation">)</span>AD_value2 <span class="token operator">/</span> <span class="token number">3300</span> <span class="token operator">*</span> <span class="token number">218.75</span> <span class="token operator">-</span> <span class="token number">66.875</span><span class="token punctuation">;</span>
</code></pre> 
<hr> 
<h2><a id="_179"></a>总结</h2> 
<p>模拟输出的传感器使用比较简单，只需要确保硬件电路是否正确，程序主要在于主机的ADC配置部分，因此还是受到很多工程师首选的传感器类型。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/25ef92d7e4e1007569f0d818b4f861ad/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">驱动兼容18b20系列的单总线温湿度传感器GXHT3W</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/23a18de7fd7847208702bd0b9ce3148b/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Laravel 集合的使用 &amp; 集合的常用方法 &amp; 模型的数据集合 ⑩</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>