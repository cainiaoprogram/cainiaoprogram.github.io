<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>LTE - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="LTE" />
<meta property="og:description" content="http://www.tutorialspoint.com/lte/lte_layers_data_flow.htm:详细介绍了数据流在LTE各层中的流向以及pdu、sdu的解释等。
异频或异系统重选小区
对于异系统或者异频点的小区之间的重选
在sib5里面
InterFreqCarrierFreqList
{
dl-CarrierFreq 38250 //邻小区的频点
q-RxLevMin -64 //用来计算邻小区Squal
threshX-High 11,//如果邻小区的优先级高于服务小区且目标小区是utran或lte，则当邻小区的Squal&gt; threshX-High 且目标小区的 Srxlev&gt; threshX-High 时会重选到这个小区
threshX-Low 11,//如果邻小区的优先级低于服务小区且目标小区是utran或lte，则当邻小区的Squal&gt; threshX-Low 且服务小区的Squal&lt;threshServingLow 时会重选到这个小区
}
threshServingLow这个值在sib3里面广播
cellReselectionServingFreqInfo
{
threshServingLow 3 //当服务小区的Squal&lt;threshServingLow时可能会有重选
cellReselectionPriority 7 //服务小区重选时的优先级
s-NonIntraSearch 5 //当邻小区优先级低于或等于服务小区且是异频之间时，如果服务小区的Srxlev&gt; s-NonIntraSearch时是不会执行小区重选测量的。如果没有广播这个值，也会执行性测量
}
如果邻小区优先级高于服务小区，则一定会执行小区重选测量。 同频重选
Sib3里有一个
s-IntraSearch-v920
{
s-IntraSearchP-r9 30 //相当于文档中提到的SIntraSearchP
s-IntraSearchQ-r9 8 //相当于文档中提到的SIntraSearchQ
}
当服务小区的 Srxlev&gt;SIntraSearchP 并且Squal&gt;SIntraSearchQ时是不会执行同频之间的测量的
RLC
UM的发送实例做的事情有：
对从协议栈上层传入RLC的SDU 进行分段、级联，同时增加RLC头
RLC的头部包括sequence number and length indicators （LI）
UM的接收实例要做的事情有：
根据SN（sequence number）重新排序收到的PDU
去除RLC的头部信息之后，将RLC的pdu的data 部分 重新收集到一起，之后再去除分段和解开级联信息，然后传给PDCP" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/cc981ecc65ecf63ad1673cbec9c64198/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2013-09-05T18:47:47+08:00" />
<meta property="article:modified_time" content="2013-09-05T18:47:47+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">LTE</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p><a target="_blank" href="http://www.tutorialspoint.com/lte/lte_layers_data_flow.htm" rel="nofollow noopener noreferrer">http://www.tutorialspoint.com/lte/lte_layers_data_flow.htm</a>:详细介绍了数据流在LTE各层中的流向以及pdu、sdu的解释等。</p> 
<p><br> </p> 
<p>异频或异系统重选小区</p> 
<p></p> 
<p><strong>对于异系统或者异频点的小区之间的重选</strong></p> 
<p><strong>在sib5里面</strong></p> 
<p><strong>InterFreqCarrierFreqList</strong></p> 
<p><strong>{<!-- --></strong></p> 
<p><strong></strong></p> 
<p><strong> dl-CarrierFreq 38250 //邻小区的频点</strong></p> 
<p><strong> q-RxLevMin -64 //用来计算邻小区Squal</strong></p> 
<p><span style="font-weight:bold"> threshX-High 11,//<span style="font-weight:bold">如果邻小区的优先级高于服务小区且目标小区是utran或lte，则当邻小区的Squal&gt;<span style="font-weight:bold"> threshX-High 且目标小区的 Srxlev&gt;<span style="font-weight:bold"> threshX-High 时</span></span><span style="font-weight:bold">会重选到这个小区</span></span></span></p> 
<p><strong> threshX-Low 11,//如果邻小区的优先级低于服务小区且目标小区是utran或lte，则当邻小区的Squal&gt; threshX-Low 且服务小区的Squal&lt;threshServingLow 时会重选到这个小区</strong></p> 
<p><strong>}</strong></p> 
<p><strong><span style="font-weight:bold">threshServingLow这个值在sib3里面广播</span><br> </strong></p> 
<p><strong><span style="font-weight:bold">cellReselectionServingFreqInfo</span></strong></p> 
<p><strong><span style="font-weight:bold">{<!-- --></span></strong></p> 
<p><strong><span style="font-weight:bold"> threshServingLow 3  //当服务小区的Squal&lt;<span style="font-weight:bold">threshServingLow时可能会有重选</span></span></strong></p> 
<p><strong><span style="font-weight:bold"><span style="font-weight:bold"> cellReselectionPriority 7 //服务小区重选时的优先级</span></span></strong></p> 
<p><strong> s-NonIntraSearch 5 //当邻小区优先级低于或等于服务小区且是异频之间时，如果服务小区的Srxlev&gt;<strong> s-NonIntraSearch时是不会执行小区重选测量的。<strong>如果没有广播这个值，也会执行性测量</strong></strong></strong></p> 
<p><strong><span style="font-weight:bold">}</span></strong></p> 如果邻小区优先级高于服务小区，则一定会执行小区重选测量。 
<p><br> </p> 
<p>同频重选</p> 
<p></p> 
<p><strong>Sib3里有一个</strong></p> 
<p><strong>s-IntraSearch-v920</strong></p> 
<p><strong>{<!-- --></strong></p> 
<p><strong>s-IntraSearchP-r9 30        //相当于文档中提到的SIntraSearchP</strong></p> 
<p><strong> s-IntraSearchQ-r9 8   //相当于文档中提到的<span style="font-weight:bold">SIntraSearchQ</span></strong></p> 
<p><strong>}</strong></p> 
<p><strong>当服务小区的 Srxlev&gt;SIntraSearchP 并且Squal&gt;SIntraSearchQ时是不会执行同频之间的测量的</strong></p> 
<p><strong><br> </strong></p> 
<p style="text-align:center"><strong><span style="font-size:24px">RLC</span></strong></p> 
<p>UM的发送实例做的事情有：</p> 
<p>对从协议栈上层传入RLC的SDU 进行分段、级联，同时增加RLC头</p> 
<p>RLC的头部包括sequence number and length indicators （LI）</p> 
<p><strong><br> </strong></p> 
<p>UM的接收实例要做的事情有：</p> 
<p>根据SN（sequence number）重新排序收到的PDU</p> 
<p>去除RLC的头部信息之后，将RLC的pdu的data 部分 重新收集到一起，之后再去除分段和解开级联信息，然后传给PDCP</p> 
<p><br> </p> 
<p>对于AM模式接收和发送则相对于UM模式0增加了一些功能</p> 
<p>发送里面：</p> 
<p>发送出去的PDUs要放在retransmission buffer ，目的是为了出错时能重发</p> 
<p>当一个ACK收到了时，就清除retransmission buffer 里面相应的段信息，如果收到了NAK，则重发丢失的PDUs</p> 
<p>并且，AM模式里面对要重新发送的PDUs是可以重新分段成独立的PDU之后再发出去的，只是他们有相同的SN</p> 
<p><br> </p> 
<p>接收里面：</p> 
<p>当发送端请求查询peer的包接收情况 （RLC 的PDU里有一种PDU是属于控制PDU，用来查询接收端的接收情况）</p> 
<p>或者 接收端明显检测到丢包了时会触发接收端发送状态报告, 告诉对方哪些包收到了，哪些丢失了。<u>Status PDU</u> is sent by receiving AM entity to acknowledge PDUs received and to indicate missing PDUs or missing PDU segments</p> 
<p><strong><strong><br> </strong></strong></p> 
<p style="text-align:center"><strong><strong>pdcp</strong></strong></p> 
<p style="text-align:left"><strong><strong>pdcp分为 data pdu 和 controll pdu</strong></strong></p> 
<p style="text-align:left"><strong>而data pdu又可以按照里面数据性质的不同分为 srb pdu 和 drb pdu，前者承载信令消息，后者承载用户面数据信息  </strong></p> 
<p style="text-align:left"><strong>   <strong>srb pdu里面会有完整性保护，数据部分后边要附加一个32bit的MAC-I</strong></strong></p> 
<p style="text-align:left"><strong><strong><strong>controll pdu包括<strong>PDCP status report，解释如下</strong></strong><br> </strong></strong></p> 
<p style="text-align:left"><strong>PDCP status report is sent after PDCP is reestablished (only for RLC AM u-plane bearers). And can be sent in both directions</strong></p> 
<p style="text-align:left"><strong>切换或者rrc重建都可能会引起PDCP Reordering  when packets are received out of order</strong></p> 
<p style="text-align:left"><strong><br> </strong></p> 
<p style="text-align:center"><strong>mac</strong></p> 
<p style="text-align:left"><strong>mac header的size和内容根据逻辑信道的类型来定，头部里的一些参数解释如下</strong></p> 
<p style="text-align:left"><strong>TCTF：逻辑信道类型，只有当逻辑信道映射到FACH和RACH时才有</strong></p> 
<p style="text-align:left"><strong>C/T：当多个逻辑信道复用到一个专用逻辑信道时，这个作为逻辑信道的标识</strong></p> 
<p style="text-align:left">对于LTE传输信道简单多了，上行只有RACH 和UL-SCH，下行有PCH，BCH，DL-SCH具体逻辑信道到传输信道地映射可以参考</p> 
<p style="text-align:left">http://blog.sina.com.cn/s/blog_5eba1ad10100gw03.html<br> </p> 
<p style="text-align:left"><strong><br> </strong></p> 
<p style="text-align:left"><strong><br> </strong></p> 
<p style="text-align:left"><span style="color:#333333"><strong><span style="font-size:12px">Why No Service is shown during DDS change on a particular SIM?</span></strong></span><br> </p> 
<p style="text-align:left"><span style="color:#333333"><span style="font-size:12px">In DSDS design only one subscription can act as designated data subscription (DDS) which will register for PS services.<br> Data call must be originated on DDS subscription, DDS change can be done from DSDS menu on UI.<br> <br> When changing the DDS from one subscription to another PS detach is performed on the previous subscription.PS attach is performed on next subscription.<br> <br> In a scenario where DDS is changed from SIM1 to SIM2.If SIM1 is registered with CS+PS services and SIM2 with CS service.</span></span></p> 
<p><span style="font-size:12px">During the DDS change from SIM1 to SIM2,PS detach will perform on SIM1 and do the PS attach on SIM2.SIM1 will show NO service temporarily till attach accept on SIM2.</span></p> 
<p><span style="font-size:12px">The SIM1 is OOS due to active connection on the other SUB, which is DSDS limitation due to single radio.</span></p> 
<p>dsds and dsda feature can refer 80-NJ044-1_A_DSDS_DSDA_Use_Case</p> 
<p><br> </p> 
<p><span style="font-family:simsun; font-size:14px; color:#464646; line-height:21px"></span></p> 
<div> 
 <span style="font-size:14px"><strong><span style="font-size:18px">信道化码和扰码的区别：</span></strong><br> <span style="font-family:SimSun">下行：下行链路中通常使用8192个扰码，序号分别为0－8191，这些扰码分成512个小组，每个小组包含一个PSC和15个SSC。主扰码序号为16×k（k＝0，1，2......511)。下行链路的512个主扰码可以进一步分为64个扰码组，每个组8个主扰码。在下行，基站发送信息时，先将用户数据与各自的CH（信道化码）相乘也称为扩频，然后加扰，之后发给UE。所以CH起到一个扩频的作用，经过扩频后的速率变为3.84Mbps/s，同时用来标识物理信道ID。通过CH的正交性来区分不同用户的信息。注意加扰不会继续增大速率。</span></span> 
</div> 
<div> 
 <span style="font-family:SimSun; font-size:14px"><span style="font-family:SimSun; font-size:14px">上行：</span>不同用户如果服务相同，可以采用相同的CH，通过不同的扰码来区分。在上行方向CH只是简单的用来扩频</span> 
</div> 
<div> 
 <span style="font-family:SimSun; font-size:14px">详细的解释可以参考<a target="_blank" href="http://www.doc88.com/p-048673463501.html" rel="nofollow noopener noreferrer">http://www.doc88.com/p-048673463501.html</a><br> </span> 
 <br> 
</div> 
<div> 
 <span style="font-family:SimSun; font-size:14px">上行链路，分配专用信道的时候，UTRAN会通知UE使用哪一个上行链路的扰码，每个UE分配且只分配一个扰码，从而达到区分用户的作用。</span> 
</div> 
<p><br> </p> 
<p></p> 
<p><span style="font-size:14px"><span style="word-break:break-all; line-height:normal!important"><span style="font-family:宋体; word-break:break-all; line-height:normal!important"><strong>LTE的帧结构以及概念：</strong><br> </span></span></span></p> 
<p><span style="font-size:12px"><span style="word-break:break-all; line-height:normal!important"><span style="font-family:宋体; word-break:break-all; line-height:normal!important">在</span></span><span lang="EN-US" style="font-family:Arial,sans-serif; word-break:break-all; line-height:normal!important">TD-LTE</span><span style="word-break:break-all; line-height:normal!important"><span style="font-family:宋体; word-break:break-all; line-height:normal!important">中，每帧时长为</span></span><span lang="EN-US" style="font-family:Arial,sans-serif; word-break:break-all; line-height:normal!important">10ms</span><span style="word-break:break-all; line-height:normal!important"><span style="font-family:宋体; word-break:break-all; line-height:normal!important">，分成</span></span><span lang="EN-US" style="font-family:Arial,sans-serif; word-break:break-all; line-height:normal!important">10</span><span style="word-break:break-all; line-height:normal!important"><span style="font-family:宋体; word-break:break-all; line-height:normal!important">个子帧，每个子帧由两个时隙为</span></span><span lang="EN-US" style="font-family:Arial,sans-serif; word-break:break-all; line-height:normal!important">0.5ms</span><span style="word-break:break-all; line-height:normal!important"><span style="font-family:宋体; word-break:break-all; line-height:normal!important">的半帧组成。这</span></span><span lang="EN-US" style="font-family:Arial,sans-serif; word-break:break-all; line-height:normal!important">0.5ms</span><span style="word-break:break-all; line-height:normal!important"><span style="font-family:宋体; word-break:break-all; line-height:normal!important">又分为</span></span><span lang="EN-US" style="font-family:Arial,sans-serif; word-break:break-all; line-height:normal!important">7</span><span style="font-size:14px"><span style="font-family:宋体; word-break:break-all; line-height:normal!important"><span style="word-break:break-all; line-height:normal!important">个时间片，所以一帧有20个时隙.</span></span></span></span></p> 
<p><span style="font-size:12px"><span style="font-size:14px"><span style="font-family:宋体; word-break:break-all; line-height:normal!important"><span style="word-break:break-all; line-height:normal!important"><span style="font-family:宋体; word-break:break-all; line-height:normal!important"><span style="font-family:宋体; font-size:14px">参考图可以从下面网址查看：<a target="_blank" href="http://www.tutorialspoint.com/lte/lte_ofdm_technology.htm" rel="nofollow noopener noreferrer">http://www.tutorialspoint.com/lte/lte_ofdm_technology.htm</a></span><br> </span></span></span></span></span></p> 
<p><span style="font-size:12px"><span style="font-size:14px"><span style="font-family:宋体; word-break:break-all; line-height:normal!important"><span style="word-break:break-all; line-height:normal!important"><span style="font-family:宋体; word-break:break-all; line-height:normal!important"><strong>资源块RB</strong>: 它是一个12×7的矩形，其中</span><span lang="EN-US" style="word-break:break-all; line-height:normal!important"><span style="font-family:Calibri; word-break:break-all; line-height:normal!important">12行是</span></span><span style="font-family:宋体; word-break:break-all; line-height:normal!important">带宽为</span><span lang="EN-US" style="word-break:break-all; line-height:normal!important"><span style="font-family:Calibri; word-break:break-all; line-height:normal!important">15kHz</span></span><span style="font-family:宋体; word-break:break-all; line-height:normal!important">的12个子载波。在这个资源块中，每列就称为一个</span><span lang="EN-US" style="word-break:break-all; line-height:normal!important"><span style="font-family:Calibri; word-break:break-all; line-height:normal!important">OFDM</span></span><span style="font-family:宋体; word-break:break-all; line-height:normal!important">符号，共有</span><span lang="EN-US" style="word-break:break-all; line-height:normal!important"><span style="font-family:Calibri; word-break:break-all; line-height:normal!important">7</span></span><span style="font-family:宋体; word-break:break-all; line-height:normal!important">列，所以一个资源块一般可容纳</span><span lang="EN-US" style="word-break:break-all; line-height:normal!important"><span style="font-family:Calibri; word-break:break-all; line-height:normal!important">7</span></span><span style="font-family:宋体; word-break:break-all; line-height:normal!important">个</span><span lang="EN-US" style="word-break:break-all; line-height:normal!important"><span style="font-family:Calibri; word-break:break-all; line-height:normal!important">OFDM</span></span><span style="font-family:宋体; word-break:break-all; line-height:normal!important">符号，至于单元格一般称为资源粒子（</span><span lang="EN-US" style="word-break:break-all; line-height:normal!important"><span style="font-family:Calibri; word-break:break-all; line-height:normal!important">Resource element</span></span><span style="font-family:宋体; word-break:break-all; line-height:normal!important">）。</span></span></span></span></span></p> 
<p><span style="font-size:12px"><span style="font-size:14px"><span style="font-family:宋体; word-break:break-all; line-height:normal!important"><span style="word-break:break-all; line-height:normal!important"><span style="font-family:宋体; word-break:break-all; line-height:normal!important"><strong>符号，Symbol</strong>。是调制后的符号，代表1~N个比特（1、2、3、6对应BPSK、QPSK、16QAM、64QAM的调制方式），映射到1个RE上传送；可以认为符号在时间上是1个OFDM 符号，频率上是1个子载波15KHz。<br> <strong>OFDM Symbol</strong>。时间上是0.5/7 ms（约为71us），频率上是整个带宽BW。<br> </span></span></span></span></span></p> 
<p><span style="font-size:14px"><span style="font-family:宋体; word-break:break-all; line-height:normal!important"><span style="word-break:break-all; line-height:normal!important"><span style="font-size:14px"><span style="font-family:宋体; word-break:break-all; line-height:normal!important"><span style="font-size:12px">一个资源块的长度为一个时隙地长度，频域的宽度为12个子载波。</span></span></span></span></span></span></p> 
<p><span style="font-size:14px"><span style="font-family:宋体; word-break:break-all; line-height:normal!important"><span style="word-break:break-all; line-height:normal!important"><span style="font-size:14px"><span style="font-family:宋体; word-break:break-all; line-height:normal!important"><span style="font-size:12px">一个资源粒子时域的长度为一个符号的时间长度，频域地宽度为一个15kb的子载波宽度。</span></span></span></span></span></span></p> 
<p><span style="font-size:14px"><span style="font-family:宋体; word-break:break-all; line-height:normal!important"><span style="word-break:break-all; line-height:normal!important"><span style="font-size:14px"><span style="font-family:宋体; word-break:break-all; line-height:normal!important"><span style="font-size:12px"><strong>TTI</strong>：时间为1ms占用连续的两个时隙。</span><br> </span></span></span></span></span></p> 
<p><strong>SFN</strong>: system frame number</p> 
<p><strong>subframe number</strong>： 和上面地SFN是不同的，一帧分为10个子帧</p> 
<p></p> 
<p><strong>RSRP</strong>（Reference Signal ReceivingPower）：是在某个Symbol内承载Reference Signal的所有RE上接收到的信号功率的平均值；</p> 
<p><strong>RSSI</strong>（Received Signal StrengthIndicator）： 则是在这个Symbol内接收到的所有信号（包括导频信号和数据信号，邻区干扰信号，噪音信号等）功率的平均值</p> 
<p><strong>RSRQ</strong>(Reference Signal ReceivingQuality)： 则是RSRP和RSSI的比值，当然因为两者测量所基于的带宽可能不同，会用一个系数来调整，也就是 RSRQ =N*RSRP/RSSI.</p> 
<p><strong>DCI</strong>：Downlink Control Information即下行控制信息。在PDCCH上传输。DCI的格式由transmission mode 和RNTI type决定。PDCCH的CRC会用不同的RNTI来绕码。不同的逻辑信道承载不同的信息类型，同样对应着不同的RNTI TYPE。比如</p> 
<p>系统消息：SI-RNTI</p> 
<p>寻呼消息：P-RNTI</p> 
<p>随机接入回复：RA-RNTI</p> 
<p><span lang="EN-US" style='font-size:10pt; line-height:115%; font-family:"Times New Roman",serif'>CSI</span><span style="font-size:10pt; line-height:115%; font-family:楷体">（</span><span lang="EN-US" style='font-size:10pt; line-height:115%; font-family:"Times New Roman",serif'>Channel State Information</span><span style="font-size:10pt; line-height:115%; font-family:楷体">）：<span style="font-size:10pt; line-height:115%; font-family:楷体">是</span><span lang="EN-US" style='font-size:10pt; line-height:115%; font-family:"Times New Roman",serif'>UE</span><span style="font-size:10pt; line-height:115%; font-family:楷体">上报给</span><span lang="EN-US" style='font-size:10pt; line-height:115%; font-family:"Times New Roman",serif'>eNodeB</span><span style="font-size:10pt; line-height:115%; font-family:楷体">的信道状态信息，由</span><span lang="EN-US" style='font-size:10pt; line-height:115%; font-family:"Times New Roman",serif'>CQI</span><span style="font-size:10pt; line-height:115%; font-family:楷体">（</span><span lang="EN-US" style='font-size:10pt; line-height:115%; font-family:"Times New Roman",serif'>ChannelQuality Indicator</span><span style="font-size:10pt; line-height:115%; font-family:楷体">）、</span><span lang="EN-US" style='font-size:10pt; line-height:115%; font-family:"Times New Roman",serif'>PMI</span><span style="font-size:10pt; line-height:115%; font-family:楷体">（</span><span lang="EN-US" style='font-size:10pt; line-height:115%; font-family:"Times New Roman",serif'>PrecodingMatrix Indicator</span><span style="font-size:10pt; line-height:115%; font-family:楷体">）、</span><span lang="EN-US" style='font-size:10pt; line-height:115%; font-family:"Times New Roman",serif'>PTI</span><span style="font-size:10pt; line-height:115%; font-family:楷体">（</span><span lang="EN-US" style='font-size:10pt; line-height:115%; font-family:"Times New Roman",serif'>PrecodingType Indicator</span><span style="font-size:10pt; line-height:115%; font-family:楷体">）和</span><span lang="EN-US" style='font-size:10pt; line-height:115%; font-family:"Times New Roman",serif'>RI</span><span style="font-size:10pt; line-height:115%; font-family:楷体">（</span><span lang="EN-US" style='font-size:10pt; line-height:115%; font-family:"Times New Roman",serif'>RandIndication</span><span style="font-size:10pt; line-height:115%; font-family:楷体">）组成，其所占的时频资源是由</span><span lang="EN-US" style='font-size:10pt; line-height:115%; font-family:"Times New Roman",serif'>eNodeB</span><span style="font-size:10pt; line-height:115%; font-family:楷体">来控制的。</span></span></p> 
<p><span style="font-size:14px"><span style="font-family:宋体; word-break:break-all; line-height:normal!important"><span style="word-break:break-all; line-height:normal!important"><span style="font-size:14px"><span style="font-family:宋体; word-break:break-all; line-height:normal!important"><br> </span></span></span></span></span></p> 
<p><span style="font-size:14px"><span style="font-family:宋体; word-break:break-all; line-height:normal!important"><span style="word-break:break-all; line-height:normal!important"><span style="font-size:14px"><span style="font-family:宋体; word-break:break-all; line-height:normal!important">LTE速率计算方法。转载于<a target="_blank" href="http://www.mscbsc.com/10008813/viewspace-29990.html" rel="nofollow noopener noreferrer">http://www.mscbsc.com/10008813/viewspace-29990.html</a></span></span></span></span></span></p> 
<p><span style="font-size:14px"><span style="font-family:宋体; word-break:break-all; line-height:normal!important"><span style="word-break:break-all; line-height:normal!important"><span style="font-size:14px"><span style="font-family:宋体; word-break:break-all; line-height:normal!important"><span style="line-height:21px"></span></span></span></span></span></span></p> 
<p style="word-break:break-all; line-height:1.8em!important; margin-top:10px; margin-right:0px; margin-bottom:10px; margin-left:0px">    在LTE的帧结构中，都有资源块的概念。一个资源块的带宽为180kHz，由12个带宽为15kHz的子载波组成，在时域上为一个时隙（0.5ms），所以1个RB在时频上实际上是1个0.5ms，带宽180kHz的载波。同时LTE的传输时间间隔（TTI）为1ms。</p> 
<p style="word-break:break-all; line-height:1.8em!important; margin-top:10px; margin-right:0px; margin-bottom:10px; margin-left:0px">    有两种循环前缀，一种是一般循环前缀（Normal CP），一个时隙里可以传7个OFDM；另一种是扩展循环前缀（Extended CP），一个时隙里可以传6个OFDM。<span style="color:#f8f8f8; word-break:break-all; line-height:normal!important; font-size:0px">MSCBSC 移动通信论坛,Q:A)@.q8?+E!o</span><br style="word-break:break-all; line-height:normal!important"> Extended CP可以更好的抑制多径延迟造成的符号间干扰、载频间干扰，但是它一个时隙只能传6个OFDM，和Normal CP相比代价是更低的系统容量，在LTE中默认使用Normal CP。</p> 
<p style="word-break:break-all; line-height:1.8em!important; margin-top:10px; margin-right:0px; margin-bottom:10px; margin-left:0px"> 一个OFDM符号的数据承载能力就取决于调制方式，分别为2/4/6个bit（对应QPSK,16QAM,64QAM）。</p> 
<p style="word-break:break-all; line-height:1.8em!important; margin-top:10px; margin-right:0px; margin-bottom:10px; margin-left:0px"> LTE在20MHz带宽下RB数为100个，在1.4MHz带宽时为6个，1.4MHz定义为最小频宽是因为PBCH,PSCH,SSCH最少都要占用6个RB。</p> 
<p style="word-break:break-all; line-height:1.8em!important; margin-top:10px; margin-right:0px; margin-bottom:10px; margin-left:0px"> 在20MHz带宽的情况下，可以有的RB数目=20MHz/180KHz=111个，要除去冗余可用的RB数也就是100个。</p> 
<p style="word-break:break-all; line-height:1.8em!important; margin-top:10px; margin-right:0px; margin-bottom:10px; margin-left:0px"> <br> </p> 
<p style="word-break:break-all; line-height:1.8em!important; margin-top:10px; margin-right:0px; margin-bottom:10px; margin-left:0px"> <span style="font-size:18px"><strong>LTE 20M带宽下可以达到的速率也有可能超过100Mb/s 的由来如下：</strong></span></p> 
<p style="word-break:break-all; line-height:1.8em!important; margin-top:10px; margin-right:0px; margin-bottom:10px; margin-left:0px"> 一个时隙（0.5ms）内传输7个OFDM符号，即在1ms内传输14个OFDM符号，一个资源块（RB）有12个子载波（即每个OFDM在频域上也就是15KHZ），所以1ms内（二个RB）的OFDM个数（我的理解是RE的个数）为=14*12=168个， 它下行采用OFDM技术，且采用64QAM调制方式，则每个OFDM（RE）包含6个bits，则20M带宽时下行速率为：<span style="color:#f8f8f8; word-break:break-all; line-height:normal!important; font-size:0px">mscbsc 移动通信论坛拥有30万通信专业人员，超过50万份GSM/3G等通信技术资料，是国内领先专注于通信技术和通信人生活的社区。.F,d,H.O/]*f</span><br style="word-break:break-all; line-height:normal!important"> &lt;符号的bits数&gt;*&lt;1ms(2个RB）中的OFDM数&gt;*&lt;20M带宽的RB个数&gt;*&lt;1000ms/s&gt;=6*168*100*1000=100800000Bits/s=100Mb<span style="color:#f8f8f8; word-break:break-all; line-height:normal!important; font-size:0px">www.mscbsc.com*o&amp;R6w8Y#^.S)g</span><br style="word-break:break-all; line-height:normal!important"> 因为我们前面说了，20MHz带宽理论值可以有111个RB的，所以LTE 20M带宽下可以达到的速率也有可能超过100Mb。（摘自leeje的回答）</p> 
<p style="word-break:break-all; line-height:1.8em!important; margin-top:10px; margin-right:0px; margin-bottom:10px; margin-left:0px"> LTE的时间单元Ts=1/(15000*2048)秒，（15kHz的子载波带宽，2048个子载波，总带宽为15000*2048=30720000Hz）</p> 
<p style="word-break:break-all; line-height:1.8em!important; margin-top:10px; margin-right:0px; margin-bottom:10px; margin-left:0px"> <br> </p> 
<p style="word-break:break-all; line-height:1.8em!important; margin-top:10px; margin-right:0px; margin-bottom:10px; margin-left:0px"> <span style="font-size:18px"><strong>LTE频点的计算公式如下：</strong></span><br> </p> 
<p style="word-break:break-all; line-height:1.8em!important; margin-top:10px; margin-right:0px; margin-bottom:10px; margin-left:0px"> 中移动指定TD-LTE工作频段：<br> 工作频段        频段值                要求<br> Band 40        2300-2400MHz        必选<br> Band 38        2570-2620MHz        必选<br> <br> 工作频段        F_low        N_Offs        N_Earfcn<br> Band 40        2300               38650          38650~39649<br> Band 38        2570               37750                37750~38249<br> TD-LTE的频点编号从36000开始，F_c代表载波中心频率（MHz），F_low代表频带内的起始频率，N_Offs代表上频带内的起始频点号码。<strong>N_Earfcn</strong>：频点编号<br> <strong>F_c=F_low + 0.1*(N_Earfcn – N_Offs)</strong><br> 例：假如某小区freq_info: 38700 则对应的F_c=2300 +0.1*(38700-38650)=2305MHz,然后通过MIB获取小区bandwidth.</p> 
<p style="word-break:break-all; line-height:1.8em!important; margin-top:10px; margin-right:0px; margin-bottom:10px; margin-left:0px"> <br> </p> 
<p><span style="font-size:14px"><strong><span style="font-family:Helvetica,Arial,sans-serif">随机接入相关的知识：</span></strong></span></p> 
<p> 在LTE系统中，UE与网络必须处于同步(上行/下行)状态才能进行通信。UE与网络间的下行同步是在小区选择过程中UE通过接收该小区的参考信号获得的，上行同步需要通过成功的随机接入过程才能获得，这样才能为上行数据传输分配资源。</p> 
<p>随机接入过程开始前，物理层需要接收到高层(MAC或者RRC)的控制以及数据信息，譬如当前可用的前导码格式，选择接入的时隙资源，随机接入响应的窗口大小，发射前导的功率步长，发送前导的最大次数，发送前导的初始功率等</p> 
<p>在基于竞争的随机接入过程中，需要能够完成物理层的上行同步过程。和基于非竞争随机接入的本质区别在于发起随机接入前UE是否收到来自网络分配的专用随机接入资源<br> </p> 
<p>基于竞争的随机接入：</p> 
<p>  (1) 上行链路在RACH资源上发送随机接入前导；一个子帧里面可以有多个PRACH，具体选择哪个通过PRACH_Config 和PRACH resource index，和ra-PRACH-MaskIndex来配置，PRACH resource index :指示在哪一个子帧上发送，ra-PRACH-MaskIndex：指示在特定子帧的哪一个PRACH index上发送。</p> 
<p>  (2) MAC层产生随机接入响应在DL-SCH和PDCCH上传输；其中PDCCH上会传送一个RA-RNTI，当然不是显式的传输，而是编码在DCI里面，其作用是eNB检测Preamble的时频位置，对应到PRACH_Config中的索引，由于随机接入请求是UE发出的，所以UE是知道这个值的，UE会解码PDCCH上地RA-RNTI来匹配是不是发给自己的。找到之后，则说明接入被响应，再依据PDCCH上的指示去PDSCH上读取RA Response消息（MSG2）。MSG2里会包含一个T-RNTI用来标识ue</p> 
<p> (3) 在UL-SCH上传输MSG3，这个里面包含了一个UE生成地特定ID，用来竞争解决，RRCConnectionrequest包含在这个竞争解决消息里；</p> 
<p> (4) 下行竞争解决MSG4，如果ENb同意ue的接入，则发送回MSG3里的ID。同时有可能分配一个C-RNTI来标识用户，如果没有分配的话，UE会将之前的T-RNTI升级为C-RNTI。如果是在RRC_CONNECTED状态，C-RNTI已经分配给UE了，所以在RRC连接请求里要包含C-RNTI。<br> </p> 
<p>基于非竞争的随机接入，它包括三个步骤：</p> 
<p>  (1) 通过专有的下行信令通知随机接入前导的分配；(2) 上行链路中在PRACH上发送随机接接前导；(3)基站 在DL-SCH上传输随机接入响应。</p> 
<p>http://wenku.baidu.com/link?url=Bk9zwH2mlN6LNecBxiLX8PYan2J2-d-V8emUGCpVup0uZQQjV49cMK53m1rGdyPJH9QV0LKY3xfi5ij5GubkwjQVSUd50QEbAFiKLzFtfmC ：很详细</p> 
<p><br> </p> 
<p><br> </p> 
<p><span style="font-size:18px"><strong>HARQ相关地知识</strong></span>：<br> </p> 
<p></p> 
<pre id="answer-content-710373381" class="answer-text mb-10">NDI，指的是DCI中的NDI（New Data Indication），在PDCCH中传输。因为LTE采用了HARQ技术，可以对上次传输失败的数据包进行重传。
那么UE如何知道本次传输的包是重传数据包还是首传数据包呢？所以要进行NDI指示，其是一个bit，一个bit位的翻转如由0变为1表示这是一个新的传输块。
NDI toggled就是翻转的意思。

上行HARQ，即上行传输用户数据，下行反馈结果，下面转自：http://blog.sina.com.cn/s/blog_927cff010101c01a.html
在上行传输过程中，如果有在PDCCH中有UL grant，则NDI有翻转时，表示UE下一个包可以传输新的包，而不管PHICH上的ACK/NACK
在LTE中，eNodeB使用PHICH来告诉UE是否成功接收PUSCH，一个上行TB对应一个PHICH。上行支持2中传输模式：TM 1（只支持单天线传输）和 TM2（支持空分复用）。
如果使用TM2，则每个子帧有2个HARQ process，即每个子帧里有两个PHICH。上行使用同步HARQ，但重传可以是自适应的，也可以是非自适应的。
1.上行HARQ使用同步（synchronous）、非自适应（non-adaptive）:
 由于上行重传总是发生在可预知的子帧上,所以根据timing关系可以直接推导出使用的HARQ process。并且在非自适应重传时，重传与与前一次传输使用相同的PRB资源和
MCS。因此下行只需要PHICH这一种控制信令，而不需要PDCCH（UL grant），从而降低了开销。
2.上行自适应（adaptive）重传
  此时eNodeB不仅会发送PHICH，还会发送PDCCH（UL grant）以指示重传所使用的新的PRB资源和MCS。
  如果上行同时支持自适应和非自适应HARQ，则要求对应同一上行子帧的PHICH和PDCCH拥有相同的timing，即在同一子帧中发送。如果不满足该条件，则UE不知道是该听从
  PHICH还是该等待UL grant而不管PHICH，实现的复杂度会大增。
<p><wbr></wbr></p>
</pre> 
<p><span style="font-size:18px"><strong>下行</strong></span>：<br> </p> 
<p>接收方可以从物理层收到发送方传递过来地HARQ信息，里面可能就包括了NDI参数。</p> 
<p>同步HARQ是指一个HARQ进程的传输(重传)是发生在固定的时刻，由于接收端预先已知传输的发生时刻，因此不需要额外的信令开销来标示HARQ进程的序号</p> 
<p>异步HARQ是指一个HARQ进程的传输可以发生在任何时刻，接收端预先不知道传输的发生时刻，因此HARQ进程的处理序号需要连同数据一起发送。</p> 
<p>Downlink Assignment Index (DAI)字段，用于告诉UE在HARQ反馈窗口内有多少个子帧包含下行传输。用于下行HARQ，这个字段包含在DCI里面</p> 
<p>下行传输所对应的HARQ上行反馈里，一个上行子帧里可能包含对应多个下行子帧的ack/nack信息，包含的下行子帧集合就是：HARQ反馈窗口.</p> 
<p><br> </p> 
<p>一直以为rrc连接请求完成和attach request是分开传送的，其实不是<br> </p> 
<p>rrcConnectionSetupComplete会把pdnConnectivityRequest和attachrequest消息带上，并不仅仅是应答。且pdnConnectivityRequest是在attach request的container中包含的。这个PDN连接请求是用来建立默认承载的，所以不需要带上APN，网络会在随后的激活默认承载请求中告诉UE使用的APN是什么。只需要告诉网络UE支持的IP地址类型就行。</p> 
<p>Esm information request 会请求UE把自己的信息传给网络，包括用来建数据业务的APN</p> 
<p>ESM information response<br> </p> 
<p>lte_esm_msg</p> 
<p></p> 
<p>  esm_info_res</p> 
<p>    acc_pt_name_incl = 1 (0x1)</p> 
<p>    access_point_name</p> 
<p>      num_acc_pt_val = 6 (0x6)</p> 
<p>      acc_pt_name_val[0] = 5 (0x5) (length)</p> 
<p>      acc_pt_name_val[1] = 51 (0x33) (3)</p> 
<p>      acc_pt_name_val[2] = 103 (0x67) (g)</p> 
<p>      acc_pt_name_val[3] = 110 (0x6e) (n)</p> 
<p>      acc_pt_name_val[4] = 101 (0x65) (e)</p> 
<p>      acc_pt_name_val[5] = 116 (0x74) (t)</p> 
<p>    prot_config_incl = 1 (0x1)</p> 
<p>    prot_config</p> 
<p>      ext = 1 (0x1)</p> 
<p>      conf_prot = 0 (0x0)</p> 
<p>      num_recs = 3 (0x3)</p> 
<p>      sm_prot[0]</p> 
<p>       protocol_id = 49699 (0xc223) (CHAP)</p> 
<p>        prot_len = 21 (0x15)</p> 
<p>        chap_prot</p> 
<p>          code = 1 (0x1)</p> 
<p>          identifier = 0 (0x0)</p> 
<p>          rfc1994_chap_challenge</p> 
<p>            value_size = 16 (0x10)</p> 
<p>            value[0] = 203 (0xcb)</p> 
<p>            value[1] = 148 (0x94)</p> 
<p>            value[2] = 85 (0x55)</p> 
<p>            value[3] = 85 (0x55)</p> 
<p>            value[4] = 203 (0xcb)</p> 
<p>            value[5] = 148 (0x94)</p> 
<p>            value[6] = 85 (0x55)</p> 
<p>            value[7] = 85 (0x55)</p> 
<p>            value[8] = 203 (0xcb)</p> 
<p>            value[9] = 148 (0x94)</p> 
<p>            value[10] = 85 (0x55)</p> 
<p>            value[11] = 85 (0x55)</p> 
<p>            value[12] = 203 (0xcb)</p> 
<p>            value[13] = 148 (0x94)</p> 
<p>            value[14] = 85 (0x55)</p> 
<p>            value[15] = 85 (0x55)</p> 
<p>            name_size = 0 (0x0)</p> 
<p>      sm_prot[1]</p> 
<p>        protocol_id = 49699 (0xc223) (CHAP)</p> 
<p>        prot_len = 21 (0x15)</p> 
<p>        chap_prot</p> 
<p>          code = 2 (0x2)</p> 
<p>          identifier = 0 (0x0)</p> 
<p>          rfc1994_chap_resp</p> 
<p>            value_size = 16 (0x10)</p> 
<p>            value[0] = 72 (0x48)</p> 
<p>            value[1] = 92 (0x5c)</p> 
<p>            value[2] = 10 (0xa)</p> 
<p>            value[3] = 216 (0xd8)</p> 
<p>            value[4] = 252 (0xfc)</p> 
<p>            value[5] = 147 (0x93)</p> 
<p>            value[6] = 23 (0x17)</p> 
<p>            value[7] = 42 (0x2a)</p> 
<p>            value[8] = 96 (0x60)</p> 
<p>            value[9] = 56 (0x38)</p> 
<p>            value[10] = 94 (0x5e)</p> 
<p>            value[11] = 92 (0x5c)</p> 
<p>            value[12] = 172 (0xac)</p> 
<p>            value[13] = 190 (0xbe)</p> 
<p>            value[14] = 37 (0x25)</p> 
<p>            value[15] = 230 (0xe6)</p> 
<p>            name_size = 0 (0x0)</p> 
<p>      sm_prot[2]</p> 
<p>        protocol_id = 32801 (0x8021) (IPCP)</p> 
<p>        prot_len = 16 (0x10)</p> 
<p>        ipcp_prot</p> 
<p>          ipcp_prot_id = 1 (0x1) (CONF_REQ)</p> 
<p>          identifier = 0 (0x0)</p> 
<p>          rfc1332_conf_req</p> 
<p>            num_options = 2 (0x2)</p> 
<p>            conf_options[0]</p> 
<p>              type = 129 (0x81)</p> 
<p>              rfc1877_primary_dns_server_add</p> 
<p>                length = 6 (0x6)</p> 
<p>                ip_addr = 0 (0x0) (0.0.0.0)</p> 
<p>            conf_options[1]</p> 
<p>              type = 131 (0x83)</p> 
<p>              rfc1877_sec_dns_server_add</p> 
<p>                length = 6 (0x6)</p> 
<p>                ip_addr = 0 (0x0) (0.0.0.0)</p> 
<p>      num_recs2 = 4 (0x4)</p> 
<p>      sm_container[0]</p> 
<p>        container_id = 13 (0xd) (DNS Server IPv4 Address Requestt)</p> 
<p>        container_len = 0 (0x0)</p> 
<p>      sm_container[1]</p> 
<p>        container_id = 10 (0xa) (IP address allocation via NAS signalling)</p> 
<p>        container_len = 0 (0x0)</p> 
<p>      sm_container[2]</p> 
<p>        container_id = 5 (0x5) (NWK Req Bearer Control indicator)</p> 
<p>        container_len = 0 (0x0)</p> 
<p>      sm_container[3]</p> 
<p>        container_id = 16 (0x10) (Ipv4 Link MTU Request)</p>         container_len = 0 (0x0) 
<p>在建立LTE数据连接（非IMS）时，在附着请求消息里会有PDN连接请求，但是这个请求里不包含APN信息；</p> 
<p>之后网络会下发esm information request 要求手机把apn报上去</p> 
<p>手机接到请求后发esm information response 告诉网络APN（代表要和哪个PDN来建立连接）</p> 网络下发activate default eps bearer context requst （这个消息里包含之前发给网络的APN）来激活默认承载，且会告诉UE网络分配给UE的QCI（LTE数据默认承载使用的QCI=8，IMS对应的默认承载使用的QCI=5），UE收到这个消息后会和自己配置的APN进行比对，如果相同就发attach accept(这个消息里会包含activate default eps bearer context accept)。 
<p><br> </p> 
<p><span style="color:rgb(82,102,115); font-family:微软雅黑,黑体; font-size:18px; background-color:rgb(226,226,226)">LTE 中的Data Centric 和 Voice Centric含义</span><br> </p> 
<p>http://cache.baiducontent.com/c?m=9d78d513d9981eee4fece4690d60c0676910dd217dc3975521dbc90ed5264c40347bfeeb797f4513d3b23d3c5dfc5e5c9da16b2d200357e6c7d5c9578de5cf7d388f53317618d64510d51dadc84426947f9051feaf6ebdfcaf6c&amp;p=936ddf16d9c104ff57ee947f500d8d&amp;newp=8d769a479c9b13ff57ee947f55648f231610db2151d4d4156b82c825d7331b001c3bbfb423231a01d2c47c6604a54358ebf13777310621a3dda5c91d9fb4c57479c27f66&amp;user=baidu&amp;fm=sc&amp;query=IMS-VOPS&amp;qid=d00025b00001cbe8&amp;p1=1<br> </p> 
<p><br> </p> 
<p>如果开机时数据业务没打开且RRC连接没建立，则在手动打开数据开关的额时候会给网络发service request，但是这个消息里不用再带APN了。QIE</p> 
<p>如果RRC没有释放，则只需要进行RRC 连接重配置就行。</p> 
<p><br> </p> 
<p>SIB的逻辑信道是BCCH, 传输信道是通过DL-SCH传的</p> 
<p><br> <span style="font-family:Helvetica,Arial,sans-serif; font-size:18px"></span></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/4de5d006edbf58b6f8c9df9f75a67046/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">利用word2vec对关键词进行聚类</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/babcb9d420575cb25adcad446c8580b1/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">ThinkPad 0A36414 蓝牙无线激光鼠标在win7上无法使用的问题</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>