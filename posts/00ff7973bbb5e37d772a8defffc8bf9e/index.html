<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>特征工程探索之数据预处理 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="特征工程探索之数据预处理" />
<meta property="og:description" content="我在前面的几篇文章里面介绍了一些机器学习的算法，当然不是非常全面，只是大致介绍，但我觉得对我来说已经对算法有了一定的理解。但是当我想完成一个真正的数据处理任务的时候，发现还是不够，从原始数据到开始用算法训练之间还有一部分空白，这个空白就是——特征工程。
我在一些文章里面都看到这种说法数据和特征决定了最后结果的上限，而算法只是用来逼近这个上限的工具。对此我深以为然，数据和选择的特征如果不好，算法再怎么巧夺天工也不可能从一堆垃圾里面找出金子。在使用sklearn做单机特征工程这篇博文里面，博主把从原始数据开始的清洗，预处理，特征选择，特征监控等都算作特征工程的一部分，所以，按照类似的分类方法我这篇文章先从数据预处理开始。
数据清洗 数据清洗可以说是非常重要的一步了，因为我们获得的原始数据很有可能有各种缺失值，并且有很多定性的特征（比如住址，性别等），这些算法都是无法处理的。 这里说明下，pandas 和sklearn都是可以用于数据预处理的。
缺失值处理 缺失值，在数据里面一般用”NaN”代替，是一定要处理的。
如果用pandas，可以直接把这条记录删除
import pandas as pd data = pd.read_csv(&#34;file_path&#34;) data.dropna() 利用dropna()函数可以滤除DataFrame中所有包含NaN的记录。如果采用
data.dropna(how = &#34;all&#34;) 则删除全部为缺失值的行。 但是有时候含有NaN的记录太多，全都删除的话可能就没剩几条了，这样的话就浪费了太多的信息，这时候我们可以用能力更强的fillna()函数，来对缺失值进行进一步的处理。 比如
fillna(0) 将所有缺失值填充为0，
fillna(data.mean()) 将缺失值填充为每一行的平均值，这个方法挺重要的
fillna(method = &#39;ffill&#39;) 这个是对每个缺失值按照他前面的值填充，同理还有’bfill’是按照后面的值填充。 还有一些其他的细节感兴趣的可以自己探索
如果用sklearn ,可以利用preprocessing库里面的Imputer Imputer 的API为 class sklearn.preprocessing.Imputer(missing_values=’NaN’, strategy=’mean’, axis=0, ver- bose=0, copy=True) 其中missing_values就是缺失值的符号，默认是NaN，在处理的时候所有的missing_values代表的缺失值都会被处理 strategy表示使用什么方法处理，有三种方式mean，代表用沿着axis所指示的轴的平均值来代替。median代表用沿着axis所指示的轴的中位数来代替。most_frequent代表用沿着axis所指示的轴的最普遍的值来代替。默认是mean 使用的时候用法
Imputer().fit_transform(data) 定性特征编码 实际中的数据可能是定性的，比如高，中，低，这是一种特殊的情况，因为各个值之间有可比较的关系，那么我们就可以把他们编码成2，1，0。但是有些情况一些定性的值之间没有这种关系，比如城市，可以是北京，上海，广州，如果我们把他们编码成2，1，0就引入了原本不存在的序列信息，所以正确的方式是使用向量来表示比如[1,0,0],[0,1,0],[0,0,1]分别代表三个城市，向量的每个维度就代表是否为这个城市。这叫做哑编码，在sklearn.preprocessing中有一个OneHotEncoder可以做到。
但是，OneHotEncoder的输入需要是一个整数的矩阵，自己转换比较麻烦，这里还有种方法就是利用feature_extraction中的DictVectorizer()将键值对形式的数据转换成向量，对于定性的数据自动采用哑编码。大致用法是
vec = DictVectorizer(sparse = False) X_train = vec.fit_transform(X_train.to_dict(orient =&#39;record&#39; )) 其中X_train是DataFrame，to_dict()函数可以将其变成一种字典，参数orient默认是dict，但是他产生的结果是 df.to_dict() {‘col1’: {‘a’: 1, ‘b’: 2}, ‘col2’: {‘a’: 0." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/00ff7973bbb5e37d772a8defffc8bf9e/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2018-01-24T20:56:46+08:00" />
<meta property="article:modified_time" content="2018-01-24T20:56:46+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">特征工程探索之数据预处理</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>我在前面的几篇文章里面介绍了一些机器学习的算法，当然不是非常全面，只是大致介绍，但我觉得对我来说已经对算法有了一定的理解。但是当我想完成一个真正的数据处理任务的时候，发现还是不够，从原始数据到开始用算法训练之间还有一部分空白，这个空白就是——<strong>特征工程</strong>。</p> 
<p>我在一些文章里面都看到这种说法<strong>数据和特征决定了最后结果的上限，而算法只是用来逼近这个上限的工具</strong>。对此我深以为然，数据和选择的特征如果不好，算法再怎么巧夺天工也不可能从一堆垃圾里面找出金子。在<a href="http://www.cnblogs.com/jasonfreak/p/5448385.html" rel="nofollow">使用sklearn做单机特征工程</a>这篇博文里面，博主把从原始数据开始的清洗，预处理，特征选择，特征监控等都算作特征工程的一部分，所以，按照类似的分类方法我这篇文章先从数据预处理开始。</p> 
<h2 id="数据清洗">数据清洗</h2> 
<p>数据清洗可以说是非常重要的一步了，因为我们获得的原始数据很有可能有各种缺失值，并且有很多定性的特征（比如住址，性别等），这些算法都是无法处理的。 <br> 这里说明下，pandas 和sklearn都是可以用于数据预处理的。</p> 
<h3 id="缺失值处理">缺失值处理</h3> 
<p>缺失值，在数据里面一般用”NaN”代替，是一定要处理的。</p> 
<p><strong>如果用pandas</strong>，可以直接把这条记录删除</p> 
<pre class="prettyprint"><code class=" hljs lasso"><span class="hljs-keyword">import</span> pandas as pd

<span class="hljs-built_in">data</span> <span class="hljs-subst">=</span> pd<span class="hljs-built_in">.</span>read_csv(<span class="hljs-string">"file_path"</span>)
<span class="hljs-built_in">data</span><span class="hljs-built_in">.</span>dropna()</code></pre> 
<p>利用dropna()函数可以滤除DataFrame中所有包含NaN的记录。如果采用</p> 
<pre class="prettyprint"><code class=" hljs avrasm">data<span class="hljs-preprocessor">.dropna</span>(how = <span class="hljs-string">"all"</span>)</code></pre> 
<p>则删除全部为缺失值的行。 <br> 但是有时候含有NaN的记录太多，全都删除的话可能就没剩几条了，这样的话就浪费了太多的信息，这时候我们可以用能力更强的fillna()函数，来对缺失值进行进一步的处理。 <br> 比如</p> 
<pre class="prettyprint"><code class=" hljs erlang"><span class="hljs-function"><span class="hljs-title">fillna</span><span class="hljs-params">(<span class="hljs-number">0</span>)</span></span></code></pre> 
<p>将所有缺失值填充为0，</p> 
<pre class="prettyprint"><code class=" hljs haskell"><span class="hljs-title">fillna</span>(<span class="hljs-typedef"><span class="hljs-keyword">data</span>.mean<span class="hljs-container">()</span>)</span></code></pre> 
<p>将缺失值填充为每一行的平均值，这个方法挺重要的</p> 
<pre class="prettyprint"><code class=" hljs oxygene">fillna(<span class="hljs-function"><span class="hljs-keyword">method</span> = '<span class="hljs-title">ffill</span>')</span></code></pre> 
<p>这个是对每个缺失值按照他前面的值填充，同理还有’bfill’是按照后面的值填充。 <br> 还有一些其他的细节感兴趣的可以自己探索</p> 
<p><strong>如果用sklearn</strong> ,可以利用preprocessing库里面的Imputer <br> Imputer 的API为 <br> class sklearn.preprocessing.Imputer(missing_values=’NaN’, strategy=’mean’, axis=0, ver- <br> bose=0, copy=True) <br> 其中<strong>missing_values</strong>就是缺失值的符号，默认是NaN，在处理的时候所有的missing_values代表的缺失值都会被处理 <br> <strong>strategy</strong>表示使用什么方法处理，有三种方式mean，代表用沿着axis所指示的轴的平均值来代替。median代表用沿着axis所指示的轴的中位数来代替。most_frequent代表用沿着axis所指示的轴的最普遍的值来代替。默认是mean <br> 使用的时候用法</p> 
<pre class="prettyprint"><code class=" hljs haskell"><span class="hljs-type">Imputer</span>().fit_transform(<span class="hljs-typedef"><span class="hljs-keyword">data</span>)</span></code></pre> 
<h3 id="定性特征编码">定性特征编码</h3> 
<p>实际中的数据可能是定性的，比如高，中，低，这是一种特殊的情况，因为各个值之间有可比较的关系，那么我们就可以把他们编码成2，1，0。但是有些情况一些定性的值之间没有这种关系，比如城市，可以是北京，上海，广州，如果我们把他们编码成2，1，0就引入了原本不存在的序列信息，所以正确的方式是使用向量来表示比如[1,0,0],[0,1,0],[0,0,1]分别代表三个城市，向量的每个维度就代表是否为这个城市。这叫做哑编码，在sklearn.preprocessing中有一个OneHotEncoder可以做到。</p> 
<p>但是，OneHotEncoder的输入需要是一个整数的矩阵，自己转换比较麻烦，这里还有种方法就是利用feature_extraction中的DictVectorizer()将键值对形式的数据转换成向量，对于定性的数据自动采用哑编码。大致用法是</p> 
<pre class="prettyprint"><code class=" hljs rust"><span class="hljs-keyword">vec</span> = DictVectorizer(sparse = False)
X_train  = <span class="hljs-keyword">vec</span>.fit_transform(X_train.to_dict(orient =<span class="hljs-string">'record'</span> ))</code></pre> 
<p>其中X_train是DataFrame，to_dict()函数可以将其变成一种字典，参数orient默认是dict，但是他产生的结果是 <br> df.to_dict() <br> {‘col1’: {‘a’: 1, ‘b’: 2}, ‘col2’: {‘a’: 0.5, ‘b’: 0.75}} <br> 这种形式的，这里我们用的是records产生的结果是 <br> df.to_dict(‘records’) <br> [{‘col1’: 1.0, ‘col2’: 0.5}, {‘col1’: 2.0, ‘col2’: 0.75}] <br> 这里面每个大括号相当于一条记录，也就是一个样本，然后DictVectorizer()再对这个结果进行处理编码。sparse参数用来确定是否生成稀疏矩和=阵。</p> 
<h2 id="数据标准化和归一化">数据标准化和归一化</h2> 
<p>单位对数据的影响是很大的，对于原始的样本，如果我们改变了某个维度上的样本的单位，可能造成这个维度上样本一下子散的很开或者收缩地很厉害。如果散的很开，说明数据在这个特征上变化很多，可能因此这个特征的重要性增加。如果突然收缩，比如对于聚类算法，本来因该分开的类就因此聚成了一个类。所以无量纲话就显得很重要。另外有很多算法在推到的时候就假设了数据的中心是0，也就是<span class="MathJax_Preview" style="color: inherit; display: none;"></span><span tabindex="0" class="MathJax" id="MathJax-Element-293-Frame" style="position: relative;"> 
   
   <span class="math" id="MathJax-Span-2607" style="width: 4.9em; display: inline-block;"><span style="width: 3.9em; height: 0px; font-size: 125%; display: inline-block; position: relative;"><span style="left: 0em; top: -2.4em; position: absolute; clip: rect(1.5em, 1003.86em, 2.8em, -1000em);"><span class="mrow" id="MathJax-Span-2608"><span class="mo" id="MathJax-Span-2609" style="font-family: MathJax_Size1; vertical-align: 0em;">∑</span><span class="msubsup" id="MathJax-Span-2610" style="padding-left: 0.16em;"><span style="width: 0.89em; height: 0px; display: inline-block; position: relative;"><span style="left: 0em; top: -4em; position: absolute; clip: rect(3.4em, 1000.52em, 4.16em, -1000em);"><span class="mi" id="MathJax-Span-2611" style="font-family: MathJax_Math; font-style: italic;">x</span><span style="width: 0px; height: 4em; display: inline-block;"></span></span><span style="left: 0.57em; top: -3.85em; position: absolute;"><span class="mi" id="MathJax-Span-2612" style="font-family: MathJax_Math; font-size: 70.7%; font-style: italic;">i</span><span style="width: 0px; height: 4em; display: inline-block;"></span></span></span></span><span class="mo" id="MathJax-Span-2613" style="padding-left: 0.27em; font-family: MathJax_Main;">=</span><span class="mn" id="MathJax-Span-2614" style="padding-left: 0.27em; font-family: MathJax_Main;">0</span></span><span style="width: 0px; height: 2.4em; display: inline-block;"></span></span></span><span style="width: 0px; height: 1.37em; overflow: hidden; vertical-align: -0.37em; border-left-color: currentColor; border-left-width: 0px; border-left-style: solid; display: inline-block;"></span></span> 
  <span class="MJX_Assistive_MathML"> 
    
    
      ∑ 
     
     
     
       x 
      
     
       i 
      
     
    
      = 
     
    
      0 
     
   </span></span><script id="MathJax-Element-293" type="math/tex">\sum x_i = 0</script>。那么如果不中心化的话，就会对结果产生影响。 <br> 所以标准化同时满足上面两个要求是很常用的方法 <br> <span class="MathJax_Preview" style="color: inherit; display: none;"></span></p> 
<div class="MathJax_Display" style="text-align: center;"> 
 <span tabindex="0" class="MathJax" id="MathJax-Element-294-Frame" style="text-align: center; position: relative;"> 
   
   <span class="math" id="MathJax-Span-2615" style="width: 7.75em; display: inline-block;"><span style="width: 6.2em; height: 0px; font-size: 125%; display: inline-block; position: relative;"><span style="left: 0em; top: -2.35em; position: absolute; clip: rect(0.73em, 1006.2em, 3.2em, -1000em);"><span class="mrow" id="MathJax-Span-2616"><span class="msup" id="MathJax-Span-2617"><span style="width: 0.84em; height: 0px; display: inline-block; position: relative;"><span style="left: 0em; top: -4em; position: absolute; clip: rect(3.4em, 1000.52em, 4.16em, -1000em);"><span class="mi" id="MathJax-Span-2618" style="font-family: MathJax_Math; font-style: italic;">x</span><span style="width: 0px; height: 4em; display: inline-block;"></span></span><span style="left: 0.57em; top: -4.41em; position: absolute;"><span class="mo" id="MathJax-Span-2619" style="font-family: MathJax_Main; font-size: 70.7%;">′</span><span style="width: 0px; height: 4em; display: inline-block;"></span></span></span></span><span class="mo" id="MathJax-Span-2620" style="padding-left: 0.27em; font-family: MathJax_Main;">=</span><span class="mfrac" id="MathJax-Span-2621" style="padding-left: 0.27em;"><span style="width: 3.8em; height: 0px; margin-right: 0.12em; margin-left: 0.12em; display: inline-block; position: relative;"><span style="left: 50%; top: -4.71em; margin-left: -1.84em; position: absolute; clip: rect(3.1em, 1003.56em, 4.4em, -1000em);"><span class="mrow" id="MathJax-Span-2622"><span class="mi" id="MathJax-Span-2623" style="font-family: MathJax_Math; font-style: italic;">x</span><span class="mo" id="MathJax-Span-2624" style="padding-left: 0.22em; font-family: MathJax_Main;">−</span><span class="mi" id="MathJax-Span-2625" style="padding-left: 0.22em; font-family: MathJax_Math; font-style: italic;">E<span style="width: 0.02em; height: 1px; overflow: hidden; display: inline-block;"></span></span><span class="mo" id="MathJax-Span-2626" style="font-family: MathJax_Main;">[</span><span class="mi" id="MathJax-Span-2627" style="font-family: MathJax_Math; font-style: italic;">x</span><span class="mo" id="MathJax-Span-2628" style="font-family: MathJax_Main;">]</span></span><span style="width: 0px; height: 4em; display: inline-block;"></span></span><span style="left: 50%; top: -3.31em; margin-left: -0.32em; position: absolute; clip: rect(3.14em, 1000.64em, 4.17em, -1000em);"><span class="mi" id="MathJax-Span-2629" style="font-family: MathJax_Math; font-style: italic;">S<span style="width: 0.03em; height: 1px; overflow: hidden; display: inline-block;"></span></span><span style="width: 0px; height: 4em; display: inline-block;"></span></span><span style="left: 0em; top: -1.27em; position: absolute; clip: rect(0.83em, 1003.8em, 1.2em, -1000em);"><span style="width: 3.8em; height: 0px; overflow: hidden; vertical-align: 0em; border-top-color: currentColor; border-top-width: 1.3px; border-top-style: solid; display: inline-block;"></span><span style="width: 0px; height: 1.05em; display: inline-block;"></span></span></span></span></span><span style="width: 0px; height: 2.35em; display: inline-block;"></span></span></span><span style="width: 0px; height: 2.84em; overflow: hidden; vertical-align: -0.94em; border-left-color: currentColor; border-left-width: 0px; border-left-style: solid; display: inline-block;"></span></span> 
  <span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block"> 
    
     
     
       x 
      
     
       ′ 
      
     
    
      = 
     
     
      
      
        x 
       
      
        − 
       
      
        E 
       
      
        [ 
       
      
        x 
       
      
        ] 
       
      
     
       S 
      
     
   </span></span> 
</div><script id="MathJax-Element-294" type="math/tex; mode=display">x' = \frac{x - E[x]}{S}</script> 
<br> 其中S就是标准差，单位和x是一样的， 
<span class="MathJax_Preview" style="color: inherit; display: none;"></span> 
<span tabindex="0" class="MathJax" id="MathJax-Element-295-Frame" style="position: relative;"> 
  
  <span class="math" id="MathJax-Span-2630" style="width: 2.4em; display: inline-block;"><span style="width: 1.9em; height: 0px; font-size: 125%; display: inline-block; position: relative;"><span style="left: 0em; top: -2.35em; position: absolute; clip: rect(1.45em, 1001.78em, 2.75em, -1000em);"><span class="mrow" id="MathJax-Span-2631"><span class="mi" id="MathJax-Span-2632" style="font-family: MathJax_Math; font-style: italic;">E<span style="width: 0.02em; height: 1px; overflow: hidden; display: inline-block;"></span></span><span class="mo" id="MathJax-Span-2633" style="font-family: MathJax_Main;">[</span><span class="mi" id="MathJax-Span-2634" style="font-family: MathJax_Math; font-style: italic;">x</span><span class="mo" id="MathJax-Span-2635" style="font-family: MathJax_Main;">]</span></span><span style="width: 0px; height: 2.35em; display: inline-block;"></span></span></span><span style="width: 0px; height: 1.37em; overflow: hidden; vertical-align: -0.37em; border-left-color: currentColor; border-left-width: 0px; border-left-style: solid; display: inline-block;"></span></span> 
 <span class="MJX_Assistive_MathML"> 
   
   
     E 
    
   
     [ 
    
   
     x 
    
   
     ] 
    
  </span></span><script id="MathJax-Element-295" type="math/tex">E[x]</script>代表x的均值。显而易见新生成的 
<span class="MathJax_Preview" style="color: inherit; display: none;"></span> 
<span tabindex="0" class="MathJax" id="MathJax-Element-296-Frame" style="position: relative;"> 
  
  <span class="math" id="MathJax-Span-2636" style="width: 1.1em; display: inline-block;"><span style="width: 0.85em; height: 0px; font-size: 125%; display: inline-block; position: relative;"><span style="left: 0em; top: -2.3em; position: absolute; clip: rect(1.39em, 1000.85em, 2.46em, -1000em);"><span class="mrow" id="MathJax-Span-2637"><span class="msup" id="MathJax-Span-2638"><span style="width: 0.84em; height: 0px; display: inline-block; position: relative;"><span style="left: 0em; top: -4em; position: absolute; clip: rect(3.4em, 1000.52em, 4.16em, -1000em);"><span class="mi" id="MathJax-Span-2639" style="font-family: MathJax_Math; font-style: italic;">x</span><span style="width: 0px; height: 4em; display: inline-block;"></span></span><span style="left: 0.57em; top: -4.36em; position: absolute;"><span class="mo" id="MathJax-Span-2640" style="font-family: MathJax_Main; font-size: 70.7%;">′</span><span style="width: 0px; height: 4em; display: inline-block;"></span></span></span></span></span><span style="width: 0px; height: 2.3em; display: inline-block;"></span></span></span><span style="width: 0px; height: 1.08em; overflow: hidden; vertical-align: -0.07em; border-left-color: currentColor; border-left-width: 0px; border-left-style: solid; display: inline-block;"></span></span> 
 <span class="MJX_Assistive_MathML"> 
   
    
    
      x 
     
    
      ′ 
     
    
  </span></span><script id="MathJax-Element-296" type="math/tex">x'</script>是服从 
<span class="MathJax_Preview" style="color: inherit; display: none;"></span> 
<span tabindex="0" class="MathJax" id="MathJax-Element-297-Frame" style="position: relative;"> 
  
  <span class="math" id="MathJax-Span-2641" style="width: 3.9em; display: inline-block;"><span style="width: 3.1em; height: 0px; font-size: 125%; display: inline-block; position: relative;"><span style="left: 0em; top: -2.35em; position: absolute; clip: rect(1.45em, 1003em, 2.75em, -1000em);"><span class="mrow" id="MathJax-Span-2642"><span class="texatom" id="MathJax-Span-2643"><span class="mrow" id="MathJax-Span-2644"><span class="mi" id="MathJax-Span-2645" style="font-family: MathJax_Main; font-weight: bold;">N</span></span></span><span class="mo" id="MathJax-Span-2646" style="font-family: MathJax_Main;">(</span><span class="mn" id="MathJax-Span-2647" style="font-family: MathJax_Main;">0</span><span class="mo" id="MathJax-Span-2648" style="font-family: MathJax_Main;">,</span><span class="mn" id="MathJax-Span-2649" style="padding-left: 0.16em; font-family: MathJax_Main;">1</span><span class="mo" id="MathJax-Span-2650" style="font-family: MathJax_Main;">)</span></span><span style="width: 0px; height: 2.35em; display: inline-block;"></span></span></span><span style="width: 0px; height: 1.37em; overflow: hidden; vertical-align: -0.37em; border-left-color: currentColor; border-left-width: 0px; border-left-style: solid; display: inline-block;"></span></span> 
 <span class="MJX_Assistive_MathML"> 
   
    
    
      N 
     
    
   
     ( 
    
   
     0 
    
   
     , 
    
   
     1 
    
   
     ) 
    
  </span></span><script id="MathJax-Element-297" type="math/tex">\mathbf N(0,1)</script>的正态分布。 
<p></p> 
<p>以上做法通过StandardScaler()实现，一般不用设置参数</p> 
<pre class="prettyprint"><code class=" hljs haskell"><span class="hljs-title">from</span> sklearn.preprocessing <span class="hljs-import"><span class="hljs-keyword">import</span> StandardScaler</span>
<span class="hljs-type">StandardScaler</span>().fit_transform(<span class="hljs-typedef"><span class="hljs-keyword">data</span>)</span></code></pre> 
<p>还有种情况就是离群点很多的情况下，标准化可能也效果不是很好，因为离群点对均值和方差都有影响，这时候可以用RobustScaler()来标准化，它对离群点的鲁棒性比较好，其API如下 <br> sklearn.preprocessing.RobustScaler(with_centering=True, with_scaling=True, quan- <br> tile_range=(25.0, 75.0), copy=True) <br> 好像是通过计算分位数，具体原理不是很清楚。</p> 
<p>还有一种做法是归一化，归一化的做法和标准化不同，标准化在一个特征上对所有的样本标准化，归一化是把一个样本看作一个向量，然后将这个向量的范数变成1 <br> <span class="MathJax_Preview" style="color: inherit; display: none;"></span></p> 
<div class="MathJax_Display" style="text-align: center;"> 
 <span tabindex="0" class="MathJax" id="MathJax-Element-367-Frame" style="text-align: center; position: relative;"> 
   
   <span class="math" id="MathJax-Span-3620" style="width: 7.95em; display: inline-block;"><span style="width: 6.35em; height: 0px; font-size: 125%; display: inline-block; position: relative;"><span style="left: 0em; top: -2.35em; position: absolute; clip: rect(0.73em, 1006.35em, 3.66em, -1000em);"><span class="mrow" id="MathJax-Span-3621"><span class="msup" id="MathJax-Span-3622"><span style="width: 0.84em; height: 0px; display: inline-block; position: relative;"><span style="left: 0em; top: -4em; position: absolute; clip: rect(3.4em, 1000.52em, 4.16em, -1000em);"><span class="mi" id="MathJax-Span-3623" style="font-family: MathJax_Math; font-style: italic;">x</span><span style="width: 0px; height: 4em; display: inline-block;"></span></span><span style="left: 0.57em; top: -4.41em; position: absolute;"><span class="mo" id="MathJax-Span-3624" style="font-family: MathJax_Main; font-size: 70.7%;">′</span><span style="width: 0px; height: 4em; display: inline-block;"></span></span></span></span><span class="mo" id="MathJax-Span-3625" style="font-family: MathJax_Main;">[</span><span class="mi" id="MathJax-Span-3626" style="font-family: MathJax_Math; font-style: italic;">i</span><span class="mo" id="MathJax-Span-3627" style="font-family: MathJax_Main;">]</span><span class="mo" id="MathJax-Span-3628" style="padding-left: 0.27em; font-family: MathJax_Main;">=</span><span class="mfrac" id="MathJax-Span-3629" style="padding-left: 0.27em;"><span style="width: 3.04em; height: 0px; margin-right: 0.12em; margin-left: 0.12em; display: inline-block; position: relative;"><span style="left: 50%; top: -4.71em; margin-left: -0.73em; position: absolute; clip: rect(3.1em, 1001.35em, 4.4em, -1000em);"><span class="mrow" id="MathJax-Span-3630"><span class="mi" id="MathJax-Span-3631" style="font-family: MathJax_Math; font-style: italic;">x</span><span class="mo" id="MathJax-Span-3632" style="font-family: MathJax_Main;">[</span><span class="mi" id="MathJax-Span-3633" style="font-family: MathJax_Math; font-style: italic;">i</span><span class="mo" id="MathJax-Span-3634" style="font-family: MathJax_Main;">]</span></span><span style="width: 0px; height: 4em; display: inline-block;"></span></span><span style="left: 50%; top: -3.16em; margin-left: -1.46em; position: absolute; clip: rect(2.98em, 1002.92em, 4.48em, -1000em);"><span class="msqrt" id="MathJax-Span-3635"><span style="width: 2.92em; height: 0px; display: inline-block; position: relative;"><span style="left: 1em; top: -4em; position: absolute; clip: rect(3.09em, 1001.9em, 4.4em, -1000em);"><span class="mrow" id="MathJax-Span-3636"><span class="mi" id="MathJax-Span-3637" style="font-family: MathJax_Math; font-style: italic;">x</span><span class="mo" id="MathJax-Span-3638" style="font-family: MathJax_Main;">[</span><span class="mi" id="MathJax-Span-3639" style="font-family: MathJax_Math; font-style: italic;">i</span><span class="msubsup" id="MathJax-Span-3640"><span style="width: 0.7em; height: 0px; display: inline-block; position: relative;"><span style="left: 0em; top: -4em; position: absolute; clip: rect(3.1em, 1000.16em, 4.4em, -1000em);"><span class="mo" id="MathJax-Span-3641" style="font-family: MathJax_Main;">]</span><span style="width: 0px; height: 4em; display: inline-block;"></span></span><span style="left: 0.27em; top: -4.28em; position: absolute;"><span class="mn" id="MathJax-Span-3642" style="font-family: MathJax_Main; font-size: 70.7%;">2</span><span style="width: 0px; height: 4em; display: inline-block;"></span></span></span></span></span><span style="width: 0px; height: 4em; display: inline-block;"></span></span><span style="left: 1em; top: -4.59em; position: absolute; clip: rect(3.57em, 1001.92em, 3.92em, -1000em);"><span style="width: 1.92em; height: 0px; display: inline-block; position: relative;"><span style="left: -0.08em; top: -4em; font-family: MathJax_Main; position: absolute;">−<span style="width: 0px; height: 4em; display: inline-block;"></span></span><span style="left: 1.23em; top: -4em; font-family: MathJax_Main; position: absolute;">−<span style="width: 0px; height: 4em; display: inline-block;"></span></span><span style="left: 0.33em; top: -4em; font-family: MathJax_Main; position: absolute;">−<span style="width: 0px; height: 4em; display: inline-block;"></span></span><span style="left: 0.78em; top: -4em; font-family: MathJax_Main; position: absolute;">−<span style="width: 0px; height: 4em; display: inline-block;"></span></span></span><span style="width: 0px; height: 4em; display: inline-block;"></span></span><span style="left: 0em; top: -4.01em; position: absolute; clip: rect(3em, 1001.02em, 4.5em, -1000em);"><span style="font-family: MathJax_Size1;">√</span><span style="width: 0px; height: 4em; display: inline-block;"></span></span></span></span><span style="width: 0px; height: 4em; display: inline-block;"></span></span><span style="left: 0em; top: -1.27em; position: absolute; clip: rect(0.83em, 1003.04em, 1.2em, -1000em);"><span style="width: 3.04em; height: 0px; overflow: hidden; vertical-align: 0em; border-top-color: currentColor; border-top-width: 1.3px; border-top-style: solid; display: inline-block;"></span><span style="width: 0px; height: 1.05em; display: inline-block;"></span></span></span></span></span><span style="width: 0px; height: 2.35em; display: inline-block;"></span></span></span><span style="width: 0px; height: 3.41em; overflow: hidden; vertical-align: -1.51em; border-left-color: currentColor; border-left-width: 0px; border-left-style: solid; display: inline-block;"></span></span> 
  <span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block"> 
    
     
     
       x 
      
     
       ′ 
      
     
    
      [ 
     
    
      i 
     
    
      ] 
     
    
      = 
     
     
      
      
        x 
       
      
        [ 
       
      
        i 
       
      
        ] 
       
      
      
      
        x 
       
      
        [ 
       
      
        i 
       
       
       
         ] 
        
       
         2 
        
       
      
     
   </span></span> 
</div><script id="MathJax-Element-367" type="math/tex; mode=display">x'[i] = \frac{x[i]}{\sqrt{x[i]^2}}</script> 
<br> 
<span class="MathJax_Preview" style="color: inherit; display: none;"></span> 
<span tabindex="0" class="MathJax" id="MathJax-Element-368-Frame" style="position: relative;"> 
  
  <span class="math" id="MathJax-Span-3643" style="width: 1.85em; display: inline-block;"><span style="width: 1.45em; height: 0px; font-size: 125%; display: inline-block; position: relative;"><span style="left: 0em; top: -2.35em; position: absolute; clip: rect(1.45em, 1001.33em, 2.75em, -1000em);"><span class="mrow" id="MathJax-Span-3644"><span class="mi" id="MathJax-Span-3645" style="font-family: MathJax_Math; font-style: italic;">x</span><span class="mo" id="MathJax-Span-3646" style="font-family: MathJax_Main;">[</span><span class="mi" id="MathJax-Span-3647" style="font-family: MathJax_Math; font-style: italic;">i</span><span class="mo" id="MathJax-Span-3648" style="font-family: MathJax_Main;">]</span></span><span style="width: 0px; height: 2.35em; display: inline-block;"></span></span></span><span style="width: 0px; height: 1.37em; overflow: hidden; vertical-align: -0.37em; border-left-color: currentColor; border-left-width: 0px; border-left-style: solid; display: inline-block;"></span></span> 
 <span class="MJX_Assistive_MathML"> 
   
   
     x 
    
   
     [ 
    
   
     i 
    
   
     ] 
    
  </span></span><script id="MathJax-Element-368" type="math/tex">x[i]</script>是样本向量的第i个分量。 
<br> 归一化使用Normalizer()来完成 
<p></p> 
<pre class="prettyprint"><code class=" hljs haskell"><span class="hljs-title">from</span> sklearn.preprocessing <span class="hljs-import"><span class="hljs-keyword">import</span> Normalizer<span class="hljs-container">()</span></span>
<span class="hljs-type">Normalizer</span>().fit_transform(<span class="hljs-typedef"><span class="hljs-keyword">data</span>)</span></code></pre> 
<p>以上是对数据预处理的一些基本方法，在实践中切记要对数据进行标准化。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/5fe67920753765ba2882842d85f367c0/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">mac桌面文件夹突然消失解决办法</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/7c71ffce84129e759be6a1b61fe48935/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">MCU定时器分频的N种用法</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>