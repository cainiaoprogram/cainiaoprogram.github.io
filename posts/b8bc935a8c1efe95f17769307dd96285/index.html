<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>CCD 技术介绍（基于innovus引擎CCOpt） - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="CCD 技术介绍（基于innovus引擎CCOpt）" />
<meta property="og:description" content="目录： Ø CCOpt 概念 Ø 传统 CTS 介绍 Ø CCOpt 技术介绍 Ø CCOpt 优化流程 Ø Worst Chain Analysis 概念介绍 CCD ： 全称是 Concurrent Clock Datapath ，并行优化 clock 和 data path 。 CCOpt ： 全称是 Clock Concurrent Optimization clock 的timing 分为两种模式， ideal clock 和 propagated clock 。 pre CTS 并没有 clock, 因此需要建立一个 ideal clock ，从 clock 端口到寄存器 CK 端的 network delay 来自 sdc 中的 set_clock_latency 设置； post CTS update IO latency ， clock 就会自动的转换成 propagated clock ，这时 network delay 就是实际时钟互连线网络的 RC extraction delay 。 在实际设计中， clock 起始于 ideal 模式，并以 propagated 模式结束。如下图所示： 传统 CTS 介绍 对传统的flop to flop之间的电路，setup和hold time需要满足以下两个条件，如图所示：" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/b8bc935a8c1efe95f17769307dd96285/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-06-20T11:06:26+08:00" />
<meta property="article:modified_time" content="2023-06-20T11:06:26+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">CCD 技术介绍（基于innovus引擎CCOpt）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div style="margin-left:.25in;text-align:left;"> 
 <strong>目录：</strong> 
</div> 
<h2 style="margin-left:.25in;text-align:left;">Ø<span style="color:#000000;"><strong> CCOpt </strong></span><span style="color:#000000;"><strong>概念</strong></span></h2> 
<h2 style="margin-left:.25in;text-align:left;">Ø<span style="color:#000000;"><strong> 传统 </strong></span><span style="color:#000000;"><strong>CTS </strong></span><span style="color:#000000;"><strong>介绍</strong></span></h2> 
<h2 style="margin-left:.25in;text-align:left;">Ø<span style="color:#000000;"><strong> CCOpt </strong></span><span style="color:#000000;"><strong>技术介绍</strong></span></h2> 
<h2 style="margin-left:.25in;text-align:left;">Ø<span style="color:#000000;"><strong> CCOpt </strong></span><span style="color:#000000;"><strong>优化流程</strong></span></h2> 
<h2 style="margin-left:.25in;text-align:left;">Ø<span style="color:#000000;"><strong> Worst Chain Analysis</strong></span></h2> 
<div style="margin-left:.25in;text-align:left;"></div> 
<h2 style="margin-left:.25in;text-align:left;"><span style="color:#262626;"><strong>概念介绍</strong></span></h2> 
<div style="margin-left:.06in;text-align:left;"> 
 <span style="color:#000000;">CCD</span> 
 <span style="color:#000000;">：</span> 
 <span style="color:#000000;">全称是</span> 
 <span style="color:#000000;">Concurrent Clock Datapath</span> 
 <span style="color:#000000;">，并行优化</span> 
 <span style="color:#000000;">clock</span> 
 <span style="color:#000000;">和</span> 
 <span style="color:#000000;">data path</span> 
 <span style="color:#000000;">。</span> 
</div> 
<div style="margin-left:.06in;text-align:left;"> 
 <span style="color:#000000;">CCOpt</span> 
 <span style="color:#000000;">：</span> 
 <span style="color:#000000;">全称是</span> 
 <span style="color:#000000;">Clock Concurrent Optimization</span> 
</div> 
<div style="margin-left:.06in;text-align:left;"> 
 <span style="color:#000000;">clock</span> 
 <span style="color:#000000;">的timing</span> 
 <span style="color:#000000;">分为两种模式，</span> 
 <span style="color:#4075a9;">ideal clock </span> 
 <span style="color:#000000;">和 </span> 
 <span style="color:#4075a9;">propagated clock</span> 
 <span style="color:#000000;">。</span> 
</div> 
<div style="margin-left:.06in;text-align:left;"> 
 <span style="color:#000000;">pre</span> 
 <span style="color:#000000;">CTS</span> 
 <span style="color:#000000;">并没有</span> 
 <span style="color:#000000;">clock, </span> 
 <span style="color:#000000;">因此需要建立一个 </span> 
 <span style="color:#4075a9;">ideal clock</span> 
 <span style="color:#000000;">，从</span> 
 <span style="color:#000000;">clock</span> 
 <span style="color:#000000;">端口到寄存器</span> 
 <span style="color:#000000;">CK</span> 
 <span style="color:#000000;">端的</span> 
 <span style="color:#000000;">network  delay</span> 
 <span style="color:#000000;">来自</span> 
 <span style="color:#000000;">sdc</span> 
 <span style="color:#000000;">中的 </span> 
 <span style="color:#000000;">set_clock_latency</span> 
 <span style="color:#000000;">设置；</span> 
</div> 
<div style="margin-left:.06in;text-align:left;"> 
 <span style="color:#000000;">post</span> 
 <span style="color:#000000;">CTS</span> 
 <span style="color:#000000;">update</span> 
 <span style="color:#000000;">IO latency</span> 
 <span style="color:#000000;">，</span> 
 <span style="color:#000000;">clock</span> 
 <span style="color:#000000;">就会自动的转换成</span> 
 <span style="color:#4075a9;">propagated</span> 
 <span style="color:#4075a9;">clock</span> 
 <span style="color:#000000;">，这时</span> 
 <span style="color:#000000;">network delay</span> 
 <span style="color:#000000;">就是实际时钟互连线网络的</span> 
 <span style="color:#000000;">RC extraction</span> 
 <span style="color:#000000;">delay</span> 
 <span style="color:#000000;">。</span> 
</div> 
<div style="margin-left:.06in;text-align:left;"> 
 <span style="color:#000000;">在实际设计中，</span> 
 <span style="color:#000000;">clock</span> 
 <span style="color:#000000;">起始于</span> 
 <span style="color:#000000;">ideal</span> 
 <span style="color:#000000;">模式，并以</span> 
 <span style="color:#000000;">propagated</span> 
 <span style="color:#000000;">模式结束。如下图所示：</span> 
</div> 
<div style="margin-left:.06in;text-align:left;"></div> 
<p><img alt="" class="left" height="747" src="https://images2.imgbox.com/f4/1a/LNraI82F_o.png" width="521"></p> 
<h2> <span style="color:#262626;"><strong>传统 </strong></span><span style="color:#262626;"><strong>CTS </strong></span><span style="color:#262626;"><strong>介绍</strong></span></h2> 
<p><span style="color:#000000;">对传统的</span><span style="color:#000000;">flop to flop</span><span style="color:#000000;">之间的电路，</span><span style="color:#000000;">setup</span><span style="color:#000000;">和</span><span style="color:#000000;">hold time</span><span style="color:#000000;">需要满足以下两个条件，如图所示：</span></p> 
<p><img alt="" height="527" src="https://images2.imgbox.com/16/4b/b4UO1cRD_o.png" width="937"></p> 
<p></p> 
<p style="margin-left:0in;text-align:left;"><span style="color:#000000;"><strong>Propagated clock</strong></span><span style="color:#000000;"><strong>:</strong></span></p> 
<p style="margin-left:0in;text-align:left;"><span style="color:#000000;">setup: L+ </span><span style="color:#000000;">D</span><span style="color:#000000;">max &lt; T + C</span></p> 
<p style="margin-left:0in;text-align:left;"><span style="color:#000000;">hold: L+ </span><span style="color:#000000;">D</span><span style="color:#000000;">min &gt; C</span></p> 
<p style="margin-left:0in;text-align:left;"><span style="color:#000000;"><strong>Ideal clock</strong></span><span style="color:#000000;"><strong>:</strong></span></p> 
<p style="margin-left:0in;text-align:left;"><span style="color:#000000;">setup: </span><span style="color:#000000;">D</span><span style="color:#000000;">max &lt; T</span></p> 
<p style="margin-left:0in;text-align:left;"><span style="color:#000000;">hold: </span><span style="color:#000000;">D</span><span style="color:#000000;">min &gt; 0</span></p> 
<p style="margin-left:0in;text-align:left;"><span style="color:#000000;">D</span><span style="color:#000000;">min &gt; 0 是一个永远成立的条件，在这个model下面，我们只需要保证logic path上的最大delay，也就是critical path上的delay比时钟周期快就行。</span></p> 
<p style="margin-left:0in;text-align:left;"><img alt="" height="592" src="https://images2.imgbox.com/8e/21/1NMvneLq_o.png" width="1200"></p> 
<p> <span style="color:#000000;">当一个时钟树有</span><span style="color:#000000;">N</span><span style="color:#000000;">个</span><span style="color:#000000;">sink</span><span style="color:#000000;">以后</span><span style="color:#000000;">，这里就有了</span><span style="color:#000000;">global </span><span style="color:#000000;">skew概念，完全balance的时钟树就很难做，clock skew变成各个flop之间的Launch和capture clock path的最大差值。</span></p> 
<p style="margin-left:0in;text-align:left;"><span style="color:#000000;"><strong>Propagated clock：</strong></span></p> 
<p style="margin-left:0in;text-align:left;"><span style="color:#000000;">setup: </span><span style="color:#000000;">D</span><span style="color:#000000;">max &lt; T - (L-C)</span></p> 
<p style="margin-left:0in;text-align:left;"><span style="color:#000000;">hold:  </span><span style="color:#000000;">D</span><span style="color:#000000;">min &gt; C </span><span style="color:#000000;">–</span><span style="color:#000000;"> L</span></p> 
<p style="margin-left:0in;text-align:left;"><span style="color:#000000;"><strong>Ideal clock：</strong></span></p> 
<p style="margin-left:0in;text-align:left;"><span style="color:#000000;">setup: </span><span style="color:#000000;">D</span><span style="color:#000000;">max&lt; T + skew</span></p> 
<p style="margin-left:0in;text-align:left;"><span style="color:#000000;">hold: </span><span style="color:#000000;">D</span><span style="color:#000000;">min &gt; skew</span></p> 
<h2> <span style="color:#262626;"><strong>CCOpt </strong></span><span style="color:#262626;"><strong>技术介绍</strong></span></h2> 
<p><img alt="" height="485" src="https://images2.imgbox.com/07/3b/lhfyZt7X_o.png" width="988"></p> 
<p></p> 
<div style="margin-left:.31in;text-align:left;">
  Ø 
 <span style="color:#000000;">通过减小clock skew来实现ideal和propagated clock收敛的做法已经不适合现在的先进工艺设计。由于OCV, clock gating, 以及clock的复杂性等因素导致两者之间有很大的clock timing gap，实现balanced的L和C几乎变成一个不可能的目标。</span> 
</div> 
<p></p> 
<div style="margin-left:.31in;text-align:left;">
  【关于OCV的介绍和应用可以参考下文：】 
</div> 
<div style="margin-left:.31in;text-align:left;"> 
 <a href="https://blog.csdn.net/m0_61003348/article/details/126694087?spm=1001.2014.3001.5502" title="OCV/AOCV/SOCV的介绍和应用_芯片后端工程师-ratel的博客-CSDN博客">OCV/AOCV/SOCV的介绍和应用_芯片后端工程师-ratel的博客-CSDN博客</a> 
</div> 
<p></p> 
<div style="margin-left:.31in;text-align:left;">
  Ø 
 <span style="color:#000000;">而</span> 
 <span style="color:#000000;">CCOpt</span> 
 <span style="color:#000000;">技术就放弃了这种减小clock skew的方法，而是将CTS和postCTS的timing optimize集合为一体，在优化data path的同时进行clock path的优化。根据timing情况自动调整时钟树各点的延迟，以达到合理利用skew来优化timing的目的。</span> 
</div> 
<h2 style="margin-left:.31in;text-align:left;"><span style="color:#000000;"><strong>CCOpt </strong></span><span style="color:#000000;"><strong>优化流程</strong></span></h2> 
<p><img alt="" height="885" src="https://images2.imgbox.com/cd/f3/M3L96Jt4_o.png" width="981"></p> 
<p> <img alt="" height="700" src="https://images2.imgbox.com/c5/ec/D8TmPnNr_o.png" width="1200"></p> 
<h2> <span style="color:#262626;"><strong>CCOpt </strong></span><span style="color:#262626;"><strong>技术介绍</strong></span></h2> 
<p><img alt="" height="833" src="https://images2.imgbox.com/9e/ce/XtZrK7Ej_o.png" width="1200"></p> 
<p> 如下图可以看到，ccopt技术通过做短T2达到整体timing meet的要求。</p> 
<p style="text-align:center;"><img alt="" src="https://images2.imgbox.com/f4/07/JzI5RHsW_o.png"></p> 
<p> </p> 
<h2> <span style="color:#262626;"><strong>CCOpt </strong></span><span style="color:#262626;"><strong>(Chain的介绍)</strong></span></h2> 
<p><img alt="" height="857" src="https://images2.imgbox.com/3b/51/GUGzlkno_o.png" width="1200"></p> 
<p> 主要可以分为两类：IO chain和Loop chain</p> 
<p>IO chain：</p> 
<p><img alt="" height="889" src="https://images2.imgbox.com/c6/a3/ZU2SHXu1_o.png" width="1200"></p> 
<h2>Loop chain：</h2> 
<p>可分为以下三种：</p> 
<p>1.普通loop chain</p> 
<p><img alt="" height="848" src="https://images2.imgbox.com/6e/61/1UhEdztP_o.png" width="1200"></p> 
<p></p> 
<p>2.带macro chain</p> 
<p><img alt="" height="864" src="https://images2.imgbox.com/cf/e0/vfdOa4Ur_o.png" width="1200"></p> 
<p> 3.带ICG chain</p> 
<p><img alt="" height="855" src="https://images2.imgbox.com/07/62/BeBNfzjh_o.png" width="1200"></p> 
<h2> <span style="color:#262626;"><strong>Worst chain analysis</strong></span></h2> 
<p> <img alt="" height="848" src="https://images2.imgbox.com/fb/2f/7CWf4uCy_o.png" width="1200"></p> 
<p><img alt="" height="910" src="https://images2.imgbox.com/fc/1e/Bcb46K2R_o.png" width="1200"></p> 
<p> <img alt="" height="919" src="https://images2.imgbox.com/c0/b9/YSESPgov_o.png" width="1200"></p> 
<p> <img alt="" height="849" src="https://images2.imgbox.com/be/74/FMJAjnGn_o.png" width="1200"></p> 
<p> <img alt="" height="803" src="https://images2.imgbox.com/22/58/hM7UBrFr_o.png" width="1200"></p> 
<div style="margin-left:.31in;text-align:left;"></div> 
<h2 style="margin-left:0in;text-align:left;">常用命令介绍：</h2> 
<p style="margin-left:0in;text-align:left;"><span style="color:#000000;">自定义时钟网络边界</span></p> 
<p style="margin-left:0in;text-align:left;"><span style="color:#000000;">set_ccopt_property</span> <span style="color:#000000;">sink_type</span><span style="color:#000000;"> {stop, ignore, exclude} –pin</span></p> 
<p style="margin-left:0in;text-align:left;"><span style="color:#000000;">stop</span><span style="color:#000000;">：</span><span style="color:#000000;">cts</span><span style="color:#000000;">在该点停止，把这个</span><span style="color:#000000;">pin</span><span style="color:#000000;">作为</span><span style="color:#000000;">skew group</span><span style="color:#000000;">的</span><span style="color:#000000;">sink</span><span style="color:#000000;">，会对其做</span><span style="color:#000000;">balance</span></p> 
<p style="margin-left:0in;text-align:left;"><span style="color:#000000;">ignore</span><span style="color:#000000;">：</span><span style="color:#000000;">cts</span><span style="color:#000000;">只对这个</span><span style="color:#000000;">pin</span><span style="color:#000000;">做</span><span style="color:#000000;">cluster</span><span style="color:#000000;">，不做</span><span style="color:#000000;">balance</span><span style="color:#000000;">，</span><span style="color:#000000;">ignore pin</span><span style="color:#000000;">不会作为任何</span><span style="color:#000000;">skew group</span><span style="color:#000000;">的</span><span style="color:#000000;">sink</span></p> 
<p style="margin-left:0in;text-align:left;"><span style="color:#000000;">e</span><span style="color:#000000;">xclude</span><span style="color:#000000;">：</span><span style="color:#000000;">cts</span><span style="color:#000000;">在该点停止，该点不是时钟的一部分，不对其做</span><span style="color:#000000;">balance </span></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/a1ed09a2b31771afff4a073fd6c3034f/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">三、Kafka的消费全流程</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/bb9ccee8195cf496e9f250fe793c1204/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">基于51单片机的数字时钟设计</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>