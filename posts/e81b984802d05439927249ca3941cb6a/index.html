<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【语义分割】算法理论梳理：基础理论/常见网络FCN、DeepLab、LR-ASPP、UNet、U2Net - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="【语义分割】算法理论梳理：基础理论/常见网络FCN、DeepLab、LR-ASPP、UNet、U2Net" />
<meta property="og:description" content="目录
语义分割
1. 常见数据集格式
2. 常见语义分割评价指标
转置卷积
1. 运算步骤（s为步长，p为padding，k为卷积核尺寸）
2. 优势以及存在的问题
膨胀卷积
1. Gridding Effect网格效应
2. 小目标分割效果差的问题
3. 膨胀卷积的一些特点
FCN
DeepLabV1
DeepLabV2
DeepLabV3
LR-ASPP
UNet
U2Net
语义分割 语义分割（semantic segmentation），对每个像素进行分类；区别于实例分割和全景分割。
1. 常见数据集格式 PASCAL VOC：调色板（PNG图片，P模式，palette），边缘为255，损失计算过程忽略255MS COCO：针对图像中的每一个目标都记录了多边形坐标（polygons）分割结果：mask蒙版，每个像素数值对应类别索引 2. 常见语义分割评价指标 Pixel Accuracy（Global Acc）：总共预测正确的像素个数 / 目标的总像素个数mena Accuracy：每个目标的Acc，然后目标求均值mean IoU：每个目标的IoU再求平均（常用，如下图所示） eg：目标A的IoU计算图示 转置卷积 💡 Transposed Convolution，转置卷积，并不是卷积的逆运算，主要用于upsampling。图像分割和图像生成等任务需要图像恢复到原尺寸，这个将图像由小分辨率映射到大分辨率的尺寸恢复操作，叫做上采样。（待补充图像处理中常用的上采样操作，eg：最近邻插值、线性插值、双线性插值、双三次插值） 1. 运算步骤（s为步长，p为padding，k为卷积核尺寸） 在输入特征图元素间填充s-1行，0列
在输入特征图四周填充k-p-1行，0列 将卷积核参数上下、左右翻转
做正常卷积运算（padding0，stride1）
eg: s=1,p=0,k=3；step1：元素间填充0行；step2：四周填充2行； step3：卷积核参数上下左右反转；step4：正常卷积 转置卷积操作后特征图的大小可以通过如下公式计算：
其中stride[0]表示高度方向的stride，padding[0]表示高度方向的padding，kernel_size[0]表示高度方向的kernel_size，索引[1]都表示宽度方向上的。通过上面公式可以看出padding越大，输出的特征矩阵高、宽越小，你可以理解为正向卷积过程中进行了padding然后得到了特征图，现在使用转置卷积还原到原来高、宽后要把之前的padding减掉。
原文链接：https://blog.csdn.net/qq_37541097/article/details/120709865
2. 优势以及不足 与传统的上采样方法相比，转置卷积具有可学习的参数，上采样方式并非预设的插值方法。可通过网络来获取最优的上采样方式应用场景： 图像生成任务DCGAN中，生成器将随机输入变成一个全尺寸图片，这里用到了转置卷积语义分割中，解码器中使用转置卷积，eg：FCN、UNetCNN可视化，通过转置卷积将CNN的特征图还原到像素空间，以观察特定特征图对哪些模式的图像敏感但是，转置卷积会导致生成图像中出现网格/棋盘效应（checkerboard artifacts） 膨胀卷积 💡 Diated convolution又叫做空洞卷积，在保持卷积参数量不变的情况下：①增大卷积感受野；②保持原输入特征图长和宽不改变。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/e81b984802d05439927249ca3941cb6a/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-08-25T15:42:43+08:00" />
<meta property="article:modified_time" content="2022-08-25T15:42:43+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【语义分割】算法理论梳理：基础理论/常见网络FCN、DeepLab、LR-ASPP、UNet、U2Net</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p id="main-toc"><strong>目录</strong></p> 
<p id="%E8%AF%AD%E4%B9%89%E5%88%86%E5%89%B2-toc" style="margin-left:0px;"><a href="#%E8%AF%AD%E4%B9%89%E5%88%86%E5%89%B2" rel="nofollow">语义分割</a></p> 
<p id="1.%20%E5%B8%B8%E8%A7%81%E6%95%B0%E6%8D%AE%E9%9B%86%E6%A0%BC%E5%BC%8F-toc" style="margin-left:40px;"><a href="#1.%20%E5%B8%B8%E8%A7%81%E6%95%B0%E6%8D%AE%E9%9B%86%E6%A0%BC%E5%BC%8F" rel="nofollow">1. 常见数据集格式</a></p> 
<p id="2.%20%E5%B8%B8%E8%A7%81%E8%AF%AD%E4%B9%89%E5%88%86%E5%89%B2%E8%AF%84%E4%BB%B7%E6%8C%87%E6%A0%87-toc" style="margin-left:40px;"><a href="#2.%20%E5%B8%B8%E8%A7%81%E8%AF%AD%E4%B9%89%E5%88%86%E5%89%B2%E8%AF%84%E4%BB%B7%E6%8C%87%E6%A0%87" rel="nofollow">2. 常见语义分割评价指标</a></p> 
<p id="%E8%BD%AC%E7%BD%AE%E5%8D%B7%E7%A7%AF-toc" style="margin-left:0px;"><a href="#%E8%BD%AC%E7%BD%AE%E5%8D%B7%E7%A7%AF" rel="nofollow">转置卷积</a></p> 
<p id="1.%20%E8%BF%90%E7%AE%97%E6%AD%A5%E9%AA%A4%EF%BC%88s%E4%B8%BA%E6%AD%A5%E9%95%BF%EF%BC%8Cp%E4%B8%BApadding%EF%BC%8Ck%E4%B8%BA%E5%8D%B7%E7%A7%AF%E6%A0%B8%E5%B0%BA%E5%AF%B8%EF%BC%89-toc" style="margin-left:40px;"><a href="#1.%20%E8%BF%90%E7%AE%97%E6%AD%A5%E9%AA%A4%EF%BC%88s%E4%B8%BA%E6%AD%A5%E9%95%BF%EF%BC%8Cp%E4%B8%BApadding%EF%BC%8Ck%E4%B8%BA%E5%8D%B7%E7%A7%AF%E6%A0%B8%E5%B0%BA%E5%AF%B8%EF%BC%89" rel="nofollow">1. 运算步骤（s为步长，p为padding，k为卷积核尺寸）</a></p> 
<p id="%C2%A02.%20%E4%BC%98%E5%8A%BF%E4%BB%A5%E5%8F%8A%E5%AD%98%E5%9C%A8%E7%9A%84%E9%97%AE%E9%A2%98-toc" style="margin-left:40px;"><a href="#%C2%A02.%20%E4%BC%98%E5%8A%BF%E4%BB%A5%E5%8F%8A%E5%AD%98%E5%9C%A8%E7%9A%84%E9%97%AE%E9%A2%98" rel="nofollow">2. 优势以及存在的问题</a></p> 
<p id="%E8%86%A8%E8%83%80%E5%8D%B7%E7%A7%AF-toc" style="margin-left:0px;"><a href="#%E8%86%A8%E8%83%80%E5%8D%B7%E7%A7%AF" rel="nofollow">膨胀卷积</a></p> 
<p id="1.%20Gridding%20Effect%E7%BD%91%E6%A0%BC%E6%95%88%E5%BA%94%E4%BB%A5%E5%8F%8A%E5%B0%8F%E7%9B%AE%E6%A0%87%E5%88%86%E5%89%B2%E6%95%88%E6%9E%9C%E5%B7%AE-toc" style="margin-left:40px;"><a href="#1.%20Gridding%20Effect%E7%BD%91%E6%A0%BC%E6%95%88%E5%BA%94%E4%BB%A5%E5%8F%8A%E5%B0%8F%E7%9B%AE%E6%A0%87%E5%88%86%E5%89%B2%E6%95%88%E6%9E%9C%E5%B7%AE" rel="nofollow">1. Gridding Effect网格效应</a></p> 
<p id="%C2%A02.%20%E5%B0%8F%E7%9B%AE%E6%A0%87%E5%88%86%E5%89%B2%E6%95%88%E6%9E%9C%E5%B7%AE%E7%9A%84%E9%97%AE%E9%A2%98-toc" style="margin-left:40px;"><a href="#%C2%A02.%20%E5%B0%8F%E7%9B%AE%E6%A0%87%E5%88%86%E5%89%B2%E6%95%88%E6%9E%9C%E5%B7%AE%E7%9A%84%E9%97%AE%E9%A2%98" rel="nofollow">2. 小目标分割效果差的问题</a></p> 
<p id="3.%20%E8%86%A8%E8%83%80%E5%8D%B7%E7%A7%AF%E7%9A%84%E4%B8%80%E4%BA%9B%E7%89%B9%E7%82%B9-toc" style="margin-left:40px;"><a href="#3.%20%E8%86%A8%E8%83%80%E5%8D%B7%E7%A7%AF%E7%9A%84%E4%B8%80%E4%BA%9B%E7%89%B9%E7%82%B9" rel="nofollow">3. 膨胀卷积的一些特点</a></p> 
<p id="FCN-toc" style="margin-left:0px;"><a href="#FCN" rel="nofollow">FCN</a></p> 
<p id="DeepLabV1-toc" style="margin-left:0px;"><a href="#DeepLabV1" rel="nofollow">DeepLabV1</a></p> 
<p id="DeepLabV2-toc" style="margin-left:0px;"><a href="#DeepLabV2" rel="nofollow">DeepLabV2</a></p> 
<p id="DeepLabV3-toc" style="margin-left:0px;"><a href="#DeepLabV3" rel="nofollow">DeepLabV3</a></p> 
<p id="LR-ASPP-toc" style="margin-left:0px;"><a href="#LR-ASPP" rel="nofollow">LR-ASPP</a></p> 
<p id="UNet-toc" style="margin-left:0px;"><a href="#UNet" rel="nofollow">UNet</a></p> 
<p id="U2Net-toc" style="margin-left:0px;"><a href="#U2Net" rel="nofollow">U2Net</a></p> 
<hr> 
<h2 id="%E8%AF%AD%E4%B9%89%E5%88%86%E5%89%B2">语义分割</h2> 
<blockquote> 
 <p>语义分割（semantic segmentation），对每个像素进行分类；区别于实例分割和全景分割。</p> 
</blockquote> 
<h3 id="1.%20%E5%B8%B8%E8%A7%81%E6%95%B0%E6%8D%AE%E9%9B%86%E6%A0%BC%E5%BC%8F">1. 常见数据集格式</h3> 
<ul><li>PASCAL VOC：调色板（PNG图片，P模式，palette），边缘为255，损失计算过程忽略255</li><li>MS COCO：针对图像中的每一个目标都记录了多边形坐标（polygons）</li><li>分割结果：mask蒙版，每个像素数值对应类别索引</li></ul> 
<h3 id="2.%20%E5%B8%B8%E8%A7%81%E8%AF%AD%E4%B9%89%E5%88%86%E5%89%B2%E8%AF%84%E4%BB%B7%E6%8C%87%E6%A0%87">2. 常见语义分割评价指标</h3> 
<ul><li>Pixel Accuracy（Global Acc）：总共预测正确的像素个数 / 目标的总像素个数</li><li>mena Accuracy：每个目标的Acc，然后<strong>目标求均值</strong></li><li><strong>mean IoU：</strong>每个目标的IoU再求平均（常用，如下图所示）</li></ul> 
<div class="img-center"> 
 <figure class="image"> 
  <img alt="" height="217" src="https://images2.imgbox.com/10/9b/lKHFbIVV_o.png" width="263"> 
  <figcaption>
    eg：目标A的IoU计算图示 
  </figcaption> 
 </figure> 
</div> 
<p></p> 
<h2 id="%E8%BD%AC%E7%BD%AE%E5%8D%B7%E7%A7%AF">转置卷积</h2> 
<blockquote> 
 <p>💡 Transposed Convolution，转置卷积，并不是卷积的逆运算，主要用于<span style="color:#be191c;"><strong>upsampling。</strong></span>图像分割和图像生成等任务需要图像恢复到原尺寸，这个将图像由小分辨率映射到大分辨率的尺寸恢复操作，叫做上采样。<strong><span style="background-color:#d4e9d5;">（待补充<u>图像处理中</u>常用的上采样操作，eg：最近邻插值、线性插值、双线性插值、双三次插值）</span></strong> </p> 
</blockquote> 
<h3 id="1.%20%E8%BF%90%E7%AE%97%E6%AD%A5%E9%AA%A4%EF%BC%88s%E4%B8%BA%E6%AD%A5%E9%95%BF%EF%BC%8Cp%E4%B8%BApadding%EF%BC%8Ck%E4%B8%BA%E5%8D%B7%E7%A7%AF%E6%A0%B8%E5%B0%BA%E5%AF%B8%EF%BC%89">1. 运算步骤（s为步长，p为padding，k为卷积核尺寸）</h3> 
<ul><li> <p>在输入特征图元素<strong>间填充s-1行</strong>，0列</p> </li><li> <p>在输入特征图<strong>四周填充k-p-1行</strong>，0列 </p> </li><li> <p>将卷积核参数上下、左右翻转</p> </li><li> <p>做正常卷积运算（padding0，stride1）</p> </li></ul> 
<div class="img-center"> 
 <figure class="image"> 
  <img alt="" height="206" src="https://images2.imgbox.com/60/ae/ipE7Xnx3_o.gif" width="183"> 
  <figcaption> 
   <strong>eg: s=1,p=0,k=3；</strong>step1：元素间填充0行；step2：四周填充2行； 
   <br> step3：卷积核参数上下左右反转；step4：正常卷积 
  </figcaption> 
 </figure> 
</div> 
<p></p> 
<p>转置卷积操作后特征图的大小可以通过如下公式计算：</p> 
<p class="img-center"><img alt="" height="84" src="https://images2.imgbox.com/9b/62/C5SrdtPa_o.png" width="579"></p> 
<p>其中stride[0]表示高度方向的stride，padding[0]表示高度方向的padding，kernel_size[0]表示高度方向的kernel_size，索引[1]都表示宽度方向上的。通过上面公式可以看出padding越大，输出的特征矩阵高、宽越小，<strong>你可以理解为正向卷积过程中进行了padding然后得到了特征图，现在使用转置卷积还原到原来高、宽后要把之前的padding减掉。</strong><br> 原文链接：<a class="link-info" href="https://blog.csdn.net/qq_37541097/article/details/120709865" title="https://blog.csdn.net/qq_37541097/article/details/120709865">https://blog.csdn.net/qq_37541097/article/details/120709865</a></p> 
<h3 id="%C2%A02.%20%E4%BC%98%E5%8A%BF%E4%BB%A5%E5%8F%8A%E5%AD%98%E5%9C%A8%E7%9A%84%E9%97%AE%E9%A2%98">2. 优势以及不足</h3> 
<ul><li>与传统的上采样方法相比，转置卷积具有可学习的参数，上采样方式并非预设的插值方法。可通过网络来获取最优的上采样方式</li><li>应用场景： 
  <ul><li>图像生成任务DCGAN中，生成器将随机输入变成一个全尺寸图片，这里用到了转置卷积</li><li>语义分割中，解码器中使用转置卷积，eg：FCN、UNet</li><li>CNN可视化，通过转置卷积将CNN的特征图还原到像素空间，以观察特定特征图对哪些模式的图像敏感</li></ul></li><li>但是，转置卷积会导致生成图像中出现<strong>网格/棋盘效应（checkerboard artifacts）</strong></li></ul> 
<h2 id="%E8%86%A8%E8%83%80%E5%8D%B7%E7%A7%AF">膨胀卷积</h2> 
<blockquote> 
 <p>💡 <span style="color:#be191c;"><strong>Diated convolution又叫做空洞卷积</strong></span>，在保持卷积参数量不变的情况下：<strong>①增大卷积感受野；②保持原输入特征图长和宽不改变</strong>。</p> 
 <p>举个例子：VGG网络中，maxpooling下采样倍率太大，<strong>丢失了细节信息</strong>，但去掉maxpooling层的话（pooling操作不可逆），导致特征图对应原图感受野减小，<strong>无法重构小的物体图像</strong>。因此引入膨胀卷积。<u>当然将普通的卷积stride步长设为大于1，也会达到增加感受野的效果，但是<strong>stride大于1就会导致downsampling</strong>，图像尺寸变小（在先减小再增大尺寸的过程中，有一些信息损失掉）</u></p> 
</blockquote> 
<h3 id="1.%20Gridding%20Effect%E7%BD%91%E6%A0%BC%E6%95%88%E5%BA%94%E4%BB%A5%E5%8F%8A%E5%B0%8F%E7%9B%AE%E6%A0%87%E5%88%86%E5%89%B2%E6%95%88%E6%9E%9C%E5%B7%AE">1. Gridding Effect网格效应</h3> 
<div class="img-center"> 
 <figure class="image"> 
  <img alt="" src="https://images2.imgbox.com/98/4b/CTWmve1P_o.png"> 
  <figcaption>
    eg：膨胀系数为2的3*3kernal经过多次叠加，会出现gridding effect（损失信息的连续性） 
  </figcaption> 
 </figure> 
</div> 
<ul><li><strong>💡 解决办法：Hybrid Dilated Convolution (HDC) （类似于卷积设计的标准化）</strong> 
  <ul><li>叠加卷积的膨胀银子不能有大于1的公约数，eg：[2,4,6]会出现gridding effect</li><li>膨胀因子应设计成锯齿状结构，eg：[1,2,5,1,2,5]</li><li>最大膨胀因子应满足公式：</li></ul></li></ul> 
<p class="img-center"><img alt="" height="30" src="https://images2.imgbox.com/db/4c/BvYpWImg_o.png" width="312"></p> 
<h3 id="%C2%A02.%20%E5%B0%8F%E7%9B%AE%E6%A0%87%E5%88%86%E5%89%B2%E6%95%88%E6%9E%9C%E5%B7%AE%E7%9A%84%E9%97%AE%E9%A2%98"> 2. 小目标分割效果差</h3> 
<blockquote> 
 <p>仅采用大 dilation rate 的信息或许<strong>只对一些大物体分割有效果，而对小物体来说可能则有弊无利了</strong>。锯齿状本身的性质就比较好的来同时满足小物体大物体的分割要求(小 dilation rate 来关心近距离信息，大 dilation rate 来关心远距离信息)。</p> 
</blockquote> 
<h3 id="3.%20%E8%86%A8%E8%83%80%E5%8D%B7%E7%A7%AF%E7%9A%84%E4%B8%80%E4%BA%9B%E7%89%B9%E7%82%B9">3. 膨胀卷积的一些特点</h3> 
<ul><li>膨胀卷积与普通卷积的<strong>相同点</strong>在于：卷积核的大小是一样的，在神经网络中即参数数量不变，区别在于膨胀卷积具有更大的感受野。</li><li>对比传统的conv操作，3层3x3的卷积加起来，stride为1的话，只能达到(kernel-1)*layer+1=7的感受野，也就是和层数layer成线性关系，而<strong>dilated conv的感受野是指数级</strong>的增长。</li><li>适用情况：在图像需要<strong>全局信息、语音文本需要较长的sequence信息</strong>依赖的问题中，都能很好的应用dilated conv。</li></ul> 
<h2 id="FCN">FCN</h2> 
<blockquote> 
 <p>💡<span style="color:#0d0016;"><strong> （CVPR 2015）</strong></span>首个端到端的针对图像分割（像素级预测）的<strong><span style="color:#be191c;">全卷积网络</span></strong>。主要将分类网络中的全连接层替换成卷积层。地位类比于目标检测中的Faster R-CNN。</p> 
</blockquote> 
<p>原文链接：<a class="link-info" href="https://www.cv-foundation.org/openaccess/content_cvpr_2015/papers/Long_Fully_Convolutional_Networks_2015_CVPR_paper.pdf" rel="nofollow" title="https://www.cv-foundation.org/openaccess/content_cvpr_2015/papers/Long_Fully_Convolutional_Networks_2015_CVPR_paper.pdf"></a><a class="link-info" href="https://www.cv-foundation.org/openaccess/content_cvpr_2015/papers/Long_Fully_Convolutional_Networks_2015_CVPR_paper.pdf" rel="nofollow" title="Fully Convolutional Networks for Semantic Segmentation">Fully Convolutional Networks for Semantic Segmentation</a></p> 
<h3>1. 主要贡献</h3> 
<ul><li>解决了输入大小尺寸限制问题（全连接层要求输入节点个数是固定的，所以分类网络中输入图片大小也是固定的，虽然后来有使用全局池化层来解决这个问题）</li><li>开创了语义分割的先河，实现了像素级别的分类预测（端到端）</li><li>技术上：全连接卷积化、跳跃连接、反卷积</li></ul> 
<h2 id="DeepLabV1">DeepLabV1</h2> 
<h2 id="DeepLabV2">DeepLabV2</h2> 
<h2 id="DeepLabV3">DeepLabV3</h2> 
<h2 id="LR-ASPP">LR-ASPP</h2> 
<h2 id="UNet">UNet</h2> 
<h2 id="U2Net">U2Net</h2> 
<p class="img-center"><img alt="" height="469" src="https://images2.imgbox.com/37/32/26xFJC4E_o.png" width="792"></p> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/53ac81b6ecd7e41efb799967391477f6/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Android免Root执行脚本，无Root可以修改权限的目录 :/data/local/tmp</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/7411403a812caba0f4ea4f8bbeab2ded/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">数据库中怎么删除表中数据？</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>