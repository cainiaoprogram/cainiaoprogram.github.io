<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>python解包 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="python解包" />
<meta property="og:description" content="解包在英文里叫做 Unpacking，Python 中的解包是自动完成的，例如：
&gt;&gt;&gt; a, b, c = [1,2,3] &gt;&gt;&gt; a 1 &gt;&gt;&gt; b 2 &gt;&gt;&gt; c 3 除了列表对象可以解包之外，任何可迭代对象都支持解包，可迭代对象包括元组、字典、集合、字符串、生成器等实现了__next__方法的一切对象。
元组解包
&gt;&gt;&gt; a,b,c = (1,2,3) &gt;&gt;&gt; a 1 &gt;&gt;&gt; b 2 &gt;&gt;&gt; c 3 字符串解包
&gt;&gt;&gt; a,b,c = &#34;abc&#34; &gt;&gt;&gt; a &#39;a&#39; &gt;&gt;&gt; b &#39;b&#39; &gt;&gt;&gt; c &#39;c&#39; 字典解包
&gt;&gt;&gt; a,b,c = {&#34;a&#34;:1, &#34;b&#34;:2, &#34;c&#34;:3} &gt;&gt;&gt; a &#39;a&#39; &gt;&gt;&gt; b &#39;b&#39; &gt;&gt;&gt; c &#39;c&#39; 字典解包后，只会把字典的 key 取出来，value 则丢掉了。
如果在解包过程中，遇到左边变量个数小于右边可迭代对象中元素的个数时该怎么办？ 在 Python2 中，如果等号左边变量的个数不等于右边可迭代对象中元素的个数，是不允许解包的。但在 Python3 可以这么做了。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/279771ef3991eb504361a170b5054feb/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2018-08-13T22:59:20+08:00" />
<meta property="article:modified_time" content="2018-08-13T22:59:20+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">python解包</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p style="text-indent:50px;">解包在英文里叫做 Unpacking，Python 中的解包是自动完成的，例如：</p> 
<pre class="has"><code class="language-python">&gt;&gt;&gt; a, b, c = [1,2,3]
&gt;&gt;&gt; a
1
&gt;&gt;&gt; b
2
&gt;&gt;&gt; c
3</code></pre> 
<p>除了列表对象可以解包之外，任何可迭代对象都支持解包，可迭代对象包括元组、字典、集合、字符串、生成器等实现了<code>__next__</code>方法的一切对象。</p> 
<p>元组解包</p> 
<pre class="has"><code class="language-python">&gt;&gt;&gt; a,b,c = (1,2,3)
&gt;&gt;&gt; a
1
&gt;&gt;&gt; b
2
&gt;&gt;&gt; c
3
</code></pre> 
<p>字符串解包</p> 
<pre class="has"><code class="language-ruby">&gt;&gt;&gt; a,b,c = "abc"
&gt;&gt;&gt; a
'a'
&gt;&gt;&gt; b
'b'
&gt;&gt;&gt; c
'c'</code></pre> 
<p>字典解包</p> 
<pre class="has"><code class="language-python">&gt;&gt;&gt; a,b,c = {"a":1, "b":2, "c":3}
&gt;&gt;&gt; a
'a'
&gt;&gt;&gt; b
'b'
&gt;&gt;&gt; c
'c'</code></pre> 
<p>字典解包后，只会把字典的 key 取出来，value 则丢掉了。</p> 
<p style="text-indent:50px;">如果在解包过程中，遇到左边变量个数小于右边可迭代对象中元素的个数时该怎么办？ 在 Python2 中，如果等号左边变量的个数不等于右边可迭代对象中元素的个数，是不允许解包的。但在 Python3 可以这么做了。</p> 
<pre class="has"><code class="language-python">&gt;&gt;&gt; a, b, *c = [1,2,3,4]
&gt;&gt;&gt; a
1
&gt;&gt;&gt; b
2
&gt;&gt;&gt; c
[3, 4]
&gt;&gt;&gt;</code></pre> 
<p>这种语法就是在某个变量面前加一个星号，而且这个星号可以放在任意变量，每个变量都分配一个元素后，剩下的元素都分配给这个带星号的变量</p> 
<pre class="has"><code class="language-python">&gt;&gt;&gt; a, *b, c = [1,2,3,4]
&gt;&gt;&gt; a
1
&gt;&gt;&gt; b
[2, 3]
&gt;&gt;&gt; c
4</code></pre> 
<p>这种语法有什么好处呢？它使得你的代码写起来更简洁，比如上面例子，在 Python2 中该怎么操作呢？</p> 
<pre class="has"><code class="language-python">&gt;&gt;&gt; n = [1,2,3,4]
# 使用切片操作
&gt;&gt;&gt; a, b, c = n[0], n[1:-1], n[-1]
&gt;&gt;&gt; a
1
&gt;&gt;&gt; b
[2, 3]
&gt;&gt;&gt; c
4</code></pre> 
<p>以上是表达式解包的一些操作，接下来介绍函数调用时的解包操作。函数调用时，有时你可能会用到两个符号：星号<code>*</code>和 双星号<code>**</code>。</p> 
<pre class="has"><code>&gt;&gt;&gt; def func(a,b,c):
...     print(a,b,c)
...
&gt;&gt;&gt; func(1,2,3)
1 2 3</code></pre> 
<p>func 函数定义了三个位置参数 a，b，c，调用该函数必须传入三个参数，除此之外，你也可以传入包含有3个元素的可迭代对象，</p> 
<pre class="has"><code>&gt;&gt;&gt; func(*[1,2,3])
1 2 3
&gt;&gt;&gt; func(*(1,2,3))
1 2 3
&gt;&gt;&gt; func(*"abc")
a b c
&gt;&gt;&gt; func(*{"a":1,"b":2,"c":3})
a b c</code></pre> 
<p>函数被调用的时候，使用星号 <code>*</code> 解包一个可迭代对象作为函数的参数。字典对象，可以使用两个星号，解包之后将作为关键字参数传递给函数</p> 
<pre class="has"><code>&gt;&gt;&gt; func(**{"a":1,"b":2,"c":3})
1 2 3</code></pre> 
<p>看到了吗？和上面例子的区别是多了一个星号，结果完全不一样，原因是什么？ 答案是<code>**</code> 符号作用的对象是字典对象，它会自动解包成关键字参数 key=value 的格式：</p> 
<pre class="has"><code>&gt;&gt;&gt; func(a=1,b=2,c=3)
1 2 3</code></pre> 
<p>如果字典对象中的 key 不是 a，b，c，会出现什么情况？请读者自行测试。</p> 
<p>总结一下，一个星号可作用于所有的可迭代对象，称为迭代器解包操作，作为位置参数传递给函数，两个星号只能作用于字典对象，称之为字典解包操作，作为关键字参数传递给函数。使用 <code>*</code>和 <code>**</code> 的解包的好处是能节省代码量，使得代码看起来更优雅，不然你得这样写：</p> 
<pre class="has"><code>&gt;&gt;&gt; d = {"a":1, "b":2, "c":3}
&gt;&gt;&gt; func(a = d['a'], b=d['b'], c=d['c'])
1 2 3
&gt;&gt;&gt;</code></pre> 
<p>到这里，解包还没介绍完，因为 Python3.5，也就是 PEP 448 对解包操作做了进一步扩展， 在 3.5 之前的版本，函数调用时，一个函数中解包操作只允许一个<code>*</code> 和 一个<code>**</code>。从 3.5 开始，在函数调用中，可以有任意多个解包操作，例如：</p> 
<pre class="has"><code># Python 3.4 中 print 函数 不允许多个 * 操作
&gt;&gt;&gt; print(*[1,2,3], *[3,4])
  File "&lt;stdin&gt;", line 1
    print(*[1,2,3], *[3,4])
                    ^
SyntaxError: invalid syntax
&gt;&gt;&gt;</code></pre> 
<p>再来看看 python3.5以上版本</p> 
<pre class="has"><code># 可以使用任意多个解包操作
&gt;&gt;&gt; print(*[1], *[2], 3)
1 2 3</code></pre> 
<p>从 3.5 开始可以接受多个解包，于此同时，解包操作除了用在函数调用，还可以作用在表达式中。</p> 
<pre class="has"><code>&gt;&gt;&gt; *range(4), 4
(0, 1, 2, 3, 4)
&gt;&gt;&gt; [*range(4), 4]
[0, 1, 2, 3, 4]
&gt;&gt;&gt; {*range(4), 4}
{0, 1, 2, 3, 4}
&gt;&gt;&gt; {'x': 1, **{'y': 2}}
{'x': 1, 'y': 2}</code></pre> 
<p>新的语法使得我们的代码更加优雅了，例如拼接两个列表可以这样：</p> 
<pre class="has"><code>&gt;&gt;&gt; list1 = [1,2,3]
&gt;&gt;&gt; list2 = range(3,6)
&gt;&gt;&gt; [*list1, *list3]
[1, 2, 3, 3, 4, 5]
&gt;&gt;&gt;</code></pre> 
<p>可不可以直接用 <code>+</code> 操作呢？不行，因为 list 类型无法与 range 对象相加，你必须先将 list2 强制转换为 list 对象才能做 <code>+</code>操作，这个留给读者自行验证。</p> 
<p>再来看一个例子：如何优雅的合并两个字典</p> 
<pre class="has"><code>&gt;&gt;&gt; a = {"a":1, "b":2}
&gt;&gt;&gt; b = {"c":3, "d":4}
&gt;&gt;&gt; {**a, **b}
{'a': 1, 'b': 2, 'c': 3, 'd': 4}</code></pre> 
<p>在3.5之前的版本，你不得不写更多的代码：</p> 
<pre class="has"><code>&gt;&gt;&gt; import copy
&gt;&gt;&gt;
&gt;&gt;&gt; c = copy.deepcopy(a)
&gt;&gt;&gt; c.update(b)
&gt;&gt;&gt; c
{'a': 1, 'b': 2, 'c': 3, 'd': 4}</code></pre> 
<p>到此，关于 Python 解包给你介绍完了，如果本文对你有收获，请点赞、转发支持。</p> 
<p>最后给你总结一下：</p> 
<ol><li> <p>自动解包支持一切可迭代对象</p> </li><li> <p>python3中，支持更高级的解包操作，用星号操作使得等号左边的变量个数可以少于右边迭代对象中元素的个数。</p> </li><li> <p>函数调用时，可以用 * 或者<em> **</em> 解包可迭代对象，作为参数传递</p> </li><li> <p>python3.5，函数调用和表达式中可支持更多的解包操作。</p> </li></ol>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/e4f685759f7dd610ee7de649f4afc99d/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">springboot vue 登陆发送请求（跨域问题）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/d4fc766e2f7be5dcbe1532240b03c1ab/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">02 DIY流星观测站——手把手搭建指南</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>