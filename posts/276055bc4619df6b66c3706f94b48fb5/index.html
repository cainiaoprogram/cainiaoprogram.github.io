<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Notepad&#43;&#43;插件NppFTP安装使用及配置文件说明 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="Notepad&#43;&#43;插件NppFTP安装使用及配置文件说明" />
<meta property="og:description" content="1.下载NppFTP
2.把压缩文档中的bin目录下的两个文件解压到notepad&#43;&#43;的plugin目录下
3.重新启动notepad&#43;&#43;即安装成功
插件使用：
1.notepad&#43;&#43;的“插件”菜单，鼠标悬停在“NppFTP”项上，在出来的下级菜单中选中“ShowNppFTP Window”
2.在notepad&#43;&#43;右侧会出现一个窗口，此时此窗口工具栏上按钮都是灰色的，点击工具栏上的”&gt;&gt;”按钮，鼠标悬停在弹出来菜单中的“settings”菜单项上，在弹出来的自己菜单中选择“Profile Setting”，出现“Profile Setting”对话框
3.在对话框最左下角点击“Add New”，在弹出对话框中输入这个ftp配置文件（profile）的名称，点击确定，建立好新配置文件的名称
4.然后在左侧点击刚才建立的配置文件，然后右侧框都由灰色变成可写入状态；在“hostname”中填入ftp主机（ip地址或者域名），“Username”和“Password”中填入ftp用户名和密码，然后直接点击对话框最下方的“close”即可完成配置
5.此时回到notepad&#43;&#43;的主页面，看右侧NppFTP的工具栏第一按钮已经成为蓝色，点击之后选择刚才编辑的ftp配置文件，就开始连接到ftp服务器上了。
6.浏览ftp服务器文件操作和一般ftp文件无区别，遇到要编辑的文件直接双击打开，NppFTP会自动下载下来打开，编辑完毕之后按Ctrl&#43;S保存即可自动上传到服务器上。
如果服务器上没有装vsftpd，很简单，sudo apt-get install vsftpfd 即可
需要配置下文件sudo vim /etc/vsftpd.conf,
write_enable = YES ascii_upload_enable = YES ascii_download_enable = YES
这里我使用的是不是匿名登录（直接使用其中一个帐号登录），所以没有使能相关选项
还要记得sudo service vsftpd restart 一下
/etc/vsftpd/vsftpd.conf文件详解，可以对应自己的需求进行修改 #################匿名权限控 制###############
anonymous_enable=YES　#是否启用匿名用户 no_anon_password=YES #匿名用户login时不询问口令
下面这四个主要语句控制这文件和文件夹的上传、下载、创建、删除和重命名。 anon_upload_enable=（yes/no)； #控制匿名用户对文件（非目录）上传权限。 anon_world_readable_only=（yes/no）； #控制匿名用户对文件的下载权限 anon_mkdir_write_enable=（yes/no）； #控制匿名用户对文件夹的创建权限 anon_other_write_enable=（yes/no）； #控制匿名用户对文件和文件夹的删除和重命名
注：匿名用户下载是使用的是nobody这个用户，所以相应的O这个位置要有R权限才能被下载。若想让匿名用户能上传和删除权限，必需设置
write_enable=YES #全局设置，是否容许写入（无论是匿名用户还是本地用户，若要启用上传权限的话，就要开启他） anon_root=(none) #匿名用户主目录 anon_max_rate＝（0） #匿名用户速度限制 anon_umask＝（077） #匿名用户上传文件时有掩码(若想让匿名用户上传的文件能直接被匿名下载，就这设置这里为073) chown_uploads=YES #所有匿名上传的文件的所属用户将会被更改成chown_username chown_username=whoever #匿名上传文件所属用户名
#################本地用户权限控 制###############
write_enable=YES #可以上传(全局控制) 删除，重命名 local_umask=022 #本地用户上传文件的umask userlist_enable=YES #限制了这里的用户不能访问 local_root #设置一个本地用户登录后进入到的目录 user_config_dir #设置用户的单独配置文件，用哪个帐户登陆就用哪个帐户命名 download_enable #限制用户的下载权限" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/276055bc4619df6b66c3706f94b48fb5/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2016-05-18T11:17:55+08:00" />
<meta property="article:modified_time" content="2016-05-18T11:17:55+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">Notepad&#43;&#43;插件NppFTP安装使用及配置文件说明</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p> </p> 
<p style=""><span style="color:#444444; line-height:24px; word-wrap:normal; font-size:16px; word-break:normal"><span style="line-height:19px; word-wrap:normal; word-break:normal">1.下载NppFTP</span></span></p> 
<p style=""><span style="color:#444444; line-height:24px; word-wrap:normal; font-size:16px; word-break:normal"><span style="line-height:19px; word-wrap:normal; word-break:normal">2.把压缩文档中的bin目录下的两个文件解压到notepad++的plugin目录下</span></span></p> 
<p style=""><span style="color:#444444; line-height:24px; word-wrap:normal; font-size:16px; word-break:normal"><span style="line-height:19px; word-wrap:normal; word-break:normal">3.重新启动notepad++即安装成功</span></span></p> 
<p style=""><span style="color:#444444; line-height:24px; word-wrap:normal; font-size:16px; word-break:normal"><span style="line-height:19px; word-wrap:normal; word-break:normal">插件使用：</span></span></p> 
<p style=""> <wbr></wbr></p> 
<p style=""><span style="color:#444444; line-height:24px; word-wrap:normal; font-size:16px; word-break:normal">1.notepad++的“插件”菜单，鼠标悬停在“NppFTP”项上，在出来的下级菜单中选中“ShowNppFTP Window”</span></p> 
<p style="">2.在notepad++右侧会出现一个窗口，此时此窗口工具栏上按钮都是灰色的，点击工具栏上的”&gt;&gt;”按钮，鼠标悬停在弹出来菜单中的“settings”菜单项上，在弹出来的自己菜单中选择“Profile Setting”，出现“Profile Setting”对话框</p> 
<p style="">3.在对话框最左下角点击“Add New”，在弹出对话框中输入这个ftp配置文件（profile）的名称，点击确定，建立好新配置文件的名称</p> 
<p style="">4.然后在左侧点击刚才建立的配置文件，然后右侧框都由灰色变成可写入状态；在“hostname”中填入ftp主机（ip地址或者域名），“Username”和“Password”中填入ftp用户名和密码，然后直接点击对话框最下方的“close”即可完成配置</p> 
<p style="">5.此时回到notepad++的主页面，看右侧NppFTP的工具栏第一按钮已经成为蓝色，点击之后选择刚才编辑的ftp配置文件，就开始连接到ftp服务器上了。</p> 
<p style="">6.浏览ftp服务器文件操作和一般ftp文件无区别，遇到要编辑的文件直接双击打开，NppFTP会自动下载下来打开，编辑完毕之后按Ctrl+S保存即可自动上传到服务器上。</p> 
<p style="">如果服务器上没有装vsftpd，很简单，sudo apt-get install vsftpfd 即可</p> 
<p style="">需要配置下文件sudo vim /etc/vsftpd.conf,</p> 
<p style="">write_enable = YES  <wbr></wbr>ascii_upload_enable = YES ascii_download_enable = YES</p> 
<p style="">这里我使用的是不是匿名登录（直接使用其中一个帐号登录），所以没有使能相关选项</p> 
<p style="">还要记得sudo service vsftpd restart 一下</p> 
<p style=""> </p> 
<p style=""> </p> 
<p style="">/etc/vsftpd/vsftpd.conf文件详解，可以对应自己的需求进行修改<br style="word-wrap:break-word"> <span style="color:#ff00; word-wrap:break-word"><span style="word-wrap:break-word">#################匿名权限控 制###############</span></span></p> 
<p style="">anonymous_enable=YES　　 #是否启用匿名用户<br style="word-wrap:break-word"> no_anon_password=YES 　　#匿名用户login时不询问口令</p> 
<p style="">下面这四个主要语句控制这文件和文件夹的上传、下载、创建、删除和重命名。<br style="word-wrap:break-word"> anon_upload_enable=（yes/no)；  #控制匿名用户对文件（非目录）上传权限。<br style="word-wrap:break-word"> anon_world_readable_only=（yes/no）； #控制匿名用户对文件的下载权限<br style="word-wrap:break-word"> anon_mkdir_write_enable=（yes/no）； #控制匿名用户对文件夹的创建权限<br style="word-wrap:break-word"> anon_other_write_enable=（yes/no）； #控制匿名用户对文件和文件夹的删除和重命名</p> 
<p style="">注：匿名用户下载是使用的是nobody这个用户，所以相应的O这个位置要有R权限才能被下载。若想让匿名用户能上传和删除权限，必需设置</p> 
<p style="">write_enable=YES #全局设置，是否容许写入（无论是匿名用户还是本地用户，若要启用上传权限的话，就要开启他）<br style="word-wrap:break-word"> anon_root=(none) #匿名用户主目录<br style="word-wrap:break-word"> anon_max_rate＝（0） #匿名用户速度限制<br style="word-wrap:break-word"> anon_umask＝（077） #匿名用户上传文件时有掩码(若想让匿名用户上传的文件能直接被匿名下载，就这设置这里为073)<br style="word-wrap:break-word"> chown_uploads=YES #所有匿名上传的文件的所属用户将会被更改成chown_username<br style="word-wrap:break-word"> chown_username=whoever #匿名上传文件所属用户名</p> 
<p style=""><br style="word-wrap:break-word"> <span style="color:#ff00; word-wrap:break-word"><span style="word-wrap:break-word">#################本地用户权限控 制###############</span></span></p> 
<p style="">write_enable=YES #可以上传(全局控制) 删除，重命名<br style="word-wrap:break-word"> local_umask=022  #本地用户上传文件的umask<br style="word-wrap:break-word"> userlist_enable=YES #限制了这里的用户不能访问<br style="word-wrap:break-word"> local_root  #设置一个本地用户登录后进入到的目录<br style="word-wrap:break-word"> user_config_dir  #设置用户的单独配置文件，用哪个帐户登陆就用哪个帐户命名<br style="word-wrap:break-word"> download_enable  #限制用户的下载权限</p> 
<p style="">chown_uploads=YES #所有匿名上传的文件的所属用户将会被更改成chown_username<br style="word-wrap:break-word"> chown_username=whoever #匿名上传文件所属用户名</p> 
<p style="">chroot_list_enable=YES　#如果启动这项功能，则所有列在chroot_list_file之中的使用者不能更改根目录<br style="word-wrap:break-word"> chroot_list_file=/etc/vsftpd/chroot_list #指定限制的用户文件</p> 
<p style="">user_config_dir= #后面跟存放配置文件的目录。用来实现不同用户不同权限。<br style="word-wrap:break-word">    #在vsftpd.conf文件中加入这一句，<br style="word-wrap:break-word">    #在相应的目录里面，为每个用户创建自己的配置文件，用来实现不同的权限</p> 
<p style=""><br style="word-wrap:break-word"> 可以通过以下三条配置文件来控制用户切换目录。<br style="word-wrap:break-word"> chroot_list_enable=YES/NO   #设置是否启用chroot_list_file配置项指定的用户列表文件。<br style="word-wrap:break-word">       #如果启动这项功能，则所有列在chroot_list_file之中的使用者不能更改根目录 .默认值为yes。</p> 
<p style="">chroot_list_file=/etc/vsftpd/chroot_list #指出被锁定在自家目录中的用户的列表文件。</p> 
<p style="">chroot_list_enable=YES<br style="word-wrap:break-word"> 通过与chroot_local_user=YES/NO搭配能实现以下几种效果：<br style="word-wrap:break-word"> 1、当chroot_list_enable=YES，chroot_local_user=YES时，在/etc /vsftpd.chroot_list文件中列出的用户，可以切换到其他目录；未在文件中列出的用户，不能切换到其他目录。<br style="word-wrap:break-word"> 2、当chroot_list_enable=YES，chroot_local_user=NO时，在/etc/vsftpd.chroot_list 文件中列出的用户，不能切换到其他目录；未在文件中列出的用户，可以切换到其他目录。<br style="word-wrap:break-word"> 3、当chroot_list_enable=NO，chroot_local_user=YES时，所有的用户均不能切换到其他目录。<br style="word-wrap:break-word"> 4、当chroot_list_enable=NO，chroot_local_user=NO时，所有的用户均可以切换到其他目录。</p> 
<p style=""><br style="word-wrap:break-word"> 下面是个实例，希望对大家有用：</p> 
<p style="">1、只能上传。不能下载、删除、重命名。<br style="word-wrap:break-word"> cmds_allowed＝FEAT,REST,CWD,LIST,MDTM,MKD,NLST,PASS,PASV,PORT,PWD,QUIT,RMD,SIZE,STOR,TYPE,USER,ACCT,APPE,CDUP,HELP,MODE,NOOP,REIN,STAT,STOU,STRU,SYST</p> 
<p style=""><span style="color:#ff00; word-wrap:break-word">对于参数的详细的解释<br style="word-wrap:break-word"> cmds_allowed=ABOR,ACCT,APPE,CWD,CDUP,DELE,HELP,LIST,MODE,MDTM,MKD,NOOP,NLST,PASS,PASV,PORT,PWD,QUIT,REIN,RETR,RMD,RNFR,RNTO,SITE,SIZE,STOR,STAT,STOU,STRU,SYST,TYPE,USER</span></p> 
<p style=""><span style="color:#ff0ff; word-wrap:break-word">CWD - change working directory 更改目录<br style="word-wrap:break-word"> DELE - delete a remote file 删除文件<br style="word-wrap:break-word"> LIST - list remote files 列目录<br style="word-wrap:break-word"> MKD - make a remote directory 新建文件夹<br style="word-wrap:break-word"> NLST - name list of remote directory<br style="word-wrap:break-word"> PWD - print working directory 显示当前工作目录<br style="word-wrap:break-word"> RETR - retrieve a remote file 下载文件<br style="word-wrap:break-word"> RMD - remove a remote directory 删除目录<br style="word-wrap:break-word"> RNFR - rename from 重命名<br style="word-wrap:break-word"> RNTO - rename to 重命名<br style="word-wrap:break-word"> STOR - store a file on the remote host 上传文件</span></p> 
<p style=""><br style="word-wrap:break-word"> <span style="color:#ff0ff; word-wrap:break-word"># ABOR - abort a file transfer 取消文件传输<br style="word-wrap:break-word"> # CWD - change working directory 更改目录<br style="word-wrap:break-word"> # DELE - delete a remote file 删除文件<br style="word-wrap:break-word"> # LIST - list remote files 列目录<br style="word-wrap:break-word"> # MDTM - return the modification time of a file 返回文件的更新时间<br style="word-wrap:break-word"> # MKD - make a remote directory 新建文件夹<br style="word-wrap:break-word"> # NLST - name list of remote directory<br style="word-wrap:break-word"> # PASS - send password<br style="word-wrap:break-word"> # PASV - enter passive mode<br style="word-wrap:break-word"> # PORT - open a data port 打开一个传输端口<br style="word-wrap:break-word"> # PWD - print working directory 显示当前工作目录<br style="word-wrap:break-word"> # QUIT - terminate the connection 退出<br style="word-wrap:break-word"> # RETR - retrieve a remote file 下载文件<br style="word-wrap:break-word"> # RMD - remove a remote directory<br style="word-wrap:break-word"> # RNFR - rename from<br style="word-wrap:break-word"> # RNTO - rename to<br style="word-wrap:break-word"> # SITE - site-specific commands<br style="word-wrap:break-word"> # SIZE - return the size of a file 返回文件大小<br style="word-wrap:break-word"> # STOR - store a file on the remote host 上传文件<br style="word-wrap:break-word"> # TYPE - set transfer type<br style="word-wrap:break-word"> # USER - send username</span></p> 
<p style=""><span style="color:#ff0ff; word-wrap:break-word"># less common commands:</span></p> 
<p style=""><span style="color:#ff0ff; word-wrap:break-word"># ACCT* - send account information<br style="word-wrap:break-word"> # APPE - append to a remote file<br style="word-wrap:break-word"> # CDUP - CWD to the parent of the current directory<br style="word-wrap:break-word"> # HELP - return help on using the server<br style="word-wrap:break-word"> # MODE - set transfer mode<br style="word-wrap:break-word"> # NOOP - do nothing<br style="word-wrap:break-word"> # REIN* - reinitialize the connection<br style="word-wrap:break-word"> # STAT - return server status<br style="word-wrap:break-word"> # STOU - store a file uniquely<br style="word-wrap:break-word"> # STRU - set file transfer structure<br style="word-wrap:break-word"> # SYST - return system type</span></p> 
<p style="">2、只能下载。不能上传、删除、重命名。write_enable=NO<br style="word-wrap:break-word"> 3、只能上传、删除、重命名。不能下载。download_enable＝NO</p> 
<p style="">4、只能下载、删除、重命名。不能上传。<br style="word-wrap:break-word"> cmds_allowed=FEAT,REST,CWD,LIST,MDTM,MKD,NLST,PASS,PASV,PORT,PWD,QUIT,RMD,RNFR,RNTO,RETR,DELE,SIZE,TYPE,USER,ACCT,APPE,CDUP,HELP,MODE,NOOP,REIN,STAT,STOU,STRU,SYST</p> 
<p style=""><br style="word-wrap:break-word"> <span style="word-wrap:break-word"><span style="color:#ff00; word-wrap:break-word">###################虚拟用户设 置###################</span></span></p> 
<p style="">虚拟用户使用PAM认证方式。<br style="word-wrap:break-word"> pam_service_name=vsftpd  #设置PAM使用的名称，默认值为/etc/pam.d/vsftpd。</p> 
<p style="">check_shell=YES   #（注意：仅在没有pam验证版本时有用,是否检查用户有一个有效的shell来登录 )<br style="word-wrap:break-word"> guest_enable= YES/NO  #启用虚拟用户。默认值为NO。<br style="word-wrap:break-word"> guest_username=ftp  #这里用来映射虚拟用户。默认值为ftp。<br style="word-wrap:break-word"> virtual_use_local_privs=YES/NO #当该参数激活（YES）时，虚拟用户使用与本地用户相同的权限。<br style="word-wrap:break-word">     #当此参数关闭（NO）时，虚拟用户使用与匿名用户相同的权限。默认情况下此参数是关闭的（NO）。</p> 
<p style=""><br style="word-wrap:break-word"> <span style="color:#ff00; word-wrap:break-word"><span style="word-wrap:break-word">###################访问控制设 置###################</span></span></p> 
<p style="">两种控制方式：一种控制主机访问，另一种控制用户访问。</p> 
<p style="">1、控制主机访问：<br style="word-wrap:break-word"> tcp_wrappers=YES/NO</p> 
<p style="">设置vsftpd是否与tcp wrapper相结合来进行主机的访问控制。默认值为YES。如果启用，则vsftpd服务器会检查/etc/hosts.allow 和/etc/hosts.deny 中的设置，来决定请求连接的主机，是否允许访问该FTP服务器。这两个文件可以起到简易的防火墙功能。</p> 
<p style="">比如：若要仅允许192.168.10.1—192.168.10.254的用户可以连接FTP服务器，</p> 
<p style="">则在<br style="word-wrap:break-word"> /etc/hosts.allow<br style="word-wrap:break-word"> /etc/hosts.deny<br style="word-wrap:break-word"> 文件中添加以下内容：</p> 
<p style=""><br style="word-wrap:break-word"> 其格式如下：</p> 
<p style="">限制的服务：ip(网段)<br style="word-wrap:break-word"> vsftpd:192.168.1.<br style="word-wrap:break-word"> vsftpd:192.168.1.12<br style="word-wrap:break-word"> vsftpd:192.168.1.0/255.255.255.0这里不能写成192.168.1.0/24</p> 
<p style="">2、控制用户访问：</p> 
<p style="">vsftpd.ftpusers  #用于保存不允许进行FTP登录的本地用户帐号。就是vsftp用户的黑名单</p> 
<p style="">vsftpd.user_list</p> 
<p style="">（1）设置禁止vsftpd.user_list文件中的用户登录：要在主配置文件vsftpd.conf中修改如下两项，<br style="word-wrap:break-word"> userlist_enable=yes<br style="word-wrap:break-word"> userlist_deny=yes<br style="word-wrap:break-word"> 说明：配置完以后，除了vsftpd.ftpusers文件和vsftpd.user_list文件中记录的ftp用户不能登录vsftp服务以外，其他 的ftp用户都可以登录。</p> 
<p style="">（2）设置只允许vsftpd.user_list文件中的用户登录;同样的道理要把主配置文件vsftpd.conf 中的语句修改如下两项： <br style="word-wrap:break-word"> userlist_enable=yes<br style="word-wrap:break-word"> userlist_deny=no<br style="word-wrap:break-word">  说明：配置完以后，只允许vsftpd.user_list文件中记录的ftp用户能登录vsftp服务，其他的ftp用户都不可以登录。</p> 
<p style=""><span style="color:#ff00; word-wrap:break-word"><span style="word-wrap:break-word">###################超时设 置##################</span></span></p> 
<p style="">idle_session_timeout=600 #空闲连接超时<br style="word-wrap:break-word"> data_connection_timeout=120 #数据传输超时<br style="word-wrap:break-word"> ACCEPT_TIMEOUT=60  #PAVS请求超时<br style="word-wrap:break-word"> connect_timeout=60  #PROT模式连接超时</p> 
<p style=""><br style="word-wrap:break-word"> <span style="color:#ff00; word-wrap:break-word"><span style="word-wrap:break-word">################服务器功能选 项###############</span></span></p> 
<p style="">xferlog_enable=YES　　  #开启日记功能<br style="word-wrap:break-word"> xferlog_std_format=YES　　 #使用标准格式<br style="word-wrap:break-word"> log_ftp_protocol=NO　　  #当xferlog_std_format关闭且本选项开启时,记录所有ftp请求和回复,当调试比较有 用.<br style="word-wrap:break-word"> pasv_enable=YES　　  #允许使用pasv模式<br style="word-wrap:break-word"> pasv_promiscuous+NO　　  #关闭安全检查,小心呀.<br style="word-wrap:break-word"> port_enable=YES　　  #允许使用port模式<br style="word-wrap:break-word"> prot_promiscuous　　  #关闭安全检查<br style="word-wrap:break-word"> tcp_wrappers=YES　　  #开启tcp_wrappers支持<br style="word-wrap:break-word"> pam_service_name=vsftpd　　 #定义PAM 所使用的名称，预设为vsftpd。<br style="word-wrap:break-word"> nopriv_user=nobody　　  #当服务器运行于最底层时使用的用户名<br style="word-wrap:break-word"> pasv_address=(none)　　  #使vsftpd在pasv命令回复时跳转到指定的IP地址.(服务器联接跳转?)</p> 
<p style=""><span style="color:#ff00; word-wrap:break-word"><span style="word-wrap:break-word">#################服务器性能选 项##############</span> </span><br style="word-wrap:break-word"> ls_recurse_enable=YES  #是否能使用ls -R命令以防止浪费大量的服务器资源<br style="word-wrap:break-word"> one_process_model  #是否使用单进程模式<br style="word-wrap:break-word"> listen=YES   绑定到listen_port指定的端口,既然都绑定了也就是每时都开着的,就是那个什么standalone模式<br style="word-wrap:break-word"> text_userdb_names=NO　　 #当使用者登入后使用ls -al 之类的指令查询该档案的管理权时，预设会出现拥有者的UID，而不是该档案拥有者的名     #称。若是希望出现拥有者的名称，则将此功能开启。</p> 
<p style="">use_localtime=NO　　  #显示目录清单时是用本地时间还是GMT时间,可以通过mdtm命令来达到一样的效果<br style="word-wrap:break-word"> #use_sendfile=YES　　  #测试平台优化</p> 
<p style=""><span style="color:#ff00; word-wrap:break-word"><span style="word-wrap:break-word">################信息类设 置################</span></span></p> 
<p style="">ftpd_banner=welcome to FTP .　　#login时显示欢迎信息.如果设置了banner_file则此设置无效<br style="word-wrap:break-word"> dirmessage_enable=YES　　 #允许为目录配置显示信息,显示每个目录下面的message_file文件的内容<br style="word-wrap:break-word"> setproctitle_enable=YES　　 #显示会话状态信息,关!</p> 
<p style=""><br style="word-wrap:break-word"> <span style="color:#ff00; word-wrap:break-word"><span style="word-wrap:break-word">############## 文件定义 ##################</span></span></p> 
<p style="">chroot_list_file=/etc/vsftpd/vsftpd.chroot_list  #定义不能更改用户主目录的文件<br style="word-wrap:break-word"> userlist_file=/etc/vsftpd/vsftpd.user_list  #定义限制/允许用户登录的文件<br style="word-wrap:break-word"> banner_file=/etc/vsftpd/banner    #定义登录信息文件的位置<br style="word-wrap:break-word"> banned_email_file=/etc/vsftpd.banned_emails  #禁止使用的匿名用户登陆时作为密码的电子邮件地址<br style="word-wrap:break-word"> xferlog_file=/var/log/vsftpd.log   #日志文件位置<br style="word-wrap:break-word"> message_file=.message     #目录信息文件</p> 
<p style=""><br style="word-wrap:break-word"> <span style="color:#ff00; word-wrap:break-word"><span style="word-wrap:break-word">############## 目录定义 #################</span></span></p> 
<p style="">user_config_dir=/etc/vsftpd/userconf　　#定义用户配置文件的目录<br style="word-wrap:break-word"> local_root=webdisk    #此项设置每个用户登陆后其根目录为/home/username/webdisk<br style="word-wrap:break-word">    　　  #定义本地用户登陆的根目录,注意定义根目录可以是相对路径也可以是绝对路径.相对路径是针对用户家目录      #来说的.<br style="word-wrap:break-word"> anon_root=/var/ftp　　   #匿名用户登陆后的根目录</p> 
<p style=""><span style="color:#ff00; word-wrap:break-word"><span style="word-wrap:break-word">#############用户连接选 项#################</span></span></p> 
<p style=""><br style="word-wrap:break-word"> max_clients=100　　  #可接受的最大client数目<br style="word-wrap:break-word"> max_per_ip=5　　  #每个ip的最大client数目<br style="word-wrap:break-word"> connect_from_port_20=YES　　 #使用标准的20端口来连接ftp<br style="word-wrap:break-word"> listen_address=192.168.0.2　　 #绑定到某个IP,其它IP不能访问<br style="word-wrap:break-word"> listen_port=2121　　  #绑定到某个端口<br style="word-wrap:break-word"> ftp_data_port=2020　　  #数据传输端口<br style="word-wrap:break-word"> pasv_max_port=0　　  #pasv连接模式时可以使用port 范围的上界，0 表示任意。默认值为0。<br style="word-wrap:break-word"> pasv_min_port=0　　  #pasv连接模式时可以使用port 范围的下界，0 表示任意。默认值为0。</p> 
<p style=""><br style="word-wrap:break-word"> <span style="color:#ff00; word-wrap:break-word"><span style="word-wrap:break-word">##############数据传输选 项#################</span></span></p> 
<p style="">anon_max_rate=51200  #匿名用户的传输比率(b/s)<br style="word-wrap:break-word"> local_max_rate=5120000  #本地用户的传输比率(b/s)</p> 
<p style=""><br style="word-wrap:break-word"> <span style="word-wrap:break-word"><span style="color:#ff00; word-wrap:break-word">##############安全选 项#################</span></span></p> 
<p style="">Idle_session_timeout=600 #（用户会话空闲后10分钟）<br style="word-wrap:break-word"> Data_connection_timeout=120 #（将数据连接空闲2分钟断）<br style="word-wrap:break-word"> Accept_timeout=60  #（将客户端空闲1分钟后断）<br style="word-wrap:break-word"> Connect_timeout=60  #（中断1分钟后又重新连接）<br style="word-wrap:break-word"> Local_max_rate=50000  #（本地用户传输率50K）<br style="word-wrap:break-word"> Anon_max_rate=30000  # （匿名用户传输率30K）</p> 
<p style="">Pasv_min_port=50000  # （将客户端的数据连接端口改在<br style="word-wrap:break-word"> Pasv_max_port=60000  #50000—60000之间）</p> 
<p style="">Max_clients=200   #（FTP的最大连接数）<br style="word-wrap:break-word"> Max_per_ip=4   #（每IP的最大连接数）<br style="word-wrap:break-word"> Listen_port=5555  #（从5555端口进行数据连接）</p> 
<p style=""><span style="color:#00ff; word-wrap:break-word"><span style="word-wrap:break-word">以上如果有什么不全或错误的地方，请大家与我联系， 我及时改进，谢谢</span></span></p> 
<p style=""><br style="word-wrap:break-word"> <span style="color:#ff00; word-wrap:break-word">【案例1】建立基于虚拟用户的FTP服务器，并根据以下要求配置FTP服务 器。</span></p> 
<p style=""><span style="color:#ff00; word-wrap:break-word">（1）配置FTP匿名用户的主目录为/var/ftp/anon。下 载带宽限制为100kB/s</span></p> 
<p style=""><span style="color:#ff00; word-wrap:break-word">（2）建立一个名为abc，口令为xyz的FTP账户。下载带宽限制 为500kB/s。</span></p> 
<p style=""><span style="color:#ff00; word-wrap:break-word">（3）设置FTP服务器同时登录到FTP服务器的最大链接数为 100；每个IP最大链接数为3；用户空闲时间超过限值为5分钟。</span></p> 
<p style=""><span style="color:#ff0ff; word-wrap:break-word">mkdir /var/fpt/anon</span></p> 
<p style=""><span style="color:#ff0ff; word-wrap:break-word">useradd abc<br style="word-wrap:break-word"> passwd abc</span></p> 
<p style=""><span style="color:#ff0ff; word-wrap:break-word">vim /etc/vsftpd/vsftpd.conf</span></p> 
<p style=""><span style="color:#ff0ff; word-wrap:break-word">主要内容如下</span></p> 
<p style=""><span style="color:#ff0ff; word-wrap:break-word">anonymous_enable=YES<br style="word-wrap:break-word"> anon_root=/var/ftp/anon<br style="word-wrap:break-word"> anon_max_rate=100<br style="word-wrap:break-word"> # Uncomment this to allow local users to log in.<br style="word-wrap:break-word"> local_enable=YES<br style="word-wrap:break-word"> local_max_rate=500<br style="word-wrap:break-word"> max_clients=100<br style="word-wrap:break-word"> max_per_ip=3<br style="word-wrap:break-word"> connect_timeout=300</span></p> 
<p style=""><span style="color:#ff0ff; word-wrap:break-word"> </span></p> 
<p style=""><span style="color:#ff0ff; word-wrap:break-word">以上是本地的LOCAL用户</span></p> 
<p style=""><span style="color:#ff0ff; word-wrap:break-word">下面是用虚拟用户来实现</span></p> 
<p style=""><span style="color:#ff0ff; word-wrap:break-word"> </span></p> 
<p style=""><span style="color:#ff0ff; word-wrap:break-word">vim /etc/vsftpd/vuser</span></p> 
<p style=""><span style="color:#ff0ff; word-wrap:break-word">内容如下</span></p> 
<p style=""><span style="color:#ff0ff; word-wrap:break-word">tom<br style="word-wrap:break-word"> 123</span></p> 
<p style=""><span style="color:#ff0ff; word-wrap:break-word"> </span></p> 
<p style=""><span style="color:#ff0ff; word-wrap:break-word">生成数据库文件<br style="word-wrap:break-word"> db_load -T -t hash -f /etc/vsftpd/vuser /etc/vsftpd/vuser.db<br style="word-wrap:break-word"> chmod 600 /etc/vsftpd/vuser.db</span></p> 
<p style=""><span style="color:#ff0ff; word-wrap:break-word">vim /etc/pam.d/vsftpd</span></p> 
<p style=""><br style="word-wrap:break-word"> <span style="color:#ff0ff; word-wrap:break-word">注释掉原来的内容</span></p> 
<p style=""><span style="color:#ff0ff; word-wrap:break-word">然后加入</span></p> 
<p style=""><span style="color:#ff0ff; word-wrap:break-word"> </span></p> 
<p style=""><span style="color:#ff0ff; word-wrap:break-word">auth        required    pam_userdb.so   db=/etc/vsftpd/vuser<br style="word-wrap:break-word"> account     required    pam_userdb.so   db=/etc/vsftpd/vuser</span></p> 
<p style=""><span style="color:#ff0ff; word-wrap:break-word">最后编辑VSFTPD.CONF加入下面两句</span></p> 
<p style=""><span style="color:#ff0ff; word-wrap:break-word">guest_enable=YES<br style="word-wrap:break-word"> guest_username=abc</span></p> 
<p style="">大家可以自行测试。</p> 
<p style="">到此，案例一完成</p> 
<p style=""><br style="word-wrap:break-word"> <span style="color:#ff00; word-wrap:break-word">【案例2】<br style="word-wrap:break-word"> 1、新建一分区，10G空间，ext3 文件系统，挂在到 /ftp下，作为 ftp服务器数据存放地方。</span></p> 
<p style=""><span style="color:#ff00; word-wrap:break-word">2、四个部门：dep1，dep2， dep3， dep4，分别对应目录 /ftp/dep1，/ftp/dep2，/ftp/dep3，/ftp/dep4。另外设定一个公共目录 /ftp/public。</span></p> 
<p style=""><span style="color:#ff00; word-wrap:break-word">3、五个用 户：admin，user1，user2，user3，user4。其中：user 1/2/3/4分别对应部门dep 1/2/3/4，他们只能访问自己所属部门的目录和public目录。如：user1只能访问dep1和public目录，不能访问其它目录。admin 为管理员用户，可以访问 ftp 服务器上的任何目录。</span></p> 
<p style=""><span style="color:#ff00; word-wrap:break-word">4、用户访问权限限制：user1/2/3/4在所能访问的目录，具 有上传文件、下载文件的功能，但是不能够删除文件、更改文件权限等功能。admin管理员用户对所有目录具有文件上传、下载、删除、权限更改等功能。</span></p> 
<p style=""><span style="color:#ff00; word-wrap:break-word">5、对每个部门定制一个 quota，设置该账户的文件配额为1000个；磁盘配额为2G。</span></p> 
<p style=""><span style="color:#ff00; word-wrap:break-word">6、匿名用户不能访问。</span></p> 
<p style=""><br style="word-wrap:break-word"> <span style="color:#ff0ff; word-wrap:break-word">第一、增加一块硬盘，然后分区，把分区挂载情况写入/etc /fstab</span></p> 
<p style=""><span style="color:#ff0ff; word-wrap:break-word"># fdisk /dev/hdb<br style="word-wrap:break-word"> # mkfs.ext3 /dev/hdb1<br style="word-wrap:break-word"> # mkidr /ftp<br style="word-wrap:break-word"> # mount /dev/hdb1 /ftp -o usrquota,grpquota</span></p> 
<p style=""><span style="color:#ff0ff; word-wrap:break-word"># vim /etc/fstab<br style="word-wrap:break-word"> 加入下面一句</span></p> 
<p style=""><span style="color:#ff0ff; word-wrap:break-word">/dev/hdb1               /ftp                    ext3    defaults,usrquota,grpquota      0 0</span></p> 
<p style=""><br style="word-wrap:break-word"> <span style="color:#ff0ff; word-wrap:break-word">第二、建立用户组和用户和相应的文件夹并更改权限，达到题目要求</span></p> 
<p style=""><span style="color:#ff0ff; word-wrap:break-word"># groupadd dep1<br style="word-wrap:break-word"> # groupadd dep2<br style="word-wrap:break-word"> # groupadd dep3<br style="word-wrap:break-word"> # groupadd dep4<br style="word-wrap:break-word"> # groupadd boobooke</span></p> 
<p style=""><span style="color:#ff0ff; word-wrap:break-word"># usradd  -G dep1,boobooke user1<br style="word-wrap:break-word"> # usradd  -G dep2,boobooke user2<br style="word-wrap:break-word"> # usradd  -G dep3,boobooke user3<br style="word-wrap:break-word"> # usradd  -G dep4,boobooke user4<br style="word-wrap:break-word"> # usradd  -G dep1,dep2,dep3,dep4,boobooke admin</span></p> 
<p style=""><span style="color:#ff0ff; word-wrap:break-word"># passwd user1<br style="word-wrap:break-word"> # passwd user2<br style="word-wrap:break-word"> # passwd user3<br style="word-wrap:break-word"> # passwd user4<br style="word-wrap:break-word"> # passwd admin</span></p> 
<p style=""><span style="color:#ff0ff; word-wrap:break-word"># mkdir /ftp/dep1<br style="word-wrap:break-word"> # mkdir /ftp/dep2<br style="word-wrap:break-word"> # mkdir /ftp/dep3<br style="word-wrap:break-word"> # mkdir /ftp/dep4<br style="word-wrap:break-word"> # mkdir /ftp/public</span></p> 
<p style=""><span style="color:#ff0ff; word-wrap:break-word"># chmod uesr1:dep1 /ftp/dep1<br style="word-wrap:break-word"> # chmod uesr2:dep2 /ftp/dep2<br style="word-wrap:break-word"> # chmod uesr3:dep3 /ftp/dep3<br style="word-wrap:break-word"> # chmod uesr4:dep4 /ftp/dep4<br style="word-wrap:break-word"> # chmod admin:boobooke /ftp/public</span></p> 
<p style=""><span style="color:#ff0ff; word-wrap:break-word"># chmod 770 /ftp/dep1<br style="word-wrap:break-word"> # chmod 770 /ftp/dep2<br style="word-wrap:break-word"> # chmod 770 /ftp/dep3<br style="word-wrap:break-word"> # chmod 770 /ftp/dep4<br style="word-wrap:break-word"> # chmod 770 /ftp/pubic</span></p> 
<p style=""><br style="word-wrap:break-word"> <span style="color:#ff0ff; word-wrap:break-word">最终结果如下</span></p> 
<p style=""><span style="color:#ff0ff; word-wrap:break-word">-rw------- 1 root  root      8192 Jul 26 11:46 aquota.group<br style="word-wrap:break-word"> -rw------- 1 root  root      7168 Jul 26 11:46 aquota.user<br style="word-wrap:break-word"> drwxrwx--- 2 user1 dep1      4096 Jul 25 20:47 dep1<br style="word-wrap:break-word"> drwxrwx--- 2 user2 dep2      4096 Jul 25 20:47 dep2<br style="word-wrap:break-word"> drwxrwx--- 2 user3 dep3      4096 Jul 25 20:47 dep3<br style="word-wrap:break-word"> drwxrwx--- 2 user4 dep4      4096 Jul 25 20:47 dep4<br style="word-wrap:break-word"> drwx------ 2 root  root     16384 Jul 25 20:44 lost+found<br style="word-wrap:break-word"> drwxrwx--- 2 admin boobooke  4096 Jul 25 20:48 public</span></p> 
<p style=""><span style="color:#ff0ff; word-wrap:break-word">第三、创建quota，配置磁盘配额</span></p> 
<p style=""><span style="color:#ff0ff; word-wrap:break-word">#mount /dev/hdb1 /ftp -o usrquota,grpquota<br style="word-wrap:break-word"> # quotacheck -cuvg /dev/sdb1<br style="word-wrap:break-word"> # quotaon -a<br style="word-wrap:break-word"> # edquota -g dep1</span></p> 
<p style=""><span style="color:#ff0ff; word-wrap:break-word">Disk quotas for group dep1 (gid 503):<br style="word-wrap:break-word">   Filesystem                   blocks       soft       hard     inodes     soft     hard<br style="word-wrap:break-word">   /dev/hdb1                         0    1024000    2048000          0      500     1000</span></p> 
<p style=""><span style="color:#ff0ff; word-wrap:break-word"># edquota -g -p dep1 dep2 dep3 dep4(-u -g将源用户组和群组的quota设置套用至其他用户或群组。)</span></p> 
<p style=""><br style="word-wrap:break-word"> <span style="color:#ff0ff; word-wrap:break-word">第四、编辑VSFTPD.CONF</span></p> 
<p style=""><span style="color:#ff0ff; word-wrap:break-word"># vim /etc/vsftpd/vsftpd.conf</span></p> 
<p style=""><span style="color:#ff0ff; word-wrap:break-word">anonymous_enable=NO</span></p> 
<p style=""><span style="color:#ff0ff; word-wrap:break-word">加入<br style="word-wrap:break-word"> local_root=/ftp<br style="word-wrap:break-word"> user_config_dir=/etc/vsftpd/ftp_config_dir </span></p> 
<p style=""><br style="word-wrap:break-word"> <span style="color:#ff0ff; word-wrap:break-word">开启chroot</span></p> 
<p style=""><span style="color:#ff0ff; word-wrap:break-word">chroot_list_enable=YES<br style="word-wrap:break-word"> chroot_list_file=/etc/vsftpd/chroot_list</span></p> 
<p style=""><br style="word-wrap:break-word"> <span style="color:#ff0ff; word-wrap:break-word">第五、建立用户的独立文件</span></p> 
<p style=""><span style="color:#ff0ff; word-wrap:break-word"># mkdir /etc/vsftpd/ftp_config_dir<br style="word-wrap:break-word"> # vim /etc/vsftpd/ftp_config_dir/user1</span></p> 
<p style=""><span style="color:#ff0ff; word-wrap:break-word">cmds_allowed=ABOR,ACCT,APPE,CWD,CDUP,HELP,LIST,MODE,MDTM,NOOP,NLST,PASS,PASV,PORT,PWD,QUIT,REIN,RETR,SITE,SIZE,STOR,STAT,STOU,STRU,SYST,TYPE,USER</span></p> 
<p style=""><br style="word-wrap:break-word"> <span style="color:#ff0ff; word-wrap:break-word"># cp /etc/vsftpd/ftp_config_dir/user1 /etc/vsftpd/ftp_config_dir/user2<br style="word-wrap:break-word"> # cp /etc/vsftpd/ftp_config_dir/user1 /etc/vsftpd/ftp_config_dir/user3<br style="word-wrap:break-word"> # cp /etc/vsftpd/ftp_config_dir/user1 /etc/vsftpd/ftp_config_dir/user4</span></p> 
<p style=""> </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/a5b8128e1e5156930d1e91fc922ff521/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">PadLeft 补零</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/3c65716a3f2e6f07adb5355a6d8aa862/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">github代码搜索技巧</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>