<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>H3C配置远程登录（console、telnet、ssh） - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="H3C配置远程登录（console、telnet、ssh）" />
<meta property="og:description" content="目录
1. 介绍
2. 用console口登录交换机并配置
3. 创建本地用户
4. 本地用户能够通过telnet、SSH登录
1. 介绍 新交换机，通过Console口进入交换机，配置Console登录密码，并创建用户，退出Console登录后，用户通过远程（Telnet、SSH）登录交换机。
交换机为H3C S5130 V7
[test]dis version H3C Comware Software, Version 7.1.070, Release 6126P20 Copyright (c) 2004-2018 New H3C Technologies Co., Ltd. All rights reserved. H3C S5130S-28P-EI uptime is 0 weeks, 2 days, 3 hours, 23 minutes Last reboot reason : User reboot Boot image: flash:/s5130s_ei-cmw710-boot-r6126p20.bin Boot image version: 7.1.070, Release 6126P20 Compiled Apr 03 2018 11:00:00 System image: flash:/s5130s_ei-cmw710-system-r6126p20." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/1d9e0db2a8406b4bec8a6988d45d5744/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-09T08:44:25+08:00" />
<meta property="article:modified_time" content="2024-01-09T08:44:25+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">H3C配置远程登录（console、telnet、ssh）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p id="main-toc"><strong>目录</strong></p> 
<p id="1.%20%E4%BB%8B%E7%BB%8D-toc" style="margin-left:40px;"><a href="#1.%20%E4%BB%8B%E7%BB%8D" rel="nofollow">1. 介绍</a></p> 
<p id="2.%20%E7%94%A8console%E5%8F%A3%E7%99%BB%E5%BD%95%E4%BA%A4%E6%8D%A2%E6%9C%BA%E5%B9%B6%E9%85%8D%E7%BD%AE-toc" style="margin-left:40px;"><a href="#2.%20%E7%94%A8console%E5%8F%A3%E7%99%BB%E5%BD%95%E4%BA%A4%E6%8D%A2%E6%9C%BA%E5%B9%B6%E9%85%8D%E7%BD%AE" rel="nofollow">2. 用console口登录交换机并配置</a></p> 
<p id="3.%20%E5%88%9B%E5%BB%BA%E6%9C%AC%E5%9C%B0%E7%94%A8%E6%88%B7-toc" style="margin-left:40px;"><a href="#3.%20%E5%88%9B%E5%BB%BA%E6%9C%AC%E5%9C%B0%E7%94%A8%E6%88%B7" rel="nofollow">3. 创建本地用户</a></p> 
<p id="4.%20%E6%9C%AC%E5%9C%B0%E7%94%A8%E6%88%B7%E8%83%BD%E5%A4%9F%E9%80%9A%E8%BF%87telnet%E3%80%81SSH%E7%99%BB%E5%BD%95-toc" style="margin-left:40px;"><a href="#4.%20%E6%9C%AC%E5%9C%B0%E7%94%A8%E6%88%B7%E8%83%BD%E5%A4%9F%E9%80%9A%E8%BF%87telnet%E3%80%81SSH%E7%99%BB%E5%BD%95" rel="nofollow">4. 本地用户能够通过telnet、SSH登录</a></p> 
<hr id="hr-toc"> 
<h2>1. 介绍</h2> 
<p>新交换机，通过Console口进入交换机，配置Console登录密码，并创建用户，退出Console登录后，用户通过远程（Telnet、SSH）登录交换机。</p> 
<p>交换机为H3C S5130 V7</p> 
<pre><code>[test]dis version
H3C Comware Software, Version 7.1.070, Release 6126P20
Copyright (c) 2004-2018 New H3C Technologies Co., Ltd. All rights reserved.
H3C S5130S-28P-EI uptime is 0 weeks, 2 days, 3 hours, 23 minutes
Last reboot reason : User reboot

Boot image: flash:/s5130s_ei-cmw710-boot-r6126p20.bin
Boot image version: 7.1.070, Release 6126P20
  Compiled Apr 03 2018 11:00:00
System image: flash:/s5130s_ei-cmw710-system-r6126p20.bin
System image version: 7.1.070, Release 6126P20
  Compiled Apr 03 2018 11:00:00
</code></pre> 
<h3 id="2.%20%E7%94%A8console%E5%8F%A3%E7%99%BB%E5%BD%95%E4%BA%A4%E6%8D%A2%E6%9C%BA%E5%B9%B6%E9%85%8D%E7%BD%AE"><a name="t2"></a><a id="2_console_24"></a>2. 用console口登录交换机并配置</h3> 
<p>​ Console口拥有最高的权限，笔记本USB口与交换机Console口连接，在SecureCRT等软件中，新建会话，连接类型为串口（Serial）,端口COM3（如果不清楚在电脑设备管理器端口中有），波特率一般为9600，取消DTR/DSR、RTS/CTS、XON/XOFF。</p> 
<pre><code># 进入Console口配置界面
# 选择密码模式，scheme是用户名+密码
[H3C]user-interface aux 0 
[H3C-line-aux0]authentication-mode password 
[H3C-line-aux0]set authentication password simple 123456

[H3C-line-aux0]dis user-interface 
</code></pre> 
<p>**提示：**V7只提供hash和simple，hash提示错误，用simple也是密文，v3/v5提供cipher密文</p> 
<h3 id="3.%20%E5%88%9B%E5%BB%BA%E6%9C%AC%E5%9C%B0%E7%94%A8%E6%88%B7"><a name="t3"></a><a id="3__41"></a>3. 创建本地用户</h3> 
<p>创建本地用户用于登录管理交换机</p> 
<pre><code>[H3C]local-user zhaoyuqiang
New local user added.
[H3C-luser-manage-zhaoyuqiang]password simple 123456
# 设置用户权限等级为最高级15，但是修改network-admin更有效果
#[H3C-luser-manage-zhaoyuqiang]authorization-attribute user-role 10
# 取消network-operator，改成network-admin权限，否则该用户没有管理权限
[H3C-luser-manage-zhaoyuqiang]undo authorization-attribute user-role network-operator
[H3C-luser-manage-zhaoyuqiang]authorization-attribute user-role network-admin
[H3C-luser-manage-zhaoyuqiang]service-type ssh telnet
# display 本地用户
[H3C]dis local-user 
</code></pre> 
<p>**提示：**V7只提供hash和simple，hash提示错误，用simple也是密文，v3/v5提供cipher密文。V7是user-role，v3/v5是level，在V7版本中等级是1-15，可以设置的大一点，否则一些命令执行不了。V7下修改权限与v3/v5不同</p> 
<h3 id="4.%20%E6%9C%AC%E5%9C%B0%E7%94%A8%E6%88%B7%E8%83%BD%E5%A4%9F%E9%80%9A%E8%BF%87telnet%E3%80%81SSH%E7%99%BB%E5%BD%95"><a name="t4"></a><a id="4_telnetSSH_61"></a>4. 本地用户能够通过telnet、SSH登录</h3> 
<p>本地用户通过远程（telnet和SSH）连接交换机。 笔记本与交换机通过网线连接。</p> 
<p><strong>vty:</strong> 是虚拟终端，和aaa可以配合使用。即vty是开了一条线路让你可以远程登入，aaa是在这条线路上做认证的，只有合法用户才能通过这条线路进入设备。</p> 
<p>**配置接口管理地址:**登录交换机需要配置接口管理IP，对于一般的二层接入交换机，不能像路由器一样直接配置接口IP，只能在虚拟VLAN接口上配一个管理IP，用来进行远程登录。</p> 
<pre><code>[H3C]vlan 100
[H3C-vlan100]exit

[H3C]interface Vlan-interface 100
[H3C-Vlan-interface100]ip address 192.168.10.1 24 
</code></pre> 
<p><strong>开启telnet/ssh服务</strong></p> 
<pre><code>[H3C]telnet server enable
[H3C]ssh server enable
</code></pre> 
<p><strong>配置认证方式（0-8用telnet,9-15用ssh）</strong></p> 
<pre><code># telnet用0-8号线路
[H3C] user-interface vty 0 8
[H3C-line-vty0-8] authentication-mode scheme 
# 配置登录交换机的权限，小了容易权限不够。
[H3C-line-vty0-8] user-role network-admin
#[H3C-line-vty0-8] user-role level-15
[H3C-line-vty0-8] protocol inbound telnet
# ssh用9-15号线路
[H3C] user-interface vty 9 15
[H3C-line-vty9-15] authentication-mode scheme 
#[H3C-line-vty9-15] authorization-attribute user-role level-15
[H3C-line-vty9-15] authorization-attribute user-role network-admin
[H3C-line-vty9-15] protocol inbound ssh 
</code></pre> 
<p>**将连接电脑的交换机口加入到vlan100中：**交换机所有口目前在vlan 1中，而交换机管理地址配置在vlan 100接口中</p> 
<pre><code>[H3C]interface g 1/0/1
[H3C-GigabitEthernet1/0/1]port access vlan 100
</code></pre> 
<p><strong>登录：</strong> 将笔记本IP设置为与交换机同一网段，连接类型选择SSH2登录。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/711d2d697874c195baad53fbb8d68aa6/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">给Flutter &#43; FireBase 增加 badge 徽章，App启动器 通知红点。</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/56c6bf58de727f6debbb856d0e79eb65/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">麒麟系统安装docker、mysql、clickhouse</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>