<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>django&#43;vue3&#43;el-tree树形组件菜单 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="django&#43;vue3&#43;el-tree树形组件菜单" />
<meta property="og:description" content="前言
在一些消费的app，eg京东，淘宝。我们经常在pc端上面会出现点击电视 ，就会有小米、海尔、等各种品牌的电视。这也就是咱们说的树形组件 --也就是一级标签，二级标签，三级标签。（以上是小编举的例子，如有不对请多指教包容）
这个篇文章主要的效果图
既然说了是Django&#43;vue3&#43;el-tree就了一列大纲他的步骤分那些
1.分析django 中所需要的表 2.django 中主要实现的业务逻辑 2.1django 重写后台管理 3.vue3中使用elementUI配置 4.vue3使用el-tree的布局 5.el-tree上附加的功能 那小编带着来第一步
1.分析django 中所需要的表 1.菜单表：id,name(菜单名),pid(父类),status(1显示0不显示)
class Menu(models.Model): id = models.AutoField(primary_key=True) name = models.CharField(max_length=38, verbose_name=&#39;菜单名称&#39;) pid = models.IntegerField(default=0, verbose_name=&#39;父id&#39;) status = models.IntegerField(default=1, verbose_name=&#39;显示1不显示0&#39;) def __str__(self): return self.name class Meta: db_table = &#39;meum_menu&#39; 2.django 中主要实现的业务逻辑 增加菜单
查看菜单
修改菜单
删除菜单
添加菜单接口
请求：postApi：http://127.0.0.1:8000/meum/add_menu/描述：添加菜单名，父类，状态（显示不显示）添加条件 获取前端传来的数据，
判断 菜单名字是空的？
判断 改子类的父类是否存在 id=pid 参数名称
参数类型
参数描述
实例
name
string
菜单名称
冰箱
Pid
int" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/41fdd698e4be03068b8ad6a2c71f4744/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-06-18T15:10:26+08:00" />
<meta property="article:modified_time" content="2022-06-18T15:10:26+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">django&#43;vue3&#43;el-tree树形组件菜单</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p style="text-align:justify;">前言</p> 
<p style="text-align:justify;">在一些消费的app，eg京东，淘宝。我们经常在pc端上面会出现点击电视 ，就会有小米、海尔、等各种品牌的电视。这也就是咱们说的树形组件 --也就是一级标签，二级标签，三级标签。（以上是小编举的例子，如有不对请多指教包容）</p> 
<hr> 
<p style="text-align:justify;">这个篇文章主要的效果图</p> 
<p style="text-align:justify;"><img alt="" height="432" src="https://images2.imgbox.com/f5/bf/YG7rZgxT_o.png" width="548"></p> 
<p style="text-align:justify;">既然说了是Django+vue3+el-tree就了一列大纲他的步骤分那些</p> 
<h3 style="text-align:justify;">1.分析django 中所需要的表</h3> 
<h3>2.django 中主要实现的业务逻辑</h3> 
<h4>2.1django 重写后台管理</h4> 
<h4>3.vue3中使用elementUI配置</h4> 
<h4>4.vue3使用el-tree的布局</h4> 
<h4>5.el-tree上附加的功能</h4> 
<hr> 
<p>那小编带着来第一步</p> 
<h4>1.分析django 中所需要的表</h4> 
<p style="margin-left:.0001pt;text-align:justify;">1.菜单表：id,name(菜单名),pid(父类),status(1显示0不显示)</p> 
<pre><code class="language-python">class Menu(models.Model):
    id = models.AutoField(primary_key=True)
    name = models.CharField(max_length=38, verbose_name='菜单名称')
    pid = models.IntegerField(default=0, verbose_name='父id')
    status = models.IntegerField(default=1, verbose_name='显示1不显示0')

    def __str__(self):
        return self.name

    class Meta:
        db_table = 'meum_menu'</code></pre> 
<h4 style="margin-left:.0001pt;text-align:justify;">2.django 中主要实现的业务逻辑</h4> 
<p>增加菜单</p> 
<p>查看菜单</p> 
<p>修改菜单</p> 
<p>删除菜单</p> 
<hr> 
<p style="text-align:justify;"><span style="color:#4da8ee;">添加菜单接口</span></p> 
<ol><li style="text-align:justify;">请求：post</li><li style="text-align:justify;">Api：<a href="http://127.0.0.1:8000/meum/get_menu/" rel="nofollow" title="http://127.0.0.1:8000/meum/add_menu/">http://127.0.0.1:8000/meum/add_menu/</a></li><li style="text-align:justify;">描述：添加菜单名，父类，状态（显示不显示）</li><li style="text-align:justify;">添加条件         获取前端传来的数据，<br>                       判断 菜单名字是空的？<br>                       判断 改子类的父类是否存在 id=pid  </li></ol> 
<table border="1" cellspacing="0" style="width:420pt;"><tbody><tr><td style="vertical-align:top;width:105pt;"> <p style="margin-left:.0001pt;">参数名称</p> </td><td style="vertical-align:top;width:104.95pt;"> <p style="margin-left:.0001pt;">参数类型</p> </td><td style="vertical-align:top;width:105pt;"> <p style="margin-left:.0001pt;">参数描述</p> </td><td style="vertical-align:top;width:105.05pt;"> <p style="margin-left:.0001pt;">实例</p> </td></tr><tr><td style="vertical-align:top;width:105pt;"> <p style="margin-left:.0001pt;">name</p> </td><td style="vertical-align:top;width:104.95pt;"> <p style="margin-left:.0001pt;">string</p> </td><td style="vertical-align:top;width:105pt;"> <p style="margin-left:.0001pt;">菜单名称</p> </td><td style="vertical-align:top;width:105.05pt;"> <p style="margin-left:.0001pt;">冰箱</p> </td></tr><tr><td style="vertical-align:top;width:105pt;"> <p style="margin-left:.0001pt;">Pid</p> </td><td style="vertical-align:top;width:104.95pt;"> <p style="margin-left:.0001pt;">int</p> </td><td style="vertical-align:top;width:105pt;"> <p style="margin-left:.0001pt;">父类id,默认0</p> </td><td style="vertical-align:top;width:105.05pt;"> <p style="margin-left:.0001pt;">0</p> </td></tr><tr><td style="vertical-align:top;width:105pt;"> <p style="margin-left:.0001pt;">status</p> </td><td style="vertical-align:top;width:104.95pt;"> <p style="margin-left:.0001pt;">int</p> </td><td style="vertical-align:top;width:105pt;"> <p style="margin-left:.0001pt;">状态0不显示1显示</p> </td><td style="vertical-align:top;width:105.05pt;"> <p style="margin-left:.0001pt;">1</p> </td></tr></tbody></table> 
<p style="margin-left:.0001pt;text-align:justify;">返回值：</p> 
<p style="margin-left:.0001pt;text-align:justify;">成功返回：{“code”:”200”,’msg’:”添加成功”}</p> 
<p style="margin-left:.0001pt;text-align:justify;">失败返回：{“code”:”500”,”msg”:”添加失败”}</p> 
<pre><code class="language-python">class AddMenuViews(APIView):
    """添加菜单
    获取前端传来的数据，
    判断 菜单名字是空的？
    判断 改子类的父类是否存在 id=pid
    """

    def post(self, request):
        name = request.data.get('name')
        pid = request.data.get('pid', 0)
        print('pid&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;', pid)
        status = request.data.get('status', 1)
        if not all([name]):
            return Response({'msg': '菜单名称为空', 'code': 500})
        if pid:
            pid_count = Menu.objects.filter(id=pid).count()
            if pid_count == 0:
                return Response({'msg': '该类别的父类id不存在', 'code': 500})
        menu = Menu.objects.create(name=name, pid=pid, status=status)
        menu.save()
        return Response({'msg': '添加成功', 'code': 200})
</code></pre> 
<hr> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#4da8ee;">查看菜单接口</span></p> 
<p style="margin-left:.0001pt;text-align:justify;">1.请求：get</p> 
<p style="margin-left:.0001pt;text-align:justify;">2.Api：<a href="http://127.0.0.1:8000/meum/get_menu/" rel="nofollow" title="http://127.0.0.1:8000/meum/get_menu/">http://127.0.0.1:8000/meum/get_menu/</a></p> 
<p style="margin-left:.0001pt;text-align:justify;">3.描述：获取菜单中status=1的数据，进行排列根据pid进行分级</p> 
<table border="1" cellspacing="0" style="width:283.65pt;"><tbody><tr><td style="vertical-align:top;width:140.55pt;"> <p style="margin-left:.0001pt;text-align:justify;">过滤条件</p> </td><td style="vertical-align:top;width:143.1pt;"> <p style="margin-left:.0001pt;text-align:justify;">Status=1</p> </td></tr><tr><td style="vertical-align:top;width:140.55pt;"> <p style="margin-left:.0001pt;text-align:justify;">Pid布局</p> </td><td style="vertical-align:top;width:143.1pt;"> <p style="margin-left:.0001pt;text-align:justify;">查看pid 是否是0,0 为一级标签，添加并返回</p> <p style="margin-left:.0001pt;text-align:justify;">判断此子类的父类下面是否已经有了子类，如果没有就初始化</p> </td></tr></tbody></table> 
<p style="margin-left:.0001pt;text-align:justify;">返回值：</p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;">成功返回：{“code”:”200”,’msg’:”查看成功”}/{“code”:200,”data”:result}</span></p> 
<p style="margin-left:.0001pt;text-align:left;"><span style="background-color:#ffffff;">                                                                     result承接的是序列化之后返回的数据</span></p> 
<p style="margin-left:.0001pt;text-align:justify;">失败返回：{“code”:”500”,”msg”:”查看失败”}</p> 
<p style="margin-left:.0001pt;text-align:justify;">其实难点还是在获取数据 因为他需要按照pid的来排序----小编刚接触的时候也比较迷糊慢慢就好了</p> 
<pre><code class="language-python">class GetMenuViews(APIView):
    def get(self, request):
        # 获取显示的菜单
        menu = Menu.objects.filter(status=1)
        # 将获取的数据转换为json数据 对象名=序列化器（内容）
        #多个数据是many=True
        ser = MenuSer(menu, many=True)
        #.data 是返回数据
        print('ser.data', ser.data)
        result = xtree(ser.data)
        return Response({'code': 200, 'data': result})</code></pre> 
<p style="text-align:justify;">序列化---在django中序列化是需要自己写的</p> 
<p style="text-align:justify;">小编在这用的是模型类序列化器</p> 
<pre><code class="language-python">from rest_framework import serializers
from meum.models import Menu


class MenuSer(serializers.ModelSerializer):
    class Meta:
        model = Menu  # 指明需要序列化的模型类
        fields = '__all__'   # 指明模型类的全部字段参数序列化和反序列化
</code></pre> 
<p style="text-align:justify;">其实那可能在我看来最重要的不是这些  <span style="color:#956fe7;">而是在展示的时候的思路  怎样把一级标签相连的二级标签 展示出来 用了什么思路  </span><span style="color:#0d0016;">那就具体问题具体分析</span></p> 
<p style="text-align:justify;"><span style="color:#1a439c;">在代码具体解析</span></p> 
<pre>tree = {}
for i in data:
    # 数的第一条数据就 变成data中i循环的第一条数据
    tree[i['id']] = i
</pre> 
<p>然后在重新循环data数据</p> 
<p>查看pid 是不是0 <span style="color:#a2e043;">如果是</span>0则是一级标签</p> 
<p><span style="color:#a2e043;">如果不是</span>就判断下  ----子类的父类下面是否有了子类</p> 
<p><span style="color:#4da8ee;">如果没有</span>就在子类下面添加一个空列表</p> 
<p><span style="color:#4da8ee;">如果有</span> 就在父类下面添加子类这条数据</p> 
<pre><code class="language-python">def xtree(data):
    # 如果数据长度小于0，则返回数据
    if len(data) &lt;= 0:
        return data
    # 如果长度&gt;0 则进行下面的
    # 对数据重新布局
    tree = {}
    for i in data:
        # 数的第一条数据就 变成data中i循环的第一条数据
        # print('i', i)
        # print('i["id"]', i['id'])
        tree[i['id']] = i
        # print('tree[i["id"]]', tree[i['id']])
    dlist = []
    for j in data:
        # 查看pid是否是0,0为一级标签
        #  j['pid'] 就是data 数据中  每循环一条的数据中的pid
        print('j',j)
        pid = j['pid']
        if pid == 0:
            dlist.append(j)
        else:
            # 判断此子类的父类下面是否已经有了子类
            # 如果没有得到这pid 就跳出本次循环进入下一次循环
            if not tree.get(pid,None):
                continue
             # 如果children不在tree[pid]里面
            #    则就添加一个空列表
            # 否则就是在添加children一条数据
            if 'children' not in tree[pid]:
                tree[pid]['children'] = []
            tree[pid]['children'].append(j)
    return dlist</code></pre> 
<hr> 
<p style="text-align:justify;"><span style="color:#4da8ee;">修改菜单接口</span></p> 
<ol><li style="text-align:justify;">请求：post</li><li style="text-align:justify;">Api：<a href="http://127.0.0.1:8000/meum/get_menu/" rel="nofollow" title="http://127.0.0.1:8000/meum/update_menu/">http://127.0.0.1:8000/meum/update_menu/</a></li><li style="text-align:justify;">描述修改：根据id  菜单名称</li><li style="text-align:justify;">修改条件  根据id进行查找这条要修改的数据是否存在,</li><li style="text-align:justify;">          根据name查找数据库中是否有重复名字</li><li style="text-align:justify;">          然后进行修改menu.objects.filter(id=id).update(name=name)</li></ol> 
<table border="1" cellspacing="0" style="width:426.1pt;"><tbody><tr><td style="vertical-align:top;width:106.5pt;"> <p style="margin-left:.0001pt;text-align:justify;">参数</p> </td><td style="vertical-align:top;width:106.5pt;"> <p style="margin-left:.0001pt;text-align:justify;">类型</p> </td><td style="vertical-align:top;width:106.55pt;"> <p style="margin-left:.0001pt;text-align:justify;">参数描述</p> </td><td style="vertical-align:top;width:106.55pt;"> <p style="margin-left:.0001pt;text-align:justify;">实例</p> </td></tr><tr><td style="vertical-align:top;width:106.5pt;"> <p style="margin-left:.0001pt;text-align:justify;">Id</p> </td><td style="vertical-align:top;width:106.5pt;"> <p style="margin-left:.0001pt;text-align:justify;">int</p> </td><td style="vertical-align:top;width:106.55pt;"> <p style="margin-left:.0001pt;text-align:justify;">菜单id</p> </td><td style="vertical-align:top;width:106.55pt;"> <p style="margin-left:.0001pt;text-align:justify;">1</p> </td></tr><tr><td style="vertical-align:top;width:106.5pt;"> <p style="margin-left:.0001pt;text-align:justify;">name</p> </td><td style="vertical-align:top;width:106.5pt;"> <p style="margin-left:.0001pt;text-align:justify;">string</p> </td><td style="vertical-align:top;width:106.55pt;"> <p style="margin-left:.0001pt;text-align:justify;">菜单名字</p> </td><td style="vertical-align:top;width:106.55pt;"> <p style="margin-left:.0001pt;text-align:justify;">冰箱</p> </td></tr></tbody></table> 
<p style="margin-left:.0001pt;text-align:justify;">返回值：</p> 
<p style="margin-left:.0001pt;text-align:justify;">成功返回：{“code”:”200”,’msg’:”修改成功”}</p> 
<p style="margin-left:.0001pt;text-align:justify;">失败返回：{“code”:”500”,”msg”:”修改失败”}</p> 
<pre><code class="language-python">class UpdateMenuViews(APIView):
    """修改菜单
    判断 是否有空
    判断 是否有这条数据
    判断 这修改的名字是否重复
    获取到这个对象get
    进行修改
    """

    def post(self, request):
        id = request.data.get('id')
        name = request.data.get('name')
        if not all([name, id]):
            return Response({'msg': '菜单信息不能为空', 'code': 500})
        menu = Menu.objects.filter(id=id).first()
        if not menu:
            return Response({'msg': '没有该菜单，请输入正确的菜单id', 'code': 500})
        name_num = Menu.objects.filter(name=name).count()
        if name_num != 0:
            return Response({'msg': '该菜单名字已经重复，请重新输入', 'code': 500})
        menu.name = name
        menu.save()
        return Response({'msg': '该菜单修改成功', 'code': 200})
</code></pre> 
<hr> 
<p style="margin-left:.0001pt;text-align:justify;"><span style="color:#4da8ee;">删除菜单接口</span></p> 
<p style="text-align:justify;">1.请求put</p> 
<p style="margin-left:.0001pt;text-align:justify;">2.apI:<a href="http://127.0.0.1:8000/meum/get_menu/" rel="nofollow" title="http://127.0.0.1:8000/meum/delete_menu/">http://127.0.0.1:8000/meum/delete_menu/</a></p> 
<p style="margin-left:.0001pt;text-align:justify;">3.描述删除：通过传参id的形式进行删除--把状态改为status=0</p> 
<p style="margin-left:.0001pt;text-align:justify;">4.删除的条件：根据id进行查找这条要修改的数据是否存在,</p> 
<p style="margin-left:.0001pt;text-align:justify;">                       然后进行修改menu.objects.filter(id=id).update(status=0)</p> 
<table border="1" cellspacing="0" style="width:426.1pt;"><tbody><tr><td style="vertical-align:top;width:106.5pt;"> <p style="margin-left:.0001pt;text-align:justify;">参数</p> </td><td style="vertical-align:top;width:106.5pt;"> <p style="margin-left:.0001pt;text-align:justify;">类型</p> </td><td style="vertical-align:top;width:106.55pt;"> <p style="margin-left:.0001pt;text-align:justify;">参数描述</p> </td><td style="vertical-align:top;width:106.55pt;"> <p style="margin-left:.0001pt;text-align:justify;">修改为</p> </td></tr><tr><td style="vertical-align:top;width:106.5pt;"> <p style="margin-left:.0001pt;text-align:justify;">status</p> </td><td style="vertical-align:top;width:106.5pt;"> <p style="margin-left:.0001pt;text-align:justify;">int</p> </td><td style="vertical-align:top;width:106.55pt;"> <p style="margin-left:.0001pt;text-align:justify;">状态</p> </td><td style="vertical-align:top;width:106.55pt;"> <p style="margin-left:.0001pt;text-align:justify;">0（不显示）</p> </td></tr></tbody></table> 
<p style="margin-left:.0001pt;text-align:justify;">返回值：</p> 
<p style="margin-left:.0001pt;text-align:justify;">成功返回：{“code”:”200”,’msg’:”删除成功”}</p> 
<p style="margin-left:.0001pt;text-align:justify;">失败返回：{“code”:”500”,”msg”:”删除失败”}</p> 
<pre><code class="language-python">
class DeleteMenuViews(APIView):
    """删除
    通过id进行删除
    判断改id是否存在
    存在了然后把状态修改为不显示
    """

    def put(self, request, id):
        try:
            menu = Menu.objects.filter(id=id).first()
            if not menu:
                return Response({'msg': "没有该菜单id,请输入正确的id", 'code': 500})
            # 相当删除 ---把修改的数据状态改了
            menu = Menu.objects.filter(id=id).update(status=0)
            # menu.save()
            # ser = MenuSer(menu, many=True)
            return Response({'msg': "删除成功"})
        except:
            error = traceback.format_exc()
            print('error', error)
            return Response({'code': 500, 'error': error})</code></pre> 
<hr> 
<h4>2.1django 重写后台管理</h4> 
<p>其实简单的肯定在学的时候都接触过  admin.site.register(models)</p> 
<p>from django.contrib import admin</p> 
<p># Register your models here.<br> # 在应用app中的admin.py中导入注册要管理的模型models类<br> from .models import Book<br> # 调用admin.site.register方法进行注册<br> admin.site.register(Book)</p> 
<p>还有一种叫做<span style="color:#1a439c;">模型类管理器</span></p> 
<p><span style="color:#0d0016;">我也不具体说了 ----有需要点击这个链接</span><a href="http://t.csdn.cn/pYrsf" rel="nofollow" title="http://t.csdn.cn/pYrsf">http://t.csdn.cn/pYrsf</a></p> 
<pre><code class="language-python">from django.contrib import admin
from meum.models import Menu


# Register your models here.
@admin.register(Menu)
class MenuAdmin(admin.ModelAdmin):
    """账号后台管理"""
    list_display = ('id', 'name', 'pid', 'status')  # 展示字段
    list_filter = ('name', 'pid', 'status')#过滤字段
    list_per_page = 20  # 分页
    search_fields = ('name', 'pid', 'status')#搜索字段
</code></pre> 
<hr> 
<h4>3.vue3中使用elementUI配置</h4> 
<p>如果刚安装的小伙伴 肯定是没有elementui组件 下载的命令来了npm install element-plus --save</p> 
<p>在main.js里就要加上下面代码</p> 
<pre><code class="language-javascript">import ElementPlus from 'element-plus'
import 'element-plus/theme-chalk/index.css'
const app = createApp(App);
app.use(ElementPlus)</code></pre> 
<p>如果没有下载vant   下载的命令来了npm i vant -S</p> 
<p>在main.js里就要加上下面代码</p> 
<pre><code class="language-javascript">import Vant from 'vant';
import 'vant/lib/index.css';
app.use(Vant)</code></pre> 
<hr> 
<h4>4.vue3使用el-tree的布局</h4> 
<p>肯定小伙伴们第一时间想到的是官方<a href="https://element-plus.gitee.io/zh-CN/component/tree.html" rel="nofollow" title="Tree 树形控件 | Element Plus">Tree 树形控件 | Element Plus</a></p> 
<p>那咱就说说简单的tree</p> 
<p>&lt;!--<br>  :data (绑定的数据)<br>  show-checkbox (节点是否可选择)<br>  node-key='id' (每个树节点来作为唯一标识的属性)<br>  :props='defaultProps'(指定label children等属性)<br>  check-on-click-node (点击节点时就选中复选框 默认值是false 只有点击框   框的时候才选中)<br>  @node-click (节点点击时的回调)<br>  :check-strictly="true"(父子不关联 默认为false)<br>  ref (绑定dom)<br> --&gt;<br>  </p> 
<pre><code class="language-javascript">&lt;template&gt;

  &lt;div&gt;
    &lt;el-tree
      :data="data"
      :props="defaultProps"
      @node-click="handleNodeClick"
    &gt;&lt;/el-tree&gt;
  &lt;/div&gt;

&lt;/template&gt;



&lt;script&gt;
export default {
  data() {
    return {
      username: "",
      password: "",
      data: [
        {
          label: "一级 1",
          children: [
            {
              label: "二级 1-1",
              children: [
                {
                  label: "三级 1-1-1",
                },
              ],
            },
          ],
        },
        {
          label: "一级 2",
          children: [
            {
              label: "二级 2-1",
              children: [
                {
                  label: "三级 2-1-1",
                },
              ],
            },
            {
              label: "二级 2-2",
              children: [
                {
                  label: "三级 2-2-1",
                },
              ],
            },
          ],
        },
        {
          label: "一级 3",
          children: [
            {
              label: "二级 3-1",
              children: [
                {
                  label: "三级 3-1-1",
                },
              ],
            },
            {
              label: "二级 3-2",
              children: [
                {
                  label: "三级 3-2-1",
                },
              ],
            },
          ],
        },
      ],
      defaultProps: {
        children: "children",
        label: "label",
      },
    };
  },
  methods: {},
  mounted() {},
};
&lt;/script&gt;

&lt;style&gt;
&lt;/style&gt;</code></pre> 
<hr> 
<h4>5.el-tree上附加的功能</h4> 
<p>这个功能能肯定 和后端挂钩啊</p> 
<p>具体的解释都在代码块中</p> 
<p>vue2中el-tree中是使用 scoped slot 会传入两个参数node和data，分别表示当前节点的 Node 对象和当前节点的数据。<br> vue2中的 scoped slot 位于span标签内<br> vue3中el-tree则是使用#default传入两个参数node和data，分别表示当前节点的 Node 对象和当前节点的数据。<br> vue3中的#default位于template标签内<br> vue3在使用elemnt ui是应该参考element plus的官方文档</p> 
<pre><code class="language-javascript">&lt;template&gt;
  &lt;div&gt;
    &lt;van-row style="text-align: left; background-color: #ffff"&gt;
      &lt;van-col span="3" style="background-color: #545c64; height: 100rem"&gt;
      &lt;/van-col&gt;

      &lt;van-col span="21"&gt;
        添加分类
        &lt;el-tree
          :data="data"
          node-key="id"
		  default-expand-all
          :props="defaultProps"
          @node-click="handleNodeClick"
        &gt;
         &lt;!-- 想当于for循环 --&gt;
          &lt;template #default="{ node, data }"&gt;
            &lt;span class="custom-tree-node"&gt;
              &lt;span&gt;{<!-- -->{ node.label }}&lt;/span&gt;
              &lt;span&gt;
                &lt;!-- 添加点击浮框 --&gt;
                &lt;el-button text @click="add_id(data)"&gt;添加&lt;/el-button&gt;
                &lt;el-dialog
                  v-model="dialogVisible"
                  title="Tips"
                  width="30%"
                  :before-close="handleClose"
                &gt;
                  菜单名：&lt;input type="text" v-model="cname" /&gt;
                  &lt;template #footer&gt;
                    &lt;span class="dialog-footer"&gt;
                      &lt;el-button @click="append()"&gt;提交&lt;/el-button&gt;
                      &lt;el-button type="primary" @click="dialogVisible = false"
                        &gt;退出&lt;/el-button
                      &gt;
                    &lt;/span&gt;
                  &lt;/template&gt;
                &lt;/el-dialog&gt;

                &lt;!-- 修改 --&gt;
                &lt;el-button text @click="put_update(data)"&gt;修改&lt;/el-button&gt;
                &lt;el-dialog
                  v-model="MenuUpdate"
                  title="Tips"
                  width="30%"
                  :before-close="handleClose"
                &gt;
                  菜单名：&lt;input type="text" v-model="cname" /&gt;
                  &lt;template #footer&gt;
                    &lt;span class="dialog-footer"&gt;
                      &lt;el-popconfirm
                        confirm-button-text="Yes"
                        cancel-button-text="No"
                        :icon="InfoFilled"
                        icon-color="#626AEF"
                        title="确认修改"
                        @confirm="updatecates()"
                        @cancel="cancelEvent"
                      &gt;
                        &lt;template #reference&gt;
                          &lt;el-button&gt;提交&lt;/el-button&gt;
                        &lt;/template&gt;
                      &lt;/el-popconfirm&gt;
                      &lt;el-button type="primary" @click="MenuUpdate = false"
                        &gt;退出&lt;/el-button
                      &gt;
                    &lt;/span&gt;
                  &lt;/template&gt;
                &lt;/el-dialog&gt;


                &lt;!-- 删除 --&gt;
				&lt;el-button text @click="remove(data)"&gt;删除&lt;/el-button&gt;
               
              &lt;/span&gt;
            &lt;/span&gt;
          &lt;/template&gt;
        &lt;/el-tree&gt;
      &lt;/van-col&gt;
    &lt;/van-row&gt;
  &lt;/div&gt;
  &lt;div&gt;&lt;/div&gt;
&lt;/template&gt;

&lt;script&gt;
import Axios from "axios";
export default {
  data() {
    return {
      name: "",
      menulist: [],
      dialogVisible: false,
      MenuUpdate: false,
      data: [],
      defaultProps: {
        children: "children",
        label: "name",
      },
      pid: 0,
      cname: "",
      cateid: 0,
   
    };
  },
  components: {
    
  },
  methods: {
    handleNodeClick(data) {
      console.log("handleNodeClick", data.name);
    },
    getcatelist() {
      Axios.get("/meum/get_menu/")
        .then((resp) =&gt; {
			console.log(resp.data);
          if (resp.data.code == 200) {
            console.log(resp.data);
            this.data = resp.data.data;
          }
        })
        .catch((err) =&gt; {
          alert("获取失败");
          console.log(err);
        });
    },
	// 获取点击添加  某一条数据中的id   变为添加的新数据的父id
    add_id(data) {
      console.log("data添加",data);
      this.dialogVisible= true;
      this.pid = data.id;
    },
	// 获取点击修改时  某一条数据中的id   变为修改这条数据的id  修改数据id=原id 进行了传值
    put_update(data) {
      console.log("11111修改", data);
      this.id = data.id;
	  this.cname=data.name
      this.MenuUpdate = true;
    },

    // 增加菜单-----添加是为了获取点击添加这条数据的id 变为新数据的pid父id ----然后再添加他的新名字就可以了
    append() {
      Axios.post("/meum/add_menu/", { name: this.cname, pid: this.pid }).then(
        (resp) =&gt; {
          if (resp.data.code == 200) {
            this.show = false;
            this.cname = "";
            this.cateid = 0;
			// tis.getcatelist() 相当于自动刷新
            this.getcatelist();
            this.dialogVisible = false;
          } else {
            alert("添加数据失败" + resp.data.message);
          }
        }
      );
    },

    // 修改菜单-----修改是修改的这个id的数据名字   要传入之前的id和之前数据的名字
    updatecates() {
    //   console.log("data.id修改&gt;&gt;&gt;&gt;", data.id);
      Axios.post("/meum/update_menu/", { name: this.cname, id: this.id }).then(
        (resp) =&gt; {
          if (resp.data.code == 200) {
            this.getcatelist();
            this.MenuUpdate = false;
          } else {
            alert("修改数据失败" + resp.data.msg);
          }
        }
      );
    },
    remove(data) {
		// 删除 点击删除获取到删除这条数据的data  然后从data里面获取到这条数据的id  变成传入数据的id
      var id = data.id;
      Axios.put("/meum/delete_menu/" + id + "/").then((res) =&gt; {
        console.log("id&gt;&gt;&gt;", id);
        if ((res.data.code = 200)) {
          this.getcatelist();
        }
      });
    },
  },
  mounted() {
    this.getcatelist();
    // // this.test2()
    // // 从localStorage读取
    var resourcelist = localStorage.getItem("resourcelist");
    this.menulist = JSON.parse(resourcelist);
    this.menulist = ["menu/", "/add_menu"];
  },
};
&lt;/script&gt;

&lt;style&gt;
&lt;/style&gt;</code></pre> 
<p>文章到这也就结束，也希望可以帮助到大家，有问题请多多指教</p> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/1fabebcdfbfc12dd56eb5dd2fad8d16f/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">iOS解决UITableView 滑动卡顿问题</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/3bb8f5f0b7d81b8df5a7a8559f2ce98d/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">【Spring注解驱动开发】01-Import 注册组件</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>