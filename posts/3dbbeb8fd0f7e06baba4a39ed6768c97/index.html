<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>通信基站和通信技术机房 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="通信基站和通信技术机房" />
<meta property="og:description" content="SELECT nowtime.EC_CITY_NAME as EC_CITY_NAME, nowtime.EC_ITEM_TIME as EC_ITEM_TIME, nowtime.EC_ARENA_NAME as EC_ARENA_NAME, nowtime.TOTAL_USAGE as NOW_TOTAL_USAGE, lastmonth.TOTAL_USAGE as YEAR_TOTAL_USAGE, CASE WHEN nowtime.TOTAL_USAGE is null THEN 0 WHEN nowtime.TOTAL_USAGE = 0 THEN 0 ELSE CASE WHEN lastmonth.TOTAL_USAGE is null THEN 0 WHEN lastmonth.TOTAL_USAGE = 0 THEN 0 ELSE round(nowtime.TOTAL_USAGE/lastmonth.TOTAL_USAGE,4) END END as TOTALUSAGECOMPARELASTMONTH, nowtime.AIRCON_USAGE as NOW_AIRCON_USAGE, lastmonth.AIRCON_USAGE as YEAR_AIRCON_USAGE, CASE WHEN nowtime.AIRCON_USAGE is null THEN 0 WHEN nowtime.AIRCON_USAGE = 0 THEN 0 ELSE CASE WHEN lastmonth." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/3dbbeb8fd0f7e06baba4a39ed6768c97/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2018-02-04T20:51:57+08:00" />
<meta property="article:modified_time" content="2018-02-04T20:51:57+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">通信基站和通信技术机房</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    SELECT  nowtime.EC_CITY_NAME as EC_CITY_NAME, 
<br>         nowtime.EC_ITEM_TIME as EC_ITEM_TIME, 
<br>         nowtime.EC_ARENA_NAME as EC_ARENA_NAME, 
<br>         nowtime.TOTAL_USAGE as NOW_TOTAL_USAGE, 
<br>         lastmonth.TOTAL_USAGE as YEAR_TOTAL_USAGE, 
<br>         
<br>         CASE 
<br>         WHEN nowtime.TOTAL_USAGE is null  THEN 0 
<br>         WHEN  nowtime.TOTAL_USAGE = 0 THEN 0 
<br>         ELSE 
<br>             CASE WHEN lastmonth.TOTAL_USAGE is null  THEN 0 
<br>             WHEN lastmonth.TOTAL_USAGE = 0 THEN 0 
<br>             ELSE round(nowtime.TOTAL_USAGE/lastmonth.TOTAL_USAGE,4) 
<br>             END 
<br>         END as TOTALUSAGECOMPARELASTMONTH, 
<br>          
<br>          
<br>         nowtime.AIRCON_USAGE as NOW_AIRCON_USAGE, 
<br>          lastmonth.AIRCON_USAGE as YEAR_AIRCON_USAGE, 
<br>          CASE 
<br>         WHEN nowtime.AIRCON_USAGE is null  THEN 0 
<br>         WHEN  nowtime.AIRCON_USAGE = 0 THEN 0 
<br>         ELSE 
<br>             CASE WHEN lastmonth.AIRCON_USAGE is null  THEN 0 
<br>             WHEN lastmonth.AIRCON_USAGE = 0 THEN 0 
<br>             ELSE round(nowtime.AIRCON_USAGE/lastmonth.AIRCON_USAGE,4) 
<br>             END 
<br>         END as AIRCONUSAGECOMPARELASTMONTH, 
<br>           
<br>         nowtime.MAIN_USAGE as NOW_MAIN_USAGE, 
<br>         lastmonth.MAIN_USAGE as YEAR_MAIN_USAGE, 
<br>         CASE 
<br>         WHEN nowtime.MAIN_USAGE is null  THEN 0 
<br>         WHEN  nowtime.MAIN_USAGE = 0 THEN 0 
<br>         ELSE 
<br>             CASE WHEN lastmonth.MAIN_USAGE is null  THEN 0 
<br>             WHEN lastmonth.MAIN_USAGE = 0 THEN 0 
<br>             ELSE round(nowtime.MAIN_USAGE/lastmonth.MAIN_USAGE,4) 
<br>             END 
<br>         END as MAINUSAGECOMPARELASTMONTH, 
<br>          
<br>         nowtime.GENERATOR_USAGE as NOW_GENERATOR_USAGE, 
<br>         lastmonth.GENERATOR_USAGE as YEAR_GENERATOR_USAGE, 
<br>                 CASE 
<br>         WHEN nowtime.GENERATOR_USAGE is null  THEN 0 
<br>         WHEN  nowtime.GENERATOR_USAGE = 0 THEN 0 
<br>         ELSE 
<br>             CASE WHEN lastmonth.GENERATOR_USAGE is null  THEN 0 
<br>             WHEN lastmonth.GENERATOR_USAGE = 0 THEN 0 
<br>             ELSE round(nowtime.GENERATOR_USAGE/lastmonth.GENERATOR_USAGE,4) 
<br>             END 
<br>         END as GENERATORCOMPARELASTMONTH 
<br> 
<br>             FROM 
<br>             (SELECT tab1.EC_CITY_NAME as EC_CITY_NAME, tab1.EC_ITEM_TIME as EC_ITEM_TIME,tab1.EC_ARENA_NAME as EC_ARENA_NAME, 
<br>             SUM(TOTAL_USAGE) as TOTAL_USAGE, 
<br>             SUM(AIRCON_USAGE) as AIRCON_USAGE, 
<br>             SUM(MAIN_USAGE) as MAIN_USAGE, 
<br>             SUM(GENERATOR_USAGE) as GENERATOR_USAGE 
<br>             FROM 
<br>             (SELECT 
<br>                 sr.NAME as EC_CITY_NAME, 
<br>                 to_char(rcm.READTIME,'yyyymm') as EC_ITEM_TIME, 
<br>                 '通信机房' as EC_ARENA_NAME, 
<br>                 SUM(rcm.TOTAL_USAGE) as TOTAL_USAGE, 
<br>                 SUM(round(rcm.AIRCON_USAGE,2)) as AIRCON_USAGE, 
<br>                 SUM(rcm.MAIN_USAGE) as MAIN_USAGE, 
<br>                 SUM(rcm.GENERATOR_USAGE) as GENERATOR_USAGE 
<br>                 FROM  SYS_REGION sr 
<br>                 full join RES_MACHROOM rb 
<br>                 ON  sr.CODE = rb.CITYID 
<br>                 join  RPT_CAP_MACHROOM rcm 
<br>                 ON  rcm.MACHROOMID = rb.ZGID 
<br>                 GROUP BY sr.NAME, rcm.READTIME 
<br>           UNION 
<br>                       SELECT 
<br>                sr.NAME as EC_CITY_NAME, 
<br>                to_char(rcs.READTIME,'yyyymm') as EC_ITEM_TIME, 
<br>                '通信基站' as EC_ARENA_NAME, 
<br>                SUM(rcs.TOTAL_USAGE) as TOTAL_USAGE, 
<br>                SUM(round(rcs.AIRCON_USAGE,2)) as AIRCON_USAGE, 
<br>                SUM(rcs.MAIN_USAGE) as MAIN_USAGE, 
<br>                SUM(rcs.GENERATOR_USAGE) as GENERATOR_USAGE 
<br>               FROM  SYS_REGION sr 
<br>               full join RES_BTS rb 
<br>               ON  sr.CODE = rb.CITYID 
<br>               join  RPT_CAP_BTS rcs 
<br>               ON  rcs.BTSID = rb.ZGID 
<br>               GROUP BY sr.NAME, rcs.READTIME) tab1 
<br>           GROUP BY tab1.EC_CITY_NAME, tab1.EC_ITEM_TIME, tab1.EC_ARENA_NAME 
<br>           ) nowtime 
<br>           left join 
<br>         (SELECT tab1.EC_CITY_NAME as EC_CITY_NAME, to_char(add_months(to_date(tab1.EC_ITEM_TIME, 'yyyymm'),1),'yyyymm') as EC_ITEM_TIME, 
<br>             tab1.EC_ARENA_NAME as EC_ARENA_NAME, 
<br>             SUM(TOTAL_USAGE) as TOTAL_USAGE, 
<br>             SUM(AIRCON_USAGE) as AIRCON_USAGE, 
<br>             SUM(MAIN_USAGE) as MAIN_USAGE, 
<br>             SUM(GENERATOR_USAGE) as GENERATOR_USAGE 
<br>             FROM 
<br>             (SELECT 
<br>                 sr.NAME as EC_CITY_NAME, 
<br>                 to_char(rcm.READTIME,'yyyymm') as EC_ITEM_TIME, 
<br>                 '通信机房' as EC_ARENA_NAME, 
<br>                 SUM(rcm.TOTAL_USAGE) as TOTAL_USAGE, 
<br>                 SUM(round(rcm.AIRCON_USAGE,2)) as AIRCON_USAGE, 
<br>                 SUM(rcm.MAIN_USAGE) as MAIN_USAGE, 
<br>                 SUM(rcm.GENERATOR_USAGE) as GENERATOR_USAGE 
<br>                 FROM  SYS_REGION sr 
<br>                 full join RES_MACHROOM rb 
<br>                 ON  sr.CODE = rb.CITYID 
<br>                 join  RPT_CAP_MACHROOM rcm 
<br>                 ON  rcm.MACHROOMID = rb.ZGID 
<br>                 GROUP BY sr.NAME, rcm.READTIME 
<br>           UNION 
<br>              SELECT 
<br>                sr.NAME as EC_CITY_NAME, 
<br>                to_char(rcs.READTIME,'yyyymm') as EC_ITEM_TIME, 
<br>                '通信基站' as EC_ARENA_NAME, 
<br>                SUM(rcs.TOTAL_USAGE) as TOTAL_USAGE, 
<br>                SUM(round(rcs.AIRCON_USAGE,2)) as AIRCON_USAGE, 
<br>                SUM(rcs.MAIN_USAGE) as MAIN_USAGE, 
<br>                SUM(rcs.GENERATOR_USAGE) as GENERATOR_USAGE 
<br>               FROM  SYS_REGION sr 
<br>               full join RES_BTS rb 
<br>               ON  sr.CODE = rb.CITYID 
<br>               join  RPT_CAP_BTS rcs 
<br>               ON  rcs.BTSID = rb.ZGID 
<br>               GROUP BY sr.NAME, rcs.READTIME) tab1 
<br>           GROUP BY tab1.EC_CITY_NAME, tab1.EC_ITEM_TIME, tab1.EC_ARENA_NAME 
<br>           )  lastmonth 
<br>          
<br>           ON 
<br>            lastmonth.EC_CITY_NAME = nowtime.EC_CITY_NAME 
<br>              AND lastmonth.EC_ARENA_NAME = nowtime.EC_ARENA_NAME 
<br>              AND lastmonth.EC_ITEM_TIME = nowtime.EC_ITEM_TIME;
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/3af98b0862b4c8292f47985b10b9e671/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">ES6 find 和 filter 的区别</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/3495709189befdf159fa6fe1e164d0a7/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Nginx 显示中文乱码解决</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>