<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>一文看懂特征工程 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="一文看懂特征工程" />
<meta property="og:description" content="最近在训练一个销量预测模型的时候，遇到了一个问题，不管我如何调整网络结构和超参数，查准率和召回率就是上不去。吴恩达提到过机器学习的根本其实就是数据，所以我只想回过头从数据起源这边重新审视自己的模型。顺便将自己对特征工程的所有理解系统地整理出来，给自己做个笔记，也给未来的小白做个领路。这便文章不仅有对特征工程系统的解析，还会有python代码的实例演示，让我们一起出发吧！
文章目录 一、特征工程是什么及特征工程的意义二、什么是特征三、特征工程的总体流程四、特征工程流程详解和代码演示（1）数据采集（2）数据分析1、单变量分析a.计算统计特性b.绘制走势图c.绘制分布直方图 2、双变量分析a.绘制散点图 3、多变量分析 （3）数据清洗1、基于统计的异常点检测算法2、基于距离的异常点检测算法3、基于密度的异常点检测算法 （4）数据采样1、过采样的方法2、欠采样的方法 （5）数据缺失值处理1、缺失值的删除2、缺失值填充 （6）数据特征转换1、连续型特征处理a.标准化b.归一化c.函数转换d.二值化e.分箱处理 2、离散型特征处理a.数值化处理b.亚编码之独热编码b.亚编码之顺序性哑变量编码 3、时间序列处理a.时间戳处理 （7）数据特征选择1、过滤式方法进行特征选择a.卡方检验b.F 检验c.互信息 2、包装式方法进行特征选择（待更新）3、嵌入式方法进行特征选择（待更新） （8）数据特征构造1、四则运算2、特征交叉组合分类特征3、分解分类特征4、重构数值量5、分解Datatime6、窗口变量统计 （9）数据特征提取1、PCA主成分分析（待更新）2、LDA线性判别分析（待更新）5、分解Datatime6、窗口变量统计 （9）数据特征提取1、PCA主成分分析（待更新）2、LDA线性判别分析（待更新） 一、特征工程是什么及特征工程的意义 特征工程是将原始数据转化成更好表达问题本质的特征的过程，使得将这些特征运用到预测模型中能提高对不可见数据的模型预测精度；如何处理原始数据，发现对结果有明显影响作用的特征以更好地表达问题的本质就是做特征工程的目的；特征工程也是数据机器学习模型开发中较耗时、很重要的一步。重要性体现在特征选择和准备得越好，获得的结果大概率也会更好，对结果有直接的影响。耗时体现在它所涉及的流程和过程步骤较多，一份原始数据到成功的数据需要较多的处理。实际上，所有机器学习算法的成功取决于如何呈现数据
二、什么是特征 一个学生具备很多属性，例如身高、眼睛大小、是否戴眼镜、体重、数学成绩、语文成绩、英语成绩、喜欢吃汉堡、喜欢打游戏、喜欢睡懒觉。如果你要预测这个学生是否是学霸，那么身高、眼睛大小、体重这些属性显然不会是要使用到的特征，因为这些属性几乎对学生是否是学霸没有影响；而数学成绩、语文成绩、英语成绩更能体现学生是否是学霸；喜欢吃汉堡、喜欢打游戏、喜欢睡懒觉更能体现学生是否是学渣；所以这些属性可以作为预测学生是否是学霸的特征。
所以并不是所有的属性都可以看做特征，区分它们的关键在于看这个属性对解决问题有没有影响。所以可以认为特征是对于建模任务有用的属性，特征可以表达更多跟问题有关的内容。
常见的表格式的数据用行来表示一个实例（例如一个人），用列来表示属性（例如身高）。
三、特征工程的总体流程 开始流程：
根据具体问题和业务要求采集数据；例如要对学生进行学霸学渣的分类，就要采集学生的各项数据、可以直接去学校的数据库里面直接取、也可以做调研，根据自己实际情况出发决定。采集到数据之后，要对数据进行数据分析，了解数据不同属性的统计特征、例如属性的分布、最大值、最小值、标准差、方差、极值、直方图、密度分布曲线，做到对数据心中有数了解数据的整体情况之后，要对数据进行数据清洗，去除异常值、去除空值、去除重复值等然后对数据进行数据采样，做到样本的均衡。不同类别的数据数量不能相差几个数量级，对于不平衡的类别数据，需要在后边的算法中做处理然后对数据进行缺失值处理。包括缺失值删除、缺失值填充等然后对数据进行特征转换，包含连续型特征转换、离散型特征转换、时间序列处理。上面处理完成留下来的特征都是基于我们对业务和问题的理解挑选出来的，不一定是该模型真正需要的特征，所以我们还需要对这些特征进行检验和选择，包含卡方检测、F检测、互信息，还包括嵌入法和包装法，下面章节会详细演示说明。经过上面的流程七如果我们选择的特征还不足够满足我们的要求，我们还可以对特征进行构造，包含四则运算、特征交叉、分解类别特征、机器学习等方法经过上面的流程七如果我们选择的特征数量远超过我们的要求，并且非常多余，我们需要对特征进行提取，包含线性降维、非线性降维、迁移学习降维等方法到这一步就是将数据输入我们构建的网络模型进行训练了，俗称入模。结束 流程表格：
流程流程关键词方法总结1数据采集数据库读取、调研、问卷收集、爬虫2数据分析计算属性统计特征、如最大最小值、标准差、分布直方图3数据清洗去除异常值、空值、重复值4数据采样数据采样、样本均衡5数据缺失值处理缺失值删除、缺失值填充6数据特征转换（重难点）连续型特征转换、离散型特征转换、时间序列处理7数据特征选择（重难点）包含卡方检测、F检测、互信息，还包括嵌入法和包装法8数据特征构造四则运算、特征交叉、分解类别特征、机器学习9数据特征提取包含线性降维、非线性降维、迁移学习降维10数据入模生成器对象数据入模 四、特征工程流程详解和代码演示 （1）数据采集 如果你参加kaggle的比赛，那么比赛方会将所需数据提供给你；如果是公司的成熟业务，公司会有数据分析师将数据库给到你，你自己读取即可；如果是公司的创新业务，就需要你在深度理解业务的基础之上在公司能力范围内拿合适的数据，如果公司没有这些数据，你需要去网上下载、爬虫、调研、问卷收集等等手段收集数据
（2）数据分析 一般对数据先进行单变量分析，了解单个特征的数据分布情况、统计特性如平均值、最大值最小值、极值、标准差等等。然后再通过双变量分析，了解不同特征之间的关系，可以画散点图，如果图像呈现直线或者曲线，说明两个特征彼此相关。一般数据分析到这一步即可。
1、单变量分析 单变量分析是数据分析中最简单的形式，其中被分析的数据只包含一个变量。因为它是一个单一的变量，它不处理原因或关系。单变量分析的主要目的是描述数据并找出其中存在的模式。
可以将变量视为数据所属的类别，比如单变量分析中，有一个变量是“年龄”，另一个变量是“高度”等，单因素分析就不能同时观察这两个变量，也不能看它们之间的关系。
单变量数据中的发现模式有：查看平均值、模式、中位数、范围、方差、最大值、最小值、四分位数和标准偏差。此外，显示单变量数据的一些方法包括频率分布表、柱状图、直方图、频率多边形和饼状图。
a.计算统计特性 下面所说的统计特征函数主要作为Pandas的对象DataFrame或Series的方法出现。
describe 针对Series或个DataFrame列计算汇总统计 count 非na值的数量 min、max 计算最小值和最大值 idxmin、idxmax 计算能够获取到最大值和最小值得索引值 quantile 计算样本的分位数（0到1） sum 值的总和 mean 值得平均数 median 值得算术中位数（50%分位数） mad 根据平均值计算平均绝对离差 var 样本值的方差 std 样本值的标准差 corr 样本值的Spearman（Person）相关系数矩阵 skew 样本值得偏度（三阶矩） kurt 样本值得峰度（四阶矩） 例如
import pandas as pd df = pd." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/f1b99eb8cdab6b940b1816e4c35b5fcf/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-02-27T16:11:50+08:00" />
<meta property="article:modified_time" content="2023-02-27T16:11:50+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">一文看懂特征工程</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <blockquote> 
 <p>最近在训练一个销量预测模型的时候，遇到了一个问题，不管我如何调整网络结构和超参数，查准率和召回率就是上不去。吴恩达提到过机器学习的根本其实就是数据，所以我只想回过头从数据起源这边重新审视自己的模型。顺便将自己对特征工程的所有理解系统地整理出来，给自己做个笔记，也给未来的小白做个领路。这便文章不仅有对特征工程系统的解析，还会有python代码的实例演示，让我们一起出发吧！</p> 
</blockquote> 
<p></p> 
<div class="toc"> 
 <h4>文章目录</h4> 
 <ul><li><ul><li><a href="#_5" rel="nofollow">一、特征工程是什么及特征工程的意义</a></li><li><a href="#_9" rel="nofollow">二、什么是特征</a></li><li><a href="#_17" rel="nofollow">三、特征工程的总体流程</a></li><li><a href="#_48" rel="nofollow">四、特征工程流程详解和代码演示</a></li><li><ul><li><a href="#1_50" rel="nofollow">（1）数据采集</a></li><li><a href="#2_54" rel="nofollow">（2）数据分析</a></li><li><ul><li><a href="#1_58" rel="nofollow">1、单变量分析</a></li><li><ul><li><a href="#a_66" rel="nofollow">a.计算统计特性</a></li><li><a href="#b_122" rel="nofollow">b.绘制走势图</a></li><li><a href="#c_136" rel="nofollow">c.绘制分布直方图</a></li></ul> 
     </li><li><a href="#2_150" rel="nofollow">2、双变量分析</a></li><li><ul><li><a href="#a_154" rel="nofollow">a.绘制散点图</a></li></ul> 
     </li><li><a href="#3_173" rel="nofollow">3、多变量分析</a></li></ul> 
    </li><li><a href="#3_177" rel="nofollow">（3）数据清洗</a></li><li><ul><li><a href="#1_183" rel="nofollow">1、基于统计的异常点检测算法</a></li><li><a href="#2_201" rel="nofollow">2、基于距离的异常点检测算法</a></li><li><a href="#3_205" rel="nofollow">3、基于密度的异常点检测算法</a></li></ul> 
    </li><li><a href="#4_210" rel="nofollow">（4）数据采样</a></li><li><ul><li><a href="#1_220" rel="nofollow">1、过采样的方法</a></li><li><a href="#2_227" rel="nofollow">2、欠采样的方法</a></li></ul> 
    </li><li><a href="#5_237" rel="nofollow">（5）数据缺失值处理</a></li><li><ul><li><a href="#1_241" rel="nofollow">1、缺失值的删除</a></li><li><a href="#2_255" rel="nofollow">2、缺失值填充</a></li></ul> 
    </li><li><a href="#6_271" rel="nofollow">（6）数据特征转换</a></li><li><ul><li><a href="#1_273" rel="nofollow">1、连续型特征处理</a></li><li><ul><li><a href="#a_277" rel="nofollow">a.标准化</a></li><li><a href="#b_315" rel="nofollow">b.归一化</a></li><li><a href="#c_343" rel="nofollow">c.函数转换</a></li><li><a href="#d_358" rel="nofollow">d.二值化</a></li><li><a href="#e_372" rel="nofollow">e.分箱处理</a></li></ul> 
     </li><li><a href="#2_411" rel="nofollow">2、离散型特征处理</a></li><li><ul><li><a href="#a_413" rel="nofollow">a.数值化处理</a></li><li><a href="#b_417" rel="nofollow">b.亚编码之独热编码</a></li><li><a href="#b_437" rel="nofollow">b.亚编码之顺序性哑变量编码</a></li></ul> 
     </li><li><a href="#3_458" rel="nofollow">3、时间序列处理</a></li><li><ul><li><a href="#a_460" rel="nofollow">a.时间戳处理</a></li></ul> 
    </li></ul> 
    </li><li><a href="#7_498" rel="nofollow">（7）数据特征选择</a></li><li><ul><li><a href="#1_508" rel="nofollow">1、过滤式方法进行特征选择</a></li><li><ul><li><a href="#a_510" rel="nofollow">a.卡方检验</a></li><li><a href="#bF__580" rel="nofollow">b.F 检验</a></li><li><a href="#c_604" rel="nofollow">c.互信息</a></li></ul> 
     </li><li><a href="#2_631" rel="nofollow">2、包装式方法进行特征选择（待更新）</a></li><li><a href="#3_633" rel="nofollow">3、嵌入式方法进行特征选择（待更新）</a></li></ul> 
    </li><li><a href="#8_635" rel="nofollow">（8）数据特征构造</a></li><li><ul><li><ul><li><a href="#1_637" rel="nofollow">1、四则运算</a></li><li><a href="#2_641" rel="nofollow">2、特征交叉组合分类特征</a></li><li><a href="#3_645" rel="nofollow">3、分解分类特征</a></li><li><a href="#4_649" rel="nofollow">4、重构数值量</a></li><li><a href="#5Datatime_653" rel="nofollow">5、分解Datatime</a></li><li><a href="#6_657" rel="nofollow">6、窗口变量统计</a></li></ul> 
    </li></ul> 
    </li><li><a href="#9_661" rel="nofollow">（9）数据特征提取</a></li><li><ul><li><ul><li><a href="#1PCA_675" rel="nofollow">1、PCA主成分分析（待更新）</a></li><li><a href="#2LDA_677" rel="nofollow">2、LDA线性判别分析（待更新）</a></li><li><a href="#5Datatime_685" rel="nofollow">5、分解Datatime</a></li><li><a href="#6_689" rel="nofollow">6、窗口变量统计</a></li></ul> 
    </li></ul> 
    </li><li><a href="#9_693" rel="nofollow">（9）数据特征提取</a></li><li><ul><li><ul><li><a href="#1PCA_707" rel="nofollow">1、PCA主成分分析（待更新）</a></li><li><a href="#2LDA_709" rel="nofollow">2、LDA线性判别分析（待更新）</a></li></ul> 
    </li></ul> 
   </li></ul> 
  </li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h3><a id="_5"></a>一、特征工程是什么及特征工程的意义</h3> 
<p>特征工程是<code>将原始数据转化成更好表达问题本质的特征的过程，使得将这些特征运用到预测模型中能提高对不可见数据的模型预测精度</code>；如何处理原始数据，发现对结果有明显影响作用的特征以更好地表达问题的本质就是做特征工程的目的；特征工程也是数据机器学习模型开发中较耗时、很重要的一步。重要性体现在特征选择和准备得越好，获得的结果大概率也会更好，对结果有直接的影响。耗时体现在它所涉及的流程和过程步骤较多，一份原始数据到成功的数据需要较多的处理。<code>实际上，所有机器学习算法的成功取决于如何呈现数据</code></p> 
<h3><a id="_9"></a>二、什么是特征</h3> 
<p>一个学生具备很多属性，例如身高、眼睛大小、是否戴眼镜、体重、数学成绩、语文成绩、英语成绩、喜欢吃汉堡、喜欢打游戏、喜欢睡懒觉。如果你要预测这个学生是否是学霸，那么身高、眼睛大小、体重这些属性显然不会是要使用到的特征，因为这些属性几乎对学生是否是学霸没有影响；而数学成绩、语文成绩、英语成绩更能体现学生是否是学霸；喜欢吃汉堡、喜欢打游戏、喜欢睡懒觉更能体现学生是否是学渣；所以这些属性可以作为预测学生是否是学霸的特征。</p> 
<p>所以<code>并不是所有的属性都可以看做特征，区分它们的关键在于看这个属性对解决问题有没有影响</code>。所以可以认为特征是对于建模任务有用的属性，特征可以表达更多跟问题有关的内容。</p> 
<p>常见的表格式的数据用行来表示一个实例（例如一个人），用列来表示属性（例如身高）。</p> 
<h3><a id="_17"></a>三、特征工程的总体流程</h3> 
<p>开始流程：</p> 
<ol><li>根据具体问题和业务要求<code>采集数据</code>；例如要对学生进行学霸学渣的分类，就要采集学生的各项数据、可以直接去学校的数据库里面直接取、也可以做调研，根据自己实际情况出发决定。</li><li>采集到数据之后，要对数据进行<code>数据分析</code>，了解数据不同属性的统计特征、例如属性的分布、最大值、最小值、标准差、方差、极值、直方图、密度分布曲线，做到对数据心中有数</li><li>了解数据的整体情况之后，要对数据进行<code>数据清洗</code>，去除异常值、去除空值、去除重复值等</li><li>然后对数据进行<code>数据采样</code>，做到样本的均衡。不同类别的数据数量不能相差几个数量级，对于不平衡的类别数据，需要在后边的算法中做处理</li><li>然后对数据进行<code>缺失值处理</code>。包括缺失值删除、缺失值填充等</li><li>然后对数据进行<code>特征转换</code>，包含连续型特征转换、离散型特征转换、时间序列处理。</li><li>上面处理完成留下来的特征都是基于我们对业务和问题的理解挑选出来的，不一定是该模型真正需要的特征，所以我们还需要对这些<code>特征进行检验和选择</code>，包含卡方检测、F检测、互信息，还包括嵌入法和包装法，下面章节会详细演示说明。</li><li>经过上面的流程七如果我们选择的特征还不足够满足我们的要求，我们还可以对<code>特征进行构造</code>，包含四则运算、特征交叉、分解类别特征、机器学习等方法</li><li>经过上面的流程七如果我们选择的特征数量远超过我们的要求，并且非常多余，我们需要对特征进行提取，包含线性降维、非线性降维、迁移学习降维等方法</li><li>到这一步就是将数据输入我们构建的网络模型进行训练了，俗称入模。</li><li>结束</li></ol> 
<p>流程表格：</p> 
<table><thead><tr><th>流程</th><th>流程关键词</th><th>方法总结</th></tr></thead><tbody><tr><td>1</td><td>数据采集</td><td>数据库读取、调研、问卷收集、爬虫</td></tr><tr><td>2</td><td>数据分析</td><td>计算属性统计特征、如最大最小值、标准差、分布直方图</td></tr><tr><td>3</td><td>数据清洗</td><td>去除异常值、空值、重复值</td></tr><tr><td>4</td><td>数据采样</td><td>数据采样、样本均衡</td></tr><tr><td>5</td><td>数据缺失值处理</td><td>缺失值删除、缺失值填充</td></tr><tr><td>6</td><td>数据特征转换（重难点）</td><td>连续型特征转换、离散型特征转换、时间序列处理</td></tr><tr><td>7</td><td>数据特征选择（重难点）</td><td>包含卡方检测、F检测、互信息，还包括嵌入法和包装法</td></tr><tr><td>8</td><td>数据特征构造</td><td>四则运算、特征交叉、分解类别特征、机器学习</td></tr><tr><td>9</td><td>数据特征提取</td><td>包含线性降维、非线性降维、迁移学习降维</td></tr><tr><td>10</td><td>数据入模</td><td>生成器对象数据入模</td></tr></tbody></table> 
<h3><a id="_48"></a>四、特征工程流程详解和代码演示</h3> 
<h4><a id="1_50"></a>（1）数据采集</h4> 
<p>如果你参加kaggle的比赛，那么比赛方会将所需数据提供给你；如果是公司的成熟业务，公司会有数据分析师将数据库给到你，你自己读取即可；如果是公司的创新业务，就需要你在深度理解业务的基础之上在公司能力范围内拿合适的数据，如果公司没有这些数据，你需要去网上下载、爬虫、调研、问卷收集等等手段收集数据</p> 
<h4><a id="2_54"></a>（2）数据分析</h4> 
<p>一般对数据先进行单变量分析，了解单个特征的数据分布情况、统计特性如平均值、最大值最小值、极值、标准差等等。然后再通过双变量分析，了解不同特征之间的关系，可以画散点图，如果图像呈现直线或者曲线，说明两个特征彼此相关。一般数据分析到这一步即可。</p> 
<h5><a id="1_58"></a>1、单变量分析</h5> 
<p>单变量分析是数据分析中最简单的形式，其中被分析的数据只包含一个变量。因为它是一个单一的变量，它不处理原因或关系。单变量分析的主要目的是描述数据并找出其中存在的模式。</p> 
<p>可以将变量视为数据所属的类别，比如单变量分析中，有一个变量是“年龄”，另一个变量是“高度”等，单因素分析就不能同时观察这两个变量，也不能看它们之间的关系。</p> 
<p>单变量数据中的发现模式有：查看平均值、模式、中位数、范围、方差、最大值、最小值、四分位数和标准偏差。此外，显示单变量数据的一些方法包括频率分布表、柱状图、直方图、频率多边形和饼状图。</p> 
<h6><a id="a_66"></a>a.计算统计特性</h6> 
<p>下面所说的统计特征函数主要作为Pandas的对象DataFrame或Series的方法出现。</p> 
<pre><code class="prism language-python">describe 针对Series或个DataFrame列计算汇总统计

count 非na值的数量

<span class="token builtin">min</span>、<span class="token builtin">max</span> 计算最小值和最大值

idxmin、idxmax 计算能够获取到最大值和最小值得索引值

quantile 计算样本的分位数（<span class="token number">0</span>到<span class="token number">1</span>）

<span class="token builtin">sum</span> 值的总和

mean 值得平均数

median 值得算术中位数（<span class="token number">50</span><span class="token operator">%</span>分位数）

mad 根据平均值计算平均绝对离差

var 样本值的方差

std 样本值的标准差

corr 样本值的Spearman（Person）相关系数矩阵

skew 样本值得偏度（三阶矩）

kurt 样本值得峰度（四阶矩）
</code></pre> 
<p>例如</p> 
<pre><code class="prism language-python"><span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd
df <span class="token operator">=</span> pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">13</span><span class="token punctuation">,</span><span class="token number">27</span><span class="token punctuation">,</span><span class="token number">38</span><span class="token punctuation">,</span><span class="token number">43</span><span class="token punctuation">,</span><span class="token number">52</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">,</span>columns<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'age'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
df<span class="token punctuation">.</span>describe<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">## 查看汇总统计</span>
</code></pre> 
<p>结果</p> 
<pre><code class="prism language-python">        age
count	<span class="token number">6.000000</span>
mean	<span class="token number">29.833333</span>
std	<span class="token number">17.837227</span>
<span class="token builtin">min</span>	<span class="token number">6.000000</span>
<span class="token number">25</span><span class="token operator">%</span>	<span class="token number">16.500000</span>
<span class="token number">50</span><span class="token operator">%</span>	<span class="token number">32.500000</span>
<span class="token number">75</span><span class="token operator">%</span>	<span class="token number">41.750000</span>
<span class="token builtin">max</span>	<span class="token number">52.000000</span>
</code></pre> 
<h6><a id="b_122"></a>b.绘制走势图</h6> 
<p>可以查看每一列属性值的走势情况，从中你可以知道是否有偏差值、异常值、空值等情况</p> 
<pre><code class="prism language-python"><span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np
<span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd

df <span class="token operator">=</span> pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">13</span><span class="token punctuation">,</span><span class="token number">27</span><span class="token punctuation">,</span><span class="token number">38</span><span class="token punctuation">,</span><span class="token number">43</span><span class="token punctuation">,</span><span class="token number">52</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">,</span>columns<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'age'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>plot<span class="token punctuation">(</span>df<span class="token punctuation">.</span>age<span class="token punctuation">)</span>  <span class="token comment"># 绘制走势图。根据自己需求也可以绘制散点图，散点图也比较直观</span>
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># 显示图像</span>
</code></pre> 
<h6><a id="c_136"></a>c.绘制分布直方图</h6> 
<p>可以查看数据在某个范围内的分布情况</p> 
<pre><code class="prism language-python"><span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np
<span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd

df <span class="token operator">=</span> pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">13</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">38</span><span class="token punctuation">,</span><span class="token number">43</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">70</span><span class="token punctuation">]</span><span class="token punctuation">,</span>columns<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'age'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>hist<span class="token punctuation">(</span>df<span class="token punctuation">.</span>age<span class="token punctuation">,</span>bins<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token builtin">range</span><span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<h5><a id="2_150"></a>2、双变量分析</h5> 
<p>使用双变量分析来找出两个不同变量之间是否存在关系，在笛卡尔平面上（想想X和Y轴）将一个变量对另一个变量进行绘图，从而创建散点图（.plot），这样简单的事情有时可以让你了解数据试图告诉你的内容，如果数据似乎符合直线或曲线，那么这两个变量之间存在关系或相关性。例如，人们可能会选择热量摄入与体重的关系。</p> 
<h6><a id="a_154"></a>a.绘制散点图</h6> 
<pre><code class="prism language-python"><span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np
<span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd

df <span class="token operator">=</span> pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">13</span><span class="token punctuation">,</span><span class="token number">133</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                   <span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token number">105</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                   <span class="token punctuation">[</span><span class="token number">38</span><span class="token punctuation">,</span><span class="token number">381</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                   <span class="token punctuation">[</span><span class="token number">43</span><span class="token punctuation">,</span><span class="token number">435</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                   <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                   <span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">62</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                   <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">47</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                   <span class="token punctuation">[</span><span class="token number">70</span><span class="token punctuation">,</span><span class="token number">650</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>columns<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">'age'</span><span class="token punctuation">,</span><span class="token string">'friends_number'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
plt<span class="token punctuation">.</span>scatter<span class="token punctuation">(</span>df<span class="token punctuation">.</span>age<span class="token punctuation">,</span>df<span class="token punctuation">.</span>friends_number<span class="token punctuation">)</span>  
plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<h5><a id="3_173"></a>3、多变量分析</h5> 
<p>多变量分析是对三个或更多变量的分析。根据你的目标，有多种方法可以执行多变量分析，这些方法中的一些包括添加树，典型相关分析，聚类分析，对应分析/多重对应分析，因子分析，广义Procrustean分析，MANOVA，多维尺度，多元回归分析，偏最小二乘回归，主成分分析/回归/ PARAFAC和冗余分析。</p> 
<h4><a id="3_177"></a>（3）数据清洗</h4> 
<p>模型通常是对整体样本数据结构的一种表达方式，这种表达方式通常抓住的是整体样本一般性的性质，而那些在这些性质上表现完全与整体样本不一致的点，我们就称其为异常点</p> 
<p>数据清洗主要是挑选并去除异常值，异常值的去除方法包括基于统计的异常点检测算法，例如极差、四分位数间距、均差、标准差，这种方法适合挖掘单变量的数据型数据。第二种是基于距离的异常点检测算法，例如曼哈顿距离、欧式距离和马氏距离等方法。第三种是基于密度的异常点检测算法，考察当前点周围密度，可以发现局部异常点。</p> 
<h5><a id="1_183"></a>1、基于统计的异常点检测算法</h5> 
<p>这里主要介绍两种常用的方法，第一种是<code>3∂原则</code>，这个原则有个条件：**数据需要服从正态分布。**在3∂原则下，异常值如超过3倍标准差，那么可以将其视为异常值。正负3∂的概率是99.7%，那么距离平均值3∂之外的值出现的概率为P(|x-u| &gt; 3∂) &lt;= 0.003，属于极个别的小概率事件。pandas实现如下：</p> 
<pre><code class="prism language-python">df2 <span class="token operator">=</span> df1<span class="token punctuation">.</span>mask<span class="token punctuation">(</span><span class="token punctuation">(</span>df1 <span class="token operator">-</span> df1<span class="token punctuation">.</span>mean<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token builtin">abs</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span><span class="token number">3</span><span class="token operator">*</span> df1<span class="token punctuation">.</span>std<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>dropna<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># 使用3倍标准差挑选并去除异常值</span>
</code></pre> 
<p>第二种是<code>四分位数间距</code>，四分位距(IQR)就是上四分位与下四分位的差值。而我们通过IQR的1.5倍为标准，规定：超过**（上四分位+1.5倍IQR距离，或者下四分位-1.5倍IQR距离）**的点为异常值。pandas实现如下：</p> 
<pre><code class="prism language-python">Q1 <span class="token operator">=</span> df1<span class="token punctuation">.</span>quantile<span class="token punctuation">(</span>q<span class="token operator">=</span><span class="token number">0.25</span><span class="token punctuation">)</span>
Q3 <span class="token operator">=</span> df1<span class="token punctuation">.</span>quantile<span class="token punctuation">(</span>q<span class="token operator">=</span><span class="token number">0.75</span><span class="token punctuation">)</span>
IQR <span class="token operator">=</span> Q3 <span class="token operator">-</span> Q1
outlier_step <span class="token operator">=</span> <span class="token number">1.5</span><span class="token operator">*</span><span class="token punctuation">(</span>Q3<span class="token operator">-</span>Q1<span class="token punctuation">)</span>
df2 <span class="token operator">=</span> df1<span class="token punctuation">.</span>mask<span class="token punctuation">(</span><span class="token punctuation">(</span>df1<span class="token operator">&lt;</span>Q1<span class="token operator">-</span>outlier_step<span class="token punctuation">)</span> <span class="token operator">|</span> <span class="token punctuation">(</span>df1<span class="token operator">&gt;</span>Q3<span class="token operator">+</span>outlier_step<span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">.</span>dropna<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<h5><a id="2_201"></a>2、基于距离的异常点检测算法</h5> 
<p>基于距离的异常点检测算法主要通过距离方法来检测异常点，若<code>某个样本点与大多数点之间的距离大于某个阈值</code>，则视为异常点。主要使用的距离度量方法有绝对距离、欧式距离和马氏距离等方法。各类距离公式的python实现看这篇博客：https://cloud.tencent.com/developer/article/1406436。PS：实现代码都在里面</p> 
<h5><a id="3_205"></a>3、基于密度的异常点检测算法</h5> 
<p>基于密度的异常值检测方法的原理认为正常样本点所处的类簇密度要高于异常点样本所处的类簇密度。为解决实际异常值检测情况<br> 中出现的问题，有一种基于局部异常因子 LOF 方法，这个方法我没用过，也还没弄懂，所以在这里就暂时不解释了。</p> 
<h4><a id="4_210"></a>（4）数据采样</h4> 
<p>假设我们想要预测一个学生是否是学霸，然后采集到的数据有1万个学渣学生，和只有1000个学霸学生。很明显这种数据的类别样本量是不均衡的。实际情况中，绝大多数情况都存在这种类别样本不均衡的现象。所以需要我们手动进行样本的采样。参考机器学习采样方法：https://zhuanlan.zhihu.com/p/76024846</p> 
<p>对数据进行采样处理，主要还是分两种方式：</p> 
<p>过采样（over-sampling）：从占比较少的那一类样本中重复随机抽样，使得最终样本的目标类别不太失衡；</p> 
<p>欠采样（under-sampling）：从占比较多的那一类样本中随机抽取部分样本，使得最终样本的目标类别不太失衡；</p> 
<h5><a id="1_220"></a>1、过采样的方法</h5> 
<ul><li>随机过采样，它从样本少的类别中随机抽样，再将抽样得来的样本添加到数据集中，从而达到类别平衡的目的，这样子做很多时候会出现过拟合情况。</li><li>SMOTE，全称是Synthetic Minority Oversampling Technique，其思想就是在少数类的样本之间，进行插值操作来产生额外的样本。对于一个少数类样本，使用K-Mean法（K值需要人工确定）求出距离</li><li>Border-Line SMOTE，这个算法一开始会先将少数类样本分成3类，分别DANGER、SAFE、NOISE，而Border-line SMOTE算法只会在“DANGER”状态的少数类样本中去随机选择，然后利用SMOTE算法产生新样本。</li><li>ADASYN，全称为自适应合成抽样，其最大的特点是采用某种机制自动决定每个少数类样本需要产生多少合成样本，而不是像SMOTE那样对每个少数类样本合成同数量的样本。ADASYN的缺点是易受离群点的影响，如果一个少数类样本的K近邻都是多数类样本，则其权重会变得相当大，进而会在其周围生成较多的样本。</li></ul> 
<h5><a id="2_227"></a>2、欠采样的方法</h5> 
<ul><li>随机欠采样，随机从多数类中删除一些样本，这样子的缺失也是很明显，那就是造成部分信息丢失，整体模型分类效果不理想</li><li>EasyEnsemble ，将多数类样本随机划分成n份，每份的数据等于少数类样本的数量，然后对这n份数据分别训练模型，最后集成模型结果</li><li>BalanceCascade，这类算法采用了有监督结合boosting的方式，在每一轮中，也是从多数类中抽取子集与少数类结合起来训练模型，然后下一轮中丢弃此轮被正确分类的样本，使得后续的基学习器能够更加关注那些被分类错误的样本</li><li>NearMiss，从多数类样本中选取最具代表性的样本用于训练，主要是为了缓解随机欠采样中的信息丢失问题。NearMiss采用一些启发式的规则来选择样本，根据规则的不同可分为3类： 
  <ul><li>**NearMiss-1：**选择到最近的K个少数类样本平均距离最近的多数类样本</li><li>**NearMiss-2：**选择到最远的K个少数类样本平均距离最近的多数类样本</li><li>**NearMiss-3：**对于每个少数类样本选择K个最近的多数类样本，目的是保证每个少数类样本都被多数类样本包围</li></ul> </li></ul> 
<h4><a id="5_237"></a>（5）数据缺失值处理</h4> 
<p>数据缺失值处理主要分为两种，一种是缺失值的删除，一种是缺失值的填充，大部分情况下，如果数据充裕，直接删除不会产生什么影响，但是一般而言，我们的数据都是不够的，因为机器学习没有谁会觉得自己数据太多，所以对数据的缺失值进行填充是绝大多数人的选择</p> 
<h5><a id="1_241"></a>1、缺失值的删除</h5> 
<p>如果该实例的属性缺失值很多，建议直接删除实例，pandas代码如下</p> 
<pre><code class="prism language-python">df<span class="token punctuation">.</span>dropna<span class="token punctuation">(</span>inplace<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
</code></pre> 
<p>如果数据集中的某个特征的值缺失很多，也可以将这个特征直接删除，pandas代码如下</p> 
<pre><code class="prism language-python">df<span class="token punctuation">.</span>drop<span class="token punctuation">(</span>axis<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> columns<span class="token operator">=</span><span class="token string">'columns_name'</span><span class="token punctuation">,</span> inplace<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
</code></pre> 
<h5><a id="2_255"></a>2、缺失值填充</h5> 
<p>简单填充可以使用均值、中位数、固定值、众数、前一个数、后一个数、插值法进行填充。也可以使用KNN或者是随机森林进行填充</p> 
<pre><code class="prism language-python">df<span class="token punctuation">[</span><span class="token string">'rate'</span><span class="token punctuation">]</span> <span class="token operator">=</span> df<span class="token punctuation">[</span><span class="token string">'rate'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>fillna<span class="token punctuation">(</span><span class="token string">'0.1'</span><span class="token punctuation">)</span>  <span class="token comment"># 用固定值‘0.1’进行填充</span>
df<span class="token punctuation">[</span><span class="token string">'rate'</span><span class="token punctuation">]</span> <span class="token operator">=</span> df<span class="token punctuation">[</span><span class="token string">'rate'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>fillna<span class="token punctuation">(</span>df<span class="token punctuation">[</span><span class="token string">'rate'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>mean<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 用均值进行填充</span>
df<span class="token punctuation">[</span><span class="token string">'rate'</span><span class="token punctuation">]</span> <span class="token operator">=</span> df<span class="token punctuation">[</span><span class="token string">'rate'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>fillna<span class="token punctuation">(</span>df<span class="token punctuation">[</span><span class="token string">'rate'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>mode<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment"># 用众数进行填充</span>
df<span class="token punctuation">[</span><span class="token string">'rate'</span><span class="token punctuation">]</span> <span class="token operator">=</span> df<span class="token punctuation">[</span><span class="token string">'rate'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>fillna<span class="token punctuation">(</span>df<span class="token punctuation">[</span><span class="token string">'rate'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>median<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment"># 用中位数进行填充</span>
df<span class="token punctuation">[</span><span class="token string">'rate'</span><span class="token punctuation">]</span> <span class="token operator">=</span> df<span class="token punctuation">[</span><span class="token string">'rate'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>fillna<span class="token punctuation">(</span>method<span class="token operator">=</span><span class="token string">'pad'</span><span class="token punctuation">)</span>  <span class="token comment"># 用前一个数进行填充</span>
df<span class="token punctuation">[</span><span class="token string">'rate'</span><span class="token punctuation">]</span> <span class="token operator">=</span> df<span class="token punctuation">[</span><span class="token string">'rate'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>fillna<span class="token punctuation">(</span>method<span class="token operator">=</span><span class="token string">'bfill'</span><span class="token punctuation">)</span> <span class="token comment"># 用后一个数进行填充</span>
df<span class="token punctuation">[</span><span class="token string">'rate'</span><span class="token punctuation">]</span> <span class="token operator">=</span> df<span class="token punctuation">[</span><span class="token string">'rate'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>interpolate<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># 用插值进行填充</span>
</code></pre> 
<p>KNN或者是随机森林进行填充我不太清楚实现流程，这里就不解释了，有兴趣的小伙伴去谷歌搜吧。</p> 
<h4><a id="6_271"></a>（6）数据特征转换</h4> 
<h5><a id="1_273"></a>1、连续型特征处理</h5> 
<p>很多时候我们拿到的属性数据的量纲彼此不同，例如一个人的收入和体重，就需要用无量纲化的方法使不同规格的数据转换到同一规格。无量纲化的方法主要分为两类。一类是标准化、一类是归一化，归一化和标准化都是对数据做变换的方式，将原始的一列数据转换到某个范围</p> 
<h6><a id="a_277"></a>a.标准化</h6> 
<p>标准化：将数据变换为均值为0，标准差为1的分布，公式如下<br> <span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"> 
      
       
        
         
         
           X 
          
         
           i 
          
         
        
          = 
         
         
          
           
           
             x 
            
           
             i 
            
           
          
            − 
           
           
           
             μ 
            
           
             i 
            
           
          
          
          
            σ 
           
          
            i 
           
          
         
        
       
         X_i = \frac{x_i - \mu_i}{\sigma_i} 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8333em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.0785em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3117em;"><span class="" style="top: -2.55em; margin-left: -0.0785em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 2.0963em; vertical-align: -0.836em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.2603em;"><span class="" style="top: -2.314em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right: 0.0359em;">σ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3117em;"><span class="" style="top: -2.55em; margin-left: -0.0359em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.677em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3117em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mord"><span class="mord mathnormal">μ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3117em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.836em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></span><br> 其中x<sub>i</sub>是原始数据，其它两个分别是原始数据的均值和标准差，python代码实现：</p> 
<pre><code class="prism language-python"><span class="token keyword">import</span> numpy <span class="token keyword">as</span> np
<span class="token keyword">import</span> matplotlib<span class="token punctuation">.</span>pyplot <span class="token keyword">as</span> plt
<span class="token keyword">import</span> seaborn <span class="token keyword">as</span> sns
<span class="token keyword">from</span> sklearn <span class="token keyword">import</span> preprocessing

<span class="token keyword">def</span> <span class="token function">plot</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> title<span class="token punctuation">)</span><span class="token punctuation">:</span>
    sns<span class="token punctuation">.</span>set_style<span class="token punctuation">(</span><span class="token string">'dark'</span><span class="token punctuation">)</span>
    f<span class="token punctuation">,</span> ax <span class="token operator">=</span> plt<span class="token punctuation">.</span>subplots<span class="token punctuation">(</span><span class="token punctuation">)</span>
    ax<span class="token punctuation">.</span><span class="token builtin">set</span><span class="token punctuation">(</span>ylabel<span class="token operator">=</span><span class="token string">'frequency'</span><span class="token punctuation">)</span>
    ax<span class="token punctuation">.</span><span class="token builtin">set</span><span class="token punctuation">(</span>xlabel<span class="token operator">=</span><span class="token string">'height(blue) / weight(green)'</span><span class="token punctuation">)</span>
    ax<span class="token punctuation">.</span><span class="token builtin">set</span><span class="token punctuation">(</span>title<span class="token operator">=</span>title<span class="token punctuation">)</span>
    sns<span class="token punctuation">.</span>distplot<span class="token punctuation">(</span>data<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">:</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">'blue'</span><span class="token punctuation">)</span>
    sns<span class="token punctuation">.</span>distplot<span class="token punctuation">(</span>data<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">:</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> color<span class="token operator">=</span><span class="token string">'green'</span><span class="token punctuation">)</span>
    plt<span class="token punctuation">.</span>savefig<span class="token punctuation">(</span>title <span class="token operator">+</span> <span class="token string">'.png'</span><span class="token punctuation">)</span>
    plt<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>

np<span class="token punctuation">.</span>random<span class="token punctuation">.</span>seed<span class="token punctuation">(</span><span class="token number">42</span><span class="token punctuation">)</span>
height <span class="token operator">=</span> np<span class="token punctuation">.</span>random<span class="token punctuation">.</span>normal<span class="token punctuation">(</span>loc<span class="token operator">=</span><span class="token number">168</span><span class="token punctuation">,</span> scale<span class="token operator">=</span><span class="token number">5</span><span class="token punctuation">,</span> size<span class="token operator">=</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">.</span>reshape<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
weight <span class="token operator">=</span> np<span class="token punctuation">.</span>random<span class="token punctuation">.</span>normal<span class="token punctuation">(</span>loc<span class="token operator">=</span><span class="token number">70</span><span class="token punctuation">,</span> scale<span class="token operator">=</span><span class="token number">10</span><span class="token punctuation">,</span> size<span class="token operator">=</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">.</span>reshape<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>

original_data <span class="token operator">=</span> np<span class="token punctuation">.</span>concatenate<span class="token punctuation">(</span><span class="token punctuation">(</span>height<span class="token punctuation">,</span> weight<span class="token punctuation">)</span><span class="token punctuation">,</span> axis<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span>
plot<span class="token punctuation">(</span>original_data<span class="token punctuation">,</span> <span class="token string">'Original'</span><span class="token punctuation">)</span>

standard_scaler_data <span class="token operator">=</span> preprocessing<span class="token punctuation">.</span>StandardScaler<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>fit_transform<span class="token punctuation">(</span>original_data<span class="token punctuation">)</span>
plot<span class="token punctuation">(</span>standard_scaler_data<span class="token punctuation">,</span> <span class="token string">'StandardScaler'</span><span class="token punctuation">)</span>
</code></pre> 
<h6><a id="b_315"></a>b.归一化</h6> 
<p>归一化：将一列数据变化到某个固定区间(范围)中，通常，这个区间是[0, 1]，广义的讲，可以是各种区间，比如映射到[0，1]一样可以继续映射到其他范围，图像中可能会映射到[0,255]，其他情况可能映射到[-1,1]</p> 
<ul><li> <p>最大最小值归一化：将数据缩放到0和1之间，公式<br> <span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"> 
        
         
          
           
           
             X 
            
           
             i 
            
           
          
            = 
           
           
            
             
             
               x 
              
             
               i 
              
             
            
              − 
             
             
             
               x 
              
              
              
                m 
               
              
                i 
               
              
                n 
               
              
             
            
            
             
             
               x 
              
              
              
                m 
               
              
                a 
               
              
                x 
               
              
             
            
              − 
             
             
             
               x 
              
              
              
                m 
               
              
                i 
               
              
                n 
               
              
             
            
           
          
         
           X_i = \frac{x_i - x_{min}}{x_{max}-x_{min}} 
          
         
       </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8333em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.0785em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3117em;"><span class="" style="top: -2.55em; margin-left: -0.0785em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 2.0963em; vertical-align: -0.836em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.2603em;"><span class="" style="top: -2.314em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.1514em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">ma</span><span class="mord mathnormal mtight">x</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3117em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">min</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.677em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3117em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3117em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">min</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.836em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></span><br> python代码实现</p> <pre><code class="prism language-python">min_max_scaler_data <span class="token operator">=</span> preprocessing<span class="token punctuation">.</span>MinMaxScaler<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>fit_transform<span class="token punctuation">(</span>original_data<span class="token punctuation">)</span>
plot<span class="token punctuation">(</span>min_max_scaler_data<span class="token punctuation">,</span> <span class="token string">'MinMaxScaler'</span><span class="token punctuation">)</span>
</code></pre> <p>最大最小值归一化的数据转化只跟数据的极大值、极小值有关，跟其它数据无关，所以如果数据存在异常的极大极小值，这种方式就不适用。不同于标准化，标准化计算需要用到原始数据的均值和标准差，所以跟除了极大极小值之外的其它数据有关，所以标准化适合绝大多数场景。</p> </li><li> <p>均值归一化(也称为中心化)，将数据缩放到-1和1之间，公式<br> <span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"> 
        
         
          
           
           
             X 
            
           
             i 
            
           
          
            = 
           
           
            
             
             
               x 
              
             
               i 
              
             
            
              − 
             
             
             
               x 
              
              
              
                m 
               
              
                e 
               
              
                a 
               
              
                n 
               
              
             
            
            
             
             
               x 
              
              
              
                m 
               
              
                a 
               
              
                x 
               
              
             
            
              − 
             
             
             
               x 
              
              
              
                m 
               
              
                i 
               
              
                n 
               
              
             
            
           
          
         
           X_i = \frac{x_i - x_{mean}}{x_{max}-x_{min}} 
          
         
       </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8333em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.0785em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3117em;"><span class="" style="top: -2.55em; margin-left: -0.0785em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 2.0963em; vertical-align: -0.836em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.2603em;"><span class="" style="top: -2.314em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.1514em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">ma</span><span class="mord mathnormal mtight">x</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3117em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">min</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.677em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3117em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.1514em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">m</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight">an</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.836em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></span><br> python代码实现</p> <pre><code class="prism language-python">max_abs_scaler_data <span class="token operator">=</span> preprocessing<span class="token punctuation">.</span>MaxAbsScaler<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>fit_transform<span class="token punctuation">(</span>original_data<span class="token punctuation">)</span>
plot<span class="token punctuation">(</span>max_abs_scaler_data<span class="token punctuation">,</span> <span class="token string">'MaxAbsScaler'</span><span class="token punctuation">)</span>
</code></pre> </li></ul> 
<h6><a id="c_343"></a>c.函数转换</h6> 
<p>log变换，公式<br> <span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"> 
      
       
        
         
         
           X 
          
          
          
            n 
           
          
            e 
           
          
            w 
           
          
         
        
          = 
         
         
          
          
            l 
           
          
            o 
           
           
           
             g 
            
           
             10 
            
           
           
           
             x 
            
           
             i 
            
           
          
          
          
            l 
           
          
            o 
           
           
           
             g 
            
           
             10 
            
           
           
           
             x 
            
            
            
              m 
             
            
              a 
             
            
              x 
             
            
           
          
         
        
       
         X_{new} = \frac{log_{10}x_i}{log_{10}x_{max}} 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8333em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.0785em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.1514em;"><span class="" style="top: -2.55em; margin-left: -0.0785em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight" style="margin-right: 0.0269em;">w</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 2.2519em; vertical-align: -0.8804em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.3714em;"><span class="" style="top: -2.314em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.0197em;">l</span><span class="mord mathnormal">o</span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.0359em;">g</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3011em;"><span class="" style="top: -2.55em; margin-left: -0.0359em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">10</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.1514em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">ma</span><span class="mord mathnormal mtight">x</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.677em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.0197em;">l</span><span class="mord mathnormal">o</span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.0359em;">g</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3011em;"><span class="" style="top: -2.55em; margin-left: -0.0359em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">10</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3117em;"><span class="" style="top: -2.55em; margin-left: 0em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.8804em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></span><br> sigmoid变换(sigmoid函数)，公式<br> <span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"> 
      
       
        
         
         
           X 
          
          
          
            n 
           
          
            e 
           
          
            w 
           
          
         
        
          = 
         
         
         
           1 
          
          
          
            1 
           
          
            + 
           
           
           
             e 
            
            
            
              − 
             
             
             
               x 
              
             
               i 
              
             
            
           
          
         
        
       
         X_{new} = \frac{1}{1+e^{-x_i}} 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8333em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.0785em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.1514em;"><span class="" style="top: -2.55em; margin-left: -0.0785em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight" style="margin-right: 0.0269em;">w</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 2.0908em; vertical-align: -0.7693em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.3214em;"><span class="" style="top: -2.314em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord">1</span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.2222em;"></span><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.6973em;"><span class="" style="top: -2.989em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mtight"><span class="mord mathnormal mtight">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3281em;"><span class="" style="top: -2.357em; margin-left: 0em; margin-right: 0.0714em;"><span class="pstrut" style="height: 2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.143em;"><span class=""></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.677em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.7693em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></span><br> softmax变换(softmax函数)，公式<br> <span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"> 
      
       
        
         
         
           X 
          
          
          
            n 
           
          
            e 
           
          
            w 
           
          
         
        
          = 
         
         
          
          
            e 
           
           
           
             x 
            
           
             i 
            
           
          
          
          
            ∑ 
           
           
           
             e 
            
            
            
              x 
             
            
              i 
             
            
           
          
         
        
       
         X_{new} = \frac{e^{x_i}}{\sum{e^{x_i}}} 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8333em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.0785em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.1514em;"><span class="" style="top: -2.55em; margin-left: -0.0785em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight" style="margin-right: 0.0269em;">w</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 2.2774em; vertical-align: -0.936em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.3414em;"><span class="" style="top: -2.314em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mop op-symbol small-op" style="position: relative; top: 0em;">∑</span><span class="mspace" style="margin-right: 0.1667em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.5904em;"><span class="" style="top: -2.989em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3281em;"><span class="" style="top: -2.357em; margin-left: 0em; margin-right: 0.0714em;"><span class="pstrut" style="height: 2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.143em;"><span class=""></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="" style="top: -3.23em;"><span class="pstrut" style="height: 3em;"></span><span class="frac-line" style="border-bottom-width: 0.04em;"></span></span><span class="" style="top: -3.677em;"><span class="pstrut" style="height: 3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">e</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.6644em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.3281em;"><span class="" style="top: -2.357em; margin-left: 0em; margin-right: 0.0714em;"><span class="pstrut" style="height: 2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.143em;"><span class=""></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.936em;"><span class=""></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></span></p> 
<h6><a id="d_358"></a>d.二值化</h6> 
<p>特征的二值化处理是将数值型数据输出为布尔类型。其核心在于设定一个阈值，当样本数据大于该阈值时，输出为1，小于等于该阈值时输出为0。公式<br> <span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml"> 
      
       
        
         
         
           X 
          
          
          
            n 
           
          
            e 
           
          
            w 
           
          
         
        
          = 
         
         
         
           { 
          
          
           
            
             
              
              
                1 
               
              
                ， 
               
              
                x 
               
              
                &gt; 
               
              
                t 
               
              
                h 
               
              
                r 
               
              
                e 
               
              
                s 
               
              
                h 
               
              
                o 
               
              
                l 
               
              
                d 
               
              
             
            
           
           
            
             
              
              
                0 
               
              
                ， 
               
              
                x 
               
              
                &lt; 
               
              
                = 
               
              
                t 
               
              
                h 
               
              
                r 
               
              
                e 
               
              
                s 
               
              
                h 
               
              
                o 
               
              
                l 
               
              
                d 
               
              
             
            
           
          
         
        
       
         X_{new} = \begin{cases} 1，x&gt;threshold \\ 0， x&lt;=threshold\end{cases} 
        
       
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.8333em; vertical-align: -0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right: 0.0785em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.1514em;"><span class="" style="top: -2.55em; margin-left: -0.0785em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mord mathnormal mtight">e</span><span class="mord mathnormal mtight" style="margin-right: 0.0269em;">w</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.15em;"><span class=""></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.2778em;"></span></span><span class="base"><span class="strut" style="height: 3em; vertical-align: -1.25em;"></span><span class="minner"><span class="mopen delimcenter" style="top: 0em;"><span class="delimsizing size4">{<!-- --></span></span><span class="mord"><span class="mtable"><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 1.69em;"><span class="" style="top: -3.69em;"><span class="pstrut" style="height: 3.008em;"></span><span class="mord"><span class="mord">1</span><span class="mord cjk_fallback">，</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mord mathnormal">t</span><span class="mord mathnormal">h</span><span class="mord mathnormal">res</span><span class="mord mathnormal">h</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right: 0.0197em;">l</span><span class="mord mathnormal">d</span></span></span><span class="" style="top: -2.25em;"><span class="pstrut" style="height: 3.008em;"></span><span class="mord"><span class="mord">0</span><span class="mord cjk_fallback">，</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mrel">&lt;=</span><span class="mspace" style="margin-right: 0.2778em;"></span><span class="mord mathnormal">t</span><span class="mord mathnormal">h</span><span class="mord mathnormal">res</span><span class="mord mathnormal">h</span><span class="mord mathnormal">o</span><span class="mord mathnormal" style="margin-right: 0.0197em;">l</span><span class="mord mathnormal">d</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 1.19em;"><span class=""></span></span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></span><br> python代码实现</p> 
<pre><code class="prism language-python"><span class="token keyword">from</span> sklearn <span class="token keyword">import</span> preprocessing 
 <span class="token comment">#二值化，阈值设置为3，返回值为二值化后的数据</span>
erzhihua_data <span class="token operator">=</span> preprocessing<span class="token punctuation">.</span>Binarizer<span class="token punctuation">(</span>threshold<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">.</span>fit_transform<span class="token punctuation">(</span>iris<span class="token punctuation">.</span>data<span class="token punctuation">)</span>
</code></pre> 
<h6><a id="e_372"></a>e.分箱处理</h6> 
<p>分箱处理就是将连续的数值型数据转为离散的类别数据，离散化方法的关键是怎么确定分段中的离散点，确定离散点的方法有两种。</p> 
<p>一种是等距离离散法，就是离散点选取等距点。例如人的年龄是1-100岁，可使用等距离离散法分为1-10为童年，11-20为少年，以此类推~</p> 
<p>另外一种是等样本点离散法，选取的离散点保证落在每段里的样本点数量大致相同。</p> 
<p>分箱处理的好处就是我们可以提前知道这个特征的分类，可以更好地提取特征的有效信息，降低干扰。例如2岁的孩子和4岁的孩子都喜欢玩具，那么2岁和四岁对于模型来说就是没有区别的，可以归为一类来看。例如每天步数少于1000的人，容易肥胖，步数在1000到2000之间为正常，步数在2000以上为健身达人，我们就可以通过步数来区分三者的区别了。</p> 
<pre><code class="prism language-python"><span class="token keyword">from</span> sklearn <span class="token keyword">import</span> preprocessing
X <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span> <span class="token operator">-</span><span class="token number">3.</span><span class="token punctuation">,</span> <span class="token number">5.</span><span class="token punctuation">,</span> <span class="token number">15</span> <span class="token punctuation">]</span><span class="token punctuation">,</span>
              <span class="token punctuation">[</span>  <span class="token number">0.</span><span class="token punctuation">,</span> <span class="token number">6.</span><span class="token punctuation">,</span> <span class="token number">14</span> <span class="token punctuation">]</span><span class="token punctuation">,</span>
              <span class="token punctuation">[</span>  <span class="token number">6.</span><span class="token punctuation">,</span> <span class="token number">3.</span><span class="token punctuation">,</span> <span class="token number">11</span> <span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
est <span class="token operator">=</span> preprocessing<span class="token punctuation">.</span>KBinsDiscretizer<span class="token punctuation">(</span>n_bins<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> encode<span class="token operator">=</span><span class="token string">'ordinal'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>fit<span class="token punctuation">(</span>X<span class="token punctuation">)</span>
ans <span class="token operator">=</span> est<span class="token punctuation">.</span>transform<span class="token punctuation">(</span>X<span class="token punctuation">)</span> 
<span class="token comment"># ans的值如下：</span>
array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">0.</span><span class="token punctuation">,</span> <span class="token number">1.</span><span class="token punctuation">,</span> <span class="token number">1.</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
       <span class="token punctuation">[</span><span class="token number">1.</span><span class="token punctuation">,</span> <span class="token number">1.</span><span class="token punctuation">,</span> <span class="token number">1.</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
       <span class="token punctuation">[</span><span class="token number">2.</span><span class="token punctuation">,</span> <span class="token number">0.</span><span class="token punctuation">,</span> <span class="token number">0.</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre> 
<p>函数解析：</p> 
<pre><code class="prism language-python">sklearn<span class="token punctuation">.</span>preprocessing<span class="token punctuation">.</span>KBinsDiscretizer<span class="token punctuation">(</span>n_bins<span class="token operator">=</span><span class="token number">5</span><span class="token punctuation">,</span> encode<span class="token operator">=</span>’onehot’<span class="token punctuation">,</span> strategy<span class="token operator">=</span>’quantile’<span class="token punctuation">)</span>
</code></pre> 
<ul><li>n_bins：分箱的数量，默认值是5，也可以是列表，指定各个特征的分箱数量，例如，[feature1_bins,feature2_bins,…]</li><li>encode：编码方式，{‘onehot’, ‘onehot-dense’, ‘ordinal’}, (default=’onehot’) 
  <ul><li>onehot：以onehot方式编码，返回稀疏矩阵</li><li>onehot-dense：以onehot方式编码，返回密集矩阵</li><li>ordinal：以ordinal方式编码，返回分箱的序号</li></ul> </li><li>strategy：定义分箱宽度的策略，{‘uniform’, ‘quantile’, ‘kmeans’}, (default=’quantile’) 
  <ul><li>uniform：每个分箱等宽</li><li>quantile：每个分箱中拥有相同数量的数据点</li><li>kmeans：每个箱中的值具有与1D k均值簇最近的中心</li></ul> </li></ul> 
<h5><a id="2_411"></a>2、离散型特征处理</h5> 
<h6><a id="a_413"></a>a.数值化处理</h6> 
<p>将一个属性的k种值，按序转换成k个数字（1，2，3…k）。最常用是的是一个属性只有两种值，则将这两种值赋值为0和1。例如一个人的身高有矮、正常、高，则可以将这三种值赋值为1和2和3，但是对于神经网络而已，相同权重跟这些值计算得到的结果不一样，所以一般来说，直接数值化处理的结果存在的缺点太大，用于二分类赋值还行，多于二分类的赋值，效果不好，所以也就衍生出下面的几种方法。</p> 
<h6><a id="b_417"></a>b.亚编码之独热编码</h6> 
<p>例： 再次举一个简单的例子，由{红，绿、蓝}组成的颜色属性，最常用的方式是把每个类别属性转换成二元属性，即从{0,1}取一个值。因此基本上增加的属性等于相应数目的类别。对于数据集中的每个实例，只有一个是1（其他的为0），这也就是独热（one-hot)编码方式（类似于转换成哑变量）。 如果你不了解这个编码的话，你可能会觉得分解会增加没必要的麻烦（因为编码大量的增加了数据集的维度）。相反，你可能会尝试将类别属性转换成一个标量值，例如颜色属性可能会用{1,2,3}表示{红，绿，蓝}。这里存在两个问题，首先，对于一个数学模型，这意味着某种意义上红色和绿色比和蓝色更“相似”（因为|1-3| &gt; |1-2|）。除非你的类别拥有排序的属性（比如铁路线上的站），这样可能会误导你的模型。然后，可能会导致统计指标（比如均值）无意义，更糟糕的情况是，会误导你的模型。还是颜色的例子，假如你的数据集包含相同数量的红色和蓝色的实例，但是没有绿色的，那么颜色的均值可能还是得到2，也就是绿色的意思。</p> 
<p>哑编码主要是采用N位状态寄存器来对N个状态进行编码，一个变量N个值就转换成N个虚拟变量，每个状态都由他独立的寄存器位，并且在任意时候只有一位有效。 使用one-hot编码，将离散特征的取值扩展到了欧式空间，离散特征的某个取值就对 应欧式空间的某个点。 在回归，分类，聚类等机器等学习算法中，特征之间距离的计算或相似度的计算是 非常重要的，而我们常用的距离或相似度的计算都是在欧式空间的相似度计算，计算 余弦相似性，基于的就是欧式空间。</p> 
<pre><code class="prism language-python"><span class="token keyword">from</span> sklearn <span class="token keyword">import</span> preprocessing
enc <span class="token operator">=</span> preprocessing<span class="token punctuation">.</span>OneHotEncoder<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># 建立对象</span>
enc<span class="token punctuation">.</span>fit<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">'zero'</span><span class="token punctuation">,</span> <span class="token string">'zero'</span><span class="token punctuation">,</span> <span class="token string">'three'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
         <span class="token punctuation">[</span><span class="token string">'one'</span><span class="token punctuation">,</span> <span class="token string">'one'</span><span class="token punctuation">,</span> <span class="token string">'zero'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
         <span class="token punctuation">[</span><span class="token string">'one'</span><span class="token punctuation">,</span> <span class="token string">'two'</span><span class="token punctuation">,</span> <span class="token string">'two'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
         <span class="token punctuation">[</span><span class="token string">'zero'</span><span class="token punctuation">,</span> <span class="token string">'zero'</span><span class="token punctuation">,</span> <span class="token string">'two'</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token comment"># 对象编码 </span>
ans <span class="token operator">=</span> enc<span class="token punctuation">.</span>transform<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">'zero'</span><span class="token punctuation">,</span> <span class="token string">'two'</span><span class="token punctuation">,</span> <span class="token string">'three'</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span>toarray<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># 将离散型数据转换成one-hot编码</span>

inverse_ans <span class="token operator">=</span> enc<span class="token punctuation">.</span>inverse_transform<span class="token punctuation">(</span>ans<span class="token punctuation">)</span>  <span class="token comment"># 将one-hot编码转换成离散型数据</span>
</code></pre> 
<p>使用OneHot时要避免高基类别的特征以及基于决策树的模型。例如如果有个特征的值有一万种，那么one-hot编码之后的维度就变成了一万维，变成很大的稀疏举证，不利模型的训练。one-hot也不利于决策树的学习，也不适合用于决策树。</p> 
<h6><a id="b_437"></a>b.亚编码之顺序性哑变量编码</h6> 
<p>与one-hot编码一样，都是将一个变量的k个值生成k个哑变量，但同时保护了特征的顺序关系。例如下面例子</p> 
<table><thead><tr><th>特征取值</th><th>向量表示</th></tr></thead><tbody><tr><td>bad</td><td>(1,0,0)</td></tr><tr><td>normal</td><td>(1,1,0)</td></tr><tr><td>good</td><td>(1,1,1)</td></tr></tbody></table> 
<p>python代码实现</p> 
<pre><code class="prism language-python"><span class="token keyword">from</span> sklearn <span class="token keyword">import</span> preprocessing 
enc <span class="token operator">=</span> preprocessing<span class="token punctuation">.</span>OrdinalEncoder<span class="token punctuation">(</span><span class="token punctuation">)</span>  
X <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">'male'</span><span class="token punctuation">,</span> <span class="token string">'from US'</span><span class="token punctuation">,</span> <span class="token string">'uses Safari'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'female'</span><span class="token punctuation">,</span> <span class="token string">'from Europe'</span><span class="token punctuation">,</span> <span class="token string">'uses Firefox'</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
enc<span class="token punctuation">.</span>fit<span class="token punctuation">(</span>X<span class="token punctuation">)</span>  <span class="token comment"># 该方法接受输入和标签，计算出数据变换的方式</span>
ans <span class="token operator">=</span> enc<span class="token punctuation">.</span>transform<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">'female'</span><span class="token punctuation">,</span> <span class="token string">'from US'</span><span class="token punctuation">,</span> <span class="token string">'uses Safari'</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment"># 根据已经计算出的变换方式，返回对输入数据x变换后的结果</span>
inverse_ans <span class="token operator">=</span> enc<span class="token punctuation">.</span>inverse_transform<span class="token punctuation">(</span>ans<span class="token punctuation">)</span> <span class="token comment"># # 根据已经计算出的变换方式，返回对输入数据x变换前的结果</span>
</code></pre> 
<h5><a id="3_458"></a>3、时间序列处理</h5> 
<h6><a id="a_460"></a>a.时间戳处理</h6> 
<p>时间戳属性通常需要分离成多个维度比如年、月、日、小时、分钟、秒钟。python代码实现</p> 
<pre><code class="prism language-python"><span class="token keyword">import</span> pandas <span class="token keyword">as</span> pd
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np
<span class="token keyword">import</span> datetime
<span class="token keyword">from</span> dateutil<span class="token punctuation">.</span>parser <span class="token keyword">import</span> parse 
<span class="token comment"># parse根据字符串解析成datetime,字符串可以很随意,可用时间日期的英文单词,可用横线,逗号,空格等做分隔符</span>
<span class="token keyword">import</span> pytz <span class="token comment"># 时区</span>

time_stamps <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'2015-03-08 10:30:00.360000+00:00'</span><span class="token punctuation">,</span> <span class="token string">'2017-07-13 15:45:05.755000-07:00'</span><span class="token punctuation">,</span>
               <span class="token string">'2012-01-20 22:30:00.254000+05:30'</span><span class="token punctuation">,</span> <span class="token string">'2016-12-25 00:30:00.000000+10:00'</span><span class="token punctuation">]</span>
df <span class="token operator">=</span> pd<span class="token punctuation">.</span>DataFrame<span class="token punctuation">(</span>time_stamps<span class="token punctuation">,</span> columns <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'Time'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
ts_objs <span class="token operator">=</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span><span class="token punctuation">[</span>pd<span class="token punctuation">.</span>Timestamp<span class="token punctuation">(</span>item<span class="token punctuation">)</span> <span class="token keyword">for</span> item <span class="token keyword">in</span> np<span class="token punctuation">.</span>array<span class="token punctuation">(</span>df<span class="token punctuation">.</span>Time<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
df<span class="token punctuation">[</span><span class="token string">'Ts_obj'</span><span class="token punctuation">]</span> <span class="token operator">=</span> ts_objs
df<span class="token punctuation">[</span><span class="token string">'Year'</span><span class="token punctuation">]</span> <span class="token operator">=</span> df<span class="token punctuation">[</span><span class="token string">'Ts_obj'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token builtin">apply</span><span class="token punctuation">(</span><span class="token keyword">lambda</span> d<span class="token punctuation">:</span> d<span class="token punctuation">.</span>year<span class="token punctuation">)</span>
df<span class="token punctuation">[</span><span class="token string">'Month'</span><span class="token punctuation">]</span> <span class="token operator">=</span> df<span class="token punctuation">[</span><span class="token string">'Ts_obj'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token builtin">apply</span><span class="token punctuation">(</span><span class="token keyword">lambda</span> d<span class="token punctuation">:</span> d<span class="token punctuation">.</span>month<span class="token punctuation">)</span>
df<span class="token punctuation">[</span><span class="token string">'Day'</span><span class="token punctuation">]</span> <span class="token operator">=</span> df<span class="token punctuation">[</span><span class="token string">'Ts_obj'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token builtin">apply</span><span class="token punctuation">(</span><span class="token keyword">lambda</span> d<span class="token punctuation">:</span> d<span class="token punctuation">.</span>day<span class="token punctuation">)</span>
df<span class="token punctuation">[</span><span class="token string">'DayOfWeek'</span><span class="token punctuation">]</span> <span class="token operator">=</span> df<span class="token punctuation">[</span><span class="token string">'Ts_obj'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token builtin">apply</span><span class="token punctuation">(</span><span class="token keyword">lambda</span> d<span class="token punctuation">:</span> d<span class="token punctuation">.</span>dayofweek<span class="token punctuation">)</span>
df<span class="token punctuation">[</span><span class="token string">'DayName'</span><span class="token punctuation">]</span> <span class="token operator">=</span> df<span class="token punctuation">[</span><span class="token string">'Ts_obj'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token builtin">apply</span><span class="token punctuation">(</span><span class="token keyword">lambda</span> d<span class="token punctuation">:</span> d<span class="token punctuation">.</span>day_name<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
df<span class="token punctuation">[</span><span class="token string">'DayOfYear'</span><span class="token punctuation">]</span> <span class="token operator">=</span> df<span class="token punctuation">[</span><span class="token string">'Ts_obj'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token builtin">apply</span><span class="token punctuation">(</span><span class="token keyword">lambda</span> d<span class="token punctuation">:</span> d<span class="token punctuation">.</span>dayofyear<span class="token punctuation">)</span>
df<span class="token punctuation">[</span><span class="token string">'WeekOfYear'</span><span class="token punctuation">]</span> <span class="token operator">=</span> df<span class="token punctuation">[</span><span class="token string">'Ts_obj'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token builtin">apply</span><span class="token punctuation">(</span><span class="token keyword">lambda</span> d<span class="token punctuation">:</span> d<span class="token punctuation">.</span>weekofyear<span class="token punctuation">)</span>
df<span class="token punctuation">[</span><span class="token string">'Quarter'</span><span class="token punctuation">]</span> <span class="token operator">=</span> df<span class="token punctuation">[</span><span class="token string">'Ts_obj'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token builtin">apply</span><span class="token punctuation">(</span><span class="token keyword">lambda</span> d<span class="token punctuation">:</span> d<span class="token punctuation">.</span>quarter<span class="token punctuation">)</span>
</code></pre> 
<p>df结果如下</p> 
<pre><code class="prism language-python">
Time	Ts_obj	Year	Month	Day	DayOfWeek	DayOfYear	WeekOfYear	Quarter	DayName
<span class="token number">0</span>	<span class="token number">2015</span><span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span><span class="token number">08</span> <span class="token number">10</span><span class="token punctuation">:</span><span class="token number">30</span><span class="token punctuation">:</span><span class="token number">00.360000</span><span class="token operator">+</span><span class="token number">00</span><span class="token punctuation">:</span><span class="token number">00</span>	<span class="token number">2015</span><span class="token operator">-</span><span class="token number">03</span><span class="token operator">-</span><span class="token number">08</span> <span class="token number">10</span><span class="token punctuation">:</span><span class="token number">30</span><span class="token punctuation">:</span><span class="token number">00.360000</span><span class="token operator">+</span><span class="token number">00</span><span class="token punctuation">:</span><span class="token number">00</span>	<span class="token number">2015</span>	<span class="token number">3</span>	<span class="token number">8</span>	<span class="token number">6</span>	<span class="token number">67</span>	<span class="token number">10</span>	<span class="token number">1</span>	Sunday
<span class="token number">1</span>	<span class="token number">2017</span><span class="token operator">-</span><span class="token number">07</span><span class="token operator">-</span><span class="token number">13</span> <span class="token number">15</span><span class="token punctuation">:</span><span class="token number">45</span><span class="token punctuation">:</span><span class="token number">05.755000</span><span class="token operator">-</span><span class="token number">07</span><span class="token punctuation">:</span><span class="token number">00</span>	<span class="token number">2017</span><span class="token operator">-</span><span class="token number">07</span><span class="token operator">-</span><span class="token number">13</span> <span class="token number">15</span><span class="token punctuation">:</span><span class="token number">45</span><span class="token punctuation">:</span><span class="token number">05.755000</span><span class="token operator">-</span><span class="token number">07</span><span class="token punctuation">:</span><span class="token number">00</span>	<span class="token number">2017</span>	<span class="token number">7</span>	<span class="token number">13</span>	<span class="token number">3</span>	<span class="token number">194</span>	<span class="token number">28</span>	<span class="token number">3</span>	Thursday
<span class="token number">2</span>	<span class="token number">2012</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span><span class="token number">20</span> <span class="token number">22</span><span class="token punctuation">:</span><span class="token number">30</span><span class="token punctuation">:</span><span class="token number">00.254000</span><span class="token operator">+</span><span class="token number">05</span><span class="token punctuation">:</span><span class="token number">30</span>	<span class="token number">2012</span><span class="token operator">-</span><span class="token number">01</span><span class="token operator">-</span><span class="token number">20</span> <span class="token number">22</span><span class="token punctuation">:</span><span class="token number">30</span><span class="token punctuation">:</span><span class="token number">00.254000</span><span class="token operator">+</span><span class="token number">05</span><span class="token punctuation">:</span><span class="token number">30</span>	<span class="token number">2012</span>	<span class="token number">1</span>	<span class="token number">20</span>	<span class="token number">4</span>	<span class="token number">20</span>	<span class="token number">3</span>	<span class="token number">1</span>	Friday
<span class="token number">3</span>	<span class="token number">2016</span><span class="token operator">-</span><span class="token number">12</span><span class="token operator">-</span><span class="token number">25</span> <span class="token number">00</span><span class="token punctuation">:</span><span class="token number">30</span><span class="token punctuation">:</span><span class="token number">00.000000</span><span class="token operator">+</span><span class="token number">10</span><span class="token punctuation">:</span><span class="token number">00</span>	<span class="token number">2016</span><span class="token operator">-</span><span class="token number">12</span><span class="token operator">-</span><span class="token number">25</span> <span class="token number">00</span><span class="token punctuation">:</span><span class="token number">30</span><span class="token punctuation">:</span><span class="token number">00</span><span class="token operator">+</span><span class="token number">10</span><span class="token punctuation">:</span><span class="token number">00</span>	<span class="token number">2016</span>	<span class="token number">12</span>	<span class="token number">25</span>	<span class="token number">6</span>	<span class="token number">360</span>	<span class="token number">51</span>	<span class="token number">4</span>	Sunday
</code></pre> 
<h4><a id="7_498"></a>（7）数据特征选择</h4> 
<p>特征选择顾名思义，就是从大量的特征中选择少量的有用特征。不是所有的特征都是平等的。那些与问题不相关的属性需要被删除；还有一些特征比其他特征重要，也有一些特征是冗余的。特征选择就是自动地选择对于问题中重要的特征的一个子集。</p> 
<p>特征选择的方法主要分为三大类：过滤式方法 (<em>Filter Methods</em>)，包裹式方法 (<em>Wrapper Methods</em>) 和嵌入式方法 (<em>Embedded Methods</em>)。</p> 
<ul><li>过滤式方法运用统计指标来为每个特征打分并筛选特征，其聚焦于数据本身的特点。其优点是计算快，不依赖于具体的模型，缺点是选择的统计指标不是为特定模型定制的，因而最后的准确率可能不高。而且因为进行的是单变量统计检验，没有考虑特征间的相互关系。</li><li>包装式方法使用模型来筛选特征，通过不断地增加或删除特征，在验证集上测试模型准确率，寻找最优的特征子集。包裹式方法因为有模型的直接参与，因而通常准确性较高，但是因为每变动一个特征都要重新训练模型，因而计算开销大，其另一个缺点是容易过拟合。</li><li>嵌入式方法利用了模型本身的特性，将特征选择嵌入到模型的构建过程中。典型的如 Lasso 和树模型等。准确率较高，计算复杂度介于过滤式和包裹式方法之间，但缺点是只有部分模型有这个功能。</li></ul> 
<h5><a id="1_508"></a>1、过滤式方法进行特征选择</h5> 
<h6><a id="a_510"></a>a.卡方检验</h6> 
<p>既然特征选择的目的是去除无关特征，那么什么是无关特征？ 对于分类问题，在过滤式方法中一般假设与标签独立的特征为无关特征，而卡方检验恰好可以进行<strong>独立性检验</strong>，所以其适用于特征选择。如果检验结果是某个特征与标签独立，则可以去除该特征。python实现如下</p> 
<p>导入工具包和加载测试数据</p> 
<pre><code class="prism language-python"><span class="token keyword">from</span> sklearn<span class="token punctuation">.</span>feature_selection <span class="token keyword">import</span> SelectKBest
<span class="token keyword">from</span> sklearn<span class="token punctuation">.</span>feature_selection <span class="token keyword">import</span> chi2
<span class="token keyword">from</span> sklearn<span class="token punctuation">.</span>datasets <span class="token keyword">import</span> load_iris
 
<span class="token comment">#导入IRIS数据集</span>
iris <span class="token operator">=</span> load_iris<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<p>iris.data如下</p> 
<pre><code class="prism language-python">array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">5.1</span><span class="token punctuation">,</span> <span class="token number">3.5</span><span class="token punctuation">,</span> <span class="token number">1.4</span><span class="token punctuation">,</span> <span class="token number">0.2</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
       <span class="token punctuation">[</span><span class="token number">4.9</span><span class="token punctuation">,</span> <span class="token number">3.</span> <span class="token punctuation">,</span> <span class="token number">1.4</span><span class="token punctuation">,</span> <span class="token number">0.2</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
       <span class="token punctuation">[</span><span class="token number">4.7</span><span class="token punctuation">,</span> <span class="token number">3.2</span><span class="token punctuation">,</span> <span class="token number">1.3</span><span class="token punctuation">,</span> <span class="token number">0.2</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
       <span class="token punctuation">[</span><span class="token number">4.6</span><span class="token punctuation">,</span> <span class="token number">3.1</span><span class="token punctuation">,</span> <span class="token number">1.5</span><span class="token punctuation">,</span> <span class="token number">0.2</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
       <span class="token punctuation">[</span><span class="token number">5.</span> <span class="token punctuation">,</span> <span class="token number">3.6</span><span class="token punctuation">,</span> <span class="token number">1.4</span><span class="token punctuation">,</span> <span class="token number">0.2</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
       <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</code></pre> 
<p>进行卡方检验</p> 
<pre><code class="prism language-python">kafanger <span class="token operator">=</span> SelectKBest<span class="token punctuation">(</span>chi2<span class="token punctuation">,</span> k<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment">#选择k个最佳特征</span>
kafang_irisdata <span class="token operator">=</span> kafanger<span class="token punctuation">.</span>fit_transform<span class="token punctuation">(</span>iris<span class="token punctuation">.</span>data<span class="token punctuation">,</span> iris<span class="token punctuation">.</span>target<span class="token punctuation">)</span> <span class="token comment">#iris.data是特征数据，iris.target是标签数据，该函数可以选择出k个特征 </span>
</code></pre> 
<p>kafang_irisdata如下</p> 
<pre><code class="prism language-python">array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1.4</span><span class="token punctuation">,</span> <span class="token number">0.2</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
       <span class="token punctuation">[</span><span class="token number">1.4</span><span class="token punctuation">,</span> <span class="token number">0.2</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
       <span class="token punctuation">[</span><span class="token number">1.3</span><span class="token punctuation">,</span> <span class="token number">0.2</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
       <span class="token punctuation">[</span><span class="token number">1.5</span><span class="token punctuation">,</span> <span class="token number">0.2</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
       <span class="token punctuation">[</span><span class="token number">1.4</span><span class="token punctuation">,</span> <span class="token number">0.2</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
       <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</code></pre> 
<p>可以看出，后面两个特征正是卡方检验选择的特征。不信的话我们可以计算卡方检验的得分和P值来验证。得分越高，特征越好；P值越低，特征越好。</p> 
<p>计算得分</p> 
<pre><code class="prism language-python">model<span class="token punctuation">.</span>scores_
</code></pre> 
<p>结果</p> 
<pre><code class="prism language-python">array<span class="token punctuation">(</span><span class="token punctuation">[</span> <span class="token number">10.81782088</span><span class="token punctuation">,</span>   <span class="token number">3.7107283</span> <span class="token punctuation">,</span> <span class="token number">116.31261309</span><span class="token punctuation">,</span>  <span class="token number">67.0483602</span> <span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre> 
<p>计算P值</p> 
<pre><code class="prism language-python">model<span class="token punctuation">.</span>pvalues_
</code></pre> 
<p>结果</p> 
<pre><code class="prism language-python">array<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">4.47651499e-03</span><span class="token punctuation">,</span> <span class="token number">1.56395980e-01</span><span class="token punctuation">,</span> <span class="token number">5.53397228e-26</span><span class="token punctuation">,</span> <span class="token number">2.75824965e-15</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre> 
<h6><a id="bF__580"></a>b.F 检验</h6> 
<p>F检验,又称ANOVA,方差齐性检验,是用来捕捉每个特征与标签之间的<strong>线性关系</strong>的过滤方法.它既可以做回归又可以做分类。F检验之前需要先将数据转换成服从<strong>正态分布</strong>的形式，python代码如下，注意看代码注释，F检验分别有两种方法，分别是单因素方差分析<code>f_classif</code>用于分类，和线性相关分析f_regression用于回归</p> 
<pre><code class="prism language-python"><span class="token keyword">from</span> sklearn<span class="token punctuation">.</span>feature_selection <span class="token keyword">import</span> SelectKBest
<span class="token keyword">from</span> sklearn<span class="token punctuation">.</span>feature_selection <span class="token keyword">import</span> chi2<span class="token punctuation">,</span>f_classif<span class="token punctuation">,</span>f_regression
<span class="token keyword">from</span> sklearn<span class="token punctuation">.</span>datasets <span class="token keyword">import</span> load_iris
 
<span class="token comment">#导入IRIS数据集</span>
iris <span class="token operator">=</span> load_iris<span class="token punctuation">(</span><span class="token punctuation">)</span>
F_classier <span class="token operator">=</span> SelectKBest<span class="token punctuation">(</span>f_classif<span class="token punctuation">,</span> k<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment">#单因素方差分析用于分类，使用选择k个最佳特征</span>
kafang_irisdata <span class="token operator">=</span> F_classier<span class="token punctuation">.</span>fit_transform<span class="token punctuation">(</span>iris<span class="token punctuation">.</span>data<span class="token punctuation">,</span> iris<span class="token punctuation">.</span>target<span class="token punctuation">)</span> <span class="token comment">#iris.data是特征数据，iris.target是标签数据，该函数可以选择出k个特征</span>
<span class="token comment"># 查看得分和P值</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>F_classier<span class="token punctuation">.</span>scores_<span class="token punctuation">)</span> <span class="token comment"># 查看得分</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>F_classier<span class="token punctuation">.</span>pvalues_<span class="token punctuation">)</span> <span class="token comment"># 查看P值</span>
</code></pre> 
<p>相应的，线性相关分析的python代码实现为，</p> 
<pre><code class="prism language-python">sklearn<span class="token punctuation">.</span>feature_selection<span class="token punctuation">.</span>SelectKBest<span class="token punctuation">(</span>f_regression<span class="token punctuation">,</span> k<span class="token punctuation">:</span> 选择的特征数<span class="token punctuation">)</span>
</code></pre> 
<h6><a id="c_604"></a>c.互信息</h6> 
<p>互信息法是用来捕捉每个特征与标签之间的任意关系(包括线性关系和非线性关系)的过滤方法,可以做回归也可以做分类。</p> 
<p>其用法与F检验和卡方检验相同,需要搭配<code>SelectKBest</code>使用</p> 
<pre><code class="prism language-python">sklearn<span class="token punctuation">.</span>feature_selection<span class="token punctuation">.</span>SelectKBest<span class="token punctuation">(</span>mutual_info_calssif<span class="token punctuation">,</span> k<span class="token punctuation">:</span> 选择的特征数<span class="token punctuation">)</span>
sklearn<span class="token punctuation">.</span>feature_selection<span class="token punctuation">.</span>SelectKBest<span class="token punctuation">(</span>mutual_indo_regression<span class="token punctuation">,</span> k<span class="token punctuation">:</span> 选择的特征数<span class="token punctuation">)</span>
</code></pre> 
<p>具体python代码使用例子为</p> 
<pre><code class="prism language-python"><span class="token keyword">from</span> sklearn<span class="token punctuation">.</span>feature_selection <span class="token keyword">import</span> SelectKBest
<span class="token keyword">from</span> sklearn<span class="token punctuation">.</span>feature_selection <span class="token keyword">import</span> chi2<span class="token punctuation">,</span>f_classif<span class="token punctuation">,</span>f_regression<span class="token punctuation">,</span>mutual_info_classif<span class="token punctuation">,</span>mutual_info_regression
<span class="token keyword">from</span> sklearn<span class="token punctuation">.</span>datasets <span class="token keyword">import</span> load_iris
 
<span class="token comment">#导入IRIS数据集</span>
iris <span class="token operator">=</span> load_iris<span class="token punctuation">(</span><span class="token punctuation">)</span>
hu_classier <span class="token operator">=</span> SelectKBest<span class="token punctuation">(</span>mutual_info_classif<span class="token punctuation">,</span> k<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment">#单因素方差分析用于分类，使用选择k个最佳特征</span>
kafang_irisdata <span class="token operator">=</span> hu_classier<span class="token punctuation">.</span>fit_transform<span class="token punctuation">(</span>iris<span class="token punctuation">.</span>data<span class="token punctuation">,</span> iris<span class="token punctuation">.</span>target<span class="token punctuation">)</span> <span class="token comment">#iris.data是特征数据，iris.target是标签数据，该函数可以选择出k个特征</span>
<span class="token comment"># 查看得分和P值</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>hu_classier<span class="token punctuation">.</span>scores_<span class="token punctuation">)</span> <span class="token comment"># 查看得分</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>hu_classier<span class="token punctuation">.</span>pvalues_<span class="token punctuation">)</span> <span class="token comment"># 查看P值</span>
</code></pre> 
<h5><a id="2_631"></a>2、包装式方法进行特征选择（待更新）</h5> 
<h5><a id="3_633"></a>3、嵌入式方法进行特征选择（待更新）</h5> 
<h4><a id="8_635"></a>（8）数据特征构造</h4> 
<h6><a id="1_637"></a>1、四则运算</h6> 
<p>比如原来的特征是x1和x2，那么x1+x2就是一个新的特征，或者当x1大于某个数c的时候，就产生一个新的变量x3，并且x3=1，当x1小于c的时候，x3=0，所以这样看来呢，可以按照这种方法构造出很多特征，这个就是构造。</p> 
<h6><a id="2_641"></a>2、特征交叉组合分类特征</h6> 
<p>交叉特征算是特征工程中非常重要的方法之一了，它是将两个或更多的类别属性组合成一个。当组合的特征要比单个特征更好时，这是一项非常有用的技术。数学上来说，是对类别特征的所有可能值进行交叉相乘。假如拥有一个特征A,A有两个可能值{A1，A2}。拥有一个特征B，存在{B1，B2}等可能值。然后，A&amp;B之间的交叉特征如下：{（A1，B1），（A1，B2），（A2，B1），（A2，B2）}，并且你可以给这些组合特征取任何名字，但是需要明白每个组合特征其实代表着A和B各自信息协同作用。一个更好地诠释好的交叉特征的实例是类似于（经度，纬度）。一个相同的经度对应了地图上很多的地方，纬度也是一样。但是一旦你将经度和纬度组合到一起，它们就代表了地理上特定的一块区域，区域中每一部分是拥有着类似的特性。</p> 
<h6><a id="3_645"></a>3、分解分类特征</h6> 
<p>对于一个特征item_color有‘red’、‘green’、‘unknown’三个取值，那么可以创造一些新的特征例如： - 二值特征has_color： 1知道具体颜色，0表示不知道。这个可以替换item_color特征用到更简单的线性模型中。 - 三个二值特征is_red、is_green和is_unknown。这个可以添加到原有特征中用到决策树模型中。</p> 
<h6><a id="4_649"></a>4、重构数值量</h6> 
<p>依据实际业务和数据、构造范围二值特征、构造阶段性的统计特征等。例如闯红灯、不管提前几秒都归于闯红灯，可以把提前几秒闯红灯的时间转换成是否闯红灯。第二，假设现在你有一个店铺从2017年1月1日到2020年12月31日的每天的总销售额数据，你要通过这些数据预测该店铺在2021年每天的销售情况。那么我们可以通过每天的销售数据以每周或者每月为阶段，构建每周和每个月的销售总和数据、构建平均每周和每个月的销售平均数据</p> 
<h6><a id="5Datatime_653"></a>5、分解Datatime</h6> 
<p>将一个完整的时间特征分解成年、月、周、日、时、分、秒等时间单位，以此构建新特征，详细说明可以参考上面‘’（6）数据特征转换 - 3、时间序列处理 - a.时间戳处理“</p> 
<h6><a id="6_657"></a>6、窗口变量统计</h6> 
<p>举个例子，假设现在你有一个店铺从2017年1月1日到2020年12月31日的每天的总销售额数据，你要通过这些数据预测该店铺在2021年每天的销售情况。那么我们可以通过每天的销售数据用7和30为窗口，构建每周和每个月的销售总和数据，构建平均每周和每个月的销售平均数据，通过这些统计变量的方式来构建新的特征。</p> 
<h4><a id="9_661"></a>（9）数据特征提取</h4> 
<p>可能由于特征矩阵过大，一些样本如果直接使用预测模型算法可能在原始数据中有太多的列被建模，导致计算量大，训练时间长的问题，因此降低特征矩阵维度也是必不可少的。特征提取是一个自动化的降维过程。使得特征太多的样本被建模的维数降低。数据降维有以下几个好处：</p> 
<ul><li>避免维度灾难，导致算法失效，降低时间复杂度高</li><li>避免高维数据中引入的噪声，防止过拟合</li><li>压缩存储，可视化分析</li></ul> 
<p>特征提取的方法可以分为两类，一类是线性方法，另一类是非线性方法。</p> 
<p>线性方法包括PCA主成分分析、LDA线性判别分析</p> 
<p>非线性方法包括保留局部性质的局部线性嵌入、拉普拉斯特征映射；保留全局性质的随机邻域嵌入、t-分布邻域嵌入</p> 
<h6><a id="1PCA_675"></a>1、PCA主成分分析（待更新）</h6> 
<h6><a id="2LDA_677"></a>2、LDA线性判别分析（待更新）</h6> 
<p>月的销售平均数据</p> 
<h6><a id="5Datatime_685"></a>5、分解Datatime</h6> 
<p>将一个完整的时间特征分解成年、月、周、日、时、分、秒等时间单位，以此构建新特征，详细说明可以参考上面‘’（6）数据特征转换 - 3、时间序列处理 - a.时间戳处理“</p> 
<h6><a id="6_689"></a>6、窗口变量统计</h6> 
<p>举个例子，假设现在你有一个店铺从2017年1月1日到2020年12月31日的每天的总销售额数据，你要通过这些数据预测该店铺在2021年每天的销售情况。那么我们可以通过每天的销售数据用7和30为窗口，构建每周和每个月的销售总和数据，构建平均每周和每个月的销售平均数据，通过这些统计变量的方式来构建新的特征。</p> 
<h4><a id="9_693"></a>（9）数据特征提取</h4> 
<p>可能由于特征矩阵过大，一些样本如果直接使用预测模型算法可能在原始数据中有太多的列被建模，导致计算量大，训练时间长的问题，因此降低特征矩阵维度也是必不可少的。特征提取是一个自动化的降维过程。使得特征太多的样本被建模的维数降低。数据降维有以下几个好处：</p> 
<ul><li>避免维度灾难，导致算法失效，降低时间复杂度高</li><li>避免高维数据中引入的噪声，防止过拟合</li><li>压缩存储，可视化分析</li></ul> 
<p>特征提取的方法可以分为两类，一类是线性方法，另一类是非线性方法。</p> 
<p>线性方法包括PCA主成分分析、LDA线性判别分析</p> 
<p>非线性方法包括保留局部性质的局部线性嵌入、拉普拉斯特征映射；保留全局性质的随机邻域嵌入、t-分布邻域嵌入</p> 
<h6><a id="1PCA_707"></a>1、PCA主成分分析（待更新）</h6> 
<h6><a id="2LDA_709"></a>2、LDA线性判别分析（待更新）</h6>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/d6f02d3e84ae11449a2cdbcb83cc4606/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">揭秘关于TFRcord的五脏六腑</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/0d5d8297a63a365221a27166d871dadf/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">YMatrix数据可视化案例</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>