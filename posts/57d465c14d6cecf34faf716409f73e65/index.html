<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>springboot集成xxjob - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="springboot集成xxjob" />
<meta property="og:description" content="这几天做项目发现统计有很多定时任务需要处理，而项目中都是采用注解得方式去做导致就很分散，不是很好得去做统一管理，找起来也比较麻烦。所以就想着集成一下xxjob 做统一管理
1.什么是xxjob
xxjob是一款分布式任务调度平台，其核心设计目标是开发迅速、学习简单、轻量级、易扩展。现已开放源代码并接入多家公司线上产品线，开箱即用
它支持通过Web页面对任务进行CRUD操作，操作简单
支持动态得修改任务状态，参数，即时生效
任务执行器支持集群部署
支持故障转移和动态扩容等等，，，，
1.下载源码 源码仓库地址:
https://github.com/xuxueli/xxl-job
http://gitee.com/xuxueli0323/xxl-job
下载下来后解压用ideal 打开
mysql 执行table_xxl_job.sql脚本 这里面得一些表主要就是一些存储账户，任务日志，任务之类得
主要是启动xx-job-admin这个服务
先修改一些配置
比如数据库配置
或者端口都可以还有一些别的配置你有得话就改了玩玩
最后启动
效果图：
默认账户：admin 密码：123456
2.创建一个springboot项目
引入核心依赖 这里之所以没写版本号是因为我在父类已经统一设置好了版本
&lt;!-- xxl-job-core --&gt; &lt;dependency&gt; &lt;groupId&gt;com.xuxueli&lt;/groupId&gt; &lt;artifactId&gt;xxl-job-core&lt;/artifactId&gt; &lt;/dependency&gt; 然后写个demo
3.创建配置文件：application.properties
# web port server.port=8081 # no web #spring.main.web-environment=false # log config logging.config=classpath:logback.xml ### xxl-job admin address list, such as &#34;http://address&#34; or &#34;http://address01,http://address02&#34; xxl.job.admin.addresses=http://192.168.10.111:8089/xxl-job-admin ### xxl-job, access token xxl.job.accessToken=default_token ### xxl-job executor appname xxl." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/57d465c14d6cecf34faf716409f73e65/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-05-26T13:49:14+08:00" />
<meta property="article:modified_time" content="2023-05-26T13:49:14+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">springboot集成xxjob</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p>        这几天做项目发现统计有很多定时任务需要处理，而项目中都是采用注解得方式去做导致就很分散，不是很好得去做统一管理，找起来也比较麻烦。所以就想着集成一下xxjob 做统一管理</p> 
<hr> 
<p>1.什么是xxjob</p> 
<p>xxjob是一款分布式任务调度平台，其核心设计目标是开发迅速、学习简单、轻量级、易扩展。现已开放源代码并接入多家公司线上产品线，开箱即用</p> 
<p>它支持通过Web页面对任务进行CRUD操作，操作简单</p> 
<p>支持动态得修改任务状态，参数，即时生效</p> 
<p>任务执行器支持集群部署</p> 
<p>支持故障转移和动态扩容等等，，，，</p> 
<hr> 
<h3>1.下载源码</h3> 
<p>源码仓库地址:<br><a class="link-info" href="https://github.com/xuxueli/xxl-job" title="https://github.com/xuxueli/xxl-job">https://github.com/xuxueli/xxl-job</a><br><a class="link-info" href="http://gitee.com/xuxueli0323/xxl-job" rel="nofollow" title="http://gitee.com/xuxueli0323/xxl-job">http://gitee.com/xuxueli0323/xxl-job</a></p> 
<p>下载下来后解压用ideal 打开</p> 
<p><img alt="" height="331" src="https://images2.imgbox.com/c9/52/ba4QfkbM_o.png" width="529"></p> 
<p>mysql 执行table_xxl_job.sql脚本 这里面得一些表主要就是一些存储账户，任务日志，任务之类得</p> 
<p></p> 
<p>主要是启动xx-job-admin这个服务</p> 
<p><img alt="" height="341" src="https://images2.imgbox.com/c9/77/TSGzaczZ_o.png" width="481"></p> 
<p>先修改一些配置</p> 
<p>比如数据库配置<img alt="" height="786" src="https://images2.imgbox.com/9a/42/CCRPYg5B_o.png" width="1200"></p> 
<p> 或者端口都可以还有一些别的配置你有得话就改了玩玩</p> 
<p>最后启动</p> 
<p>效果图：</p> 
<p><img alt="" height="772" src="https://images2.imgbox.com/d0/82/wAPBz9iw_o.png" width="1200"></p> 
<p> 默认账户：admin 密码：123456</p> 
<p></p> 
<p>2.创建一个springboot项目</p> 
<p>引入核心依赖 这里之所以没写版本号是因为我在父类已经统一设置好了版本</p> 
<pre><code class="hljs">        &lt;!-- xxl-job-core --&gt;

        &lt;dependency&gt;
            &lt;groupId&gt;com.xuxueli&lt;/groupId&gt;
            &lt;artifactId&gt;xxl-job-core&lt;/artifactId&gt;
        &lt;/dependency&gt;</code></pre> 
<p>然后写个demo</p> 
<p>3.创建配置文件：application.properties</p> 
<pre><code class="hljs"># web port
server.port=8081
# no web
#spring.main.web-environment=false

# log config
logging.config=classpath:logback.xml


### xxl-job admin address list, such as "http://address" or "http://address01,http://address02"
xxl.job.admin.addresses=http://192.168.10.111:8089/xxl-job-admin

### xxl-job, access token
xxl.job.accessToken=default_token

### xxl-job executor appname
xxl.job.executor.appname=test
### xxl-job executor registry-address: default use address to registry , otherwise use ip:port if address is null
xxl.job.executor.address=http://192.168.10.111:8089/xxl-job-admin
### xxl-job executor server-info
xxl.job.executor.ip=127.0.0.1
xxl.job.executor.port=9999
### xxl-job executor log-path
xxl.job.executor.logpath=/data/applogs/xxl-job/jobhandler
### xxl-job executor log-retention-days
xxl.job.executor.logretentiondays=30
</code></pre> 
<p>4.写个实体类去获取</p> 
<pre><code class="hljs">@Configuration
@Data
public class XxlJobProperties {

    @Value("${xxl.job.admin.addresses}")
    private String adminAddresses;

    @Value("${xxl.job.accessToken}")
    private String accessToken;

    @Value("${xxl.job.executor.appname}")
    private String appname;

    @Value("${xxl.job.executor.address}")
    private String address;

//    @Value("${xxl.job.executor.ip}")
//    private String ip;

    @Value("${xxl.job.executor.port}")
    private int port;

    @Value("${xxl.job.executor.logpath}")
    private String logPath;

    @Value("${xxl.job.executor.logretentiondays}")
    private int logRetentionDays;
}</code></pre> 
<p>5.创建配置去set</p> 
<pre><code class="hljs">@Slf4j
@Configuration
@RequiredArgsConstructor
public class XxJobConfig {

    private final XxlJobProperties xxlJobProperties;

    @Bean
    public XxlJobSpringExecutor xxlJobExecutor() {
        log.info("&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; xxl-job config init.");
        XxlJobSpringExecutor xxlJobSpringExecutor = new XxlJobSpringExecutor();
        xxlJobSpringExecutor.setAdminAddresses(xxlJobProperties.getAdminAddresses());
        xxlJobSpringExecutor.setAppname(xxlJobProperties.getAppname());
        xxlJobSpringExecutor.setAddress(xxlJobProperties.getAddress());
//        xxlJobSpringExecutor.setIp(ip);
        xxlJobSpringExecutor.setPort(xxlJobProperties.getPort());
        xxlJobSpringExecutor.setAccessToken(xxlJobProperties.getAccessToken());
        xxlJobSpringExecutor.setLogPath(xxlJobProperties.getLogPath());
        xxlJobSpringExecutor.setLogRetentionDays(xxlJobProperties.getLogRetentionDays());

        return xxlJobSpringExecutor;
    }</code></pre> 
<p> 6.最后开始写执行任务啦</p> 
<pre><code class="hljs">@Component
@Slf4j
public class MyJobHandle {




    @XxlJob("MyJobHandler")
    public void execute() throws Exception {
        System.out.println("我成功的执行了xxjob定时任务！！！！");
    }
}</code></pre> 
<p>然后在web页面去创建执执行器和任务</p> 
<p>创建执行器</p> 
<p>appName按照配置来切记！！！</p> 
<p>我这里是test</p> 
<p><img alt="" height="391" src="https://images2.imgbox.com/16/43/oOKuvEkB_o.png" width="602"></p> 
<p>这里自动注册一直注册不上得话就手动注册 把服务IP端口写上去就行了</p> 
<p>然后创建任务啦</p> 
<p><img alt="" height="760" src="https://images2.imgbox.com/83/09/JBsOckBx_o.png" width="932"></p> 
<p> </p> 
<p>保存执行就可以啦</p> 
<p>结果图就不展示了 大家可以去试试~~~~~</p> 
<p></p> 
<p></p> 
<p> </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/f39191dcb3626b7cf38fa1503ba239c9/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【数据结构】C语言必备知识学习</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/a6edd482d488567c5374dde8d7a29a80/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Jquery复制DIV中的内容到粘贴板</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>