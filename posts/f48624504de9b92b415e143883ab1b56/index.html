<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>java调用第三方短信接口 本地能发送短信，服务器却发不了，直到超时 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="java调用第三方短信接口 本地能发送短信，服务器却发不了，直到超时" />
<meta property="og:description" content="先看看错误日志 2019-01-11 09:21:32,242 INFO [pool-3-thread-1] com.ejavashop.core.sms.xfbsms.utils.LoggerUtil.info(45) -- Fri Jan 11 09:21:32 CST 2019 sendTemplateSMS url = https://sandboxapp.cloopen.com:8883/2013-12-26/Accounts/aaf98f8952f7367a01530c5dd33626c6/SMS/TemplateSMS?sig=7939BE20B60257805AF0B6A99B28ED38
2019-01-11 09:21:32,243 INFO [pool-3-thread-1] com.ejavashop.core.sms.xfbsms.utils.LoggerUtil.info(45) -- Fri Jan 11 09:21:32 CST 2019 sendTemplateSMS Request body = {&#34;appId&#34;:&#34;8aaf07085e0e36d0015e279952c20746&#34;,&#34;to&#34;:&#34;13152541141&#34;,&#34;templateId&#34;:&#34;259015&#34;,&#34;datas&#34;:[&#34;您好，您已成功注册,您的验证码是613957【广东禧越科技】&#34;,&#34;10&#34;]}
2019-01-11 09:21:32,243 DEBUG [pool-3-thread-1] org.apache.http.impl.conn.BasicClientConnectionManager.getConnection(160) -- Get connection for route {s}-&gt;https://sandboxapp.cloopen.com:8883
2019-01-11 09:21:32,278 DEBUG [pool-3-thread-1] org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(174) -- Connecting to sandboxapp.cloopen.com:8883
2019-01-11 09:21:47,870 DEBUG [Timer-0] org.apache.http.impl.conn.LoggingManagedHttpClientConnection.shutdown(87) -- http-outgoing-85: Shutdown connection
2019-01-11 09:21:47,871 DEBUG [Timer-0] org.apache.http.impl.execchain.ConnectionHolder.abortConnection(128) -- Connection discarded" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/f48624504de9b92b415e143883ab1b56/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2019-01-14T11:06:23+08:00" />
<meta property="article:modified_time" content="2019-01-14T11:06:23+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">java调用第三方短信接口 本地能发送短信，服务器却发不了，直到超时</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <ol><li>先看看错误日志</li></ol> 
<p style="margin-left:0cm;">2019-01-11 09:21:32,242 INFO [pool-3-thread-1] com.ejavashop.core.sms.xfbsms.utils.LoggerUtil.info(45) -- Fri Jan 11 09:21:32 CST 2019 sendTemplateSMS url = https://sandboxapp.cloopen.com:8883/2013-12-26/Accounts/aaf98f8952f7367a01530c5dd33626c6/SMS/TemplateSMS?sig=7939BE20B60257805AF0B6A99B28ED38</p> 
<p style="margin-left:0cm;"> 2019-01-11 09:21:32,243 INFO [pool-3-thread-1] com.ejavashop.core.sms.xfbsms.utils.LoggerUtil.info(45) -- Fri Jan 11 09:21:32 CST 2019 sendTemplateSMS Request body =  {"appId":"8aaf07085e0e36d0015e279952c20746","to":"13152541141","templateId":"259015","datas":["您好，您已成功注册,您的验证码是613957【广东禧越科技】","10"]}</p> 
<p style="margin-left:0cm;"> 2019-01-11 09:21:32,243 DEBUG [pool-3-thread-1] org.apache.http.impl.conn.BasicClientConnectionManager.getConnection(160) -- Get connection for route {s}-&gt;https://sandboxapp.cloopen.com:8883</p> 
<p style="margin-left:0cm;"> 2019-01-11 09:21:32,278 DEBUG [pool-3-thread-1] org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(174) -- Connecting to sandboxapp.cloopen.com:8883</p> 
<p style="margin-left:0cm;"> </p> 
<p style="margin-left:0cm;"> </p> 
<p style="margin-left:0cm;">2019-01-11 09:21:47,870 DEBUG [Timer-0] org.apache.http.impl.conn.LoggingManagedHttpClientConnection.shutdown(87) -- http-outgoing-85: Shutdown connection</p> 
<p style="margin-left:0cm;"> 2019-01-11 09:21:47,871 DEBUG [Timer-0] org.apache.http.impl.execchain.ConnectionHolder.abortConnection(128) -- Connection discarded</p> 
<p style="margin-left:0cm;"> 2019-01-11 09:21:47,871 DEBUG [Timer-0] org.apache.http.impl.conn.LoggingManagedHttpClientConnection.close(79) -- http-outgoing-85: Close connection</p> 
<p style="margin-left:0cm;"> 2019-01-11 09:21:47,871 DEBUG [Timer-0] org.apache.http.impl.conn.PoolingHttpClientConnectionManager.releaseConnection(320) -- Connection released: [id: 85][route: {}-&gt;http://183.232.34.84:8080][total kept alive: 0; route allocated: 0 of 2; total allocated: 0 of 20]</p> 
<p style="margin-left:0cm;"> org.apache.http.conn.ConnectTimeoutException: Connect to 183.232.34.84:8080 [/183.232.34.84] failed: Connection timed out</p> 
<p style="margin-left:0cm;">at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:149)</p> 
<p style="margin-left:0cm;">at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:353)</p> 
<p style="margin-left:0cm;">at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:380)</p> 
<p style="margin-left:0cm;">at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:236)</p> 
<p style="margin-left:0cm;">at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:184)</p> 
<p style="margin-left:0cm;">at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:88)</p> 
<p style="margin-left:0cm;">at org.apache.http.impl.execchain.RedirectExec.execute(RedirectExec.java:110)</p> 
<p style="margin-left:0cm;">at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:184)</p> 
<p style="margin-left:0cm;">at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:82)</p> 
<p style="margin-left:0cm;">at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:107)</p> 
<p style="margin-left:0cm;">at com.ejavashop.core.HttpClientUtil.sendGet(HttpClientUtil.java:36)</p> 
<p style="margin-left:0cm;">at com.ejavashop.web.job.IndexCacheTimerTask.run(IndexCacheTimerTask.java:40)</p> 
<p style="margin-left:0cm;">at java.util.TimerThread.mainLoop(Timer.java:555)</p> 
<p style="margin-left:0cm;">at java.util.TimerThread.run(Timer.java:505)</p> 
<p style="margin-left:0cm;">Caused by: java.net.ConnectException: Connection timed out</p> 
<p style="margin-left:0cm;">at java.net.PlainSocketImpl.socketConnect(Native Method)</p> 
<p style="margin-left:0cm;">at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)</p> 
<p style="margin-left:0cm;">at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)</p> 
<p style="margin-left:0cm;">at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)</p> 
<p style="margin-left:0cm;">at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)</p> 
<p style="margin-left:0cm;">at java.net.Socket.connect(Socket.java:589)</p> 
<p style="margin-left:0cm;">at org.apache.http.conn.socket.PlainConnectionSocketFactory.connectSocket(PlainConnectionSocketFactory.java:74)</p> 
<p style="margin-left:0cm;">at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:134)</p> 
<p style="margin-left:0cm;">... 13 more</p> 
<p style="margin-left:0cm;">2019-01-11 09:21:47,871 DEBUG [Timer-0] org.apache.http.impl.conn.PoolingHttpClientConnectionManager.shutdown(388) -- Connection manager is shutting down</p> 
<p style="margin-left:0cm;"> 2019-01-11 09:21:47,872 DEBUG [Timer-0] org.apache.http.impl.conn.PoolingHttpClientConnectionManager.shutdown(394) -- Connection manager shut down</p> 
<p style="margin-left:0cm;"> 2019-01-11 09:21:47,872 INFO [Timer-0] com.ejavashop.web.job.IndexCacheTimerTask.run(46) -- ----------------定时器执行结束-----------------------</p> 
<p style="margin-left:0cm;"> 2019-01-11 09:21:56,433 DEBUG [Timer-1] org.apache.http.impl.conn.LoggingManagedHttpClientConnection.shutdown(87) -- http-outgoing-85: Shutdown connection</p> 
<p style="margin-left:0cm;"> 2019-01-11 09:21:56,433 DEBUG [Timer-1] org.apache.http.impl.execchain.ConnectionHolder.abortConnection(128) -- Connection discarded</p> 
<p style="margin-left:0cm;"> 2019-01-11 09:21:56,434 DEBUG [Timer-1] org.apache.http.impl.conn.LoggingManagedHttpClientConnection.close(79) -- http-outgoing-85: Close connection</p> 
<p style="margin-left:0cm;"> 2019-01-11 09:21:56,434 DEBUG [Timer-1] org.apache.http.impl.conn.PoolingHttpClientConnectionManager.releaseConnection(320) -- Connection released: [id: 85][route: {}-&gt;http://183.232.34.84:8080][total kept alive: 0; route allocated: 0 of 2; total allocated: 0 of 20]</p> 
<p style="margin-left:0cm;"> org.apache.http.conn.ConnectTimeoutException: Connect to 183.232.34.84:8080 [/183.232.34.84] failed: Connection timed out</p> 
<p style="margin-left:0cm;">at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:149)</p> 
<p style="margin-left:0cm;">at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:353)</p> 
<p style="margin-left:0cm;">at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:380)</p> 
<p style="margin-left:0cm;">at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:236)</p> 
<p style="margin-left:0cm;">at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:184)</p> 
<p style="margin-left:0cm;">at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:88)</p> 
<p style="margin-left:0cm;">at org.apache.http.impl.execchain.RedirectExec.execute(RedirectExec.java:110)</p> 
<p style="margin-left:0cm;">at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:184)</p> 
<p style="margin-left:0cm;">at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:82)</p> 
<p style="margin-left:0cm;">at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:107)</p> 
<p style="margin-left:0cm;">at com.ejavashop.core.HttpClientUtil.sendGet(HttpClientUtil.java:36)</p> 
<p style="margin-left:0cm;">at com.ejavashop.web.job.IndexCacheTimerTask.run(IndexCacheTimerTask.java:40)</p> 
<p style="margin-left:0cm;">at java.util.TimerThread.mainLoop(Timer.java:555)</p> 
<p style="margin-left:0cm;">at java.util.TimerThread.run(Timer.java:505)</p> 
<p style="margin-left:0cm;">Caused by: java.net.ConnectException: Connection timed out</p> 
<p style="margin-left:0cm;">at java.net.PlainSocketImpl.socketConnect(Native Method)</p> 
<p style="margin-left:0cm;">at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)</p> 
<p style="margin-left:0cm;">at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)</p> 
<p style="margin-left:0cm;">at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)</p> 
<p style="margin-left:0cm;">at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)</p> 
<p style="margin-left:0cm;">at java.net.Socket.connect(Socket.java:589)</p> 
<p style="margin-left:0cm;">at org.apache.http.conn.socket.PlainConnectionSocketFactory.connectSocket(PlainConnectionSocketFactory.java:74)</p> 
<p style="margin-left:0cm;">at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:134)</p> 
<p style="margin-left:0cm;">... 13 more</p> 
<p style="margin-left:0cm;">2019-01-11 09:21:56,434 DEBUG [Timer-1] org.apache.http.impl.conn.PoolingHttpClientConnectionManager.shutdown(388) -- Connection manager is shutting down</p> 
<p style="margin-left:0cm;"> 2019-01-11 09:21:56,434 DEBUG [Timer-1] org.apache.http.impl.conn.PoolingHttpClientConnectionManager.shutdown(394) -- Connection manager shut down</p> 
<p style="margin-left:0cm;"> 2019-01-11 09:21:56,434 INFO [Timer-1] com.ejavashop.web.job.IndexCacheTimerTask.run(46) -- ----------------定时器执行结束-----------------------</p> 
<p style="margin-left:0cm;">2.0<img alt="" class="has" height="595" src="https://images2.imgbox.com/e3/be/oVUqRRHZ_o.png" width="1165"></p> 
<p style="margin-left:0cm;">首先从main方法开始。。。图中箭头从左到右依次为 手机号，模板号，验证码。。有效期</p> 
<p style="margin-left:0cm;">3.0 检查一些参数</p> 
<p style="margin-left:0cm;"><img alt="" class="has" height="475" src="https://images2.imgbox.com/b4/9a/CBMoNKBq_o.png" width="867"></p> 
<p style="margin-left:0cm;"> </p> 
<p style="margin-left:0cm;">4.执行main方法</p> 
<p style="margin-left:0cm;"> </p> 
<p style="margin-left:0cm;">发现本地能发送短信，服务器却超时<img alt="" class="has" height="600" src="https://images2.imgbox.com/06/d6/QovlFJj2_o.png" width="1200"></p> 
<p style="margin-left:0cm;"> </p> 
<p style="margin-left:0cm;">5.0解决方法。。。由于服务器和本地的环境不同。。检查端口是否开放权限</p> 
<p style="margin-left:0cm;">最重要的….将ip从沙箱设置为app…    <span style="color:#66e1f8;">SERVER_IP</span> = <span style="color:#17c6a3;">"app.cloopen.com"</span>;</p> 
<p style="margin-left:0cm;">6.0 clean install package 上传服务器</p> 
<p style="margin-left:0cm;">完成</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/4aff1e09a0fb8e14b863100ee19c4c6a/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">xcode报错 Unable to open project</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/0ababf5b16616dd1d1de4a21666644bb/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">vue-去除格式警告</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>