<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>JavaWeb小项目练习(基于三层架构实现登录，对表增，删，改，查的操作) - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="JavaWeb小项目练习(基于三层架构实现登录，对表增，删，改，查的操作)" />
<meta property="og:description" content="一 创建项目并修改项目结构 File-&gt;New-&gt;Project新建一个名为javaweb01的工程
1
2
javaweb01-&gt;New-&gt;Module新建一个名为MyManage的模块
1
2
将MyManage模块设置为支持web项目
1
2
将web项目重命名并移动到main路径下
配置pom文件(文件依赖,打包方式,以及支持加载的文件)
&lt;?xml version=&#34;1.0&#34; encoding=&#34;UTF-8&#34;?&gt; &lt;project xmlns=&#34;http://maven.apache.org/POM/4.0.0&#34; xmlns:xsi=&#34;http://www.w3.org/2001/XMLSchema-instance&#34; xsi:schemaLocation=&#34;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&#34;&gt; &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt; &lt;parent&gt; &lt;groupId&gt;com.by&lt;/groupId&gt; &lt;artifactId&gt;javaweb&lt;/artifactId&gt; &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt; &lt;/parent&gt; &lt;artifactId&gt;MyManage&lt;/artifactId&gt; &lt;!-- 项目打包方式--&gt; &lt;packaging&gt;war&lt;/packaging&gt; &lt;properties&gt; &lt;maven.compiler.source&gt;8&lt;/maven.compiler.source&gt; &lt;maven.compiler.target&gt;8&lt;/maven.compiler.target&gt; &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt; &lt;/properties&gt; &lt;dependencies&gt; &lt;!-- 依赖Servlet--&gt; &lt;dependency&gt; &lt;groupId&gt;javax.servlet&lt;/groupId&gt; &lt;artifactId&gt;servlet-api&lt;/artifactId&gt; &lt;version&gt;2.5&lt;/version&gt; &lt;/dependency&gt; &lt;!-- 依赖Mybatis--&gt; &lt;dependency&gt; &lt;groupId&gt;org.mybatis&lt;/groupId&gt; &lt;artifactId&gt;mybatis&lt;/artifactId&gt; &lt;version&gt;3.4.5&lt;/version&gt; &lt;/dependency&gt; &lt;!-- 依赖mysql--&gt; &lt;dependency&gt; &lt;groupId&gt;mysql&lt;/groupId&gt; &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt; &lt;version&gt;5.1.47&lt;/version&gt; &lt;/dependency&gt; &lt;!-- 依赖log4j--&gt; &lt;dependency&gt; &lt;groupId&gt;log4j&lt;/groupId&gt; &lt;artifactId&gt;log4j&lt;/artifactId&gt; &lt;version&gt;1.2.17&lt;/version&gt; &lt;/dependency&gt; &lt;!-- 依赖jsp-api--&gt; &lt;dependency&gt; &lt;groupId&gt;javax.servlet.jsp&lt;/groupId&gt; &lt;artifactId&gt;jsp-api&lt;/artifactId&gt; &lt;version&gt;2." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/662517880033ba2f5a7fefe81a54b5ea/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-02T13:11:36+08:00" />
<meta property="article:modified_time" content="2024-01-02T13:11:36+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">JavaWeb小项目练习(基于三层架构实现登录，对表增，删，改，查的操作)</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2> 一 创建项目并修改项目结构</h2> 
<p><strong>File-&gt;New-&gt;Project新建一个名为javaweb01的工程</strong></p> 
<p>1</p> 
<p><img alt="" height="166" src="https://images2.imgbox.com/39/ec/Lhsot7j9_o.png" width="732"></p> 
<p>2</p> 
<p><img alt="" height="761" src="https://images2.imgbox.com/6f/c0/DilNFAkI_o.png" width="982"></p> 
<p><strong>javaweb01-&gt;New-&gt;Module新建一个名为MyManage的模块</strong></p> 
<p>1</p> 
<p><img alt="" height="141" src="https://images2.imgbox.com/df/7a/2IkBsBBG_o.png" width="914"></p> 
<p>2</p> 
<p><img alt="" height="761" src="https://images2.imgbox.com/a5/31/XkBmFHGc_o.png" width="982"></p> 
<p><strong>将MyManage模块设置为支持web项目</strong></p> 
<p>1</p> 
<p><img alt="" height="823" src="https://images2.imgbox.com/7d/03/7GuEGcs1_o.png" width="643"></p> 
<p>2</p> 
<p><img alt="" height="793" src="https://images2.imgbox.com/6b/5f/IKy4IWU5_o.png" width="761"></p> 
<p><strong>将web项目重命名并移动到main路径下</strong></p> 
<p><img alt="" height="336" src="https://images2.imgbox.com/f3/e0/tQjNZO4x_o.png" width="1183"></p> 
<p><strong>配置pom文件(文件依赖,打包方式,以及支持加载的文件)</strong></p> 
<pre><code class="language-java">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"&gt;
    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
    &lt;parent&gt;
        &lt;groupId&gt;com.by&lt;/groupId&gt;
        &lt;artifactId&gt;javaweb&lt;/artifactId&gt;
        &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;
    &lt;/parent&gt;

    &lt;artifactId&gt;MyManage&lt;/artifactId&gt;
&lt;!--    项目打包方式--&gt;
    &lt;packaging&gt;war&lt;/packaging&gt;

    &lt;properties&gt;
        &lt;maven.compiler.source&gt;8&lt;/maven.compiler.source&gt;
        &lt;maven.compiler.target&gt;8&lt;/maven.compiler.target&gt;
        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;
    &lt;/properties&gt;
    &lt;dependencies&gt;
&lt;!--        依赖Servlet--&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;javax.servlet&lt;/groupId&gt;
            &lt;artifactId&gt;servlet-api&lt;/artifactId&gt;
            &lt;version&gt;2.5&lt;/version&gt;
        &lt;/dependency&gt;

&lt;!--        依赖Mybatis--&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.mybatis&lt;/groupId&gt;
            &lt;artifactId&gt;mybatis&lt;/artifactId&gt;
            &lt;version&gt;3.4.5&lt;/version&gt;
        &lt;/dependency&gt;
&lt;!--        依赖mysql--&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;mysql&lt;/groupId&gt;
            &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;
            &lt;version&gt;5.1.47&lt;/version&gt;
        &lt;/dependency&gt;
&lt;!--        依赖log4j--&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;log4j&lt;/groupId&gt;
            &lt;artifactId&gt;log4j&lt;/artifactId&gt;
            &lt;version&gt;1.2.17&lt;/version&gt;
        &lt;/dependency&gt;
&lt;!--        依赖jsp-api--&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;javax.servlet.jsp&lt;/groupId&gt;
            &lt;artifactId&gt;jsp-api&lt;/artifactId&gt;
            &lt;version&gt;2.0&lt;/version&gt;
        &lt;/dependency&gt;
&lt;!--       依赖jstl--&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;jstl&lt;/groupId&gt;
            &lt;artifactId&gt;jstl&lt;/artifactId&gt;
            &lt;version&gt;1.2&lt;/version&gt;
        &lt;/dependency&gt;
    &lt;/dependencies&gt;
    &lt;build&gt;
        &lt;!-- 如果不添加此节点src/main/java目录下的所有配置文件都会被漏掉。 --&gt;
        &lt;resources&gt;
            &lt;resource&gt;
                &lt;directory&gt;src/main/java&lt;/directory&gt;
                &lt;includes&gt;
                    &lt;include&gt;**/*.xml&lt;/include&gt;
                &lt;/includes&gt;
            &lt;/resource&gt;
            &lt;!--让idea识别resources目录--&gt;
            &lt;resource&gt;
                &lt;directory&gt;src/main/resources&lt;/directory&gt;
            &lt;/resource&gt;
        &lt;/resources&gt;
    &lt;/build&gt;

&lt;/project&gt;</code></pre> 
<h2>二 使用三层架构和配置文件以及Tomcat服务器</h2> 
<p><strong>创建三层架构的包(表现层)servlet,(业务逻辑层)service serviceimpl,(数据访问层)mapper</strong></p> 
<p><img alt="" height="151" src="https://images2.imgbox.com/dc/52/HpuFLv2u_o.png" width="876"></p> 
<p><img alt="" height="429" src="https://images2.imgbox.com/50/65/WPR0VnL3_o.png" width="426"></p> 
<p><strong>加载配置文件(数据库配置文件,日志文件,MyBatis配置文件)</strong></p> 
<p>数据库配置文件db.properties</p> 
<pre><code class="language-java">jdbc.driver=com.mysql.jdbc.Driver
jdbc.url=jdbc:mysql://localhost:3305/servlet?characterEncoding=UTF-8
jdbc.username=root
jdbc.password=</code></pre> 
<p>日志文件log4j.properties</p> 
<pre><code class="language-java"># Global logging configuration
log4j.rootLogger=DEBUG, stdout
# Console output...
log4j.appender.stdout=org.apache.log4j.ConsoleAppender
log4j.appender.stdout.layout=org.apache.log4j.PatternLayout
log4j.appender.stdout.layout.ConversionPattern=%5p [%t] - %m%n

</code></pre> 
<p>MyBatis配置文件mybatis-config.xml</p> 
<pre><code class="language-java">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;!DOCTYPE configuration PUBLIC "-//mybatis.org//DTD Config 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-config.dtd"&gt;
&lt;configuration&gt;
    &lt;properties resource="db.properties"&gt;&lt;/properties&gt;
    &lt;typeAliases&gt;
        &lt;package name="com.by.pojo"/&gt;
    &lt;/typeAliases&gt;
    &lt;!-- 数据库连接信息 --&gt;
    &lt;environments default="development"&gt;
        &lt;environment id="development"&gt;
            &lt;transactionManager type="JDBC"/&gt;
            &lt;dataSource type="POOLED"&gt;
                &lt;property name="driver" value="${jdbc.driver}"/&gt;
                &lt;property name="url" value="${jdbc.url}"/&gt;
                &lt;property name="username" value="${jdbc.username}"/&gt;
                &lt;property name="password" value="${jdbc.password}"/&gt;
            &lt;/dataSource&gt;
        &lt;/environment&gt;
    &lt;/environments&gt;
    &lt;!-- 扫描映射文件 --&gt;
    &lt;mappers&gt;
&lt;!--        &lt;mapper resource="com/by/dao/UserDao.xml"/&gt;--&gt;
        &lt;package name="com.by.mapper"/&gt;
    &lt;/mappers&gt;
&lt;/configuration&gt;</code></pre> 
<p>项目结构</p> 
<p><img alt="" height="502" src="https://images2.imgbox.com/28/51/VN6Zy7hu_o.png" width="436"></p> 
<p>Tomcat服务器</p> 
<p>1</p> 
<p><img alt="" height="156" src="https://images2.imgbox.com/01/56/FDdnF0tx_o.png" width="1200"></p> 
<p>2</p> 
<p><img alt="" height="132" src="https://images2.imgbox.com/b3/72/VFpZHDbO_o.png" width="347"></p> 
<p>3</p> 
<p><img alt="" height="672" src="https://images2.imgbox.com/59/bc/fzzFxx9V_o.png" width="420"></p> 
<p>4</p> 
<p><img alt="" height="915" src="https://images2.imgbox.com/25/01/R8vHfoVh_o.png" width="925"></p> 
<p>5</p> 
<p><img alt="" height="397" src="https://images2.imgbox.com/eb/c4/yVrBP6Yx_o.png" width="539"></p> 
<p>6</p> 
<p><img alt="" height="637" src="https://images2.imgbox.com/39/da/EkkrJcKM_o.png" width="529"></p> 
<p>7</p> 
<p><img alt="" height="930" src="https://images2.imgbox.com/92/2f/mvdLZjFn_o.png" width="890"></p> 
<p>8</p> 
<p><img alt="" height="940" src="https://images2.imgbox.com/79/8a/EDSGtoee_o.png" width="1200"></p> 
<p>9</p> 
<p><img alt="" height="206" src="https://images2.imgbox.com/c5/d7/DTWPnlPn_o.png" width="1200"></p> 
<h2>三 监听和过滤</h2> 
<h3>监听器</h3> 
<p>SqlSession回话实例从始至终都使用,所以在将SqlSession装在ServletContext里边</p> 
<p>新建com-&gt;by-&gt;listener-&gt;MyServletContxtListenerlei</p> 
<pre><code class="language-java">public class MyServletContxtListener implements ServletContextListener {

    @Override
    public void contextInitialized(ServletContextEvent servletContextEvent) {
        try {
            //加载配置文件
            String resource = "mybatis-config.xml";
            InputStream inputStream = Resources.getResourceAsStream(resource);

            //创建SessionFactory
            SqlSessionFactory sessionFactory = new SqlSessionFactoryBuilder().build(inputStream);

            //使用数据的会话实例
            SqlSession sqlSession = sessionFactory.openSession();
            //把sqlSession对象撞到servletContext中
            ServletContext servletContext = servletContextEvent.getServletContext();
            servletContext.setAttribute("sqlSession", sqlSession);
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    @Override
    public void contextDestroyed(ServletContextEvent servletContextEvent) {

    }
}
</code></pre> 
<p>web.xml</p> 
<pre><code class="language-java">&lt;!--配置监听器--&gt;
    &lt;listener&gt;
        &lt;listener-class&gt;com.by.listener.MyServletContxtListener&lt;/listener-class&gt;
    &lt;/listener&gt;</code></pre> 
<h3>过滤器</h3> 
<p>因为文件请求和响应需要防止字符编码格式不一样而导致乱码,所以我们采用过滤器技术过滤每一个servlet文件</p> 
<p>新建com-&gt;by-&gt;filter-&gt;CharacterEncodingFilter</p> 
<pre><code class="language-java">public class CharacterEncodingFilter implements Filter {

    @Override
    public void init(FilterConfig filterConfig) throws ServletException {

    }
    @Override
    public void doFilter(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain) throws IOException, ServletException {
        //请求中文乱码
        servletRequest.setCharacterEncoding("utf-8");
        //响应中文乱码
        servletResponse.setContentType("text/html;charset=utf-8");
        //放行filter
        filterChain.doFilter(servletRequest, servletResponse);
    }

    @Override
    public void destroy() {

    }
}
</code></pre> 
<p>pojo包下新建User类</p> 
<pre><code class="language-java">package com.by.pojo;

public class User {
    private Integer id;
    private String username;
    private String password;
    private String sex;
    private String address;
    private Integer age;

    public User(Integer id, String username, String password, String sex, Integer age, String address) {
        this.id = id;
        this.username = username;
        this.password = password;
        this.sex = sex;
        this.address = address;
        this.age = age;
    }

    public User(String username, String password, String sex, Integer age, String address) {
        this.username = username;
        this.password = password;
        this.sex = sex;
        this.address = address;
        this.age = age;
    }

    public User() {
    }

    public Integer getAge() {
        return age;
    }

    public void setAge(Integer age) {
        this.age = age;
    }

    public Integer getId() {
        return id;
    }

    public void setId(Integer id) {
        this.id = id;
    }

    public String getUsername() {
        return username;
    }

    public void setUsername(String username) {
        this.username = username;
    }

    public String getPassword() {
        return password;
    }

    public void setPassword(String password) {
        this.password = password;
    }

    public String getSex() {
        return sex;
    }

    public void setSex(String sex) {
        this.sex = sex;
    }

    public String getAddress() {
        return address;
    }

    public void setAddress(String address) {
        this.address = address;
    }
}
</code></pre> 
<p>web.xml</p> 
<pre><code class="language-java">&lt;!--    过滤器--&gt;
    &lt;filter&gt;
        &lt;filter-name&gt;characterEncodingFilter&lt;/filter-name&gt;
        &lt;filter-class&gt;com.by.filter.CharacterEncodingFilter&lt;/filter-class&gt;
    &lt;/filter&gt;
    &lt;filter-mapping&gt;
        &lt;filter-name&gt;characterEncodingFilter&lt;/filter-name&gt;
        &lt;!--*代表任意请求--&gt;
        &lt;url-pattern&gt;/*&lt;/url-pattern&gt;
    &lt;/filter-mapping&gt;</code></pre> 
<h2>三 登录验证并查询数据表内容</h2> 
<p>login.jsp</p> 
<pre><code class="language-java">&lt;%--
  Created by IntelliJ IDEA.
  User: 21309
  Date: 2023-12-27
  Time: 16:05
  To change this template use File | Settings | File Templates.
--%&gt;
&lt;%@ page contentType="text/html;charset=UTF-8" language="java" %&gt;
&lt;html&gt;
  &lt;head&gt;
    &lt;title&gt;$Title$&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
  &lt;h1&gt;用户管理系统&lt;/h1&gt;
  &lt;form action="login" method="post"&gt;
    账号：&lt;input type="text" name="username"&gt;&lt;br&gt;
    密码：&lt;input type="text" name="password"&gt;&lt;br&gt;
    &lt;input type="submit" value="登录"&gt;
  &lt;/form&gt;
  &lt;/body&gt;
&lt;/html&gt;
</code></pre> 
<p>web.xml</p> 
<pre><code class="language-java">&lt;!--设置欢迎页为Login.jsp--&gt;
    &lt;welcome-file-list&gt;
        &lt;welcome-file&gt;login.jsp&lt;/welcome-file&gt;
    &lt;/welcome-file-list&gt;</code></pre> 
<p>在servlet包下新建LoginServlet</p> 
<pre><code class="language-java">//表现层
public class LoginServlet extends HttpServlet {
    @Override
    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
        doPost(req, resp);
    }
    @Override
    protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
        //根据input标签的name属性获取前端提交的参数
        String username = req.getParameter("username");
        String password = req.getParameter("password");
        //调用service
        UserService userService = new UserServiceImpl(this);
        //将获得的username，password传递给User
        User user=userService.login(username,password);
        //登录判断
        if (user!=null){
        //如果登录成功，则跳转到select_user.jsp
        resp.sendRedirect("selectUserServlet");
        }else {
        //如果登录失败，则跳转到login.jsp
        req.getRequestDispatcher("login.jsp").forward(req,resp);
        }
    }
}
</code></pre> 
<p>web.xml</p> 
<pre><code class="language-java">&lt;!--login页--&gt;
    &lt;servlet&gt;
        &lt;servlet-name&gt;login&lt;/servlet-name&gt;
        &lt;servlet-class&gt;com.by.servlet.LoginServlet&lt;/servlet-class&gt;
    &lt;/servlet&gt;
    &lt;servlet-mapping&gt;
        &lt;servlet-name&gt;login&lt;/servlet-name&gt;
        &lt;url-pattern&gt;/login&lt;/url-pattern&gt;
    &lt;/servlet-mapping&gt;</code></pre> 
<p>以下内容可在servlet类中Alt+Enter快捷键出来(先把Servlet类写完整)</p> 
<p>在service包下的UserService接口</p> 
<pre><code class="language-java">public interface UserService {
    User login(String username, String password);
}
</code></pre> 
<p>UserServiceImpl类</p> 
<pre><code class="language-java">public class UserServiceImpl implements UserService {
    private SqlSession sqlSession;
    private UserMapper userMapper;
    //加载UserMapper类
    public UserServiceImpl(HttpServlet httpServlet) {
        ServletContext servletContext = httpServlet.getServletContext();
        sqlSession = (SqlSession) servletContext.getAttribute("sqlSession");
        userMapper = sqlSession.getMapper(UserMapper.class);
    }
@Override
    public User login(String username, String password) {
        //调用dao
        return userMapper.login(username,password);
    }
}</code></pre> 
<p>mapper包下的UserMapper接口</p> 
<pre><code class="language-java">public interface UserMapper {
     User login(@Param("username") String username, @Param("password") String password);
}</code></pre> 
<p>mapper包下的UserMapper.xml接口</p> 
<pre><code class="language-java">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd"&gt;
&lt;mapper namespace="com.by.mapper.UserMapper"&gt;
    &lt;select id="login" resultType="com.by.pojo.User"&gt;
        SELECT * FROM user WHERE username=#{username} AND password=#{password}
    &lt;/select&gt;
    &lt;select id="selectUser" resultType="com.by.pojo.User"&gt;
        SELECT * FROM user
    &lt;/select&gt;
&lt;/mapper&gt;</code></pre> 
<p><strong>登陆页面要要跳到select_user.jsp页面</strong></p> 
<p>在servlet包下新建SelectUserServlet</p> 
<pre><code class="language-java">public class SelectUserServlet extends HttpServlet {
    @Override
    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
        doPost(req, resp);
    }

    @Override
    protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
        //调用UserService查询List&lt;User&gt;
        UserService userService = new UserServiceImpl(this);
        List&lt;User&gt; userList = userService.selectUser();

        //把List&lt;User&gt;送到select_user.jsp
        req.setAttribute("userList", userList);
        req.getRequestDispatcher("select_user.jsp").forward(req, resp);
    }
}
</code></pre> 
<p>web.xml</p> 
<pre><code class="language-java">&lt;!--    selectUserServlet--&gt;
    &lt;servlet&gt;
        &lt;servlet-name&gt;selectUserServlet&lt;/servlet-name&gt;
        &lt;servlet-class&gt;com.by.servlet.SelectUserServlet&lt;/servlet-class&gt;
    &lt;/servlet&gt;
    &lt;servlet-mapping&gt;
        &lt;servlet-name&gt;selectUserServlet&lt;/servlet-name&gt;
        &lt;url-pattern&gt;/selectUserServlet&lt;/url-pattern&gt;
    &lt;/servlet-mapping&gt;</code></pre> 
<p>以下内容可在servlet类中Alt+Enter快捷键出来(先把Servlet类写完整)</p> 
<p>在service包下的UserService接口</p> 
<pre><code class="language-java">public interface UserService {

    User login(String username, String password);

    List&lt;User&gt; selectUser();
}</code></pre> 
<p>UserServiceImpl类</p> 
<pre><code class="language-java">public class UserServiceImpl implements UserService {
    private SqlSession sqlSession;
    private UserMapper userMapper;
    //加载UserMapper类
    public UserServiceImpl(HttpServlet httpServlet) {
        ServletContext servletContext = httpServlet.getServletContext();
        sqlSession = (SqlSession) servletContext.getAttribute("sqlSession");
        userMapper = sqlSession.getMapper(UserMapper.class);
    }

    @Override
    public User login(String username, String password) {
        //调用dao
        return userMapper.login(username,password);
    }

    @Override
    public List&lt;User&gt; selectUser() {
        return userMapper.selectUser();
    }
}</code></pre> 
<p>mapper包下的UserMapper接口</p> 
<pre><code class="language-java">public interface UserMapper {
    User login(@Param("username") String username, @Param("password") String password);

    List&lt;User&gt; selectUser();
}</code></pre> 
<p>mapper包下的UserMapper.xml接口</p> 
<pre><code class="language-java">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd"&gt;
&lt;mapper namespace="com.by.mapper.UserMapper"&gt;
    &lt;select id="login" resultType="com.by.pojo.User"&gt;
        SELECT * FROM user WHERE username=#{username} AND password=#{password}
    &lt;/select&gt;
    &lt;select id="selectUser" resultType="com.by.pojo.User"&gt;
        SELECT * FROM user
    &lt;/select&gt;
&lt;/mapper&gt;</code></pre> 
<p>测试结果</p> 
<p>1</p> 
<p><img alt="" height="226" src="https://images2.imgbox.com/1e/3d/F7gb8Gs6_o.png" width="832"></p> 
<p>2</p> 
<p><img alt="" height="288" src="https://images2.imgbox.com/81/6a/1IA0DOTS_o.png" width="1035"></p> 
<h2>四 新增数据</h2> 
<p>在select_user.jsp添加新增链接</p> 
<p><img alt="" height="29" src="https://images2.imgbox.com/1a/3a/zpdPMtK0_o.png" width="479"></p> 
<p>新建add_user.jsp</p> 
<pre><code class="language-java">&lt;%--
  Created by IntelliJ IDEA.
  User: Hero
  Date: 2023/12/29
  Time: 11:01
  To change this template use File | Settings | File Templates.
--%&gt;
&lt;%@ page contentType="text/html;charset=UTF-8" language="java" %&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;Title&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;h1&gt;新增&lt;/h1&gt;
&lt;form action="addUser" method="post"&gt;
    账号：&lt;input type="text" name="username"&gt;&lt;br&gt;
    密码：&lt;input type="text" name="password"&gt;&lt;br&gt;
    性别：&lt;input type="text" name="sex"&gt;&lt;br&gt;
    年龄：&lt;input type="text" name="age"&gt;&lt;br&gt;
    地址：&lt;input type="text" name="address"&gt;&lt;br&gt;
    &lt;input type="submit" value=" 新  增 "&gt;
&lt;/form&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre> 
<p>在servlet包下新建addUser</p> 
<pre><code class="language-java">public class addUser extends HttpServlet {
    @Override
    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
        doPost(req, resp);
    }

    @Override
    protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
        //1、接收参数
        String username = req.getParameter("username");
        String password = req.getParameter("password");
        String sex = req.getParameter("sex");
        Integer age = Integer.valueOf(req.getParameter("age"));
        String address = req.getParameter("address");
        User user = new User(username, password, sex, age, address);

        //2、调用service，把user保存到数据库
        UserService userService = new UserServiceImpl(this);
        userService.addUser(user);

        //3、重定向到SelectUserServlet
        resp.sendRedirect("selectUserServlet");
    }
}</code></pre> 
<p>web.xml</p> 
<pre><code class="language-java">&lt;!--    addUser--&gt;
    &lt;servlet&gt;
        &lt;servlet-name&gt;addUser&lt;/servlet-name&gt;
        &lt;servlet-class&gt;com.by.servlet.addUser&lt;/servlet-class&gt;
    &lt;/servlet&gt;
    &lt;servlet-mapping&gt;
        &lt;servlet-name&gt;addUser&lt;/servlet-name&gt;
        &lt;url-pattern&gt;/addUser&lt;/url-pattern&gt;
    &lt;/servlet-mapping&gt;
</code></pre> 
<p>以下内容可在servlet类中Alt+Enter快捷键出来(先把Servlet类写完整)</p> 
<p>在service包下的UserService接口</p> 
<pre><code class="language-java">public interface UserService {

    User login(String username, String password);

    List&lt;User&gt; selectUser();

    void addUser(User user);
}
</code></pre> 
<p>UserServiceImpl类</p> 
<pre><code class="language-java">public class UserServiceImpl implements UserService {
    private SqlSession sqlSession;
    private UserMapper userMapper;
    //加载UserMapper类
    public UserServiceImpl(HttpServlet httpServlet) {
        ServletContext servletContext = httpServlet.getServletContext();
        sqlSession = (SqlSession) servletContext.getAttribute("sqlSession");
        userMapper = sqlSession.getMapper(UserMapper.class);
    }

    @Override
    public User login(String username, String password) {
        //调用dao
        return userMapper.login(username,password);
    }

    @Override
    public List&lt;User&gt; selectUser() {
        return userMapper.selectUser();
    }

    @Override
    public void addUser(User user) {
        userMapper.addUser(user);
        sqlSession.commit();
    }
}</code></pre> 
<p>mapper包下的UserMapper接口</p> 
<pre><code class="language-java">public interface UserMapper {
    User login(@Param("username") String username, @Param("password") String password);

    List&lt;User&gt; selectUser();

    void addUser(User user);
}</code></pre> 
<p>mapper包下的UserMapper.xml接口</p> 
<pre><code class="language-java">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd"&gt;
&lt;mapper namespace="com.by.mapper.UserMapper"&gt;
    &lt;select id="login" resultType="com.by.pojo.User"&gt;
        SELECT * FROM user WHERE username=#{username} AND password=#{password}
    &lt;/select&gt;
    &lt;select id="selectUser" resultType="com.by.pojo.User"&gt;
        SELECT * FROM user
    &lt;/select&gt;
&lt;!--   insert--&gt;
    &lt;insert id="addUser" parameterType="com.by.pojo.User"&gt;
        INSERT INTO user
        &lt;trim prefix="(" suffix=")" suffixOverrides=","&gt;
            &lt;if test="username!=null and username!=''"&gt;
                username,
            &lt;/if&gt;
            &lt;if test="password!=null and password!=''"&gt;
                password,
            &lt;/if&gt;
            &lt;if test="sex!=null and sex!=''"&gt;
                sex,
            &lt;/if&gt;
            &lt;if test="age!=null"&gt;
                age,
            &lt;/if&gt;
            &lt;if test="address!=null and address!=''"&gt;
                address,
            &lt;/if&gt;
        &lt;/trim&gt;
        VALUES
        &lt;trim prefix="(" suffix=")" suffixOverrides=","&gt;
            &lt;if test="username!=null and username!=''"&gt;
                #{username},
            &lt;/if&gt;
            &lt;if test="password!=null and password!=''"&gt;
                #{password},
            &lt;/if&gt;
            &lt;if test="sex!=null and sex!=''"&gt;
                #{sex},
            &lt;/if&gt;
            &lt;if test="age!=null"&gt;
                #{age},
            &lt;/if&gt;
            &lt;if test="address!=null and address!=''"&gt;
                #{address},
            &lt;/if&gt;
        &lt;/trim&gt;
    &lt;/insert&gt;
&lt;/mapper&gt;</code></pre> 
<p>测试结果</p> 
<p>1</p> 
<p><img alt="" height="333" src="https://images2.imgbox.com/89/88/hQme7150_o.png" width="748"></p> 
<p>2</p> 
<p><img alt="" height="327" src="https://images2.imgbox.com/fe/e9/0WvlfHTt_o.png" width="1093"></p> 
<h2>五 删除数据</h2> 
<p>在select_user.jsp添加删除链接</p> 
<p><img alt="" height="35" src="https://images2.imgbox.com/c7/a1/DccsW6ZP_o.png" width="615"></p> 
<p>在servlet包下新建DeleteUserServlet</p> 
<pre><code class="language-java">public class UpdateUserServlet extends HttpServlet {
    @Override
    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
        doPost(req, resp);
    }

    @Override
    protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
        //1、接收参数
        Integer id = Integer.valueOf(req.getParameter("id"));
        String username = req.getParameter("username");
        String password = req.getParameter("password");
        String sex = req.getParameter("sex");
        Integer age = Integer.valueOf(req.getParameter("age"));
        String address = req.getParameter("address");
        User user = new User(id, username, password, sex, age, address);

        //2、调用service，修改user
        UserService userService = new UserServiceImpl(this);
        userService.updateUserById(user);

        //3、重定向到SelectUserServlet
        resp.sendRedirect("selectUserServlet");
    }
}
</code></pre> 
<p>web.xml</p> 
<pre><code class="language-java"> &lt;!--    delete--&gt;
    &lt;servlet&gt;
        &lt;servlet-name&gt;deleteUser&lt;/servlet-name&gt;
        &lt;servlet-class&gt;com.by.servlet.DeleteUserServlet&lt;/servlet-class&gt;
    &lt;/servlet&gt;
    &lt;servlet-mapping&gt;
        &lt;servlet-name&gt;deleteUser&lt;/servlet-name&gt;
        &lt;url-pattern&gt;/deleteUser&lt;/url-pattern&gt;
    &lt;/servlet-mapping&gt;</code></pre> 
<p>以下内容可在servlet类中Alt+Enter快捷键出来(先把Servlet类写完整)</p> 
<p>在service包下的UserService接口</p> 
<pre><code class="language-java">public interface UserService {

    User login(String username, String password);

    List&lt;User&gt; selectUser();

    void addUser(User user);

    void deleteUser(Integer id);
}</code></pre> 
<p>UserServiceImpl类</p> 
<pre><code class="language-java">public class UserServiceImpl implements UserService {
    private SqlSession sqlSession;
    private UserMapper userMapper;
    //加载UserMapper类
    public UserServiceImpl(HttpServlet httpServlet) {
        ServletContext servletContext = httpServlet.getServletContext();
        sqlSession = (SqlSession) servletContext.getAttribute("sqlSession");
        userMapper = sqlSession.getMapper(UserMapper.class);
    }

    @Override
    public User login(String username, String password) {
        //调用dao
        return userMapper.login(username,password);
    }

    @Override
    public List&lt;User&gt; selectUser() {
        return userMapper.selectUser();
    }

    @Override
    public void addUser(User user) {
        userMapper.addUser(user);
        sqlSession.commit();
    }

    @Override
    public void deleteUser(Integer id) {
        userMapper.deleteUser(id);
        sqlSession.commit();
    }
}</code></pre> 
<p>mapper包下的UserMapper接口</p> 
<pre><code class="language-java">public interface UserMapper {
    User login(@Param("username") String username, @Param("password") String password);

    List&lt;User&gt; selectUser();

    void addUser(User user);

    void deleteUser(Integer id);
}</code></pre> 
<p>mapper包下的UserMapper.xml接口</p> 
<pre><code class="language-java">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd"&gt;
&lt;mapper namespace="com.by.mapper.UserMapper"&gt;
    &lt;select id="login" resultType="com.by.pojo.User"&gt;
        SELECT * FROM user WHERE username=#{username} AND password=#{password}
    &lt;/select&gt;
    &lt;select id="selectUser" resultType="com.by.pojo.User"&gt;
        SELECT * FROM user
    &lt;/select&gt;
&lt;!--   insert--&gt;
    &lt;insert id="addUser" parameterType="com.by.pojo.User"&gt;
        INSERT INTO user
        &lt;trim prefix="(" suffix=")" suffixOverrides=","&gt;
            &lt;if test="username!=null and username!=''"&gt;
                username,
            &lt;/if&gt;
            &lt;if test="password!=null and password!=''"&gt;
                password,
            &lt;/if&gt;
            &lt;if test="sex!=null and sex!=''"&gt;
                sex,
            &lt;/if&gt;
            &lt;if test="age!=null"&gt;
                age,
            &lt;/if&gt;
            &lt;if test="address!=null and address!=''"&gt;
                address,
            &lt;/if&gt;
        &lt;/trim&gt;
        VALUES
        &lt;trim prefix="(" suffix=")" suffixOverrides=","&gt;
            &lt;if test="username!=null and username!=''"&gt;
                #{username},
            &lt;/if&gt;
            &lt;if test="password!=null and password!=''"&gt;
                #{password},
            &lt;/if&gt;
            &lt;if test="sex!=null and sex!=''"&gt;
                #{sex},
            &lt;/if&gt;
            &lt;if test="age!=null"&gt;
                #{age},
            &lt;/if&gt;
            &lt;if test="address!=null and address!=''"&gt;
                #{address},
            &lt;/if&gt;
        &lt;/trim&gt;
    &lt;/insert&gt;
&lt;!--    delete--&gt;
    &lt;delete id="deleteUser" parameterType="int"&gt;
        DELETE FROM user WHERE id=#{id}
    &lt;/delete&gt;
&lt;/mapper&gt;</code></pre> 
<p>测试结果</p> 
<p><img alt="" height="249" src="https://images2.imgbox.com/02/02/wQRizZ6D_o.png" width="1036"></p> 
<h2>六 更新数据</h2> 
<p>在select_user.jsp增加修改链接</p> 
<p><img alt="" height="35" src="https://images2.imgbox.com/c9/44/ktQqHK8A_o.png" width="629"></p> 
<p>修改数据首先要获取被修改的数据</p> 
<h3>获取被修改的数据</h3> 
<p>在servlet包下新建GetUserServlet</p> 
<pre><code class="language-java">public class GetUserServlet extends HttpServlet {
    @Override
    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
        doPost(req, resp);
    }

    @Override
    protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
        //1、接收参数
        Integer id = Integer.valueOf(req.getParameter("id"));
        //2、调用service，根据id查询user
        UserService userService = new UserServiceImpl(this);
        User user = userService.getUserById(id);

        //3、user送到update_user.jsp
        req.setAttribute("user", user);
        req.getRequestDispatcher("update_user.jsp").forward(req, resp);
    }
}
</code></pre> 
<p>web.xml</p> 
<pre><code class="language-java"> &lt;!--    GetUserServlet--&gt;
    &lt;servlet&gt;
        &lt;servlet-name&gt;getUserServlet&lt;/servlet-name&gt;
        &lt;servlet-class&gt;com.by.servlet.GetUserServlet&lt;/servlet-class&gt;
    &lt;/servlet&gt;
    &lt;servlet-mapping&gt;
        &lt;servlet-name&gt;getUserServlet&lt;/servlet-name&gt;
        &lt;url-pattern&gt;/getUserById&lt;/url-pattern&gt;
    &lt;/servlet-mapping&gt;</code></pre> 
<p>以下内容可在servlet类中Alt+Enter快捷键出来(先把Servlet类写完整)</p> 
<p>在service包下的UserService接口</p> 
<pre><code class="language-java">public interface UserService {

    User login(String username, String password);

    List&lt;User&gt; selectUser();

    void addUser(User user);

    void deleteUser(Integer id);

    User getUserById(Integer id);
}</code></pre> 
<p>UserServiceImpl类</p> 
<pre><code class="language-java">public class UserServiceImpl implements UserService {
    private SqlSession sqlSession;
    private UserMapper userMapper;
    //加载UserMapper类
    public UserServiceImpl(HttpServlet httpServlet) {
        ServletContext servletContext = httpServlet.getServletContext();
        sqlSession = (SqlSession) servletContext.getAttribute("sqlSession");
        userMapper = sqlSession.getMapper(UserMapper.class);
    }

    @Override
    public User login(String username, String password) {
        //调用dao
        return userMapper.login(username,password);
    }

    @Override
    public List&lt;User&gt; selectUser() {
        return userMapper.selectUser();
    }

    @Override
    public void addUser(User user) {
        userMapper.addUser(user);
        sqlSession.commit();
    }

    @Override
    public void deleteUser(Integer id) {
        userMapper.deleteUser(id);
        sqlSession.commit();
    }

    @Override
    public User getUserById(Integer id) {
        return userMapper.getUserById(id);
    }
}</code></pre> 
<p>mapper包下的UserMapper接口</p> 
<pre><code class="language-java">public interface UserMapper {
    User login(@Param("username") String username, @Param("password") String password);

    List&lt;User&gt; selectUser();

    void addUser(User user);

    void deleteUser(Integer id);

    User getUserById(Integer id);
}</code></pre> 
<p>mapper包下的UserMapper.xml接口</p> 
<pre><code class="language-java">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd"&gt;
&lt;mapper namespace="com.by.mapper.UserMapper"&gt;
    &lt;select id="login" resultType="com.by.pojo.User"&gt;
        SELECT * FROM user WHERE username=#{username} AND password=#{password}
    &lt;/select&gt;
    &lt;select id="selectUser" resultType="com.by.pojo.User"&gt;
        SELECT * FROM user
    &lt;/select&gt;
&lt;!--   insert--&gt;
    &lt;insert id="addUser" parameterType="com.by.pojo.User"&gt;
        INSERT INTO user
        &lt;trim prefix="(" suffix=")" suffixOverrides=","&gt;
            &lt;if test="username!=null and username!=''"&gt;
                username,
            &lt;/if&gt;
            &lt;if test="password!=null and password!=''"&gt;
                password,
            &lt;/if&gt;
            &lt;if test="sex!=null and sex!=''"&gt;
                sex,
            &lt;/if&gt;
            &lt;if test="age!=null"&gt;
                age,
            &lt;/if&gt;
            &lt;if test="address!=null and address!=''"&gt;
                address,
            &lt;/if&gt;
        &lt;/trim&gt;
        VALUES
        &lt;trim prefix="(" suffix=")" suffixOverrides=","&gt;
            &lt;if test="username!=null and username!=''"&gt;
                #{username},
            &lt;/if&gt;
            &lt;if test="password!=null and password!=''"&gt;
                #{password},
            &lt;/if&gt;
            &lt;if test="sex!=null and sex!=''"&gt;
                #{sex},
            &lt;/if&gt;
            &lt;if test="age!=null"&gt;
                #{age},
            &lt;/if&gt;
            &lt;if test="address!=null and address!=''"&gt;
                #{address},
            &lt;/if&gt;
        &lt;/trim&gt;
    &lt;/insert&gt;
&lt;!--    delete--&gt;
    &lt;delete id="deleteUser" parameterType="int"&gt;
        DELETE FROM user WHERE id=#{id}
    &lt;/delete&gt;
&lt;!--getdata--&gt;
    &lt;select id="getUserById" parameterType="int" resultType="com.by.pojo.User"&gt;
        SELECT * FROM user WHERE id=#{id}
    &lt;/select&gt;
&lt;/mapper&gt;</code></pre> 
<p>测试结果</p> 
<p><img alt="" height="324" src="https://images2.imgbox.com/ca/cb/p9IZyDLv_o.png" width="968"></p> 
<h3 style="background-color:transparent;">修改数据</h3> 
<p>在servlet包下新建UpdateUserServlet</p> 
<pre><code class="language-java">public class UpdateUserServlet extends HttpServlet {
    @Override
    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
        doPost(req, resp);
    }

    @Override
    protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
        //1、接收参数
        Integer id = Integer.valueOf(req.getParameter("id"));
        String username = req.getParameter("username");
        String password = req.getParameter("password");
        String sex = req.getParameter("sex");
        Integer age = Integer.valueOf(req.getParameter("age"));
        String address = req.getParameter("address");
        User user = new User(id, username, password, sex, age, address);

        //2、调用service，修改user
        UserService userService = new UserServiceImpl(this);
        userService.updateUserById(user);

        //3、重定向到SelectUserServlet
        resp.sendRedirect("selectUserServlet");
    }
}
</code></pre> 
<p>web.xml</p> 
<pre><code class="language-java">&lt;!--    UpdateUserServlet--&gt;
    &lt;servlet&gt;
        &lt;servlet-name&gt;updateUserById&lt;/servlet-name&gt;
        &lt;servlet-class&gt;com.by.servlet.UpdateUserServlet&lt;/servlet-class&gt;
    &lt;/servlet&gt;
    &lt;servlet-mapping&gt;
        &lt;servlet-name&gt;updateUserById&lt;/servlet-name&gt;
        &lt;url-pattern&gt;/updateUserById&lt;/url-pattern&gt;
    &lt;/servlet-mapping&gt;</code></pre> 
<p>以下内容可在servlet类中Alt+Enter快捷键出来(先把Servlet类写完整)</p> 
<p>在service包下的UserService接口</p> 
<pre><code class="language-java">public interface UserService {

    User login(String username, String password);

    List&lt;User&gt; selectUser();

    void addUser(User user);

    void deleteUser(Integer id);

    User getUserById(Integer id);

    void updateUserById(User user);
}
</code></pre> 
<p>UserServiceImpl类</p> 
<pre><code class="language-java">public class UserServiceImpl implements UserService {
    private SqlSession sqlSession;
    private UserMapper userMapper;
    //加载UserMapper类
    public UserServiceImpl(HttpServlet httpServlet) {
        ServletContext servletContext = httpServlet.getServletContext();
        sqlSession = (SqlSession) servletContext.getAttribute("sqlSession");
        userMapper = sqlSession.getMapper(UserMapper.class);
    }

    @Override
    public User login(String username, String password) {
        //调用dao
        return userMapper.login(username,password);
    }

    @Override
    public List&lt;User&gt; selectUser() {
        return userMapper.selectUser();
    }

    @Override
    public void addUser(User user) {
        userMapper.addUser(user);
        sqlSession.commit();
    }

    @Override
    public void deleteUser(Integer id) {
        userMapper.deleteUser(id);
        sqlSession.commit();
    }

    @Override
    public User getUserById(Integer id) {
        return userMapper.getUserById(id);
    }

    @Override
    public void updateUserById(User user) {
        userMapper.updateUserById(user);
        sqlSession.commit();
    }
}
</code></pre> 
<p>mapper包下的UserMapper接口</p> 
<pre><code class="language-java">public interface UserMapper {
    User login(@Param("username") String username, @Param("password") String password);

    List&lt;User&gt; selectUser();

    void addUser(User user);

    void deleteUser(Integer id);

    User getUserById(Integer id);

    void updateUserById(User user);
}</code></pre> 
<p>mapper包下的UserMapper.xml接口</p> 
<pre><code class="language-java">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd"&gt;
&lt;mapper namespace="com.by.mapper.UserMapper"&gt;
    &lt;select id="login" resultType="com.by.pojo.User"&gt;
        SELECT * FROM user WHERE username=#{username} AND password=#{password}
    &lt;/select&gt;
    &lt;select id="selectUser" resultType="com.by.pojo.User"&gt;
        SELECT * FROM user
    &lt;/select&gt;
&lt;!--   insert--&gt;
    &lt;insert id="addUser" parameterType="com.by.pojo.User"&gt;
        INSERT INTO user
        &lt;trim prefix="(" suffix=")" suffixOverrides=","&gt;
            &lt;if test="username!=null and username!=''"&gt;
                username,
            &lt;/if&gt;
            &lt;if test="password!=null and password!=''"&gt;
                password,
            &lt;/if&gt;
            &lt;if test="sex!=null and sex!=''"&gt;
                sex,
            &lt;/if&gt;
            &lt;if test="age!=null"&gt;
                age,
            &lt;/if&gt;
            &lt;if test="address!=null and address!=''"&gt;
                address,
            &lt;/if&gt;
        &lt;/trim&gt;
        VALUES
        &lt;trim prefix="(" suffix=")" suffixOverrides=","&gt;
            &lt;if test="username!=null and username!=''"&gt;
                #{username},
            &lt;/if&gt;
            &lt;if test="password!=null and password!=''"&gt;
                #{password},
            &lt;/if&gt;
            &lt;if test="sex!=null and sex!=''"&gt;
                #{sex},
            &lt;/if&gt;
            &lt;if test="age!=null"&gt;
                #{age},
            &lt;/if&gt;
            &lt;if test="address!=null and address!=''"&gt;
                #{address},
            &lt;/if&gt;
        &lt;/trim&gt;
    &lt;/insert&gt;
&lt;!--    delete--&gt;
    &lt;delete id="deleteUser" parameterType="int"&gt;
        DELETE FROM user WHERE id=#{id}
    &lt;/delete&gt;
&lt;!--getdata--&gt;
    &lt;select id="getUserById" parameterType="int" resultType="com.by.pojo.User"&gt;
        SELECT * FROM user WHERE id=#{id}
    &lt;/select&gt;
&lt;!--    updata--&gt;
    &lt;update id="updateUserById" parameterType="com.by.pojo.User"&gt;
        UPDATE user
        &lt;set&gt;
            &lt;if test="username!=null and username!=''"&gt;
                username=#{username},
            &lt;/if&gt;
            &lt;if test="password!=null and password!=''"&gt;
                password=#{password},
            &lt;/if&gt;
            &lt;if test="sex!=null and sex!=''"&gt;
                sex=#{sex},
            &lt;/if&gt;
            &lt;if test="age!=null"&gt;
                age=#{age},
            &lt;/if&gt;
            &lt;if test="address!=null and address!=''"&gt;
                address=#{address},
            &lt;/if&gt;
        &lt;/set&gt;
        WHERE id=#{id}
    &lt;/update&gt;
&lt;/mapper&gt;</code></pre> 
<p>测试结果</p> 
<p>1</p> 
<p><img alt="" height="335" src="https://images2.imgbox.com/b4/31/zSY81WRF_o.png" width="867"></p> 
<p>2</p> 
<p><img alt="" height="322" src="https://images2.imgbox.com/de/1c/fkapujdY_o.png" width="1104"></p> 
<h2>七 最终项目结构</h2> 
<p>1</p> 
<p><img alt="" height="824" src="https://images2.imgbox.com/ef/db/ourbnYtG_o.png" width="411"></p> 
<p>2</p> 
<p><img alt="" height="534" src="https://images2.imgbox.com/28/05/jd2L5U88_o.png" width="451"></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/4fd6b5edf1d85085d40310daf4d9128c/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">【计算机图形学】NAP: Neural 3D Articulation Prior</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/24372ac3b134f26fa856e0060b91e739/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">论文阅读：基于MCMC的能量模型最大似然学习剖析</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>