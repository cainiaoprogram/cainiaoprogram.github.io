<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>python中的ix是啥_pandas中ix的使用详细讲解 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="python中的ix是啥_pandas中ix的使用详细讲解" />
<meta property="og:description" content="在上一篇博客中，我们已经仔细讲解了iloc和loc，只是简单了提到了ix。这是因为相比于前2者，ix更复杂，也更让人迷惑。
因此，本篇博客通过例子的解释试图来描述清楚ix，尤其是与iloc和loc的联系。
首先，再次介绍这三种方法的概述：
loc gets rows (or columns) with particular labels from the index. loc从索引中获取具有特定标签的行(或列)。
iloc gets rows (or columns) at particular positions in the index (so it only takes integers). iloc在索引中的特定位置获取行(或列)(因此它只接受整数)。
ix usually tries to behave like loc but falls back to behaving like iloc if a label is not present in the index. ix通常会尝试像loc一样行为，但如果索引中不存在标签，则会退回到像iloc一样的行为。(这句话有些绕口，没关系，关于ix特点，后面会详细讲解)
1 使用ix切分Series
请注意：在pandas版本0.20.0及其以后版本中，ix已经不被推荐使用，建议采用iloc和loc实现ix。这是为什么呢？这是由于ix的复杂特点可能使ix使用起来有些棘手：
如果索引是整数类型，则ix将仅使用基于标签的索引，而不会回退到基于位置的索引。如果标签不在索引中，则会引发错误。
如果索引不仅包含整数，则给定一个整数，ix将立即使用基于位置的索引而不是基于标签的索引。但是，如果ix被赋予另一种类型(例如字符串)，则它可以使用基于标签的索引。
接下来举例说明这2个特点。
1.1 特点1举例
&gt;&gt;&gt; s = pd.Series(np.nan, index=[49,48,47,46,45, 1, 2, 3, 4, 5])" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/1e77eef0f68d355bd50b1850cef3c6c0/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-12-05T03:04:55+08:00" />
<meta property="article:modified_time" content="2020-12-05T03:04:55+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">python中的ix是啥_pandas中ix的使用详细讲解</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div style="font-size:16px;"> 
 <p>在上一篇博客中，我们已经仔细讲解了iloc和loc，只是简单了提到了ix。这是因为相比于前2者，ix更复杂，也更让人迷惑。</p> 
 <p>因此，本篇博客通过例子的解释试图来描述清楚ix，尤其是与iloc和loc的联系。</p> 
 <p>首先，再次介绍这三种方法的概述：</p> 
 <p>loc gets rows (or columns) with particular labels from the index. loc从索引中获取具有特定标签的行(或列)。</p> 
 <p>iloc gets rows (or columns) at particular positions in the index (so it only takes integers). iloc在索引中的特定位置获取行(或列)(因此它只接受整数)。</p> 
 <p>ix usually tries to behave like loc but falls back to behaving like iloc if a label is not present in the index. ix通常会尝试像loc一样行为，但如果索引中不存在标签，则会退回到像iloc一样的行为。(这句话有些绕口，没关系，关于ix特点，后面会详细讲解)</p> 
 <p>1 使用ix切分Series</p> 
 <p>请注意：在pandas版本0.20.0及其以后版本中，ix已经不被推荐使用，建议采用iloc和loc实现ix。这是为什么呢？这是由于ix的复杂特点可能使ix使用起来有些棘手：</p> 
 <p>如果索引是整数类型，则ix将仅使用基于标签的索引，而不会回退到基于位置的索引。如果标签不在索引中，则会引发错误。</p> 
 <p>如果索引不仅包含整数，则给定一个整数，ix将立即使用基于位置的索引而不是基于标签的索引。但是，如果ix被赋予另一种类型(例如字符串)，则它可以使用基于标签的索引。</p> 
 <p>接下来举例说明这2个特点。</p> 
 <p>1.1 特点1举例</p> 
 <p>&gt;&gt;&gt; s = pd.Series(np.nan, index=[49,48,47,46,45, 1, 2, 3, 4, 5])</p> 
 <p>&gt;&gt;&gt; s</p> 
 <p>49 NaN</p> 
 <p>48 NaN</p> 
 <p>47 NaN</p> 
 <p>46 NaN</p> 
 <p>45 NaN</p> 
 <p>1 NaN</p> 
 <p>2 NaN</p> 
 <p>3 NaN</p> 
 <p>4 NaN</p> 
 <p>5 NaN</p> 
 <p>现在我们来看使用整数3切片有什么结果：</p> 
 <p>在这个例子中，s.iloc[:3]读取前3行(因为iloc把3看成是位置position)，而s.loc[:3]读取的是前8行(因为loc把3看作是索引的标签label)</p> 
 <p>&gt;&gt;&gt; s.iloc[:3] # slice the first three rows</p> 
 <p>49 NaN</p> 
 <p>48 NaN</p> 
 <p>47 NaN</p> 
 <p>&gt;&gt;&gt; s.loc[:3] # slice up to and including label 3</p> 
 <p>49 NaN</p> 
 <p>48 NaN</p> 
 <p>47 NaN</p> 
 <p>46 NaN</p> 
 <p>45 NaN</p> 
 <p>1 NaN</p> 
 <p>2 NaN</p> 
 <p>3 NaN</p> 
 <p>&gt;&gt;&gt; s.ix[:3] # the integer is in the index so s.ix[:3] works like loc</p> 
 <p>49 NaN</p> 
 <p>48 NaN</p> 
 <p>47 NaN</p> 
 <p>46 NaN</p> 
 <p>45 NaN</p> 
 <p>1 NaN</p> 
 <p>2 NaN</p> 
 <p>3 NaN</p> 
 <p>注意：s.ix[:3]返回的结果与s.loc[:3]一样，这是因为如果series的索引是整型的话，ix会首先去寻找索引中的标签3而不是去找位置3。</p> 
 <p>如果，我们试图去找一个不在索引中的标签，比如说是6呢？</p> 
 <p>&gt;&gt;&gt; s.iloc[:6]</p> 
 <p>49 NaN</p> 
 <p>48 NaN</p> 
 <p>47 NaN</p> 
 <p>46 NaN</p> 
 <p>45 NaN</p> 
 <p>1 NaN</p> 
 <p>&gt;&gt;&gt; s.loc[:6]</p> 
 <p>KeyError: 6</p> 
 <p>&gt;&gt;&gt; s.ix[:6]</p> 
 <p>KeyError: 6</p> 
 <p>在上面的例子中，s.iloc[:6]正如我们所期望的，返回了前6行。而，s.loc[:6]返回了KeyError错误，这是因为标签6并不在索引中。</p> 
 <p>那么，s.ix[:6]报错的原因是什么呢？正如我们在ix的特点1所说的那样，如果索引只有整数类型，那么ix仅使用基于标签的索引，而不会回退到基于位置的索引。如果标签不在索引中，则会引发错误。</p> 
 <p>1.2 特点2举例</p> 
 <p>接着例子1来说，如果我们的索引是一个混合的类型，即不仅仅包括整型，也包括其他类型，如字符类型。那么，给ix一个整型数字，ix会立即使用iloc操作，而不是报KeyError错误。</p> 
 <p>&gt;&gt;&gt; s2 = pd.Series(np.nan, index=['a','b','c','d','e', 1, 2, 3, 4, 5])</p> 
 <p>&gt;&gt;&gt; s2.index.is_mixed() # index is mix of different types</p> 
 <p>True</p> 
 <p>&gt;&gt;&gt; s2.ix[:6] # now behaves like iloc given integer</p> 
 <p>a NaN</p> 
 <p>b NaN</p> 
 <p>c NaN</p> 
 <p>d NaN</p> 
 <p>e NaN</p> 
 <p>1 NaN</p> 
 <p>注意：在这种情况下，ix也可以接受非整型，这样就是loc的操作：</p> 
 <p>&gt;&gt;&gt; s2.ix[:'c'] # behaves like loc given non-integer</p> 
 <p>a NaN</p> 
 <p>b NaN</p> 
 <p>c NaN</p> 
 <p>这个例子就说明了ix特点2。</p> 
 <p>正如前面所介绍的，ix的使用有些复杂。如果仅使用位置或者标签进行切片，使用iloc或者loc就行了，请避免使用ix。</p> 
 <p>2 在Dataframe中使用ix实现复杂切片</p> 
 <p>有时候，在使用Dataframe进行切片时，我们想混合使用标签和位置来对行和列进行切片。那么，应该怎么操作呢？</p> 
 <p>举例，考虑有下述例子中的Dataframe。我们想得到直到包含标签'c'的行和前4列。</p> 
 <p>&gt;&gt;&gt; df = pd.DataFrame(np.nan,</p> 
 <p>index=list('abcde'),</p> 
 <p>columns=['x','y','z', 8, 9])</p> 
 <p>&gt;&gt;&gt; df</p> 
 <p>x y z 8 9</p> 
 <p>a NaN NaN NaN NaN NaN</p> 
 <p>b NaN NaN NaN NaN NaN</p> 
 <p>c NaN NaN NaN NaN NaN</p> 
 <p>d NaN NaN NaN NaN NaN</p> 
 <p>e NaN NaN NaN NaN NaN</p> 
 <p>在pandas的早期版本(0.20.0)之前，ix可以很好地实现这个功能。</p> 
 <p>我们可以使用标签来切分行，使用位置来切分列(请注意：因为4并不是列的名字，因为ix在列上是使用的iloc)。</p> 
 <p>&gt;&gt;&gt; df.ix[:'c', :4]</p> 
 <p>x y z 8</p> 
 <p>a NaN NaN NaN NaN</p> 
 <p>b NaN NaN NaN NaN</p> 
 <p>c NaN NaN NaN NaN</p> 
 <p>在pandas的后来版本中，我们可以使用iloc和其它的一个方法就可以实现上述功能：</p> 
 <p>&gt;&gt;&gt; df.iloc[:df.index.get_loc('c') + 1, :4]</p> 
 <p>x y z 8</p> 
 <p>a NaN NaN NaN NaN</p> 
 <p>b NaN NaN NaN NaN</p> 
 <p>c NaN NaN NaN NaN</p> 
 <p>get_loc() 是得到标签在索引中的位置的方法。请注意，因为使用iloc切片时不包括最后1个点，因为我们必须加1。</p> 
 <p>可以看到，只使用iloc更好用，因为不必理会ix的那2个“繁琐”的特点。</p> 
 <p>3 参考文献</p> 
 <p>https://stackoverflow.com/questions/31593201/pandas-iloc-vs-ix-vs-loc-explanation-how-are-they-different</p> 
 <p>到此这篇关于pandas中ix的使用详细讲解的文章就介绍到这了,更多相关pandas ix内容请搜索我们以前的文章或继续浏览下面的相关文章希望大家以后多多支持我们！</p> 
 <p>本文标题: pandas中ix的使用详细讲解</p> 
 <p>本文地址: http://www.cppcns.com/jiaoben/python/302504.html</p> 
</div>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/2869b5c053d67039380e5f37be9e17b2/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">python爬取所有页url_Python 如何爬取相同url下，多个页面的链接内容</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/56546fb136c1c900a5d23ae323d7077c/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">下载bert的预训练模型并加载训练</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>