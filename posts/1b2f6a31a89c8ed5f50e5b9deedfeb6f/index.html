<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>关于【C语言】中scanf与getchar的用法和常见错误详解 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="关于【C语言】中scanf与getchar的用法和常见错误详解" />
<meta property="og:description" content="写这篇博客的起因是最近博主自己学习中总是遇到类似的错误，并曾百思不得其解。
今天分享出来是希望帮助大家在写代码时避免这些错误。话不多说，我们直接开始吧！
君兮_的个人主页 勤时当勉励 岁月不待人 C/C&#43;&#43; 游戏开发 输入函数scanf与getchar 一.scanf的用法1. scanf(“输入控制符”, 输入参数);2.scanf(“输入控制符非输入控制符”, 输入参数)输入多个参数 3.scanf的返回值 二.getchar的用法1.getchar的返回类型及使用效果 三.几种常见错误详解1.不理解原理导致的错误2.输入参数不符合输入控制符要求 总结参考博客 一.scanf的用法 我们先来看看再MSDN里对scanf的解释
- scanf 的功能用一句话来概括就是“通过键盘给程序中的变量赋值”。下面来讲讲它的两种基本用法： 1. scanf(“输入控制符”, 输入参数); 功能：将从键盘输入的字符转化为“输入控制符”所规定格式的数据，然后存入以输入参数的值为地址的变量中。
在通常情况下，我们不希望某个值是由我们程序员指定的，而是在程序运行中由用户从键盘输入的，这更能满足在日常使用时用户的需要，提高我们程序的灵活性用 scanf 即可实现即可很好的满足我们的要求： # include &lt;stdio.h&gt; int main() { int n=0; scanf(&#34;%d&#34;, &amp;n); //&amp;n 表示取变量 n 的地址，&amp;是取地址符 printf(&#34;n = %d\n&#34;, i); return 0; } 上面这个基本的程序中，有以下两点需要注意:
(1)我们从键盘输入的全部都是字符。比如从键盘输入 125，它表示的并不是数字 125，而是字符 ‘1’、字符 ‘2’ 和字符 ‘5’。
操作系统在接收键盘数据时会将它当成字符来接收。这时就需要用“输入控制符”把它转化成相应的内容(如%d 是有符号十进制数 %f 是浮点数)。
上面代码中的%d就是要将从键盘输入的这些合法的字符转化成对应的十进制数字。比如经过 %d 转化之后，字符 125 就是数字 125 了。
(2)&amp;是一个取地址运算符，&amp;加变量名表示“该变量的地址”，所以&amp;n就表示变量 n 的地址。又称为“取地址n”，相当于将数据存入以变量 n 的地址为地址的变量中(即存入变量n的地址中)。也就是把转化后的数字125放到变量 n 中" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/1b2f6a31a89c8ed5f50e5b9deedfeb6f/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-06-19T09:04:48+08:00" />
<meta property="article:modified_time" content="2023-06-19T09:04:48+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">关于【C语言】中scanf与getchar的用法和常见错误详解</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-tomorrow-night">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <blockquote> 
 <p><em><strong><font color="green">写这篇博客的起因是最近博主自己学习中总是遇到类似的错误，并曾百思不得其解。<br> 今天分享出来是希望帮助大家在写代码时避免这些错误。话不多说，我们直接开始吧！</font></strong></em></p> 
</blockquote> 
<p><img src="https://images2.imgbox.com/2e/33/6wl7dE0v_o.png" alt="在这里插入图片描述" width="100"></p> 
<center> 
 <a href="https://blog.csdn.net/syf666250?spm=1010.2135.3001.5343">君兮_的个人主页</a> 
</center> 
<p></p> 
<center> 
 <p><b><font color="Violet">勤时当勉励 岁月不待人</font></b> </p> 
 <center> 
  <p><b><font color="ForestGreen">C/C++ 游戏开发</font></b> </p> 
 </center> 
 <p></p> 
</center> 
<hr> 
<p></p> 
<div class="toc"> 
 <h4>输入函数scanf与getchar</h4> 
 <ul><li><a href="#scanf_12" rel="nofollow">一.scanf的用法</a></li><li><ul><li><a href="#1_scanf__18" rel="nofollow">1. scanf(“输入控制符”, 输入参数);</a></li><li><a href="#2scanf__59" rel="nofollow">2.scanf(“输入控制符非输入控制符”, 输入参数)</a></li><li><ul><li><a href="#_97" rel="nofollow">输入多个参数</a></li></ul> 
   </li><li><a href="#3scanf_115" rel="nofollow">3.scanf的返回值</a></li></ul> 
  </li><li><a href="#getchar_118" rel="nofollow">二.getchar的用法</a></li><li><ul><li><a href="#1getchar_119" rel="nofollow">1.getchar的返回类型及使用效果</a></li></ul> 
  </li><li><a href="#_153" rel="nofollow">三.几种常见错误详解</a></li><li><ul><li><a href="#1_154" rel="nofollow">1.不理解原理导致的错误</a></li><li><a href="#2_293" rel="nofollow">2.输入参数不符合输入控制符要求</a></li></ul> 
  </li><li><a href="#_313" rel="nofollow">总结</a></li><li><ul><li><a href="#_324" rel="nofollow">参考博客</a></li></ul> 
 </li></ul> 
</div> 
<p></p> 
<h2><a id="scanf_12"></a>一.scanf的用法</h2> 
<ul><li>我们先来看看再MSDN里对scanf的解释<br> <img src="https://images2.imgbox.com/c4/2a/utdU7DRA_o.png" alt="在这里插入图片描述"><br> -<strong><font color="red"> scanf 的功能用一句话来概括就是“通过键盘给程序中的变量赋值”。</font></strong></li><li>下面来讲讲它的两种基本用法：</li></ul> 
<hr> 
<h3><a id="1_scanf__18"></a>1. scanf(“输入控制符”, 输入参数);</h3> 
<blockquote> 
 <p><font color="green">功能：将从键盘输入的字符转化为“输入控制符”所规定格式的数据，然后存入以输入参数的值为地址的变量中。</font></p> 
</blockquote> 
<ul><li>在通常情况下，我们不希望某个值是由我们程序员指定的，而是在程序运行中由用户从键盘输入的，这更能满足在日常使用时用户的需要，提高我们程序的灵活性</li><li>用 scanf 即可实现即可很好的满足我们的要求：</li></ul> 
<pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span> <span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">int</span> n<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//&amp;n 表示取变量 n 的地址，&amp;是取地址符</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"n = %d\n"</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre> 
<ul><li> <p>上面这个基本的程序中，有以下两点需要注意:</p> </li><li> <p>(1)我们从键盘输入的全部都是<mark>字符</mark>。比如从键盘输入 125，它表示的并不是数字 125，而是字符 ‘1’、字符 ‘2’ 和字符 ‘5’。<br> <font color="red">操作系统在接收键盘数据时会将它当成字符来接收。这时就需要用“输入控制符”把它转化成相应的内容(如%d 是有符号十进制数 %f 是浮点数)。</font></p> </li><li> <p>上面代码中的%d就是要将从键盘输入的这些合法的字符转化成对应的十进制数字。比如经过 %d 转化之后，字符 125 就是数字 125 了。</p> </li><li> <p>(2)<strong><font color="red">&amp;是一个取地址运算符，&amp;加变量名表示“该变量的地址”，所以&amp;n就表示变量 n 的地址。又称为“取地址n”，相当于将数据存入以变量 n 的地址为地址的变量中(即存入变量n的地址中)。也就是把转化后的数字125放到变量 n 中</font></strong></p> </li><li> <p>总的来说<br> <mark><strong>scanf 语句的意思就是：从键盘上输入字符 125，然后%d将这三个字符转化成十进制数 125，“&amp;n” 找到变量 n 的地址，把数字 125 放到以变量 n 的地址为地址的变量中，即变量 i 中，所以最终的输出结果就是n=125。</strong></mark></p> </li></ul> 
<p>注意:</p> 
<pre><code class="prism language-c"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	
	<span class="token keyword">char</span> n<span class="token punctuation">[</span><span class="token number">20</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"请输入:&gt;"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%s"</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
</code></pre> 
<ul><li>很多初学者看到这段代码可能会想:这个scanf中没有加&amp;n，会不会是错的？</li><li>恭喜你！！！---------------------------------------------------回答错误</li><li><font color="red">我们要透过代码看到其本质，这段代码在使用时，是把<strong>输入的字符串放到一个名字为n的char类型的数组的首地址中，而不是变量n中</strong>，把输入值放在地址里，当然是对的。</font></li></ul> 
<hr> 
<h3><a id="2scanf__59"></a>2.scanf(“输入控制符非输入控制符”, 输入参数)</h3> 
<blockquote> 
 <p><font color="green">这种用法我是墙裂建议大家在平时敲代码时不要去使用的，因为在使用过程中对用户非常不友好。但咱们这里是介绍用法，还是简单介绍一下，顺便讲讲改进的方法。</font></p> 
</blockquote> 
<pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span> <span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">int</span> n<span class="token punctuation">;</span>
    <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"n = %d"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"n = %d\n"</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre> 
<ul><li><strong><font color="red">在 scanf 中，所有的“非输入控制符”都要原样输入。</font></strong></li><li>接下来我来讲讲为什么不推荐使用这种用法</li><li>这种输入方法必须满足原样输入，当用户使用时，但凡输入的和你设置的格式有一点不同都不行，哪怕只是多或者少了一个空格。</li><li>比如要从键盘给变量 n 赋值 123，那么必须要输入n=123才正确，少一个或者多一个都是错误的。</li></ul> 
<hr> 
<p>改进方法:</p> 
<pre><code class="prism language-c"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">int</span> n<span class="token punctuation">;</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"请输入 n = "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"n = %d\n"</span><span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre> 
<ul><li> <p><font color="green">通常在输入前我们加上类似“请输入 n = ”这种代码的目的是提示用户应该输入什么内容，改善用户的使用体验。</font></p> </li><li> <p><font color="green">具体效果<br> <img src="https://images2.imgbox.com/b5/33/x306Vt8s_o.png" alt="在这里插入图片描述"></font></p> </li><li> <p><font color="green">这样改进既改进了我们的输入格式，又不至于在使用scanf时出错。</font></p> </li></ul> 
<h4><a id="_97"></a>输入多个参数</h4> 
<pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span> <span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">int</span> m<span class="token punctuation">,</span> n<span class="token punctuation">;</span>
    <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%d%d"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>m<span class="token punctuation">,</span> <span class="token operator">&amp;</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"m = %d, n = %d\n"</span><span class="token punctuation">,</span> m<span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre> 
<ul><li> <p><strong>通过键盘给多个变量赋值与给一个变量赋值其实是一样的。比如给两个变量赋值就写两个 %d，然后“输入参数”中对应写上两个 “取地址变量” ；给三个变量赋值就写三个 %d，然后“输入参数”中对应写上三个 “取地址变量” ……</strong></p> </li><li> <p><strong>从键盘输入数据时，给多个变量赋的值之间一定要用空格、回车或者 Tab 键隔开，用以区分给不同变量赋的值。而且空格、回车或 Tab 键的数量不限。一般使用一个空格即可。</strong></p> </li></ul> 
<hr> 
<h3><a id="3scanf_115"></a>3.scanf的返回值</h3> 
<ul><li><font color="green">scanf的返回值我有一篇博客有具体介绍，这里不过多缀叙，博客链接如下：<a href="https://blog.csdn.net/syf666250/article/details/130916293?spm=1001.2014.3001.5501">关于C语言中scanf多组输入的实现</a></font></li></ul> 
<hr> 
<h2><a id="getchar_118"></a>二.getchar的用法</h2> 
<h3><a id="1getchar_119"></a>1.getchar的返回类型及使用效果</h3> 
<ul><li><strong><font color="red">getchar常用来读取字符</font></strong></li><li>以下为msdn中的解释<br> <img src="https://images2.imgbox.com/3b/ff/ConxR1lA_o.png" alt="在这里插入图片描述"></li></ul> 
<pre><code class="prism language-c"><span class="token keyword">int</span> <span class="token function">getchar</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
</code></pre> 
<p>返回类型为int,参数为void.</p> 
<ul><li><code>getchar返回的其实是字符的ASCII码值（整数）。</code></li><li><code>getchar在读取结束或者失败的时候，会返回EOF(end of file,本质上是-1.)。</code></li><li>接下来通过代码简单解释一下</li></ul> 
<pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">int</span> n <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>n <span class="token operator">=</span> <span class="token function">getchar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token constant">EOF</span><span class="token punctuation">)</span><span class="token comment">//判断返回值是否是EOF</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token function">putchar</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//打印输入的n</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre> 
<p>注意:</p> 
<ul><li><strong><font color="red">使用getchar时，每次getchar只会读取一个字符</font></strong></li><li>如果上面的代码不用while循环的话，输入123，putchar就只会输出1。</li></ul> 
<hr> 
<h2><a id="_153"></a>三.几种常见错误详解</h2> 
<h3><a id="1_154"></a>1.不理解原理导致的错误</h3> 
<ul><li>下面以getchar为例具体讲解一下这种错误的产生及解决方法</li><li>代码如下：</li></ul> 
<pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">char</span> password<span class="token punctuation">[</span><span class="token number">20</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"请输入密码:"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	
	<span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%s"</span><span class="token punctuation">,</span> password<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//以字符串的形式输入</span>

	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"请确认密码(Y/N):&gt;"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//用户输入Y/N确认</span>
	<span class="token keyword">int</span> ch <span class="token operator">=</span> <span class="token function">getchar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>ch <span class="token operator">==</span> <span class="token char">'Y'</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"确认成功\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">else</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"确认失败\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre> 
<ul><li>来看看这段代码运行的结果<br> <img src="https://images2.imgbox.com/ae/9d/WPagfaPu_o.png" alt="在这里插入图片描述"></li><li>嗯？什么情况，我还没输入Y或N怎么就确认失败了？？</li></ul> 
<p><img src="https://images2.imgbox.com/9e/bc/tQHFXfuf_o.jpg" alt="在这里插入图片描述"></p> 
<hr> 
<ul><li>好了，这里我就不卖关子了。<br> <img src="https://images2.imgbox.com/39/86/x1uDJaeH_o.png" alt="在这里插入图片描述"></li><li><strong><font color="red">scanf和getchar这两个输入函数，它们都是从键盘上得到我们的数据，而不是直接从键盘上来读取我们的数据。它们和键盘之间有一个区域叫输入缓冲区。所有输入的数据都会先放在输入缓冲区中。</font></strong></li><li><mark><strong>在存放输入的数据时，输入函数先来看看输入缓冲区中是否有数据，如果有，它就直接拿走并储存，而不需要从键盘再输入数据，如果输入缓冲区中什么都没有，则需要从键盘输入，再拿走。</strong></mark></li><li>带入上面的代码试试<br> <img src="https://images2.imgbox.com/fc/5f/syjedMsE_o.png" alt="在这里插入图片描述"></li><li>当我们输入123456时，为了把“123456”放进去，其实还敲了一个回车，因此实际上输入缓冲区中存放的是“123456\n”。</li></ul> 
<p><img src="https://images2.imgbox.com/07/f8/JuJ1nQda_o.png" alt="在这里插入图片描述"></p> 
<ul><li> <p>程序继续运行，此时它把“123456”提取出来，输入缓冲区中还留有一个“\n”.<br> <img src="https://images2.imgbox.com/6d/af/tXzaydLK_o.png" alt="在这里插入图片描述"></p> </li><li> <p>注意：<br> <mark><strong>程序走到这一步后，进行第二次从键盘中读取( int ch = getchar() ),此时输入缓冲区中还滞留有上次未提前出来的“\n”，因此不再从键盘上读取数据，直接把“\n”从输入缓冲区提取出来。此时ch的地址中存放的就是“\n”,显然不等于’Y’,所以输出为“确认失败”</strong></mark></p> </li></ul> 
<hr> 
<blockquote> 
 <p><font color="green">看了上面的讲解，你弄懂了吗？接下来我们来讲讲改进方法</font></p> 
</blockquote> 
<ul><li><font color="green">其实改进很简单，它不是在输入缓冲区中还滞留有“\n”吗？我再使用一个输入函数把它给读走不就行啦？</font></li></ul> 
<pre><code class="prism language-c"><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">char</span> password<span class="token punctuation">[</span><span class="token number">20</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"请输入密码:"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%s"</span><span class="token punctuation">,</span> password<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"请确认密码(Y/N):&gt;"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">getchar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//把多余的\n取走</span>
	<span class="token keyword">int</span> ch <span class="token operator">=</span> <span class="token function">getchar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>ch <span class="token operator">==</span> <span class="token char">'Y'</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"确认成功\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">else</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"确认失败\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre> 
<p><img src="https://images2.imgbox.com/6c/a9/UzTnge1h_o.png" alt="在这里插入图片描述"></p> 
<ul><li>这种方法雀氏可行，但是如果这样呢？</li></ul> 
<blockquote> 
 <p><font color="green">请输入密码：12345 6(中间加空格)</font></p> 
</blockquote> 
<p><img src="https://images2.imgbox.com/bc/5a/A48RJfWD_o.png" alt="在这里插入图片描述"></p> 
<ul><li>？怎么又这样了？？我不是把“\n”读走了吗？</li><li>解释亿下：<br> <img src="https://images2.imgbox.com/a6/53/8UwXxFl1_o.png" alt="在这里插入图片描述"></li><li>此时输入缓冲区中是这样的。</li></ul> 
<p><img src="https://images2.imgbox.com/c7/ec/nnwaottu_o.png" alt="在这里插入图片描述"></p> 
<ul><li><strong>轮到scanf来取缓冲区中的数据，当它读到空格的时候，它就不再继续往下读了（这是scanf的一个作用性质）。</strong></li><li>所以scanf就只取走了12345，而缓冲区中还剩下(空格)6\n。<br> <img src="https://images2.imgbox.com/45/92/94mhKlqJ_o.png" alt="在这里插入图片描述"></li><li>此时，getchar()读取一个字符，它把空格给读走了，输入缓冲区中剩下6\n.<br> <img src="https://images2.imgbox.com/07/e5/E9gCNbms_o.png" alt="在这里插入图片描述"></li><li>最后，int ch = getchar()把6给读走，不等于’Y’，于是打印“确认失败”<br> <img src="https://images2.imgbox.com/7e/fe/bXDAf3I9_o.jpg" alt="在这里插入图片描述"></li></ul> 
<hr> 
<ul><li>难道没有什么办法避免这种错误吗？</li><li>什么话，没有办法我会把这种错误写出来吗？？这不是自己打自己脸吗？</li><li>解决方案<br> <strong><font color="green">介于输入缓冲区中一直存放有数据未被清理，我们需要把缓冲区中多余的数据先全部清走</font></strong>。</li><li>方式：<br> <font color="green">采用一个循环，只要没读到\n，我们就一直用getchar读。</font></li><li>代码实现如下：</li></ul> 
<pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span><span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
	<span class="token keyword">char</span> password<span class="token punctuation">[</span><span class="token number">20</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"请输入密码:"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%s"</span><span class="token punctuation">,</span> password<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">while</span> <span class="token punctuation">(</span> <span class="token function">getchar</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token char">'\n'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//把缓冲区中多余的内容全读走，直到\n停止</span>
	<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"请确认密码(Y/N):&gt;"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">int</span> ch <span class="token operator">=</span> <span class="token function">getchar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>ch <span class="token operator">==</span> <span class="token char">'Y'</span><span class="token punctuation">)</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"确认成功\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">else</span>
	<span class="token punctuation">{<!-- --></span>
		<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"确认失败\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre> 
<ul><li>结果：<br> <img src="https://images2.imgbox.com/07/68/mm5rroCk_o.png" alt="在这里插入图片描述"></li><li>完美解决</li></ul> 
<p><img src="https://images2.imgbox.com/44/69/YXLWPWkJ_o.gif" alt="在这里插入图片描述"></p> 
<hr> 
<h3><a id="2_293"></a>2.输入参数不符合输入控制符要求</h3> 
<ul><li>比如以下代码：</li></ul> 
<pre><code class="prism language-c"><span class="token macro property"><span class="token directive-hash">#</span> <span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">char</span> m<span class="token punctuation">;</span>
    <span class="token keyword">int</span> n<span class="token punctuation">;</span>
    <span class="token function">scanf</span><span class="token punctuation">(</span><span class="token string">"%c%d"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>m<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"m = %c, n = %d\n"</span><span class="token punctuation">,</span> m<span class="token punctuation">,</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre> 
<ul><li>不做过多解释，scanf中输入控制符要求你输入两个数据，结果你的输入参数只输入了一个，你觉得这可能正确吗？</li><li>但其实对于多组输入来说，不输入正确个数的数据也有一定意义，详情可以看看我的这篇博客：<a href="https://blog.csdn.net/syf666250/article/details/130916293?spm=1001.2014.3001.5501">关于C语言中scanf多组输入的实现</a></li><li>需要注意的是：</li><li><mark><strong>一但发生这种错误时，编译器可能并不会报错，但是从程序上来说它是绝对错误的，当发现异常时，一定要多多注意认真检查一下输入函数。</strong></mark></li></ul> 
<hr> 
<h2><a id="_313"></a>总结</h2> 
<ul><li> <p><font color="green"> 以上就是今天要讲的所有内容啦<br> 有任何疑问欢迎在评论区或者私信博主指出哦。</font></p> </li><li> <p><font color="green">大噶(家)下次见啦！</font></p> </li></ul> 
<blockquote> 
 <p><strong><font color="red">如果感觉有帮助的话不妨三连一下这个新人博主。你们的支持就是我更新的动力。</font></strong></p> 
</blockquote> 
<p><strong>（可莉请求你们三连支持一下博主！！！点击下方评论点赞收藏帮帮可莉吧）</strong><br> <img src="https://images2.imgbox.com/1f/ba/RRy2b5mx_o.gif" alt="在这里插入图片描述"></p> 
<h3><a id="_324"></a>参考博客</h3> 
<ul><li><a href="https://blog.csdn.net/qq_51574759/article/details/121054022?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522168652856616800180635732%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&amp;request_id=168652856616800180635732&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~top_positive~default-1-121054022-null-null.142%5Ev88%5Econtrol_2,239%5Ev2%5Einsert_chatgpt&amp;utm_term=scanf&amp;spm=1018.2226.3001.4187">C语言中scanf函数用法详解</a></li><li><a href="https://blog.csdn.net/m0_53558236/article/details/119744614?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522168652925916800213053376%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&amp;request_id=168652925916800213053376&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~all~top_positive~default-1-119744614-null-null.142%5Ev88%5Econtrol_2,239%5Ev2%5Einsert_chatgpt&amp;utm_term=getchar&amp;spm=1018.2226.3001.4187">关于getchar的用法及实例解析</a></li></ul>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/7825e3ae7c6b2021907b080f1f93800a/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Ansible 的脚本 --- playbook 剧本</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/f960488354c59590f038ec335c8687eb/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">详解4种模型压缩技术、模型蒸馏算法</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>