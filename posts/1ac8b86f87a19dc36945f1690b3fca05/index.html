<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>树莓派 安装 ubuntu 笔记 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="树莓派 安装 ubuntu 笔记" />
<meta property="og:description" content="我的树莓派 树莓派4B 2GB
ubuntu server 系统
参照文章 树莓派4B家庭服务器搭建指南 第一期：刷Ubuntu Server 20.04：这个介绍了ubuntu的安装，主要重点是在后面的通过内网穿透，为家用树莓派提供了一个 frp.v2fy.com 域名，并可通过公网访问；通过配置 ssh, 可以在互联网任何地方，使用 frp.v2fy.com 的 6000 端口进行 SSH 远程登录。
树莓派安装Ubuntu server无屏幕开机自动连接WIFI：network-config 的配置。
树莓派4b安装Ubuntu和ROS的完整爬坑记录——2021年6月25日：详细的记录了4b安装ubuntu的过程，并且中间也会提到network-config 的配置。
树莓派3B装ubuntu server后开启wifi：提到了安装ubuntu后怎么启动wifi并加入到开机启动。
Ubuntu Server 20.04.4 在树莓派上的体验之连接网络和WIFI(WLAN0)：详细解释了ubuntu在4b中连接网络的各种操作。
成功方法 主要问题 按照网上的各种教程，tf卡啊、烧录啊都很简单，对我来说困扰很大的就是开机怎么无屏幕连接上树莓派。
解决方法 背景：首先因为在公司的网络里，我登录不了我自己的路由，所以不能看出哪个是树莓派或者都不能判断是树莓派有没有开机、连接上网络等情况。
尝试的方法：我按照网上文章在烧录的盘中设置了 network-config、wpa_supplicant.conf，这两种都没有开机启动wifi。
最终方法：
连接树莓派：最后是树莓派通过网线连接笔记本电脑，然后笔记本电脑打开“以太网”的共享，然后通过网络IP地址扫描工具Advanced IP Scanner发现树莓派。 这里要吐槽下，使用 Advanced IP Scanner 的时候显示的树莓派根本没有名称，不知道是因为安装了ubuntu还是其他原因。
启动无线：发现树莓派ip后通过ssh连接，然后根据Ubuntu Server 20.04.4 在树莓派上的体验之连接网络和WIFI(WLAN0)里面的各种方法启动无线、连接无线，主要是设置 wpa_supplicant.conf 然后启动无线。 注意我这里开启无线后并没有显示ip地址，需要使用 sudo dhclient wlan0 的方法分配一个无线ip
无线连接树莓派：最后就是将连接电脑的网线拔掉，通过无线的ip连接上树莓派，这样就完成了无屏幕连接树莓派的工作。 总结 对于有过折腾电脑经验的人来说，下载、烧录都不是问题，最终这个无线连接的问题特别是在没有屏幕连接的情况下还是很烦人的，第一次连接最困难。
2023-07-27 更新 连接树莓派详细方法 连接树莓派 树莓派开机笔记本打开网咯共享，路径：控制面板\网络和 Internet\网络和共享中心=》属性=》共享》点击运行其他网络用户…并选择以太网通过网线连接笔记本和树莓派（也是因为通过网线连接所以上面这步是选择以太网）通过网络IP地址扫描工具Advanced IP Scanner扫描ip地址（网上有设置成固定ip的，但是我嫌弃设置太麻烦所以就直接扫描了，所以每次重启这个ip都会变，需要再扫描一次），我这里会显示ubuntu的字样打开xshell，填写ip、用户名、密码（ubuntu初始的用户名和密码都是ubuntu） 开启无线 安装包 sudo apt install net-tools sudo apt install wireless-tools sudo apt install network-manager 查询机器ip和无线情况 ifconfig iwconfig 查询无线" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/1ac8b86f87a19dc36945f1690b3fca05/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-07-27T17:05:31+08:00" />
<meta property="article:modified_time" content="2023-07-27T17:05:31+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">树莓派 安装 ubuntu 笔记</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atelier-sulphurpool-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="_0"></a>我的树莓派</h2> 
<p>树莓派4B 2GB<br> ubuntu server 系统</p> 
<h2><a id="_3"></a>参照文章</h2> 
<p><a href="https://bbs.shumeipan.com/topic/54" rel="nofollow">树莓派4B家庭服务器搭建指南 第一期：刷Ubuntu Server 20.04</a>：这个介绍了ubuntu的安装，主要重点是在后面的<strong>通过内网穿透，为家用树莓派提供了一个 frp.v2fy.com 域名，并可通过公网访问；通过配置 ssh, 可以在互联网任何地方，使用 frp.v2fy.com 的 6000 端口进行 SSH 远程登录</strong>。</p> 
<p><a href="https://blog.csdn.net/swq404/article/details/115552396">树莓派安装Ubuntu server无屏幕开机自动连接WIFI</a>：network-config 的配置。</p> 
<p><a href="https://zhuanlan.zhihu.com/p/383931221" rel="nofollow">树莓派4b安装Ubuntu和ROS的完整爬坑记录——2021年6月25日</a>：详细的记录了4b安装ubuntu的过程，并且中间也会提到network-config 的配置。</p> 
<p><a href="https://www.cnblogs.com/dingbj/p/rasperpi3B.html" rel="nofollow">树莓派3B装ubuntu server后开启wifi</a>：提到了安装ubuntu后怎么启动wifi并加入到开机启动。</p> 
<p><a href="https://blog.csdn.net/tanmx219/article/details/123296558">Ubuntu Server 20.04.4 在树莓派上的体验之连接网络和WIFI(WLAN0)</a>：详细解释了ubuntu在4b中连接网络的各种操作。</p> 
<h2><a id="_14"></a>成功方法</h2> 
<h3><a id="_15"></a>主要问题</h3> 
<p>按照网上的各种教程，tf卡啊、烧录啊都很简单，对我来说困扰很大的就是开机怎么无屏幕连接上树莓派。</p> 
<h3><a id="_19"></a>解决方法</h3> 
<ul><li> <p><strong>背景</strong>：首先因为在公司的网络里，我登录不了我自己的路由，所以不能看出哪个是树莓派或者都不能判断是树莓派有没有开机、连接上网络等情况。</p> </li><li> <p><strong>尝试的方法</strong>：我按照网上文章在烧录的盘中设置了 network-config、wpa_supplicant.conf，这两种都没有开机启动wifi。</p> </li><li> <p><strong>最终方法</strong>：</p> 
  <ul><li><strong>连接树莓派</strong>：最后是树莓派通过网线连接笔记本电脑，然后笔记本电脑打开“以太网”的共享，然后通过<strong>网络IP地址扫描工具Advanced IP Scanner</strong>发现树莓派。</li></ul> 
  <blockquote> 
   <p>这里要吐槽下，使用 Advanced IP Scanner 的时候显示的树莓派根本没有名称，不知道是因为安装了ubuntu还是其他原因。</p> 
  </blockquote> 
  <ul><li><strong>启动无线</strong>：发现树莓派ip后通过ssh连接，然后根据<a href="https://blog.csdn.net/tanmx219/article/details/123296558">Ubuntu Server 20.04.4 在树莓派上的体验之连接网络和WIFI(WLAN0)</a>里面的各种方法启动无线、连接无线，主要是设置 wpa_supplicant.conf 然后启动无线。</li></ul> 
  <blockquote> 
   <p>注意我这里开启无线后并没有显示ip地址，需要使用 <code>sudo dhclient wlan0 </code> 的方法分配一个无线ip</p> 
  </blockquote> 
  <ul><li><strong>无线连接树莓派</strong>：最后就是将连接电脑的网线拔掉，通过无线的ip连接上树莓派，这样就完成了无屏幕连接树莓派的工作。</li></ul> </li></ul> 
<h2><a id="_37"></a>总结</h2> 
<p>对于有过折腾电脑经验的人来说，下载、烧录都不是问题，最终这个无线连接的问题特别是在没有屏幕连接的情况下还是很烦人的，第一次连接最困难。</p> 
<h2><a id="20230727__41"></a>2023-07-27 更新</h2> 
<h3><a id="_42"></a>连接树莓派详细方法</h3> 
<h4><a id="_43"></a>连接树莓派</h4> 
<ul><li>树莓派开机</li><li>笔记本打开网咯共享，路径：控制面板\网络和 Internet\网络和共享中心=》属性=》共享》点击运行其他网络用户…并选择以太网</li><li>通过网线连接笔记本和树莓派（也是因为通过网线连接所以上面这步是选择以太网）</li><li>通过<strong>网络IP地址扫描工具Advanced IP Scanner</strong>扫描ip地址（网上有设置成固定ip的，但是我嫌弃设置太麻烦所以就直接扫描了，所以每次重启这个ip都会变，需要再扫描一次），我这里会显示ubuntu的字样</li><li>打开xshell，填写ip、用户名、密码（ubuntu初始的用户名和密码都是ubuntu）</li></ul> 
<h4><a id="_50"></a>开启无线</h4> 
<ul><li>安装包</li></ul> 
<pre><code class="prism language-bash"><span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> net-tools
<span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> wireless-tools
<span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> network-manager
</code></pre> 
<ul><li>查询机器ip和无线情况</li></ul> 
<pre><code class="prism language-bash"><span class="token function">ifconfig</span>
iwconfig
</code></pre> 
<ul><li>查询无线<br> <code>sudo nmcli dev wifi</code><br> 这里会显示目前的无线情况，包括ssid啊什么的</li><li>连接网络<br> <code>sudo nmcli dev wifi connect 'your_wifi_name' password 'your_wifi_password</code><br> 到这里无线就连上了，但是注意ip地址是否获取到，如果没有获取到就需要手动获取一下，怎么获取网上搜一下就行了，一行代码就能搞定。ip地址很重要，因为后面我们是通过这个ip连接树莓派的。</li></ul> 
<p>这就是完整的有线连接树莓派和无线连接树莓派，但是这里有个bug就是每次重启并不会自动连接无线，下面一节就会解决这个问题。</p> 
<h3><a id="_74"></a>开机启动无线的方法</h3> 
<p>前面说过了 network-config、wpa_supplicant.conf 的设置方法统统没有用，并且我把树莓派重启过几次之后也是一样，无论是设置了network-manager还是wpa-supplicant都不会开机自动连接无线，后来在chat-gpt的启发下使用了netplan的设置。<br> 其实官方已经给出了这个设置：<a href="https://netplan.readthedocs.io/en/latest/netplan-yaml/#properties-for-device-type-wifis" rel="nofollow">netplan 关于 无线的设置</a><br> 我完成这个设置后得出的结论就是：新版的ubuntu系统支持netplan，所以前面提到的几个设置都不行。</p> 
<p>最后上设置方法：</p> 
<ul><li>在文件夹 <code>/etc/netplan</code> 下新建一个文件<code> wifi.yaml</code></li><li>配置文件内容</li></ul> 
<pre><code class="prism language-yaml"><span class="token key atrule">network</span><span class="token punctuation">:</span>
    <span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token number">2</span>
    <span class="token key atrule">renderer</span><span class="token punctuation">:</span> networkd
    <span class="token key atrule">wifis</span><span class="token punctuation">:</span>
        <span class="token key atrule">wlan0</span><span class="token punctuation">:</span>
            <span class="token key atrule">dhcp4</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
            <span class="token key atrule">access-points</span><span class="token punctuation">:</span>
                <span class="token key atrule">"your_wifi_name"</span><span class="token punctuation">:</span>
                    <span class="token key atrule">password</span><span class="token punctuation">:</span> <span class="token string">"your_wifi_password"</span>

</code></pre> 
<p>这样开机就能自动连接你指定的无线，但是还存在没有自动获取ip的问题（即使我这里设置了dhcp4: true也还是没有效果），所以我们需要指定一个固定ip，<a href="https://netplan.readthedocs.io/en/latest/netplan-yaml/#default-routes" rel="nofollow">在<code> wifi.yaml</code>文件中增加routes的配置</a>。</p> 
<ul><li><code>sudo netplan apply</code> 应用配置文件</li></ul>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/2641cc329ecbcc53726e7bcc7c89a6d3/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">如何在MySQL中使用触发器？MySQL触发器详解</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/118531ccfb7a2acce5e62724b2ff07f0/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">flink sqlserver cdc实时同步（含sqlserver安装配置等）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>