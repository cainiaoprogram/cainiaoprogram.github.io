<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>VirtualBox 虚拟机下搭建SDN实验平台（安装mininet网络仿真器 &#43; OpenDayLight控制器） - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="VirtualBox 虚拟机下搭建SDN实验平台（安装mininet网络仿真器 &#43; OpenDayLight控制器）" />
<meta property="og:description" content="一、安装VirtualBox 虚拟机，并安装ubuntu
1）安装虚拟机
sudo apt-get install virtualbox-5.1 2）虚拟机安装ubuntu操作系统
参考how to install ubuntu on virtualBox?
二、ubuntu系统下搭建SDN实验平台
1）首先根据步骤一，在虚拟机上安装两个ubuntu操作系统，一个命名mininet用于安装mininet网络仿真器，一个命名OpenDayLight用于安装OpenDayLight控制器;
2）配置虚拟机配置网络链接，实现主机与虚拟机、虚拟机间的通信。
启动虚拟机选择File –&gt; preferences –&gt; Network –&gt; Host-only Networks–&gt;点击添加按钮(会出现vboxnet0) 关闭虚拟机，为虚拟机添加虚拟网卡，Setting –&gt; Network –&gt; Adapter 2 –&gt; Enable Network Adapter - Attached to: (选择Host-onlyAdapter) - Name（选择1中新建的vboxnet0).然后启动虚拟机，打开命令行，输入ifconfig，多出enp0s8 网卡配置(如图所示) 主机会虚拟出一块vboxnet0网卡，虚拟出192.168.56.*/24 网段
至此，虚拟机与主机互相通信已经实现，互相之间可以 ping 通
为虚拟机安装openssh-server，允许远程登陆 (ssh命令： ssh username@remote-host ip)
sudo apt-get install openssh-server 三、在mininet虚拟机上本地安装mininet源码，步骤如下
1、安装需要软件
sudo apt-get install git 2、获取需要Mininet源代码
git clone git://github.com/mininet/mininet 3、获取mininet源代码之后即可安装mininet
以下命令将安装Mininet VM 中的所有安装工具，包括Open vSwitch 、Wireshark抓包工具和POX，默认情况下这些将安装在用户的主目录下 mininet/util/install." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/6e80db4aa0d82991d6b8346d039c7f94/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2017-04-20T15:22:05+08:00" />
<meta property="article:modified_time" content="2017-04-20T15:22:05+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">VirtualBox 虚拟机下搭建SDN实验平台（安装mininet网络仿真器 &#43; OpenDayLight控制器）</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p><strong>一、安装VirtualBox 虚拟机，并安装ubuntu</strong></p> 
<p>1）安装虚拟机</p> 
<pre class="prettyprint"><code class=" hljs bash"><span class="hljs-built_in">sudo</span> apt-get install virtualbox-<span class="hljs-number">5.1</span></code></pre> 
<p>2）虚拟机安装ubuntu操作系统</p> 
<p>参考<a href="https://askubuntu.com/questions/142549/how-to-install-ubuntu-on-virtualbox" rel="nofollow">how to install ubuntu on virtualBox</a>?</p> 
<p><strong>二、ubuntu系统下搭建SDN实验平台</strong></p> 
<p>1）首先根据步骤一，在虚拟机上安装两个ubuntu操作系统，一个命名mininet用于安装mininet网络仿真器，一个命名OpenDayLight用于安装OpenDayLight控制器;</p> 
<p>2）配置虚拟机配置网络链接，实现主机与虚拟机、虚拟机间的通信。</p> 
<ul><li>启动虚拟机选择<strong>File –&gt; preferences –&gt; Network –&gt; Host-only Networks–&gt;点击添加按钮(会出现vboxnet0)</strong> </li><li>关闭虚拟机，为虚拟机添加虚拟网卡，<strong>Setting –&gt; Network –&gt; Adapter 2 –&gt; Enable Network Adapter - Attached to: (选择Host-onlyAdapter) - Name（选择1中新建的vboxnet0).</strong></li><li>然后启动虚拟机，打开命令行，输入ifconfig，多出enp0s8 网卡配置(如图所示)</li></ul> 
<p><img src="https://images2.imgbox.com/f4/e3/rEsi8UIN_o.png" alt="这里写图片描述" title=""></p> 
<p>主机会虚拟出一块vboxnet0网卡，虚拟出192.168.56.*/24 网段</p> 
<p><img src="https://images2.imgbox.com/d9/b3/Gt7FdBVf_o.png" alt="这里写图片描述" title=""></p> 
<p>至此，虚拟机与主机互相通信已经实现，互相之间可以 ping 通</p> 
<p><img src="https://images2.imgbox.com/8b/58/laGImXYs_o.png" alt="这里写图片描述" title=""></p> 
<p>为虚拟机安装openssh-server，允许远程登陆 (ssh命令： ssh username@remote-host ip)</p> 
<pre class="prettyprint"><code class=" hljs vbscript">sudo apt-<span class="hljs-keyword">get</span> install openssh-<span class="hljs-built_in">server</span></code></pre> 
<p><img src="https://images2.imgbox.com/41/ca/8qdaJwq9_o.png" alt="这里写图片描述" title=""></p> 
<p><strong>三、在mininet虚拟机上本地安装mininet源码，步骤如下</strong></p> 
<p>1、安装需要软件</p> 
<pre class="prettyprint"><code class=" hljs bash"><span class="hljs-built_in">sudo</span> apt-get install git</code></pre> 
<p>2、获取需要Mininet源代码</p> 
<pre class="prettyprint"><code class=" hljs php">git <span class="hljs-keyword">clone</span> git:<span class="hljs-comment">//github.com/mininet/mininet</span></code></pre> 
<p>3、获取mininet源代码之后即可安装mininet</p> 
<ul><li>以下命令将安装Mininet VM 中的所有安装工具，包括Open vSwitch 、Wireshark抓包工具和POX，默认情况下这些将安装在用户的主目录下</li></ul> 
<pre class="prettyprint"><code class=" hljs bash">mininet/util/install.sh <span class="hljs-operator">-a</span></code></pre> 
<ul><li>以下命令默认安装Mininet、user switch 和Open vSwitch:</li></ul> 
<pre class="prettyprint"><code class=" hljs cmake">mininet/util/<span class="hljs-keyword">install</span>.sh -nfv</code></pre> 
<ul><li>以下命令用可以将Mininet 安装在指定目录下，而不是默认主目录（推荐）</li></ul> 
<pre class="prettyprint"><code class=" hljs lasso">mininet/uitl/install<span class="hljs-built_in">.</span>sh <span class="hljs-attribute">-s</span> mydir <span class="hljs-attribute">-a</span>
mininet/util/install<span class="hljs-built_in">.</span>sh <span class="hljs-attribute">-s</span> mydir <span class="hljs-attribute">-nfv</span></code></pre> 
<p>4、安装成功之后，验证openvswitch-controller是否在运行，如果正在运行，应将其停止，以确保Mininet在启动时可以指定自己的控制器</p> 
<pre class="prettyprint"><code class=" hljs lasso">server openvswitch<span class="hljs-attribute">-controller</span> stop
update<span class="hljs-attribute">-rc</span><span class="hljs-built_in">.</span>d openvswitch<span class="hljs-attribute">-controller</span> disable</code></pre> 
<p>5、测试Mininet是否安装成功，测试命令如下</p> 
<pre class="prettyprint"><code class=" hljs bash"><span class="hljs-built_in">sudo</span> mn --test pingall</code></pre> 
<p><img src="https://images2.imgbox.com/5a/57/f3oFz4kL_o.png" alt="这里写图片描述" title=""></p> 
<p>至此，Mininet安装测试成功。<a href="http://blog.csdn.net/justinshane/article/details/50581797">学习mininet简单命令行</a> and <a href="https://www.ibm.com/developerworks/cn/cloud/library/1404_luojun_sdnmininet/index.html" rel="nofollow">API 详解</a></p> 
<p><strong>四、在OpenDayLight虚拟机上安装OpenDayLight控制器(<a href="http://www.brianlinkletter.com/using-the-opendaylight-sdn-controller-with-the-mininet-network-emulator/" rel="nofollow">参考博客</a>)，步骤如下：</strong></p> 
<p>1、首先安装Java环境</p> 
<ul><li>安装jdk</li></ul> 
<pre class="prettyprint"><code class=" hljs lasso">sudo apt<span class="hljs-attribute">-get</span> install openjdk<span class="hljs-subst">-</span><span class="hljs-number">8</span><span class="hljs-attribute">-jdk</span></code></pre> 
<ul><li>配置环境变量JAVA_HOME 和PATH，在/etc/environment 中加入java目录，cat 查看配置后的信息如下 <br> <img src="https://images2.imgbox.com/70/a0/deIjYNJ4_o.png" alt="这里写图片描述" title=""></li><li>用source 命令启动生效 </li></ul> 
<pre class="prettyprint"><code class=" hljs bash"> <span class="hljs-built_in">source</span> /etc/environment</code></pre> 
<p>2.安装Opendaylight</p> 
<ul><li>下载OpenDayLight，官网下载预编译版<a href="https://www.opendaylight.org/downloads" rel="nofollow">https://www.opendaylight.org/downloads</a> （推荐），也可一下载opendaylight源码自己编译（此过程比较麻烦）</li><li>解压下载的opendaylight</li></ul> 
<pre class="prettyprint"><code class=" hljs avrasm">tar -xvf distribution-karaf-*<span class="hljs-preprocessor">.tar</span><span class="hljs-preprocessor">.gz</span></code></pre> 
<ul><li>启动opendaylight</li></ul> 
<pre class="prettyprint"><code class=" hljs bash"><span class="hljs-built_in">cd</span> distribution-karaf-*
./bin/karaf</code></pre> 
<p><img src="https://images2.imgbox.com/4a/21/2jSuFeeG_o.png" alt="这里写图片描述" title=""></p> 
<ul><li>安装 OpenDaylight features</li></ul> 
<pre class="prettyprint"><code class=" hljs lasso">opendaylight<span class="hljs-attribute">-user</span>@root<span class="hljs-subst">&gt;</span> feature:install odl<span class="hljs-attribute">-restconf</span> odl<span class="hljs-attribute">-l2switch</span><span class="hljs-attribute">-switch</span> odl<span class="hljs-attribute">-mdsal</span><span class="hljs-attribute">-apidocs</span> odl<span class="hljs-attribute">-dlux</span><span class="hljs-attribute">-all</span></code></pre> 
<p><strong>五、启动mininet，并设置远程控制器，命令及效果图如下：</strong></p> 
<p>1）mininet启动自定义拓扑</p> 
<pre class="prettyprint"><code class=" hljs brainfuck"><span class="hljs-comment">sudo</span> <span class="hljs-comment">mn</span> <span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-comment">custom</span> <span class="hljs-comment">~/mininet/custom/test1</span><span class="hljs-string">.</span><span class="hljs-comment">py</span> <span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-comment">topo</span> <span class="hljs-comment">mytopo</span> <span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-comment">mac</span> 
<span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-comment">controller=remote</span><span class="hljs-string">,</span><span class="hljs-comment">ip=192</span><span class="hljs-string">.</span><span class="hljs-comment">168</span><span class="hljs-string">.</span><span class="hljs-comment">56</span><span class="hljs-string">.</span><span class="hljs-comment">102</span><span class="hljs-string">,</span><span class="hljs-comment">port=6633</span> <span class="hljs-literal">-</span><span class="hljs-literal">-</span><span class="hljs-comment">switch</span> <span class="hljs-comment">ovs</span><span class="hljs-string">,</span><span class="hljs-comment">protocols=OpenFlow13</span></code></pre> 
<p><img src="https://images2.imgbox.com/36/7f/gFMsw0gX_o.png" alt="这里写图片描述" title=""> <br> 测试连通性 <br> <img src="https://images2.imgbox.com/56/8f/dfZRNLmV_o.png" alt="" title=""> <br> 2）OpenDayLight控制器，查看网络拓扑; <br> 正在运行opendaylight虚拟机的IP是192.168.56.102,opendaylight的端口是8181 <br> 浏览器访问：<a href="http://192.168.56.102:8181/index.html" rel="nofollow">http://192.168.56.102:8181/index.html</a> <br> 用户名和密码均为admin <br> <img src="https://images2.imgbox.com/4d/4d/50IcRs9i_o.png" alt="这里写图片描述" title=""> <br> 此时输入用户名和密码会出现无法登录情况（即:unable to login） <br> <img src="https://images2.imgbox.com/85/06/q1yYXCuf_o.png" alt="这里写图片描述" title=""> <br> 此问题是因为缺乏依赖的features，执行如下命令问题即可解决</p> 
<pre class="prettyprint"><code class=" hljs lasso">opendaylight<span class="hljs-attribute">-user</span>@root<span class="hljs-subst">&gt;</span> feature:install odl<span class="hljs-attribute">-dlux</span><span class="hljs-attribute">-all</span> odl<span class="hljs-attribute">-restconf</span><span class="hljs-attribute">-all</span> odl<span class="hljs-attribute">-l2switch</span><span class="hljs-attribute">-switch</span></code></pre> 
<p><img src="https://images2.imgbox.com/1a/e2/cI3MziXF_o.png" alt="这里写图片描述" title=""></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/9f795498eb7d7a55cbf33a45080b7017/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">图像不变性特征—hu矩</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/9f82ea8793ef28c23ff79a05d2a52e2e/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">Android进阶UI之ImageView设置长度高度为wrap_content时高度根据图片比例自适应</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>