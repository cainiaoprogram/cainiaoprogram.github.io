<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>序列化与反序列化xml bin - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="序列化与反序列化xml bin" />
<meta property="og:description" content="1、XML XML（可扩展标记语言）序列化是一种将对象的数据结构转换为XML格式的过程，以便将其存储在文件中、通过网络传输或与其他系统进行数据交换。在C#中，你可以使用.NET框架提供的XmlSerializer类来执行对象到XML的序列化和XML到对象的反序列化操作。
using System; using System.IO; using System.Xml.Serialization; // 定义一个简单的类 [Serializable] public class Person { public string Name { get; set; } public int Age { get; set; } } class Program { static void Main() { // 创建一个Person对象 Person person = new Person { Name = &#34;Alice&#34;, Age = 30 }; // 序列化 XmlSerializer serializer = new XmlSerializer(typeof(Person)); using (TextWriter writer = new StreamWriter(&#34;person.xml&#34;)) { serializer.Serialize(writer, person); } Console." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/1f6370ead8d5638efd6809896255b756/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-01-03T14:53:40+08:00" />
<meta property="article:modified_time" content="2024-01-03T14:53:40+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">序列化与反序列化xml bin</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-tomorrow-night">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h3><a id="1XML_1"></a>1、XML</h3> 
<p>XML（可扩展标记语言）序列化是一种将对象的数据结构转换为XML格式的过程，以便将其存储在文件中、通过网络传输或与其他系统进行数据交换。在C#中，你可以使用.NET框架提供的XmlSerializer类来执行对象到XML的序列化和XML到对象的反序列化操作。</p> 
<pre><code class="prism language-csharp"><span class="token keyword">using</span> <span class="token namespace">System</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>IO</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Xml<span class="token punctuation">.</span>Serialization</span><span class="token punctuation">;</span>

<span class="token comment">// 定义一个简单的类</span>
<span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Serializable</span></span><span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Person</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> Name <span class="token punctuation">{<!-- --></span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> Age <span class="token punctuation">{<!-- --></span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Program</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">static</span> <span class="token return-type class-name"><span class="token keyword">void</span></span> <span class="token function">Main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{<!-- --></span>
        <span class="token comment">// 创建一个Person对象</span>
        <span class="token class-name">Person</span> person <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Person</span> <span class="token punctuation">{<!-- --></span> Name <span class="token operator">=</span> <span class="token string">"Alice"</span><span class="token punctuation">,</span> Age <span class="token operator">=</span> <span class="token number">30</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

        <span class="token comment">// 序列化</span>
        <span class="token class-name">XmlSerializer</span> serializer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">XmlSerializer</span><span class="token punctuation">(</span><span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token type-expression class-name">Person</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">using</span> <span class="token punctuation">(</span><span class="token class-name">TextWriter</span> writer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">StreamWriter</span><span class="token punctuation">(</span><span class="token string">"person.xml"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            serializer<span class="token punctuation">.</span><span class="token function">Serialize</span><span class="token punctuation">(</span>writer<span class="token punctuation">,</span> person<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"Serialization complete."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 反序列化</span>
        <span class="token class-name">Person</span> deserializedPerson<span class="token punctuation">;</span>
        <span class="token keyword">using</span> <span class="token punctuation">(</span><span class="token class-name">TextReader</span> reader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">StreamReader</span><span class="token punctuation">(</span><span class="token string">"person.xml"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">{<!-- --></span>
            deserializedPerson <span class="token operator">=</span> <span class="token punctuation">(</span>Person<span class="token punctuation">)</span>serializer<span class="token punctuation">.</span><span class="token function">Deserialize</span><span class="token punctuation">(</span>reader<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">$"Deserialized: Name=</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span><span class="token expression language-csharp">deserializedPerson<span class="token punctuation">.</span>Name</span><span class="token punctuation">}</span></span><span class="token string">, Age=</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span><span class="token expression language-csharp">deserializedPerson<span class="token punctuation">.</span>Age</span><span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>在这个示例中，我们首先定义了一个简单的Person类，然后使用XmlSerializer类来序列化和反序列化Person对象。序列化操作将Person对象的数据保存为XML文件，而反序列化操作则将XML文件的内容转换回Person对象。<br> 请注意，要在类上进行XML序列化，类需要满足一些要求，例如需要是可公开序列化的，通常可以使用[Serializable]属性来标记。在.NET中，还可以使用其他属性和注解来更详细地控制序列化的方式和结果。<br> 总之，XML序列化是一种在C#中将对象转换为XML格式的常用技术，用于数据的存储、传输和交换。</p> 
<h3><a id="2Bin_46"></a>2、Bin</h3> 
<p>使用 BinaryFormatter 类进行二进制序列化和反序列化。</p> 
<ol><li>引入命名空间： 确保在代码文件的顶部引入以下命名空间，以便可以使用 BinaryFormatter 类和相关类型。</li></ol> 
<pre><code class="prism language-csharp"><span class="token keyword">using</span> <span class="token namespace">System</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>IO</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Runtime<span class="token punctuation">.</span>Serialization</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token namespace">System<span class="token punctuation">.</span>Runtime<span class="token punctuation">.</span>Serialization<span class="token punctuation">.</span>Formatters<span class="token punctuation">.</span>Binary</span><span class="token punctuation">;</span>
<span class="token number">1</span><span class="token punctuation">.</span> 定义要序列化的类： 首先，你需要定义一个类，该类将要被序列化和反序列化。这个类需要标记为 <span class="token punctuation">[</span><span class="token attribute"><span class="token class-name">Serializable</span></span><span class="token punctuation">]</span> 特性，以指示它可以被二进制序列化。
csharpCopy code
<span class="token punctuation">[</span>Serializable<span class="token punctuation">]</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Data</span>
<span class="token punctuation">{<!-- --></span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">int</span></span> Number <span class="token punctuation">{<!-- --></span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">string</span></span> Text <span class="token punctuation">{<!-- --></span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token number">2</span><span class="token punctuation">.</span> 序列化： 在序列化时，你将对象写入到一个文件流中。
csharpCopy code
<span class="token class-name">Data</span> data <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Data</span> <span class="token punctuation">{<!-- --></span> Number <span class="token operator">=</span> <span class="token number">42</span><span class="token punctuation">,</span> Text <span class="token operator">=</span> <span class="token string">"Hello, Binary Serialization!"</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token class-name">BinaryFormatter</span> formatter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">BinaryFormatter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token punctuation">(</span><span class="token class-name">FileStream</span> fs <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">FileStream</span><span class="token punctuation">(</span><span class="token string">"data.bin"</span><span class="token punctuation">,</span> FileMode<span class="token punctuation">.</span>Create<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    formatter<span class="token punctuation">.</span><span class="token function">Serialize</span><span class="token punctuation">(</span>fs<span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token string">"Serialization complete."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>


<span class="token number">3</span><span class="token punctuation">.</span> 反序列化： 在反序列化时，你从文件流中读取二进制数据，并将其转换回对象。
csharpCopy code
<span class="token class-name">Data</span> deserializedData<span class="token punctuation">;</span>
<span class="token keyword">using</span> <span class="token punctuation">(</span><span class="token class-name">FileStream</span> fs <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">FileStream</span><span class="token punctuation">(</span><span class="token string">"data.bin"</span><span class="token punctuation">,</span> FileMode<span class="token punctuation">.</span>Open<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">{<!-- --></span>
    deserializedData <span class="token operator">=</span> <span class="token punctuation">(</span>Data<span class="token punctuation">)</span>formatter<span class="token punctuation">.</span><span class="token function">Deserialize</span><span class="token punctuation">(</span>fs<span class="token punctuation">)</span><span class="token punctuation">;</span>
    Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">$"Deserialized: Number=</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span><span class="token expression language-csharp">deserializedData<span class="token punctuation">.</span>Number</span><span class="token punctuation">}</span></span><span class="token string">, Text=</span><span class="token interpolation"><span class="token punctuation">{<!-- --></span><span class="token expression language-csharp">deserializedData<span class="token punctuation">.</span>Text</span><span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> 
<p>注意事项：<br> ● 二进制序列化会将对象的所有字段和属性存储为二进制数据。这使得数据不太容易人类可读，但效率较高。<br> ● 被序列化的类需要有一个无参数的构造函数，以便在反序列化时可以实例化对象。<br> ● 在实际应用中，可能需要对异常进行适当的处理，例如处理文件不存在或格式不正确的情况。<br> 总之，BinaryFormatter 类允许你在C#中进行二进制序列化和反序列化，从而在不同的应用程序之间存储和交换数据。然而，需要注意安全性和兼容性的问题，尤其是在跨应用程序、跨版本和跨平台的情况下。</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/136add4ad014d13d916fce76b1c8396c/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">oracle 子查询和窗口函数</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/9fc194f1ea3bf4c8f55d3e5b8a306902/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">java 的synchronized和volatile</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>