<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>cmd 顺序启动服务_springboot项目注册为windows系统服务并设置开机自启 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="cmd 顺序启动服务_springboot项目注册为windows系统服务并设置开机自启" />
<meta property="og:description" content="springboot项目注册为windows系统服务并设置开机自启
关于springboot项目的部署与SSM(框架)部署war包到Tomcat下有所不同，比较明显的是springboot打包为jar包，运行则是执行通过java -jar xxx.jar，不再需要放置在Tomcat下面运行。
关于springboot项目部署相对于之前简化了一些步骤，只需要在服务器中安装好jdk环境，然后执行java -jar xxx.jar就可以把项目跑起来，如下所示。
我们通过传统---&gt;改进版---&gt;改进版plus---&gt;最终版演变方式来一步步探讨一下。
1、方式一(传统版)
(1)
假设这是window服务器，D盘中有一个名为demo-0.0.1-SNAPSHOT.jar项目
(2)
打开cmd，运行项目。
......
下图所示：
端口：9527
/：去项目名
(3)
实际测试项目(demo-0.0.1-SNAPSHOT.jar)中的一个接口
(4)
测试访问
2、改进版
以上方式运行项目还需要手动进入cmd输入命令，相对来说比较麻烦。
下面我们可以通过一个bat脚本来实现这个功能。
(1)
脚本内容，比较简单。
(2)
执行cmd脚本
(3)
测试访问
3、 改进版plus
关于以上的两种方式不能满足开机自启动需求。
假设服务器宕机，重启启动服务还需要人工操作。
所以下面我们利用windows启动菜单添加快捷方式来完成开机自启的需求。
(1)
win&#43;R打开运行窗口，输入shell:startup
(2)
将步骤2的脚本start.cmd新建一个快捷方式，然后将快捷方式拷贝到启动项文件中。
(3)
重启电脑进行测试，自行操作。
4、 最终版
关于以上的3种方式都有一个通病：
一直显示着一个CMD窗口，而且这个窗口不能关，关了程序就停了。
继而引出了我们今天的主角：
可以将Windows上的任何一个程序注册为服务的工具--winsw
关于winsw官方发言：
WinSW is an executable binary, which can be used to wrap and manage a custom process as a Windows service.
WinSW是一个可执行的二进制文件，可用于将自定义进程包装和管理为Windows服务。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/8237fca370da4a8251f5020d2d22025b/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-11-20T01:49:11+08:00" />
<meta property="article:modified_time" content="2020-11-20T01:49:11+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">cmd 顺序启动服务_springboot项目注册为windows系统服务并设置开机自启</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <div style="font-size:16px;"> 
 <p>springboot项目注册为windows系统服务并设置开机自启</p> 
 <p>关于springboot项目的部署与SSM(框架)部署war包到Tomcat下有所不同，比较明显的是springboot打包为jar包，运行则是执行通过<strong>java -jar xxx.jar</strong>，不再需要放置在Tomcat下面运行。</p> 
 <p>关于springboot项目部署相对于之前简化了一些步骤，只需要在服务器中安装好jdk环境，然后执行java -jar xxx.jar就可以把项目跑起来，如下所示。</p> 
 <p>我们通过<strong>传统---&gt;改进版---&gt;改进版plus---&gt;最终版</strong>演变方式来一步步探讨一下。</p> 
 <p>1、方式一(传统版)</p> 
 <p>(1)</p> 
 <p>假设这是window服务器，D盘中有一个名为demo-0.0.1-SNAPSHOT.jar项目</p> 
 <div class="pgc-img"> 
  <img src="https://images2.imgbox.com/d5/79/VMMQmpaE_o.png" alt="bc761dc7270d717fa26d945b2dc6daf5.png"> 
 </div> 
 <p>(2)</p> 
 <p>打开cmd，运行项目。</p> 
 <div class="pgc-img"> 
  <img src="https://images2.imgbox.com/a2/26/RnDooeb6_o.png" alt="84748f9fbbb3d2edee20071dadb28b98.png"> 
 </div> 
 <p>......</p> 
 <p>下图所示：</p> 
 <p><strong>端口：9527</strong></p> 
 <p><strong>/：去项目名</strong></p> 
 <div class="pgc-img"> 
  <img src="https://images2.imgbox.com/e2/32/k7vXzO4x_o.png" alt="5ee90de7168ee1bd0a68a2f25edb2e86.png"> 
 </div> 
 <p>(3)</p> 
 <p>实际测试项目(demo-0.0.1-SNAPSHOT.jar)中的一个接口</p> 
 <div class="pgc-img"> 
  <img src="https://images2.imgbox.com/f4/33/UXUMYkio_o.png" alt="cbaaa536155ba6f430f95ad022d0cae2.png"> 
 </div> 
 <p>(4)</p> 
 <p>测试访问</p> 
 <div class="pgc-img"> 
  <img src="https://images2.imgbox.com/6f/71/1XDrLDOi_o.png" alt="5e249ecef030d64d2766927cee84255d.png"> 
 </div> 
 <p>2、改进版</p> 
 <p>以上方式运行项目还需要手动进入cmd输入命令，相对来说比较麻烦。</p> 
 <p>下面我们可以通过一个bat脚本来实现这个功能。</p> 
 <p>(1)</p> 
 <p>脚本内容，比较简单。</p> 
 <div class="pgc-img"> 
  <img src="https://images2.imgbox.com/58/87/8XN1DsyF_o.png" alt="bd78988a38981ed886f800f297e66dd0.png"> 
 </div> 
 <p>(2)</p> 
 <p>执行cmd脚本</p> 
 <div class="pgc-img"> 
  <img src="https://images2.imgbox.com/08/16/F2j7ndju_o.png" alt="be6de71010f357ad9f0b2bb7f32911e0.png"> 
 </div> 
 <p>(3)</p> 
 <p>测试访问</p> 
 <div class="pgc-img"> 
  <img src="https://images2.imgbox.com/48/ec/EHHGGFIg_o.png" alt="c9c24b0ef09184be1f0f843d846a9d60.png"> 
 </div> 
 <p>3、 改进版plus</p> 
 <p>关于<strong>以上的两种方式不能满足开机自启动需求</strong>。</p> 
 <p>假设服务器宕机，重启启动服务还需要人工操作。</p> 
 <p>所以下面我们利用<strong>windows启动菜单添加快捷方式</strong>来完成<strong>开机自启</strong>的需求。</p> 
 <p>(1)</p> 
 <p>win+R打开运行窗口，输入<strong>shell:startup</strong></p> 
 <div class="pgc-img"> 
  <img src="https://images2.imgbox.com/df/80/PO9i6sbS_o.png" alt="3d4af7c3322839adbab05cd040665696.png"> 
 </div> 
 <p>(2)</p> 
 <p>将步骤2的脚本start.cmd新建一个快捷方式，然后<strong>将快捷方式拷贝到启动项文件</strong>中。</p> 
 <div class="pgc-img"> 
  <img src="https://images2.imgbox.com/b2/d3/DFtstu6O_o.png" alt="9589e186dfccb388ce0e42c706bf384e.png"> 
 </div> 
 <p>(3)</p> 
 <p>重启电脑进行测试，自行操作。</p> 
 <p>4、 最终版</p> 
 <p><strong>关于以上的3种方式都有一个通病：</strong></p> 
 <p><strong>一直显示着一个CMD窗口，而且这个窗口不能关，关了程序就停了。</strong></p> 
 <p><strong>继而引出了我们今天的主角：</strong></p> 
 <p><strong>可以将Windows上的任何一个程序注册为服务的工具--winsw</strong></p> 
 <p>关于winsw官方发言：</p> 
 <p>WinSW is an executable binary, which can be used to wrap and manage a custom process as a Windows service.</p> 
 <p><strong>WinSW是一个可执行的二进制文件，可用于将自定义进程包装和管理为Windows服务。</strong></p> 
 <p>下载地址：https://github.com/kohsuke/winsw/releases</p> 
 <p>源码地址：https://github.com/kohsuke/winsw</p> 
 <p>(1)工具下载</p> 
 <p>以下两个版本：</p> 
 <p>WinSW.NET4.exe：</p> 
 <p>支持.netframework4.0的版本，如果没有4.0，请先安装.net4.0。</p> 
 <p>如下图：</p> 
 <div class="pgc-img"> 
  <img src="https://images2.imgbox.com/d4/a4/09q0WKnM_o.png" alt="ef490efce074437ea723899f4939adba.png"> 
 </div> 
 <p>这里以<strong>WinSW.NET2.exe</strong>为例。</p> 
 <div class="pgc-img"> 
  <img src="https://images2.imgbox.com/a8/46/8SrYBmXc_o.png" alt="b5f389a2a8a720bc0a33a2bede5fd5e2.png"> 
 </div> 
 <p>下载到桌面WinSW.NET2.exe</p> 
 <div class="pgc-img"> 
  <img src="https://images2.imgbox.com/3a/7d/KSsPOTUR_o.png" alt="4e20110d314461ca1b7d044404e6ebae.png"> 
 </div> 
 <p>(2)</p> 
 <p>将WinSW.NET2.exe改名成<strong>启动服务</strong>名字(便于理解、使用)。</p> 
 <p>如：<strong>将WinSW.NET2.exe改成springbootDemo.exe</strong></p> 
 <p><strong>(3)</strong></p> 
 <p>新建一个WinSW的xml配置文件</p> 
 <p>注意：</p> 
 <p><strong>XML文件要和程序名同名，所以这里名为</strong>springbootDemo.xml</p> 
 <p>(4)</p> 
 <p>将我们的springboot项目(demo-0.0.1-SNAPSHOT.jar)和springbootDemo.xml文件、springbootDemo.exe工具放置到同一个目录中。</p> 
 <div class="pgc-img"> 
  <img src="https://images2.imgbox.com/21/18/F6OwphYO_o.png" alt="8e9f9fcbf16c4240b88094b2c784a01c.png"> 
 </div> 
 <p>(5)</p> 
 <p>编写springbootDemo.xml配置文件，如下所示：</p> 
 <p><strong> springbootDemo</strong></p> 
 <p><strong> springbootDemo</strong></p> 
 <p><strong> This is springbootDemo service.</strong></p> 
 <p><strong> java</strong></p> 
 <p><strong> -jar "D:springboot-servicedemo-0.0.1-SNAPSHOT.jar"</strong></p> 
 <p><strong> Automatic</strong></p> 
 <p><strong> %BASE%log</strong></p> 
 <p><strong> rotate</strong></p> 
 <p><strong>补充：</strong></p> 
 <p><strong>实际编写中请除去以下注释！！！</strong></p> 
 <div class="pgc-img"> 
  <img src="https://images2.imgbox.com/11/03/0gDUgBYo_o.png" alt="ab48c9cbd4ad32717b52ef40b7563957.png"> 
 </div> 
 <p>补充：</p> 
 <p>下面是配置文件用到的标签的简单解释</p> 
 <p>springbootDemo</p> 
 <p>springbootDemo</p> 
 <p>This is springbootDemo service.</p> 
 <p>java</p> 
 <p>-jar "D:springboot-servicedemo-0.0.1-SNAPSHOT.jar"</p> 
 <p>Automatic</p> 
 <p>%BASE%log</p> 
 <p>rotate</p> 
 <p>(6)</p> 
 <p>打开cmd窗口，注册服务</p> 
 <p>cd springboot-service</p> 
 <p>springbootDemo.exe install</p> 
 <div class="pgc-img"> 
  <img src="https://images2.imgbox.com/93/72/RMfueQey_o.png" alt="e9b48f5bc2c39078268dba866f4638be.png"> 
 </div> 
 <p>安装成功</p> 
 <p>(7)</p> 
 <p>Win+R输入services.msc</p> 
 <div class="pgc-img"> 
  <img src="https://images2.imgbox.com/2f/0f/YunjmziR_o.png" alt="8dfd3f13367416dcd3642662c10f4049.png"> 
 </div> 
 <p>(8)</p> 
 <p>可以看到我们刚刚的springboot项目已经被注册成一个window服务了</p> 
 <div class="pgc-img"> 
  <img src="https://images2.imgbox.com/42/2c/9snSC71e_o.png" alt="e6e0cd5a87a8b5ab721514157d40a549.png"> 
 </div> 
 <p>在这里我们可以对我们的springbootDemo项目进行启动、停止、手动开启、自动开启等等管理。</p> 
 <div class="pgc-img"> 
  <img src="https://images2.imgbox.com/d7/e8/5cfMNiV5_o.png" alt="b9a24f29846e96be93b49e0d2ce30cfa.png"> 
 </div> 
 <p>测试完成。</p> 
 <p>补充：</p> 
 <p>一些常用的命令</p> 
 <p>winsw install：安装服务</p> 
 <p>winsw uninstall：卸载服务</p> 
 <p>winsw start：开启服务</p> 
 <p>winsw stop：停止服务</p> 
 <p>winsw restart：重新启动服务</p> 
 <p>winsw status：检查服务的当前状态</p> 
 <p>最后感谢大家支持。</p> 
</div>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/d089c6939e1a780530cf8c3e2327d702/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">win10 miniconda pytorch1.5安装</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/6f97682fe9953f358a36abf15f5a9cbf/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">vue @input带参数_重读 VUE 官方文档 &amp;lt;2&amp;gt;</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>