<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>【Python】字典内容写入json文件 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="【Python】字典内容写入json文件" />
<meta property="og:description" content="Python中有序字典和无序字典，一键多值字典。
Python将字典内容写入json文件。
1、无序字典 目前了解三种，在Python中直接默认的是无序字典，这种不会按照你插入的顺序排序，即使你对字典排序后，返回的也是一个list变量，而不是字典，倘若你将这个list字典后，又会变回无序字典。
例子如下：
import operator x = {&#34;label&#34;: &#34;haha&#34;, &#34;data&#34;: 234, &#34;score&#34;: 0.3} sorted_x = sorted(x.items(), key=operator.itemgetter(0)) print x print type(x) print sorted_x print type(sorted_x) print dict(sorted_x) 2、有序字典 如果我们想保持字典按照我们插入的顺序有序怎么办？可以用OrderedDict来初始化字典。
例子如下：
from collections import OrderedDict x = OrderedDict() x[&#34;label&#34;] = &#34;haha&#34; x[&#34;data&#34;] = 234 x[&#34;score&#34;] = 0.3 print x print type(x) 3、一键多值字典 如果我们想用一键多值字典怎么办，可以使用defaultdict，例子如下：
from collections import defaultdict video = defaultdict(list) video[&#34;label&#34;].append(&#34;haha&#34;) video[&#34;data&#34;].append(234) video[&#34;score&#34;].append(0.3) video[&#34;label&#34;].append(&#34;xixi&#34;) video[&#34;data&#34;].append(123) video[&#34;score&#34;].append(0.7) print video print type(video) 4、写入json 字典内容写入json时，需要用json." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/055e0e162209bd9426f57651aa7c2b95/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2018-04-28T09:36:28+08:00" />
<meta property="article:modified_time" content="2018-04-28T09:36:28+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">【Python】字典内容写入json文件</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <hr> 
<p>Python中有序字典和无序字典，一键多值字典。</p> 
<p>Python将字典内容写入json文件。</p> 
<hr> 
<h4 id="1无序字典">1、无序字典</h4> 
<p>目前了解三种，在Python中直接默认的是无序字典，这种不会按照你插入的顺序排序，即使你对字典排序后，返回的也是一个list变量，而不是字典，倘若你将这个list字典后，又会变回无序字典。</p> 
<p>例子如下：</p> 
<pre class="prettyprint"><code class=" hljs go"><span class="hljs-keyword">import</span> operator

x = {<!-- --><span class="hljs-string">"label"</span>: <span class="hljs-string">"haha"</span>, <span class="hljs-string">"data"</span>:<span class="hljs-number"> 234</span>, <span class="hljs-string">"score"</span>:<span class="hljs-number"> 0.3</span>}
sorted_x = sorted(x.items(), key=operator.itemgetter<span class="hljs-number">(0</span>))
<span class="hljs-built_in">print</span> x
<span class="hljs-built_in">print</span> <span class="hljs-keyword">type</span>(x)
<span class="hljs-built_in">print</span> sorted_x
<span class="hljs-built_in">print</span> <span class="hljs-keyword">type</span>(sorted_x)
<span class="hljs-built_in">print</span> dict(sorted_x)</code></pre> 
<p><img src="https://images2.imgbox.com/3e/fd/ngxSIznB_o.png" alt="这里写图片描述" title=""></p> 
<h4 id="2有序字典">2、有序字典</h4> 
<p>如果我们想保持字典按照我们插入的顺序有序怎么办？可以用OrderedDict来初始化字典。</p> 
<p>例子如下：</p> 
<pre class="prettyprint"><code class=" hljs haskell"><span class="hljs-title">from</span> collections <span class="hljs-import"><span class="hljs-keyword">import</span> OrderedDict</span>

<span class="hljs-title">x</span> = <span class="hljs-type">OrderedDict</span>()

<span class="hljs-title">x</span>[<span class="hljs-string">"label"</span>] = <span class="hljs-string">"haha"</span>
<span class="hljs-title">x</span>[<span class="hljs-string">"data"</span>] = <span class="hljs-number">234</span>
<span class="hljs-title">x</span>[<span class="hljs-string">"score"</span>] = <span class="hljs-number">0.3</span>

<span class="hljs-title">print</span> x
<span class="hljs-title">print</span> <span class="hljs-typedef"><span class="hljs-keyword">type</span><span class="hljs-container">(<span class="hljs-title">x</span>)</span></span>
</code></pre> 
<p><img src="https://images2.imgbox.com/eb/46/lACek1VN_o.png" alt="这里写图片描述" title=""></p> 
<h4 id="3一键多值字典">3、一键多值字典</h4> 
<p>如果我们想用一键多值字典怎么办，可以使用defaultdict，例子如下：</p> 
<pre class="prettyprint"><code class=" hljs go">from collections <span class="hljs-keyword">import</span> defaultdict


video = defaultdict(list)
video[<span class="hljs-string">"label"</span>].<span class="hljs-built_in">append</span>(<span class="hljs-string">"haha"</span>)
video[<span class="hljs-string">"data"</span>].<span class="hljs-built_in">append</span><span class="hljs-number">(234</span>)
video[<span class="hljs-string">"score"</span>].<span class="hljs-built_in">append</span><span class="hljs-number">(0.3</span>)
video[<span class="hljs-string">"label"</span>].<span class="hljs-built_in">append</span>(<span class="hljs-string">"xixi"</span>)
video[<span class="hljs-string">"data"</span>].<span class="hljs-built_in">append</span><span class="hljs-number">(123</span>)
video[<span class="hljs-string">"score"</span>].<span class="hljs-built_in">append</span><span class="hljs-number">(0.7</span>)

<span class="hljs-built_in">print</span> video
<span class="hljs-built_in">print</span> <span class="hljs-keyword">type</span>(video)</code></pre> 
<p><img src="https://images2.imgbox.com/aa/d0/rq7Zpp4i_o.png" alt="这里写图片描述" title=""></p> 
<h4 id="4写入json">4、写入json</h4> 
<p>字典内容写入json时，需要用json.dumps将字典转换为字符串，然后再写入。</p> 
<p>json也支持格式，通过参数indent可以设置缩进，如果不设置的话，则保存下来会是一行。</p> 
<p>例子：</p> 
<h5 id="41-无缩进">4.1 无缩进：</h5> 
<pre class="prettyprint"><code class=" hljs go">from collections <span class="hljs-keyword">import</span> defaultdict, OrderedDict
<span class="hljs-keyword">import</span> json

video = defaultdict(list)
video[<span class="hljs-string">"label"</span>].<span class="hljs-built_in">append</span>(<span class="hljs-string">"haha"</span>)
video[<span class="hljs-string">"data"</span>].<span class="hljs-built_in">append</span><span class="hljs-number">(234</span>)
video[<span class="hljs-string">"score"</span>].<span class="hljs-built_in">append</span><span class="hljs-number">(0.3</span>)
video[<span class="hljs-string">"label"</span>].<span class="hljs-built_in">append</span>(<span class="hljs-string">"xixi"</span>)
video[<span class="hljs-string">"data"</span>].<span class="hljs-built_in">append</span><span class="hljs-number">(123</span>)
video[<span class="hljs-string">"score"</span>].<span class="hljs-built_in">append</span><span class="hljs-number">(0.7</span>)

test_dict = {
    <span class="hljs-string">'version'</span>: <span class="hljs-string">"1.0"</span>,
    <span class="hljs-string">'results'</span>: video,
    <span class="hljs-string">'explain'</span>: {
        <span class="hljs-string">'used'</span>: True,
        <span class="hljs-string">'details'</span>: <span class="hljs-string">"this is for josn test"</span>,
  }
}

json_str = json.dumps(test_dict)
with open(<span class="hljs-string">'test_data.json'</span>, <span class="hljs-string">'w'</span>) as json_file:
    json_file.write(json_str)
</code></pre> 
<p><img src="https://images2.imgbox.com/59/4f/4j0DPclf_o.png" alt="这里写图片描述" title=""></p> 
<h5 id="42-有缩进">4.2 有缩进：</h5> 
<pre class="prettyprint"><code class=" hljs go">from collections <span class="hljs-keyword">import</span> defaultdict, OrderedDict
<span class="hljs-keyword">import</span> json

video = defaultdict(list)
video[<span class="hljs-string">"label"</span>].<span class="hljs-built_in">append</span>(<span class="hljs-string">"haha"</span>)
video[<span class="hljs-string">"data"</span>].<span class="hljs-built_in">append</span><span class="hljs-number">(234</span>)
video[<span class="hljs-string">"score"</span>].<span class="hljs-built_in">append</span><span class="hljs-number">(0.3</span>)
video[<span class="hljs-string">"label"</span>].<span class="hljs-built_in">append</span>(<span class="hljs-string">"xixi"</span>)
video[<span class="hljs-string">"data"</span>].<span class="hljs-built_in">append</span><span class="hljs-number">(123</span>)
video[<span class="hljs-string">"score"</span>].<span class="hljs-built_in">append</span><span class="hljs-number">(0.7</span>)

test_dict = {
    <span class="hljs-string">'version'</span>: <span class="hljs-string">"1.0"</span>,
    <span class="hljs-string">'results'</span>: video,
    <span class="hljs-string">'explain'</span>: {
        <span class="hljs-string">'used'</span>: True,
        <span class="hljs-string">'details'</span>: <span class="hljs-string">"this is for josn test"</span>,
  }
}

json_str = json.dumps(test_dict, indent<span class="hljs-number">=4</span>)
with open(<span class="hljs-string">'test_data.json'</span>, <span class="hljs-string">'w'</span>) as json_file:
    json_file.write(json_str)
</code></pre> 
<p><img src="https://images2.imgbox.com/6a/9b/r6eG257c_o.png" alt="这里写图片描述" title=""></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/9af238edca500b32b8f09529a5579f3f/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">关于Ubuntu14.04连接无线网的问题</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/505b8fafa0714afdc2f17b0c61fbdc23/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">JAVA中final、static、volatile在字节码文件中的表现</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>