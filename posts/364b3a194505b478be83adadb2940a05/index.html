<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>教你接入Midjourney，不用梯子也能玩 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="教你接入Midjourney，不用梯子也能玩" />
<meta property="og:description" content="1、效果 话不多说，先上最终出图效果， 我给的关键词是一只白色的猫
2、接入流程 API文档可以来这里查（可以白嫖100次midjourney出图和10次gpt4体验），我这里精简一下接入流程，方便大家快速接入
2.1、文字生图 首先是先通过文字生图，token可以去api文档中复制粘贴过来即可，请求如下：
const { data } = await axios({ url: &#39;https://api.zhishuyun.com/midjourney/imagine?token=your token&#39;, method: &#39;POST&#39;, timeout: 60000, headers: { &#39;content-type&#39;: &#39;application/json&#39; }, data: { prompt: &#39;a white cat&#39;, callback_url: `https://xxx.com/api/xxx`, }, }); prompt参数，必填，就是要输入的文字，注意必需是英文，中文是不准确的，你可以前置接入一个翻译工具把用户输入的文字变成英文，我的解决办法是前置接入了一个gpt 3.5，给的prompt是：
&#34;messages&#34;: [ { content: &#34;请将我接下来的描述翻译成英文，不要夹带其他文字，如果准备好了，请回复&#34;, role: &#34;user&#34; }, { content: &#34;If you are ready, please reply.&#34;, role: &#34;system&#34; }, { content: text, role: &#34;user&#34; }, ] callback_url参数，非必填，是一个回调地址就是当图片生成好后，会把生成结果发到这个地址，如果不填这个参数，那这个接口会一直pedding，指到图片生成结束，在把结果返给你，这个我建议是加上去不然对服务器压力很大，毕竟要pedding不少时间，我们看看他返回的结果，如下的一个json
我们只要关注几个等会需要用到的字段，分别是image_id和actions，然后我们其中image_url就是生成的图片，我们查看一下效果，效果还是很不错的
会发现是4张图合成一张图，这其实是midjourney的一种节省资源的策略，之后我们可以对这张图做两种操作，分别是变换和放大，对接也十分简单
2.2、变换 选择一张图片，变换成同等风格的其他图片，比如我们想对左下角的图片做变换，我们就新增两个参数，分别是image_id表示刚才那张四宫格的图片image_id，另一个就是action，如果传upsample4代表要变换右下角那张图，其他操作上面都可以根据上一张图返回的actions字段来，如下" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/364b3a194505b478be83adadb2940a05/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-05-20T09:28:45+08:00" />
<meta property="article:modified_time" content="2023-05-20T09:28:45+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">教你接入Midjourney，不用梯子也能玩</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <h2 id="main-toc">1、效果</h2> 
<p>话不多说，先上最终出图效果， 我给的关键词是一只白色的猫</p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/07/02/GCw7uhG5_o.png"></p> 
<h2 id="2%E3%80%81%E6%8E%A5%E5%85%A5%E6%B5%81%E7%A8%8B">2、接入流程</h2> 
<p><a class="link-info" href="https://auth.zhishuyun.com/auth/login?inviter_id=508b1385-8b8b-49a1-b9eb-c83a80967b58&amp;redirect=https://data.zhishuyun.com" rel="nofollow" title="API文档">API文档</a>可以来这里查（可以白嫖100次midjourney出图和10次gpt4体验），我这里精简一下接入流程，方便大家快速接入</p> 
<h3 id="2.1%E3%80%81%E6%96%87%E5%AD%97%E7%94%9F%E5%9B%BE">2.1、文字生图</h3> 
<p>首先是先通过文字生图，token可以去api文档中复制粘贴过来即可，请求如下：</p> 
<pre><code class="language-javascript">const { data } = await axios({
    url: 'https://api.zhishuyun.com/midjourney/imagine?token=your token',
    method: 'POST',
    timeout: 60000,
    headers: {
        'content-type': 'application/json'
    },
    data: {
        prompt: 'a white cat',
        callback_url: `https://xxx.com/api/xxx`,
    },
});</code></pre> 
<p>prompt参数，必填，就是要输入的文字，注意必需是英文，中文是不准确的，你可以前置接入一个翻译工具把用户输入的文字变成英文，我的解决办法是前置接入了一个gpt 3.5，给的prompt是：</p> 
<pre><code class="language-javascript">"messages": [
    { content: "请将我接下来的描述翻译成英文，不要夹带其他文字，如果准备好了，请回复", role: "user" },
    { content: "If you are ready, please reply.", role: "system" },
    { content: text, role: "user" },
]</code></pre> 
<p>callback_url参数，非必填，是一个回调地址就是当图片生成好后，会把生成结果发到这个地址，如果不填这个参数，那这个接口会一直pedding，指到图片生成结束，在把结果返给你，这个我建议是加上去不然对服务器压力很大，毕竟要pedding不少时间，我们看看他返回的结果，如下的一个json</p> 
<p><img alt="" height="482" src="https://images2.imgbox.com/bf/5b/0SXZA1lv_o.png" width="900"></p> 
<p> 我们只要关注几个等会需要用到的字段，分别是image_id和actions，然后我们其中image_url就是生成的图片，我们查看一下效果，效果还是很不错的</p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/3b/46/sVvUPZpA_o.png"></p> 
<p>会发现是4张图合成一张图，这其实是midjourney的一种节省资源的策略，之后我们可以对这张图做两种操作，分别是变换和放大，对接也十分简单</p> 
<h3 id="2.2%E3%80%81%E5%8F%98%E6%8D%A2">2.2、变换</h3> 
<p>选择一张图片，变换成同等风格的其他图片，比如我们想对左下角的图片做变换，我们就新增两个参数，分别是image_id表示刚才那张四宫格的图片image_id，另一个就是action，如果传upsample4代表要变换右下角那张图，其他操作上面都可以根据上一张图返回的actions字段来，如下</p> 
<pre><code class="language-javascript">const { data } = await axios({
    url: 'https://api.zhishuyun.com/midjourney/imagine?token=your token',
    method: 'POST',
    timeout: 60000,
    headers: {
        'content-type': 'application/json'
    },
    data: {
        prompt: 'a white cat',
        // 要操作的图片id
        image_id: '1109284549273333971',
        // 表示变换右下角
        action: 'upsample4',
        callback_url: `https://xxx.com/api/xxx`,
    },
});</code></pre> 
<p>然后看下变换后的效果，会发现大致风格一致对一些细节做了调整</p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/50/ef/6Jlh6Rwk_o.png"></p> 
<h3 id="2.3%E3%80%81%E6%94%BE%E5%A4%A7">2.3、放大</h3> 
<p>选择一张图片，获取他的高清大图，主要用途是对单张图片做下载操作，传参跟上面的变换一样，只要把参数action改一下就行，比如我要放大左下角那张图，就把action改成传upsample3即可</p> 
<pre><code class="language-javascript">action: "upsample3"</code></pre> 
<p>然后我们看下放大后的效果</p> 
<p class="img-center"><img alt="" src="https://images2.imgbox.com/4a/77/cQUWVVnv_o.png"></p> 
<p>如果我还想对这张做变换呢？聪明的你一定猜到了，那还是一样传这张放大图的image_id，同时action参数对应成变换的参数字符串即可，以上就是对接的内容了，我已经接入我的<a class="link-info" href="https://chat.xmzntech.com/" rel="nofollow" title="工具站">工具站</a>了，分享给大家看看效果</p> 
<p><br><img alt="" height="411" src="https://images2.imgbox.com/1d/bf/f2otfN5T_o.png" width="259"><img alt="" height="409" src="https://images2.imgbox.com/ed/50/FZdsHcSi_o.png" width="251"></p> 
<p></p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/b62147d7ccd53fdd714768bee78de72e/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">SeaweedFs使用-编写系统服务来启动weed</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/e6cdd69f1280fcae663f6289f7247489/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">requests详细参数说明</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>