<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>linux安装redis及解决无法远程连接的问题 - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="linux安装redis及解决无法远程连接的问题" />
<meta property="og:description" content="首先创建安装目录
# mkdir /usr/local/redis 下载redis压缩包
wget http://download.redis.io/releases/redis-4.0.2.tar.gz 解压redis的压缩文件
tar -zxvf redis-4.0.2.tar.gz 进入安装文件夹进行编译
[root@bruce-host redis]# cd redis-4.0.2/ [root@bruce-host redis-4.0.2]# make 编译结束后进行安装
[root@bruce-host redis-4.0.2]# cd src/ [root@bruce-host src]# make install 安装成功
启动redis服务器，使用默认配置载入
[root@bruce-host src]# ./redis-server 载入制定配置来启动redis
[root@bruce-host src]# ./redis-server /usr/local/redis/redis-4.0.2/redis.conf 出现上图说明安装成功，但是有可能会导致远程连接有问题。对于服务器上的redis配置需要进行以下配置
[root@bruce-host src]# vim ../redis.conf 把protected-mode yes改为protected-mode no（在没有密码的情况下，关闭保护模式）
注释掉bind 127.0.0.1 （取消绑定本地地址）
把daemonize no改为daemonize yes （是否为进程守护，关闭ssh窗口后即是否在后台继续运行）
然后重启,进行数据测试
[root@bruce-host src]# ./redis-server /usr/local/redis/redis-4.0.2/redis.conf [root@bruce-host src]# ./redis-cli 127.0.0.1:6379&gt; set ball red OK 127.0.0.1:6379&gt; get ball &#34;" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/2bae4e6d3d7bbe25d624197270172098/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2018-04-13T15:07:29+08:00" />
<meta property="article:modified_time" content="2018-04-13T15:07:29+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">linux安装redis及解决无法远程连接的问题</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="htmledit_views">
                    <p><strong>首先创建安装目录</strong></p> 
<pre class="has"><code># mkdir /usr/local/redis</code></pre> 
<p><strong>下载redis压缩包</strong></p> 
<pre class="has"><code>wget http://download.redis.io/releases/redis-4.0.2.tar.gz</code></pre> 
<p><strong>解压redis的压缩文件</strong></p> 
<pre class="has"><code>tar -zxvf redis-4.0.2.tar.gz</code></pre> 
<p><strong>进入安装文件夹进行编译</strong></p> 
<pre class="has"><code>[root@bruce-host redis]# cd redis-4.0.2/

[root@bruce-host redis-4.0.2]# make</code></pre> 
<p><strong>编译结束后进行安装</strong></p> 
<pre class="has"><code>[root@bruce-host redis-4.0.2]# cd src/

[root@bruce-host src]# make install</code></pre> 
<p><strong>安装成功</strong></p> 
<p><img alt="" class="has" src="https://images2.imgbox.com/0d/6d/olwG33bR_o.png"></p> 
<p><strong>启动redis服务器，使用默认配置载入</strong></p> 
<pre class="has"><code>[root@bruce-host src]# ./redis-server</code></pre> 
<p><strong>载入制定配置来启动redis</strong></p> 
<pre class="has"><code>[root@bruce-host src]# ./redis-server /usr/local/redis/redis-4.0.2/redis.conf  </code></pre> 
<p> </p> 
<p><img alt="" class="has" src="https://images2.imgbox.com/91/5c/xk40PAcp_o.png"></p> 
<p> </p> 
<p>出现上图说明安装成功，但是有可能会导致远程连接有问题。对于服务器上的redis配置需要进行以下配置</p> 
<pre class="has"><code>[root@bruce-host src]# vim ../redis.conf</code></pre> 
<p>把<strong>protected-mode yes</strong>改为<strong>protected-mode no</strong>（在没有密码的情况下，关闭保护模式）</p> 
<p>注释掉bind 127.0.0.1     （取消绑定本地地址）</p> 
<p>把<strong>daemonize no</strong>改为<strong>daemonize yes</strong>   （是否为进程守护，关闭ssh窗口后即是否在后台继续运行）</p> 
<p> </p> 
<p><strong>然后重启,进行数据测试</strong></p> 
<pre class="has"><code>[root@bruce-host src]# ./redis-server /usr/local/redis/redis-4.0.2/redis.conf

[root@bruce-host src]# ./redis-cli

127.0.0.1:6379&gt; set ball red

OK

127.0.0.1:6379&gt; get ball

"red"

127.0.0.1:6379&gt;</code></pre> 
<p> </p> 
<p>其中可能遇到的问题有</p> 
<h4><strong>1.Could not connect to Redis at 127.0.0.1:6379: Connection refused</strong></h4> 
<p>原因是：在安装好redis扩展 尝试连接redis时，客户端打不开，原因是需要先开启服务端，</p> 
<p>即需要先开启redis-server，才能进行redis-cli操作</p> 
<h4><strong>2.redis基本操作</strong></h4> 
<pre class="has"><code>./redis-server  //启动redis服务器

./redis-server /usr/local/redis/redis-4.0.2/redis.conf  //启动服务器时加载指定配置

./redis-cli -h 127.0.0.1 -p 6379  //操作端口号为6379的服务器

./redis-cli -h 127.0.0.1 -p 6379 -a root //当有密码时，开启redis的命令</code></pre> 
<h4><strong>3.如何设置redis密码</strong></h4> 
<pre class="has"><code>[root@bruce-host src]# vim ../redis.conf

把requirepass foobared的注释去掉，将foobared改为需要的密码

把protected-mode no改为protected-mode yes（在有密码的情况下，打开保护模式）</code></pre> 
<h4><strong>4.如何登录、退出redis</strong></h4> 
<pre class="has"><code>//登录

[root@bruce-host src]# ./redis-server /usr/local/redis/redis-4.0.2/redis.conf

14405:C 13 Apr 15:16:49.806 # oO0OoO0OoO0Oo Redis is starting oO0OoO0OoO0Oo

14405:C 13 Apr 15:16:49.806 # Redis version=4.0.2, bits=64, commit=00000000,  modified=0, pid=14405, just started

14405:C 13 Apr 15:16:49.806 # Configuration loaded

[root@bruce-host src]# ./redis-cli 

[root@bruce-host src]#  ps -ef | grep redis

root     13437     1  0 14:17 ?        00:00:01 ./redis-server *:6379

root     13825  8950  0 14:45 pts/2    00:00:00 grep --color=auto redis

//退出

[root@bruce-host src]# ./redis-cli shutdown

[root@bruce-host src]# ps -ef|grep redis  //查看状态

root     14379 14246  0 15:15 pts/0    00:00:00 grep --color=auto redis</code></pre> 
<h4><strong>5.有密码之后如何登录、退出redis</strong></h4> 
<pre class="has"><code>[root@bruce-host src]# ./redis-cli -h 127.0.0.1 -p 6379 -a root  //ip和端口号选填  auth必填

[root@bruce-host src]# ./redis-cli -h 127.0.0.1 -p 6379 -a root shutdown //ip和端口号选填  auth必填</code></pre> 
<h4><strong>6.linux服务器端可以连接而远程无法连接的原因</strong></h4> 
<p>首先<span style="color:#333333;"><strong># ps -ef|grep redis</strong>查看6379前面是否为*  若为127.0.0.1则被限制在本地访问</span></p> 
<p><span style="color:#333333;">在redis-conf注释掉bind 127.0.0.1     （取消绑定本地地址）</span></p> 
<p><img alt="" class="has" src="https://images2.imgbox.com/99/5d/jeYm5eps_o.png"></p> 
<p><span style="color:#333333;"><strong>若还不能访问  则开启制定端口号或者关闭防火墙，在这采用关闭防火墙，由于是centos7，防火墙进行了升级</strong></span></p> 
<pre class="has"><code>systemctl stop firewalld.service           #停止firewall

systemctl disable firewalld.service     #禁止firewall开机启动</code></pre> 
<p> 如果关闭防火前可以访问，安全起见可以只开放6379端口</p> 
<pre><code>sudo firewall-cmd --zone=public --add-port=3000/tcp --permanent
sudo firewall-cmd --reload</code></pre> 
<hr> 
<p><u><strong>如果是在阿里云服务器上的，  在默认安全组打开对应端口</strong></u></p> 
<p><a href="https://help.aliyun.com/document_detail/25471.html" rel="nofollow">https://help.aliyun.com/document_detail/25471.html</a></p> 
<p> </p> 
<p> </p> 
<p> </p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/d79c79d0a619bcece6ae56d921d4464c/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">第005篇：ArcGIS中批量删除Default.gdb中的冗余数据</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/489a1875c9a4ee7a210666e7a215febb/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">在Windows中利用socket进行一次、循环传输数据</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>