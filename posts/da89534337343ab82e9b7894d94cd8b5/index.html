<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>思科模拟器(SDN控制器使用教程二) - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="思科模拟器(SDN控制器使用教程二)" />
<meta property="og:description" content="思科模拟器(SDN控制器使用教程二) 写在前面：
笔者在2021年5月份发布了一篇关于思科模拟器SDN控制器的使用教程，得到了大家的喜欢，这是笔者更新这篇文章的动力。在以后只要是有时间笔者就会多更新一点关于这方面的文章，和大家一起学习SDN相关技术。笔者技术能力有限，可能不是特别专业，如果在文中有什么错误，希望大家能够指出，笔者也希望和大家一起进步。在过去的两年里，笔者经历了一些生活的变故，以为不会在从事网络相关行业了，可命运弄人在从校园走出后还是从事了网络相关行业更准确的说是通信相关行业(笔者目前就职于某运营商从事网络、无线、通信相关的工作)。在工作过程中接触到了SD-WAN相关技术，奈何华为目前暂不支持SDN相关的模拟设备，无法和大家分享华为相关的技术。在接下来的日子里笔者也会不断学习来储备自己的知识。目前笔者具有华为HCIP(数通方向)、软考的网络工程师、软考软件设计师、RedHat网络学院认证，在某运行商和浪潮xx公司以及本地几家科技公司从事过运维、等保测评等工作。目前准备学习网络安全方向，如果后面有朋友想在考证方面咨询，也会进行积极的回复，笔者在低谷时得到了许许多多的好心人帮助，也希望自己能够为一些想从事网络方面的朋友提供力所能及的帮助。笔者并非机构，也会不定期更新文章。关于思科的SDN模拟器也更新到此，如果有英文能力好一点的朋友能够更深入的带着大家学习。希望大家不喜勿喷。
一、实验拓扑 ​ 各个设备配置：在各个设备中，配置了一个用户，用户名和密码为：admin、admin。为了后面在Web管理中作为管理设备的凭证。
路由器配置Lo：1.1.1.1路由器配置
hostname Router username admin privilege 15 secret 5 $1$mERr$vTbHul1N28cEp8lkLqr0f/ interface Loopback0 ip address 1.1.1.1 255.255.255.255 interface GigabitEthernet0/0 ip address 10.0.0.1 255.255.255.0 duplex auto speed auto interface GigabitEthernet0/1 ip address 192.168.1.1 255.255.255.0 duplex auto speed auto interface GigabitEthernet0/2 ip address 10.0.1.1 255.255.255.0 duplex auto speed auto router ospf 1 log-adjacency-changes network 192.168.1.0 0.0.0.255 area 0 network 10.0.0.0 0.0.0.255 area 0 network 1.1.1.1 0.0.0.0 area 0 network 10." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/da89534337343ab82e9b7894d94cd8b5/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-12-25T10:36:03+08:00" />
<meta property="article:modified_time" content="2023-12-25T10:36:03+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">思科模拟器(SDN控制器使用教程二)</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-dracula">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <h2><a id="SDN_0"></a>思科模拟器(SDN控制器使用教程二)</h2> 
<blockquote> 
 <p><strong>写在前面：</strong><br> 笔者在2021年5月份发布了一篇关于思科模拟器SDN控制器的使用教程，得到了大家的喜欢，这是笔者更新这篇文章的动力。在以后只要是有时间笔者就会多更新一点关于这方面的文章，和大家一起学习SDN相关技术。笔者技术能力有限，可能不是特别专业，如果在文中有什么错误，希望大家能够指出，笔者也希望和大家一起进步。在过去的两年里，笔者经历了一些生活的变故，以为不会在从事网络相关行业了，可命运弄人在从校园走出后还是从事了网络相关行业更准确的说是通信相关行业(笔者目前就职于某运营商从事网络、无线、通信相关的工作)。在工作过程中接触到了SD-WAN相关技术，奈何华为目前暂不支持SDN相关的模拟设备，无法和大家分享华为相关的技术。在接下来的日子里笔者也会不断学习来储备自己的知识。目前笔者具有<code>华为HCIP(数通方向)</code>、<code>软考的网络工程师</code>、<code>软考软件设计师</code>、<code>RedHat网络学院认证</code>，在某运行商和浪潮xx公司以及本地几家科技公司从事过运维、等保测评等工作。目前准备学习网络安全方向，如果后面有朋友想在考证方面咨询，也会进行积极的回复，笔者在低谷时得到了许许多多的好心人帮助，也希望自己能够为一些想从事网络方面的朋友提供力所能及的帮助。笔者并非机构，也会不定期更新文章。关于思科的SDN模拟器也更新到此，如果有英文能力好一点的朋友能够更深入的带着大家学习。希望大家不喜勿喷。</p> 
</blockquote> 
<h4><a id="_5"></a>一、实验拓扑</h4> 
<p><img src="https://images2.imgbox.com/e5/f2/WHtBMsy5_o.png" alt="在这里插入图片描述"></p> 
<p>​ <strong>各个设备配置：在各个设备中，配置了一个用户，用户名和密码为：<code>admin</code>、<code>admin</code>。为了后面在Web管理中作为管理设备的凭证。</strong></p> 
<blockquote> 
 <p>路由器配置<font color="red">Lo：1.1.1.1路由器配置</font></p> 
</blockquote> 
<pre><code class="prism language-shell"><span class="token function">hostname</span> Router
username admin privilege <span class="token number">15</span> secret <span class="token number">5</span> <span class="token variable">$1</span><span class="token variable">$mERr</span><span class="token variable">$vTbHul1N28cEp8lkLqr0f</span>/
interface Loopback0
 <span class="token function">ip</span> address <span class="token number">1.1</span>.1.1 <span class="token number">255.255</span>.255.255
interface GigabitEthernet0/0
 <span class="token function">ip</span> address <span class="token number">10.0</span>.0.1 <span class="token number">255.255</span>.255.0
 duplex auto
 speed auto
interface GigabitEthernet0/1
 <span class="token function">ip</span> address <span class="token number">192.168</span>.1.1 <span class="token number">255.255</span>.255.0
 duplex auto
 speed auto
interface GigabitEthernet0/2
 <span class="token function">ip</span> address <span class="token number">10.0</span>.1.1 <span class="token number">255.255</span>.255.0
 duplex auto
 speed auto
router ospf <span class="token number">1</span>
 log-adjacency-changes
 network <span class="token number">192.168</span>.1.0 <span class="token number">0.0</span>.0.255 area <span class="token number">0</span>
 network <span class="token number">10.0</span>.0.0 <span class="token number">0.0</span>.0.255 area <span class="token number">0</span>
 network <span class="token number">1.1</span>.1.1 <span class="token number">0.0</span>.0.0 area <span class="token number">0</span>
 network <span class="token number">10.0</span>.1.0 <span class="token number">0.0</span>.0.255 area <span class="token number">0</span>
</code></pre> 
<blockquote> 
 <p>路由器配置<font color="red">Lo：3.3.3.3路由器配置</font></p> 
</blockquote> 
<pre><code class="prism language-text">hostname R1
username admin privilege 15 secret 5 $1$mERr$vTbHul1N28cEp8lkLqr0f/
interface Loopback0
 ip address 3.3.3.3 255.255.255.255
interface FastEthernet0/0
 ip address 10.0.1.2 255.255.255.0
 duplex auto
 speed auto
router ospf 1
 log-adjacency-changes
 network 10.0.1.0 0.0.0.255 area 0
 network 3.3.3.3 0.0.0.0 area 0
</code></pre> 
<blockquote> 
 <p>核心交换机配置</p> 
</blockquote> 
<pre><code class="prism language-tex">hostname Switch
username admin secret 5 $1$mERr$vTbHul1N28cEp8lkLqr0f/
interface Loopback0
 ip address 2.2.2.2 255.255.255.255
interface GigabitEthernet1/0/1
 switchport access vlan 10
 switchport mode access
interface GigabitEthernet1/0/2
 switchport access vlan 100
 switchport mode access
interface GigabitEthernet1/0/3
 switchport access vlan 200
 switchport mode access
interface Vlan10
 mac-address 0002.4a7e.d901
 ip address 192.168.1.2 255.255.255.0
interface Vlan100
 mac-address 0002.4a7e.d902
 ip address 192.168.100.1 255.255.255.0
interface Vlan200
 mac-address 0002.4a7e.d903
 ip address 172.16.0.1 255.255.255.0
router ospf 1
 log-adjacency-changes
 network 192.168.1.0 0.0.0.255 area 0
 network 0.0.0.0 255.255.255.255 area 0
 network 192.168.100.0 0.0.0.255 area 0
 network 172.16.0.0 0.0.0.255 area 0
</code></pre> 
<blockquote> 
 <p>二层交换机配置</p> 
</blockquote> 
<pre><code class="prism language-te">hostname Switch
username admin secret 5 $1$mERr$vTbHul1N28cEp8lkLqr0f/
interface FastEthernet0/24
 switchport access vlan 100
 switchport mode access
interface Vlan100
 ip address 172.16.0.2 255.255.255.0
ip default-gateway 172.16.0.1
</code></pre> 
<h4><a id="Web_101"></a>二、在Web平台中添加凭证</h4> 
<p>​ **打开Web管理界面我这里是监听了<code>58001</code>端口。这里可以参考之前的文章。**添加设备登陆凭证，用于SDN控制器管理网络设备。<br> <img src="https://images2.imgbox.com/59/50/Nb7NYyjo_o.png" alt="在这里插入图片描述"></p> 
<blockquote> 
 <p>在Web管理页面中添加登录凭证<br> <img src="https://images2.imgbox.com/0b/05/58jo3fdU_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/67/c8/VFb79lQA_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/c2/a8/BjliiqWc_o.png" alt="在这里插入图片描述"><br> <strong>添加之后的效果图：</strong><br> <img src="https://images2.imgbox.com/79/45/YOqRliDb_o.png" alt="在这里插入图片描述"></p> 
</blockquote> 
<h4><a id="_112"></a>三、添加设备</h4> 
<p>​ **添加设备通过之前添加的登陆凭证以及设备的<code>管理IP</code>地址进行设备管理。在之前，需要把设备做到全互联，在这里我用的是OSPF进行设备互联。**如果管理失败，那么检查登陆凭证与管理IP地址的路由是否可达。<br> <img src="https://images2.imgbox.com/e1/d7/qwLJEN7A_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/5b/6b/kTVyCVfq_o.png" alt="在这里插入图片描述"></p> 
<blockquote> 
 <p>添加完成之后可以查看设备的状态（如下图）</p> 
 <p><strong>在下图中，<code>Collection Status</code>有两种不同的状态：<code>Managed</code>、<code>Unsupported</code></strong>。官方也没有解释两种状态，如果是有知道的朋友可以联系。但是据我判断<code>Managed</code>状态才是正常的。<br> <img src="https://images2.imgbox.com/b7/fd/HqT5FkN5_o.png" alt="在这里插入图片描述"><br> 在上述中，对于<code>Unsupported</code>状态的设备，在设备详细页面中，可以看到对应的信息，如下图：<br> <img src="https://images2.imgbox.com/2f/6b/QBmbdWZm_o.png" alt="在这里插入图片描述"></p> 
</blockquote> 
<h6><a id="_123"></a>添加成功之后在主页就可以看到设备设备状态：<code>主机</code>、<code>网络设备</code>。</h6> 
<p><img src="https://images2.imgbox.com/88/36/beFDKRx2_o.png" alt="在这里插入图片描述"><br> <img src="https://images2.imgbox.com/b3/bf/VQjdlqdW_o.png" alt="在这里插入图片描述"></p> 
<h4><a id="Python_126"></a>四、通过Python进行简单的网络管理</h4> 
<blockquote> 
 <p>在上面对此步骤进行了铺垫，我们可以在控制器页面找到对应的API文档，API文档位于控制器页面的<code>API Docs</code>。SDN控制器提供了REST API来进行访问。这里REST API只是通过<code>REST</code>标准提供的访问方式。不需要纠结。以后笔者给大家出一个<code>REST API</code>的笔记。无外乎就是<code>get</code>、<code>post</code>、<code>delete</code>等访问方式。在下面我通过Pycharm来进行操作。大家可以自己选择python的IDE。<code>电脑必须安装Python3</code><strong>以及Python的requests库</strong>。<br> <img src="https://images2.imgbox.com/f8/19/DjcisMTY_o.png" alt="在这里插入图片描述"><br> <strong>以下是官方提供的demo：</strong></p> 
</blockquote> 
<p>​ 不管是通过API做什么操作，获取网络设备信息等，都需要登陆获取<code>token</code>，以保障访问者身份的合法性。</p> 
<pre><code class="prism language-python"><span class="token keyword">import</span> json
<span class="token keyword">import</span> requests

<span class="token keyword">def</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment">#获取Token</span>
    securityUrl <span class="token operator">=</span> <span class="token string">"http://localhost:58001/api/v1/ticket"</span>
    securityData <span class="token operator">=</span> json<span class="token punctuation">.</span>dumps<span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span><span class="token string">"username"</span><span class="token punctuation">:</span> <span class="token string">"admin"</span><span class="token punctuation">,</span> <span class="token string">"password"</span><span class="token punctuation">:</span> <span class="token string">"admin"</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    securityHeader <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token string">'Content-type'</span><span class="token punctuation">:</span> <span class="token string">'application/json'</span><span class="token punctuation">}</span>
    r <span class="token operator">=</span> requests<span class="token punctuation">.</span>post<span class="token punctuation">(</span>securityUrl<span class="token punctuation">,</span> data<span class="token operator">=</span>securityData<span class="token punctuation">,</span> headers<span class="token operator">=</span>securityHeader<span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span>text<span class="token punctuation">)</span>
<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>
    main<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<blockquote> 
 <pre><code class="prism language-python">securityUrl <span class="token operator">=</span> <span class="token string">"http://localhost:58001/api/v1/ticket"</span>
securityData <span class="token operator">=</span> json<span class="token punctuation">.</span>dumps<span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span><span class="token string">"username"</span><span class="token punctuation">:</span> <span class="token string">"admin"</span><span class="token punctuation">,</span> <span class="token string">"password"</span><span class="token punctuation">:</span> <span class="token string">"admin"</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> 
 <p><code>http://localhost:58001</code>是自己Web访问的地址，每个人怎样访问的通过这个地址调用API。在加上<code>/api/v1/ticket</code>。</p> 
 <p><code>securityData</code>是一个用户名、密码的JSON数据，通过POST请求将JSON发送到服务器。以下是访问图。</p> 
</blockquote> 
<h6><a id="_158"></a>上述代码执行结果：</h6> 
<blockquote> 
 <p><code>serviceTicket</code>:是SDN控制器返回的token，如果用户名密码提供的不正确，则不能正确返回。</p> 
</blockquote> 
<pre><code class="prism language-json"><span class="token punctuation">{<!-- --></span>
    <span class="token string-property property">"response"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
        <span class="token string-property property">"idleTimeout"</span><span class="token operator">:</span> <span class="token number">900</span><span class="token punctuation">,</span>
        <span class="token string-property property">"serviceTicket"</span><span class="token operator">:</span> <span class="token string">"NC-14-45f8c34ac99b4b8c9617-nbi"</span><span class="token punctuation">,</span>
        <span class="token string-property property">"sessionTimeout"</span><span class="token operator">:</span> <span class="token number">3600</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string-property property">"version"</span><span class="token operator">:</span> <span class="token string">"1.0"</span>
<span class="token punctuation">}</span>
</code></pre> 
<p><strong><font color="red">错误的返回结果如下：</font></strong></p> 
<pre><code class="prism language-json"><span class="token punctuation">{<!-- --></span>
    <span class="token string-property property">"response"</span><span class="token operator">:</span> <span class="token punctuation">{<!-- --></span>
        <span class="token string-property property">"detail"</span><span class="token operator">:</span> <span class="token string">"Bad credentials"</span><span class="token punctuation">,</span>
        <span class="token string-property property">"errorCode"</span><span class="token operator">:</span> <span class="token string">"TICKET_BAD_USER"</span><span class="token punctuation">,</span>
        <span class="token string-property property">"message"</span><span class="token operator">:</span> <span class="token string">"Invalid user credentials. Provide valid user credentials."</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token string-property property">"version"</span><span class="token operator">:</span> <span class="token string">"1.0"</span>
<span class="token punctuation">}</span>
</code></pre> 
<h6><a id="API_186"></a>我们通过官方提供的API来对查看网络设备信息。</h6> 
<blockquote> 
 <p>在每次操作时，我们需要在请求头中携带获取到的token。官方提供的方式如下：</p> 
 <p>在每次的请求头中添加<code>x-auth-token</code>字段。值为<code>http://localhost:58001/api/v1/ticket</code>获取到的token。</p> 
</blockquote> 
<pre><code class="prism language-py">apiAccessHeader <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
apiAccessHeader<span class="token punctuation">[</span><span class="token string">'content-type'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'application/json'</span>
apiAccessHeader<span class="token punctuation">[</span><span class="token string">'x-auth-token'</span><span class="token punctuation">]</span> <span class="token operator">=</span> token
r <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'http://localhost:58000/api/v1/network-device'</span><span class="token punctuation">,</span> headers<span class="token operator">=</span>apiAccessHeader<span class="token punctuation">)</span>
</code></pre> 
<h6><a id="API_199"></a>以下是根据API文档进行操作：</h6> 
<blockquote> 
 <p>获取主机</p> 
</blockquote> 
<pre><code class="prism language-python"><span class="token keyword">import</span> json
<span class="token keyword">import</span> requests

<span class="token keyword">def</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># 获取token</span>
    securityUrl <span class="token operator">=</span> <span class="token string">"http://localhost:58001/api/v1/ticket"</span>
    securityData <span class="token operator">=</span> json<span class="token punctuation">.</span>dumps<span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span><span class="token string">"username"</span><span class="token punctuation">:</span> <span class="token string">"admin"</span><span class="token punctuation">,</span> <span class="token string">"password"</span><span class="token punctuation">:</span> <span class="token string">"admin"</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    securityHeader <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token string">'Content-type'</span><span class="token punctuation">:</span> <span class="token string">'application/json'</span><span class="token punctuation">}</span>
    r <span class="token operator">=</span> requests<span class="token punctuation">.</span>post<span class="token punctuation">(</span>securityUrl<span class="token punctuation">,</span> data<span class="token operator">=</span>securityData<span class="token punctuation">,</span> headers<span class="token operator">=</span>securityHeader<span class="token punctuation">)</span>
    token <span class="token operator">=</span> r<span class="token punctuation">.</span>json<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token string">"response"</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">"serviceTicket"</span><span class="token punctuation">]</span>
    <span class="token comment"># 获取主机</span>
    apiAccessHeader <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
    apiAccessHeader<span class="token punctuation">[</span><span class="token string">'content-type'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'application/json'</span>
    apiAccessHeader<span class="token punctuation">[</span><span class="token string">'x-auth-token'</span><span class="token punctuation">]</span> <span class="token operator">=</span> token
    r <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'http://localhost:58001/api/v1/host'</span><span class="token punctuation">,</span> headers<span class="token operator">=</span>apiAccessHeader<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>json<span class="token punctuation">.</span>dumps<span class="token punctuation">(</span>r<span class="token punctuation">.</span>json<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> indent<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>
    main<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<p>放回结果</p> 
<pre><code class="prism language-json"><span class="token punctuation">{<!-- --></span>
  <span class="token string-property property">"response"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{<!-- --></span>
      <span class="token string-property property">"connectedAPMacAddress"</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>
      <span class="token string-property property">"connectedAPName"</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>
      <span class="token string-property property">"connectedInterfaceName"</span><span class="token operator">:</span> <span class="token string">"GigabitEthernet1/0/2"</span><span class="token punctuation">,</span>
      <span class="token string-property property">"connectedNetworkDeviceIpAddress"</span><span class="token operator">:</span> <span class="token string">"2.2.2.2"</span><span class="token punctuation">,</span>
      <span class="token string-property property">"connectedNetworkDeviceName"</span><span class="token operator">:</span> <span class="token string">"Switch"</span><span class="token punctuation">,</span>
      <span class="token string-property property">"hostIp"</span><span class="token operator">:</span> <span class="token string">"192.168.100.100"</span><span class="token punctuation">,</span>
      <span class="token string-property property">"hostMac"</span><span class="token operator">:</span> <span class="token string">"00D0.5895.E815"</span><span class="token punctuation">,</span>
      <span class="token string-property property">"hostName"</span><span class="token operator">:</span> <span class="token string">"PC0"</span><span class="token punctuation">,</span>
      <span class="token string-property property">"hostType"</span><span class="token operator">:</span> <span class="token string">"Pc"</span><span class="token punctuation">,</span>
      <span class="token string-property property">"id"</span><span class="token operator">:</span> <span class="token string">"PTT0810MH0S-uuid"</span><span class="token punctuation">,</span>
      <span class="token string-property property">"lastUpdated"</span><span class="token operator">:</span> <span class="token string">"2023-12-14 19:02:46"</span><span class="token punctuation">,</span>
      <span class="token string-property property">"pingStatus"</span><span class="token operator">:</span> <span class="token string">"SUCCESS"</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token string-property property">"version"</span><span class="token operator">:</span> <span class="token string">"1.0"</span>
<span class="token punctuation">}</span>
</code></pre> 
<blockquote> 
 <p>通过IP地址获取网络设备</p> 
</blockquote> 
<pre><code class="prism language-python"><span class="token keyword">import</span> json
<span class="token keyword">import</span> requests


<span class="token keyword">def</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># 获取token</span>
    securityUrl <span class="token operator">=</span> <span class="token string">"http://localhost:58001/api/v1/ticket"</span>
    securityData <span class="token operator">=</span> json<span class="token punctuation">.</span>dumps<span class="token punctuation">(</span><span class="token punctuation">{<!-- --></span><span class="token string">"username"</span><span class="token punctuation">:</span> <span class="token string">"admin"</span><span class="token punctuation">,</span> <span class="token string">"password"</span><span class="token punctuation">:</span> <span class="token string">"admin"</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    securityHeader <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token string">'Content-type'</span><span class="token punctuation">:</span> <span class="token string">'application/json'</span><span class="token punctuation">}</span>
    r <span class="token operator">=</span> requests<span class="token punctuation">.</span>post<span class="token punctuation">(</span>securityUrl<span class="token punctuation">,</span> data<span class="token operator">=</span>securityData<span class="token punctuation">,</span> headers<span class="token operator">=</span>securityHeader<span class="token punctuation">)</span>
    token <span class="token operator">=</span> r<span class="token punctuation">.</span>json<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token string">"response"</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">"serviceTicket"</span><span class="token punctuation">]</span>
    <span class="token comment"># 通过IP地址获取网络设备</span>
    apiAccessHeader <span class="token operator">=</span> <span class="token punctuation">{<!-- --></span><span class="token punctuation">}</span>
    apiAccessHeader<span class="token punctuation">[</span><span class="token string">'content-type'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'application/json'</span>
    apiAccessHeader<span class="token punctuation">[</span><span class="token string">'x-auth-token'</span><span class="token punctuation">]</span> <span class="token operator">=</span> token
    r <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'http://localhost:58001/api/v1/network-device/ip-address/1.1.1.1'</span><span class="token punctuation">,</span> headers<span class="token operator">=</span>apiAccessHeader<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>json<span class="token punctuation">.</span>dumps<span class="token punctuation">(</span>r<span class="token punctuation">.</span>json<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> indent<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>
    main<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> 
<p>返回结果:</p> 
<pre><code class="prism language-json"><span class="token punctuation">{<!-- --></span>
    <span class="token string-property property">"collectionStatus"</span><span class="token operator">:</span> <span class="token string">"Unsupported"</span><span class="token punctuation">,</span>
    <span class="token string-property property">"errorDescription"</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>
    <span class="token string-property property">"globalCredentialId"</span><span class="token operator">:</span> <span class="token string">"2016d592-7451-4828-80ea-dc812718334b"</span><span class="token punctuation">,</span>
    <span class="token string-property property">"id"</span><span class="token operator">:</span> <span class="token string">"FTX1524TRW4-uuid"</span><span class="token punctuation">,</span>
    <span class="token string-property property">"interfaceCount"</span><span class="token operator">:</span> <span class="token string">"5"</span><span class="token punctuation">,</span>
    <span class="token string-property property">"inventoryStatusDetail"</span><span class="token operator">:</span> <span class="token string">"Unsupported"</span><span class="token punctuation">,</span>
    <span class="token string-property property">"ipAddresses"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token string">"10.0.0.1"</span><span class="token punctuation">,</span>
        <span class="token string">"192.168.1.1"</span><span class="token punctuation">,</span>
        <span class="token string">"10.0.1.1"</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token string-property property">"lastUpdateTime"</span><span class="token operator">:</span> <span class="token string">"13"</span><span class="token punctuation">,</span>
    <span class="token string-property property">"lastUpdated"</span><span class="token operator">:</span> <span class="token string">"2023-12-14 19:06:46"</span><span class="token punctuation">,</span>
    <span class="token string-property property">"macAddress"</span><span class="token operator">:</span> <span class="token string">"00E0.B0BA.ED72"</span><span class="token punctuation">,</span>
    <span class="token string-property property">"managementIpAddress"</span><span class="token operator">:</span> <span class="token string">"1.1.1.1"</span><span class="token punctuation">,</span>
    <span class="token string-property property">"platformId"</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>
    <span class="token string-property property">"productId"</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>
    <span class="token string-property property">"reachabilityFailureReason"</span><span class="token operator">:</span> <span class="token string">"NOT_VALIDATED"</span><span class="token punctuation">,</span>
    <span class="token string-property property">"reachabilityStatus"</span><span class="token operator">:</span> <span class="token string">"Reachable"</span><span class="token punctuation">,</span>
    <span class="token string-property property">"serialNumber"</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>
    <span class="token string-property property">"type"</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">,</span>
    <span class="token string-property property">"upTime"</span><span class="token operator">:</span> <span class="token string">""</span>
<span class="token punctuation">}</span>
</code></pre>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/0e1961f3a3901e11ba7a5a00b6d93288/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">dataloader读取batchsize显示出错</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/67c4e25c9b0a34914c19c88fbec24d7d/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">新版IDEA中Git的使用（三）</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>