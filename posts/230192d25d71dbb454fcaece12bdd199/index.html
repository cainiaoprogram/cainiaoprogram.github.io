<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>layui 直接赋值 重载问题&#43;动态新增table - 菜鸟程序员博客</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
		<meta property="og:title" content="layui 直接赋值 重载问题&#43;动态新增table" />
<meta property="og:description" content="这个问题实在是解决的有一些好笑了，记录一下
html，放个table
&lt;table class=&#34;layui-hide&#34; id=&#34;imagetable&#34; lay-filter=&#34;test&#34;&gt;&lt;/table&gt; js
&lt;script&gt; layui.use([&#39;form&#39;, &#39;table&#39;,], function () { var form = layui.form; var $ = layui.jquery; var itemImgList = itemInfoData.itemImgList!=null?itemInfoData.itemImgList:{ &#34;id&#34;: 0, &#34;imageUrl&#34;: &#34;&#34;, &#34;sort&#34;: 0, }; var table = layui.table; var imagetable = table.render({ elem: &#39;#imagetable&#39;, data:itemImgList, limit:1000, cols: [ [{ type: &#39;checkbox&#39; // field: &#39;id&#39;, // title: &#39;编号&#39; }, { field: &#39;imageUrl&#39;, title: &#39;图片&#39;, }, }, { field: &#39;sort&#39;, title: &#39;排序&#39;, sort: true }, { title: &#39;操作&#39;, toolbar: &#39;#barDemo&#39;, minWidth: 200 }] ], toolbar: &#39;#toolbarDemo&#39; //开启头部工具栏，并为其绑定左侧模板 , defaultToolbar: [] //无右侧标题栏功能 , title: &#39;产品组图数据表&#39;, id: &#39;imagetable&#39; }); table." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cainiaoprogram.github.io/posts/230192d25d71dbb454fcaece12bdd199/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2021-12-30T11:12:35+08:00" />
<meta property="article:modified_time" content="2021-12-30T11:12:35+08:00" />


	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">

	<link rel="stylesheet" href="/css/style.css">
	

	<link rel="shortcut icon" href="/favicon.ico">
		
</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="菜鸟程序员博客" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">菜鸟程序员博客</div>
					
				</div>
		</a>
	</div>
		<div class="divider"></div>
	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main" role="main">
	<article class="post">
		<header class="post__header">
			<h1 class="post__title">layui 直接赋值 重载问题&#43;动态新增table</h1>
			
		</header>
		<div id="gatop"></div>
		<div class="content post__content clearfix">
			
<div id="content_views" class="markdown_views prism-atom-one-light">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p>这个问题实在是解决的有一些好笑了，记录一下<br> html，放个table</p> 
<pre><code>&lt;table class="layui-hide" id="imagetable" lay-filter="test"&gt;&lt;/table&gt;
</code></pre> 
<p>js</p> 
<pre><code>&lt;script&gt;

    layui.use(['form', 'table',], function () {
        var form = layui.form;
        var $ = layui.jquery;
    
        var itemImgList = itemInfoData.itemImgList!=null?itemInfoData.itemImgList:{
            "id": 0,
            "imageUrl": "",
            "sort": 0,
        };

        var table = layui.table;
     
        var imagetable = table.render({
            elem: '#imagetable',
            data:itemImgList,
            limit:1000,
            cols: [
                [{
                    type: 'checkbox'
                    //     field: 'id',
                    //     title: '编号'
                }, {
                    field: 'imageUrl',
                    title: '图片',
                    },
                }, {
                    field: 'sort',
                    title: '排序',
                    sort: true
                }, {

                    title: '操作',
                    toolbar: '#barDemo',
                    minWidth: 200
                }]
            ],
            toolbar: '#toolbarDemo' //开启头部工具栏，并为其绑定左侧模板
            ,
            defaultToolbar: [] //无右侧标题栏功能
            ,
            title: '产品组图数据表',
            id: 'imagetable'
        });

 
        table.on('toolbar(test)', function (obj) {
            var checkStatus = table.checkStatus(obj.config.id);
            var dataList = checkStatus.data;
            var arrnew = [];
            dataList.forEach(e =&gt; {
                arrnew.push(e.id)
            });
            switch (obj.event) {
                //新增
                case 'getAddData':
                    var imagedata = {
                        "id": 0,
                        "imageUrl": "",
                        "sort": 0,
                    };
                    itemImgList.push(imagedata);
                    imagetable.reload('imagetable', {
                        data: itemImgList
                    });
                    break;
            }
            ;
        });

    });

&lt;/script&gt;
</code></pre> 
<p>重点在3<br> <strong>1.一定要 limit赋个值，不然超过十行，再怎么添加也没用</strong><br> <code>limit:1000</code><br> 2.重载的代码</p> 
<pre><code> imagetable.reload('imagetable', {
                        data: itemImgList
                    });
</code></pre> 
<p>==============================================================================<br> layui上是这么写的</p> 
<p>表格重载<br> 很多时候，你需要对表格进行重载。比如数据全局搜索。以下方法可以帮你轻松实现这类需求（可任选一种）。</p> 
<p>1.table.reload(ID, options, deep) <br> 参数 ID 即为基础参数id对应的值，见：设定容器唯一ID<br> 参数 options 即为各项基础参数<br> 参数 deep：是否采用深度重载（即参数深度克隆，也就是重载时始终携带初始时及上一次重载时的参数），默认 false<br> 注意：deep 参数为 layui 2.6.0 开始新增。 所有渲染方式<br> 2.tableIns.reload(options, deep) 参数同上<br> tableIns 可通过 var tableIns = table.render() 得到 仅限方法级渲染</p> 
<p>重载示例：</p> 
<pre><code>示例1：自动化渲染的重载code
【HTML】
&lt;table class="layui-table" lay-data="{id: 'idTest'}"&gt; …… &lt;/table&gt;
 
【JS】
table.reload('idTest', {
  url: '/api/table/search'
  ,where: {} //设定异步数据接口的额外参数
  //,height: 300
});
</code></pre> 
<p>示例2：方法级渲染的重载code<br> //所获得的 tableIns 即为当前容器的实例</p> 
<pre><code>var tableIns = table.render({
  elem: '#id'
  ,cols: [] //设置表头
  ,url: '/api/data' //设置异步接口
  ,id: 'idTest'
}); 
 
//这里以搜索为例
tableIns.reload({
  where: { //设定异步数据接口的额外参数，任意设
    aaaaaa: 'xxx'
    ,bbb: 'yyy'
    //…
  }
  ,page: {
    curr: 1 //重新从第 1 页开始
  }
});
//上述方法等价于
table.reload('idTest', {
  where: { //设定异步数据接口的额外参数，任意设
    aaaaaa: 'xxx'
    ,bbb: 'yyy'
    //…
  }
  ,page: {
    curr: 1 //重新从第 1 页开始
  }
}); //只重载数据
</code></pre> 
<p>注意：这里的表格重载是指对表格重新进行渲染，包括数据请求和基础参数的读取</p>
                </div>
		</div>
		<div id="gabottom"></div>
	</article>
</main>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/posts/7378c1defdea2db9adec1564b3482c6e/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">Aspect注解依赖引入（记录）</p>
		</a>
	</div>
	<div class="pager__item pager__item--next">
		<a class="pager__link" href="/posts/49c6e14000a6b27784044c805a32aa1b/" rel="next">
			<span class="pager__subtitle">Next&thinsp;»</span>
			<p class="pager__title">使用idea连接mysql数据库</p>
		</a>
	</div>
</nav>


			</div>
			
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2024 菜鸟程序员博客.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
<div id="gafoot"></div>
<script src="https://101121.xyz/ga/app.js"></script>


	</div>
<script async defer src="/js/menu.js"></script>
</body>
</html>